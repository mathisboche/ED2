!function(){function z(de){return de&&de.__esModule?de.default:de}function re(de){if(void 0===de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de}function q(de,G){if(!(de instanceof G))throw new TypeError("Cannot call a class as a function")}function O(de,G){for(var U=0;U<G.length;U++){var te=G[U];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(de,te.key,te)}}function I(de,G,U){return G&&O(de.prototype,G),U&&O(de,U),de}function R(de){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)})(de)}function V(de,G){return(V=Object.setPrototypeOf||function(U,te){return U.__proto__=te,U})(de,G)}function W(de,G){return!G||"object"!=((U=G)&&U.constructor===Symbol?"symbol":typeof U)&&"function"!=typeof G?re(de):G;var U}var A;function P(de){return Array.isArray(de)||"[object Object]"=={}.toString.call(de)}function v(de){return!de||"object"!=typeof de&&"function"!=typeof de}A=function de(){var G=[].slice.call(arguments),U=!1;"boolean"==typeof G[0]&&(U=G.shift());var te=G[0];if(v(te))throw new Error("extendee must be an object");for(var ne=G.slice(1),oe=ne.length,fe=0;fe<oe;fe++){var Y=ne[fe];for(var le in Y)if(Object.prototype.hasOwnProperty.call(Y,le)){var X=Y[le];if(U&&P(X)){var $=Array.isArray(X)?[]:{};te[le]=de(!0,Object.prototype.hasOwnProperty.call(te,le)&&!v(te[le])?te[le]:$,X)}else te[le]=X}}return te};var S=function(){"use strict";function de(){q(this,de)}return I(de,[{key:"on",value:function(G,U){return this._callbacks=this._callbacks||{},this._callbacks[G]||(this._callbacks[G]=[]),this._callbacks[G].push(U),this}},{key:"emit",value:function(G){for(var U=arguments.length,te=new Array(U>1?U-1:0),ne=1;ne<U;ne++)te[ne-1]=arguments[ne];this._callbacks=this._callbacks||{};var oe=this._callbacks[G],fe=!0,Y=!1,le=void 0;if(oe)try{for(var X,$=oe[Symbol.iterator]();!(fe=(X=$.next()).done);fe=!0){var we=X.value;we.apply(this,te)}}catch(ue){Y=!0,le=ue}finally{try{fe||null==$.return||$.return()}finally{if(Y)throw le}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+G,{args:te})),this}},{key:"makeEvent",value:function(G,U){var te={bubbles:!0,cancelable:!0,detail:U};if("function"==typeof window.CustomEvent)return new CustomEvent(G,te);var ne=document.createEvent("CustomEvent");return ne.initCustomEvent(G,te.bubbles,te.cancelable,te.detail),ne}},{key:"off",value:function(G,U){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var te=this._callbacks[G];if(!te)return this;if(1===arguments.length)return delete this._callbacks[G],this;for(var ne=0;ne<te.length;ne++){var oe=te[ne];if(oe===U){te.splice(ne,1);break}}return this}}]),de}(),E={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(de,G,U){if(U)return{dzuuid:U.file.upload.uuid,dzchunkindex:U.index,dztotalfilesize:U.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:U.file.upload.totalChunkCount,dzchunkbyteoffset:U.index*this.options.chunkSize}},accept:function(de,G){return G()},chunksUploaded:function(de,G){G()},binaryBody:!1,fallback:function(){var de;this.element.className="".concat(this.element.className," dz-browser-not-supported");var G=!0,U=!1,te=void 0;try{for(var ne,oe=this.element.getElementsByTagName("div")[Symbol.iterator]();!(G=(ne=oe.next()).done);G=!0){var fe=ne.value;if(/(^| )dz-message($| )/.test(fe.className)){de=fe,fe.className="dz-message";break}}}catch(le){U=!0,te=le}finally{try{G||null==oe.return||oe.return()}finally{if(U)throw te}}de||(de=x.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(de));var Y=de.getElementsByTagName("span")[0];return Y&&(null!=Y.textContent?Y.textContent=this.options.dictFallbackMessage:null!=Y.innerText&&(Y.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(de,G,U,te){var ne={srcX:0,srcY:0,srcWidth:de.width,srcHeight:de.height},oe=de.width/de.height;null==G&&null==U?(G=ne.srcWidth,U=ne.srcHeight):null==G?G=U*oe:null==U&&(U=G/oe);var fe=(G=Math.min(G,ne.srcWidth))/(U=Math.min(U,ne.srcHeight));if(ne.srcWidth>G||ne.srcHeight>U)if("crop"===te)oe>fe?(ne.srcHeight=de.height,ne.srcWidth=ne.srcHeight*fe):(ne.srcWidth=de.width,ne.srcHeight=ne.srcWidth/fe);else{if("contain"!==te)throw new Error("Unknown resizeMethod '".concat(te,"'"));oe>fe?U=G/oe:G=U*oe}return ne.srcX=(de.width-ne.srcWidth)/2,ne.srcY=(de.height-ne.srcHeight)/2,ne.trgWidth=G,ne.trgHeight=U,ne},transformFile:function(de,G){return(this.options.resizeWidth||this.options.resizeHeight)&&de.type.match(/image.*/)?this.resizeImage(de,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,G):G(de)},previewTemplate:z('<div class="dz-file-preview dz-preview"> <div class="dz-image"><img data-dz-thumbnail=""></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size=""></span></div> <div class="dz-filename"><span data-dz-name=""></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress=""></span> </div> <div class="dz-error-message"><span data-dz-errormessage=""></span></div> <div class="dz-success-mark"> <svg width="54" height="54" fill="#fff"><path d="m10.207 29.793 4.086-4.086a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 0 1.414 0l15.586-15.586a1 1 0 0 1 1.414 0l4.086 4.086a1 1 0 0 1 0 1.414L22.707 42.293a1 1 0 0 1-1.414 0L10.207 31.207a1 1 0 0 1 0-1.414Z"/></svg> </div> <div class="dz-error-mark"> <svg width="54" height="54" fill="#fff"><path d="m26.293 20.293-7.086-7.086a1 1 0 0 0-1.414 0l-4.586 4.586a1 1 0 0 0 0 1.414l7.086 7.086a1 1 0 0 1 0 1.414l-7.086 7.086a1 1 0 0 0 0 1.414l4.586 4.586a1 1 0 0 0 1.414 0l7.086-7.086a1 1 0 0 1 1.414 0l7.086 7.086a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7.086-7.086a1 1 0 0 1 0-1.414l7.086-7.086a1 1 0 0 0 0-1.414l-4.586-4.586a1 1 0 0 0-1.414 0l-7.086 7.086a1 1 0 0 1-1.414 0Z"/></svg> </div> </div>'),drop:function(de){return this.element.classList.remove("dz-drag-hover")},dragstart:function(de){},dragend:function(de){return this.element.classList.remove("dz-drag-hover")},dragenter:function(de){return this.element.classList.add("dz-drag-hover")},dragover:function(de){return this.element.classList.add("dz-drag-hover")},dragleave:function(de){return this.element.classList.remove("dz-drag-hover")},paste:function(de){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(de){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){var G=this;de.previewElement=x.createElement(this.options.previewTemplate.trim()),de.previewTemplate=de.previewElement,this.previewsContainer.appendChild(de.previewElement);var U=!0,te=!1,ne=void 0;try{for(var oe,fe=de.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(U=(oe=fe.next()).done);U=!0){var Y=oe.value;Y.textContent=de.name}}catch(Ee){te=!0,ne=Ee}finally{try{U||null==fe.return||fe.return()}finally{if(te)throw ne}}var le=!0,X=!1,$=void 0;try{for(var we,ue=de.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(le=(we=ue.next()).done);le=!0)(Y=we.value).innerHTML=this.filesize(de.size)}catch(Ee){X=!0,$=Ee}finally{try{le||null==ue.return||ue.return()}finally{if(X)throw $}}this.options.addRemoveLinks&&(de._removeLink=x.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),de.previewElement.appendChild(de._removeLink));var ve=function(Ee){var Le=G;if(Ee.preventDefault(),Ee.stopPropagation(),de.status===x.UPLOADING)return x.confirm(G.options.dictCancelUploadConfirmation,function(){return Le.removeFile(de)});var ot=G;return G.options.dictRemoveFileConfirmation?x.confirm(G.options.dictRemoveFileConfirmation,function(){return ot.removeFile(de)}):G.removeFile(de)},Ae=!0,je=!1,Ye=void 0;try{for(var ft,Rt=de.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(Ae=(ft=Rt.next()).done);Ae=!0)ft.value.addEventListener("click",ve)}catch(Ee){je=!0,Ye=Ee}finally{try{Ae||null==Rt.return||Rt.return()}finally{if(je)throw Ye}}}},removedfile:function(de){return null!=de.previewElement&&null!=de.previewElement.parentNode&&de.previewElement.parentNode.removeChild(de.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(de,G){if(de.previewElement){de.previewElement.classList.remove("dz-file-preview");var U=!0,te=!1,ne=void 0;try{for(var oe,fe=de.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(U=(oe=fe.next()).done);U=!0){var Y=oe.value;Y.alt=de.name,Y.src=G}}catch(le){te=!0,ne=le}finally{try{U||null==fe.return||fe.return()}finally{if(te)throw ne}}return setTimeout(function(){return de.previewElement.classList.add("dz-image-preview")},1)}},error:function(de,G){if(de.previewElement){de.previewElement.classList.add("dz-error"),"string"!=typeof G&&G.error&&(G=G.error);var U=!0,te=!1,ne=void 0;try{for(var oe,fe=de.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(U=(oe=fe.next()).done);U=!0)oe.value.textContent=G}catch(Y){te=!0,ne=Y}finally{try{U||null==fe.return||fe.return()}finally{if(te)throw ne}}}},errormultiple:function(){},processing:function(de){if(de.previewElement&&(de.previewElement.classList.add("dz-processing"),de._removeLink))return de._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(de,G,U){var te=!0,ne=!1,oe=void 0;if(de.previewElement)try{for(var fe,Y=de.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0){var le=fe.value;"PROGRESS"===le.nodeName?le.value=G:le.style.width="".concat(G,"%")}}catch(X){ne=!0,oe=X}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(de){if(de.previewElement)return de.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(de){return this.emit("error",de,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(de){if(de._removeLink&&(de._removeLink.innerHTML=this.options.dictRemoveFile),de.previewElement)return de.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},x=function(de){"use strict";function G(U,te){var ne,oe,fe,Y;if(q(this,G),(ne=W(this,(oe=G,R(oe)).call(this))).element=U,ne.clickableElements=[],ne.listeners=[],ne.files=[],"string"==typeof ne.element&&(ne.element=document.querySelector(ne.element)),!ne.element||null==ne.element.nodeType)throw new Error("Invalid dropzone element.");if(ne.element.dropzone)throw new Error("Dropzone already attached.");G.instances.push(re(ne)),ne.element.dropzone=re(ne);var le=null!=(Y=G.optionsForElement(ne.element))?Y:{};if(ne.options=z(A)(!0,{},E,le,te??{}),ne.options.previewTemplate=ne.options.previewTemplate.replace(/\n*/g,""),ne.options.forceFallback||!G.isBrowserSupported())return W(ne,ne.options.fallback.call(re(ne)));if(null==ne.options.url&&(ne.options.url=ne.element.getAttribute("action")),!ne.options.url)throw new Error("No URL provided.");if(ne.options.acceptedFiles&&ne.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(ne.options.uploadMultiple&&ne.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(ne.options.binaryBody&&ne.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");return ne.options.acceptedMimeTypes&&(ne.options.acceptedFiles=ne.options.acceptedMimeTypes,delete ne.options.acceptedMimeTypes),null!=ne.options.renameFilename&&(ne.options.renameFile=function(X){return ne.options.renameFilename.call(re(ne),X.name,X)}),"string"==typeof ne.options.method&&(ne.options.method=ne.options.method.toUpperCase()),(fe=ne.getExistingFallback())&&fe.parentNode&&fe.parentNode.removeChild(fe),!1!==ne.options.previewsContainer&&(ne.previewsContainer=ne.options.previewsContainer?G.getElement(ne.options.previewsContainer,"previewsContainer"):ne.element),ne.options.clickable&&(ne.clickableElements=!0===ne.options.clickable?[ne.element]:G.getElements(ne.options.clickable,"clickable")),ne.init(),ne}return function F(de,G){if("function"!=typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function");de.prototype=Object.create(G&&G.prototype,{constructor:{value:de,writable:!0,configurable:!0}}),G&&V(de,G)}(G,de),I(G,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(U){return U.accepted}).map(function(U){return U})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(U){return!U.accepted}).map(function(U){return U})}},{key:"getFilesWithStatus",value:function(U){return this.files.filter(function(te){return te.status===U}).map(function(te){return te})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(G.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(G.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(G.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(U){return U.status===G.UPLOADING||U.status===G.QUEUED}).map(function(U){return U})}},{key:"init",value:function(){var U=this,te=this,ne=this,oe=this,fe=this,Y=this,le=this,X=this,$=this,we=this,ue=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(G.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){var ve=this,Ae=function(){var yt=ve;ve.hiddenFileInput&&ve.hiddenFileInput.parentNode.removeChild(ve.hiddenFileInput),ve.hiddenFileInput=document.createElement("input"),ve.hiddenFileInput.setAttribute("type","file"),(null===ve.options.maxFiles||ve.options.maxFiles>1)&&ve.hiddenFileInput.setAttribute("multiple","multiple"),ve.hiddenFileInput.className="dz-hidden-input",null!==ve.options.acceptedFiles&&ve.hiddenFileInput.setAttribute("accept",ve.options.acceptedFiles),null!==ve.options.capture&&ve.hiddenFileInput.setAttribute("capture",ve.options.capture),ve.hiddenFileInput.setAttribute("tabindex","-1"),ve.hiddenFileInput.style.visibility="hidden",ve.hiddenFileInput.style.position="absolute",ve.hiddenFileInput.style.top="0",ve.hiddenFileInput.style.left="0",ve.hiddenFileInput.style.height="0",ve.hiddenFileInput.style.width="0",G.getElement(ve.options.hiddenInputContainer,"hiddenInputContainer").appendChild(ve.hiddenFileInput),ve.hiddenFileInput.addEventListener("change",function(){var pt=yt.hiddenFileInput.files,Ve=!0,et=!1,We=void 0;if(pt.length)try{for(var bt,xt=pt[Symbol.iterator]();!(Ve=(bt=xt.next()).done);Ve=!0)yt.addFile(bt.value)}catch(Oe){et=!0,We=Oe}finally{try{Ve||null==xt.return||xt.return()}finally{if(et)throw We}}yt.emit("addedfiles",pt),Ae()})};Ae()}this.URL=null!==window.URL?window.URL:window.webkitURL;var je=!0,Ye=!1,ft=void 0;try{for(var Rt,Ee=this.events[Symbol.iterator]();!(je=(Rt=Ee.next()).done);je=!0){var Le=Rt.value;this.on(Le,this.options[Le])}}catch(yt){Ye=!0,ft=yt}finally{try{je||null==Ee.return||Ee.return()}finally{if(Ye)throw ft}}this.on("uploadprogress",function(){return U.updateTotalUploadProgress()}),this.on("removedfile",function(){return te.updateTotalUploadProgress()}),this.on("canceled",function(yt){return ne.emit("complete",yt)}),this.on("complete",function(yt){var pt=oe;if(0===oe.getAddedFiles().length&&0===oe.getUploadingFiles().length&&0===oe.getQueuedFiles().length)return setTimeout(function(){return pt.emit("queuecomplete")},0)});var ot=function(yt){if(function(pt){if(pt.dataTransfer.types)for(var Ve=0;Ve<pt.dataTransfer.types.length;Ve++)if("Files"===pt.dataTransfer.types[Ve])return!0;return!1}(yt))return yt.stopPropagation(),yt.preventDefault?yt.preventDefault():yt.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(yt){return fe.emit("dragstart",yt)},dragenter:function(yt){return ot(yt),Y.emit("dragenter",yt)},dragover:function(yt){var pt;try{pt=yt.dataTransfer.effectAllowed}catch{}return yt.dataTransfer.dropEffect="move"===pt||"linkMove"===pt?"move":"copy",ot(yt),le.emit("dragover",yt)},dragleave:function(yt){return X.emit("dragleave",yt)},drop:function(yt){return ot(yt),$.drop(yt)},dragend:function(yt){return we.emit("dragend",yt)}}}],this.clickableElements.forEach(function(yt){var pt=ue;return ue.listeners.push({element:yt,events:{click:function(Ve){return(yt!==pt.element||Ve.target===pt.element||G.elementInside(Ve.target,pt.element.querySelector(".dz-message")))&&pt.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,G.instances.splice(G.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var U,te=0,ne=0;if(this.getActiveFiles().length){var oe=!0,fe=!1,Y=void 0;try{for(var le,X=this.getActiveFiles()[Symbol.iterator]();!(oe=(le=X.next()).done);oe=!0){var $=le.value;te+=$.upload.bytesSent,ne+=$.upload.total}}catch(we){fe=!0,Y=we}finally{try{oe||null==X.return||X.return()}finally{if(fe)throw Y}}U=100*te/ne}else U=100;return this.emit("totaluploadprogress",U,ne,te)}},{key:"_getParamName",value:function(U){return"function"==typeof this.options.paramName?this.options.paramName(U):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(U,"]"):"")}},{key:"_renameFile",value:function(U){return"function"!=typeof this.options.renameFile?U.name:this.options.renameFile(U)}},{key:"getFallbackForm",value:function(){var U,te;if(U=this.getExistingFallback())return U;var ne='<div class="dz-fallback">';this.options.dictFallbackText&&(ne+="<p>".concat(this.options.dictFallbackText,"</p>")),ne+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var oe=G.createElement(ne);return"FORM"!==this.element.tagName?(te=G.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(oe):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),te??oe}},{key:"getExistingFallback",value:function(){var U=function($){var we=!0,ue=!1,ve=void 0;try{for(var Ae,je=$[Symbol.iterator]();!(we=(Ae=je.next()).done);we=!0){var Ye=Ae.value;if(/(^| )fallback($| )/.test(Ye.className))return Ye}}catch(ft){ue=!0,ve=ft}finally{try{we||null==je.return||je.return()}finally{if(ue)throw ve}}},te=!0,ne=!1,oe=void 0;try{for(var fe,Y=["div","form"][Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0){var le;if(le=U(this.element.getElementsByTagName(fe.value)))return le}}catch($){ne=!0,oe=$}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(U){return function(){var te=[];for(var ne in U.events)te.push(U.element.addEventListener(ne,U.events[ne],!1));return te}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(U){return function(){var te=[];for(var ne in U.events)te.push(U.element.removeEventListener(ne,U.events[ne],!1));return te}()})}},{key:"disable",value:function(){var U=this;return this.clickableElements.forEach(function(te){return te.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(te){return U.cancelUpload(te)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(U){return U.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(U){var te=0,ne="b";if(U>0){for(var oe=["tb","gb","mb","kb","b"],fe=0;fe<oe.length;fe++){var Y=oe[fe];if(U>=Math.pow(this.options.filesizeBase,4-fe)/10){te=U/Math.pow(this.options.filesizeBase,4-fe),ne=Y;break}}te=Math.round(10*te)/10}return"<strong>".concat(te,"</strong> ").concat(this.options.dictFileSizeUnits[ne])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(U){if(U.dataTransfer){this.emit("drop",U);for(var te=[],ne=0;ne<U.dataTransfer.files.length;ne++)te[ne]=U.dataTransfer.files[ne];if(te.length){var oe=U.dataTransfer.items;oe&&oe.length&&null!=oe[0].webkitGetAsEntry?this._addFilesFromItems(oe):this.handleFiles(te)}this.emit("addedfiles",te)}}},{key:"paste",value:function(U){if(te=U?.clipboardData,null!=(null!=te?te.items:void 0)){var te;this.emit("paste",U);var oe=U.clipboardData.items;return oe.length?this._addFilesFromItems(oe):void 0}}},{key:"handleFiles",value:function(U){var te=!0,ne=!1,oe=void 0;try{for(var fe,Y=U[Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0)this.addFile(fe.value)}catch(X){ne=!0,oe=X}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}}},{key:"_addFilesFromItems",value:function(U){var te=this;return function(){var ne=[],oe=!0,fe=!1,Y=void 0;try{for(var le,X=U[Symbol.iterator]();!(oe=(le=X.next()).done);oe=!0){var $,we=le.value;null!=we.webkitGetAsEntry&&($=we.webkitGetAsEntry())?ne.push($.isFile?te.addFile(we.getAsFile()):$.isDirectory?te._addFilesFromDirectory($,$.name):void 0):ne.push(null==we.getAsFile||null!=we.kind&&"file"!==we.kind?void 0:te.addFile(we.getAsFile()))}}catch(ue){fe=!0,Y=ue}finally{try{oe||null==X.return||X.return()}finally{if(fe)throw Y}}return ne}()}},{key:"_addFilesFromDirectory",value:function(U,te){var ne=this,oe=U.createReader(),fe=function(le){return null!=(X=console)&&"function"==typeof X.log?X.log(le):void 0;var X},Y=function(){var le=ne;return oe.readEntries(function(X){if(X.length>0){var $=!0,we=!1,ue=void 0;try{for(var ve,Ae=X[Symbol.iterator]();!($=(ve=Ae.next()).done);$=!0){var je=ve.value,Ye=le;je.isFile?je.file(function(ft){if(!Ye.options.ignoreHiddenFiles||"."!==ft.name.substring(0,1))return ft.fullPath="".concat(te,"/").concat(ft.name),Ye.addFile(ft)}):je.isDirectory&&le._addFilesFromDirectory(je,"".concat(te,"/").concat(je.name))}}catch(ft){we=!0,ue=ft}finally{try{$||null==Ae.return||Ae.return()}finally{if(we)throw ue}}Y()}return null},fe)};return Y()}},{key:"accept",value:function(U,te){this.options.maxFilesize&&U.size>1048576*this.options.maxFilesize?te(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(U.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):G.isValidFile(U,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(te(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",U)):this.options.accept.call(this,U,te):te(this.options.dictInvalidFileType)}},{key:"addFile",value:function(U){var te=this;U.upload={uuid:G.uuidv4(),progress:0,total:U.size,bytesSent:0,filename:this._renameFile(U)},this.files.push(U),U.status=G.ADDED,this.emit("addedfile",U),this._enqueueThumbnail(U),this.accept(U,function(ne){ne?(U.accepted=!1,te._errorProcessing([U],ne)):(U.accepted=!0,te.options.autoQueue&&te.enqueueFile(U)),te._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(U){var te=!0,ne=!1,oe=void 0;try{for(var fe,Y=U[Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0)this.enqueueFile(fe.value)}catch(X){ne=!0,oe=X}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}return null}},{key:"enqueueFile",value:function(U){if(U.status!==G.ADDED||!0!==U.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");var te=this;if(U.status=G.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return te.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(U){if(this.options.createImageThumbnails&&U.type.match(/image.*/)&&U.size<=1048576*this.options.maxThumbnailFilesize){var te=this;return this._thumbnailQueue.push(U),setTimeout(function(){return te._processThumbnailQueue()},0)}}},{key:"_processThumbnailQueue",value:function(){var U=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var te=this._thumbnailQueue.shift();return this.createThumbnail(te,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(ne){return U.emit("thumbnail",te,ne),U._processingThumbnail=!1,U._processThumbnailQueue()})}}},{key:"removeFile",value:function(U){if(U.status===G.UPLOADING&&this.cancelUpload(U),this.files=H(this.files,U),this.emit("removedfile",U),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(U){null==U&&(U=!1);var te=!0,ne=!1,oe=void 0;try{for(var fe,Y=this.files.slice()[Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0){var le=fe.value;(le.status!==G.UPLOADING||U)&&this.removeFile(le)}}catch(X){ne=!0,oe=X}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}return null}},{key:"resizeImage",value:function(U,te,ne,oe,fe){var Y=this;return this.createThumbnail(U,te,ne,oe,!0,function(le,X){if(null==X)return fe(U);var $=Y.options.resizeMimeType;null==$&&($=U.type);var we=X.toDataURL($,Y.options.resizeQuality);return"image/jpeg"!==$&&"image/jpg"!==$||(we=he.restore(U.dataURL,we)),fe(G.dataURItoBlob(we))})}},{key:"createThumbnail",value:function(U,te,ne,oe,fe,Y){var le=this,X=new FileReader;X.onload=function(){U.dataURL=X.result,"image/svg+xml"!==U.type?le.createThumbnailFromUrl(U,te,ne,oe,fe,Y):Y?.(X.result)},X.readAsDataURL(U)}},{key:"displayExistingFile",value:function(U,te,ne,oe,fe){var Y=void 0===fe||fe;if(this.emit("addedfile",U),this.emit("complete",U),Y){var le=this;U.dataURL=te,this.createThumbnailFromUrl(U,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(X){le.emit("thumbnail",U,X),ne&&ne()},oe)}else this.emit("thumbnail",U,te),ne&&ne()}},{key:"createThumbnailFromUrl",value:function(U,te,ne,oe,fe,Y,le){var X=this,$=document.createElement("img");return le&&($.crossOrigin=le),fe="from-image"!=getComputedStyle(document.body).imageOrientation&&fe,$.onload=function(){var we=X,ue=function(ve){return ve(1)};return typeof EXIF<"u"&&null!==EXIF&&fe&&(ue=function(ve){return EXIF.getData($,function(){return ve(EXIF.getTag(this,"Orientation"))})}),ue(function(ve){U.width=$.width,U.height=$.height;var Ae=we.options.resize.call(we,U,te,ne,oe),je=document.createElement("canvas"),Ye=je.getContext("2d");switch(je.width=Ae.trgWidth,je.height=Ae.trgHeight,ve>4&&(je.width=Ae.trgHeight,je.height=Ae.trgWidth),ve){case 2:Ye.translate(je.width,0),Ye.scale(-1,1);break;case 3:Ye.translate(je.width,je.height),Ye.rotate(Math.PI);break;case 4:Ye.translate(0,je.height),Ye.scale(1,-1);break;case 5:Ye.rotate(.5*Math.PI),Ye.scale(1,-1);break;case 6:Ye.rotate(.5*Math.PI),Ye.translate(0,-je.width);break;case 7:Ye.rotate(.5*Math.PI),Ye.translate(je.height,-je.width),Ye.scale(-1,1);break;case 8:Ye.rotate(-.5*Math.PI),Ye.translate(-je.height,0)}ae(Ye,$,null!=Ae.srcX?Ae.srcX:0,null!=Ae.srcY?Ae.srcY:0,Ae.srcWidth,Ae.srcHeight,null!=Ae.trgX?Ae.trgX:0,null!=Ae.trgY?Ae.trgY:0,Ae.trgWidth,Ae.trgHeight);var ft=je.toDataURL("image/png");if(null!=Y)return Y(ft,je)})},null!=Y&&($.onerror=Y),$.src=U.dataURL}},{key:"processQueue",value:function(){var U=this.options.parallelUploads,te=this.getUploadingFiles().length,ne=te;if(!(te>=U)){var oe=this.getQueuedFiles();if(oe.length>0){if(this.options.uploadMultiple)return this.processFiles(oe.slice(0,U-te));for(;ne<U;){if(!oe.length)return;this.processFile(oe.shift()),ne++}}}}},{key:"processFile",value:function(U){return this.processFiles([U])}},{key:"processFiles",value:function(U){var te=!0,ne=!1,oe=void 0;try{for(var fe,Y=U[Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0){var le=fe.value;le.processing=!0,le.status=G.UPLOADING,this.emit("processing",le)}}catch(X){ne=!0,oe=X}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}return this.options.uploadMultiple&&this.emit("processingmultiple",U),this.uploadFiles(U)}},{key:"_getFilesWithXhr",value:function(U){return this.files.filter(function(te){return te.xhr===U}).map(function(te){return te})}},{key:"cancelUpload",value:function(U){if(U.status===G.UPLOADING){var te=this._getFilesWithXhr(U.xhr),ne=!0,oe=!1,fe=void 0;try{for(var Y,le=te[Symbol.iterator]();!(ne=(Y=le.next()).done);ne=!0)(Ae=Y.value).status=G.CANCELED}catch(je){oe=!0,fe=je}finally{try{ne||null==le.return||le.return()}finally{if(oe)throw fe}}void 0!==U.xhr&&U.xhr.abort();var X=!0,$=!1,we=void 0;try{for(var ue,ve=te[Symbol.iterator]();!(X=(ue=ve.next()).done);X=!0){var Ae=ue.value;this.emit("canceled",Ae)}}catch(je){$=!0,we=je}finally{try{X||null==ve.return||ve.return()}finally{if($)throw we}}this.options.uploadMultiple&&this.emit("canceledmultiple",te)}else U.status!==G.ADDED&&U.status!==G.QUEUED||(U.status=G.CANCELED,this.emit("canceled",U),this.options.uploadMultiple&&this.emit("canceledmultiple",[U]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(U){for(var te=arguments.length,ne=new Array(te>1?te-1:0),oe=1;oe<te;oe++)ne[oe-1]=arguments[oe];return"function"==typeof U?U.apply(this,ne):U}},{key:"uploadFile",value:function(U){return this.uploadFiles([U])}},{key:"uploadFiles",value:function(U){var te=this;this._transformFiles(U,function(ne){if(te.options.chunking){var oe=ne[0];U[0].upload.chunked=te.options.chunking&&(te.options.forceChunking||oe.size>te.options.chunkSize),U[0].upload.totalChunkCount=Math.ceil(oe.size/te.options.chunkSize)}if(U[0].upload.chunked){var fe=te,Y=te,le=U[0];oe=ne[0],le.upload.chunks=[];var X=function(){for(var ue=0;void 0!==le.upload.chunks[ue];)ue++;if(!(ue>=le.upload.totalChunkCount)){var ve=ue*fe.options.chunkSize,Ae=Math.min(ve+fe.options.chunkSize,oe.size),je={name:fe._getParamName(0),data:oe.webkitSlice?oe.webkitSlice(ve,Ae):oe.slice(ve,Ae),filename:le.upload.filename,chunkIndex:ue};le.upload.chunks[ue]={file:le,index:ue,dataBlock:je,status:G.UPLOADING,progress:0,retries:0},fe._uploadData(U,[je])}};if(le.upload.finishedChunkUpload=function(ue,ve){var Ae=Y,je=!0;ue.status=G.SUCCESS,ue.dataBlock=null,ue.response=ue.xhr.responseText,ue.responseHeaders=ue.xhr.getAllResponseHeaders(),ue.xhr=null;for(var Ye=0;Ye<le.upload.totalChunkCount;Ye++){if(void 0===le.upload.chunks[Ye])return X();le.upload.chunks[Ye].status!==G.SUCCESS&&(je=!1)}je&&Y.options.chunksUploaded(le,function(){Ae._finished(U,ve,null)})},te.options.parallelChunkUploads)for(var $=0;$<le.upload.totalChunkCount;$++)X();else X()}else{var we=[];for($=0;$<U.length;$++)we[$]={name:te._getParamName($),data:ne[$],filename:U[$].upload.filename};te._uploadData(U,we)}})}},{key:"_getChunk",value:function(U,te){for(var ne=0;ne<U.upload.totalChunkCount;ne++)if(void 0!==U.upload.chunks[ne]&&U.upload.chunks[ne].xhr===te)return U.upload.chunks[ne]}},{key:"_uploadData",value:function(U,te){var ne=this,oe=this,fe=this,Y=this,le=new XMLHttpRequest,X=!0,$=!1,we=void 0;try{for(var ue=U[Symbol.iterator]();!(X=(Ve=ue.next()).done);X=!0)(Rt=Ve.value).xhr=le}catch(We){$=!0,we=We}finally{try{X||null==ue.return||ue.return()}finally{if($)throw we}}U[0].upload.chunked&&(U[0].upload.chunks[te[0].chunkIndex].xhr=le);var ve=this.resolveOption(this.options.method,U,te),Ae=this.resolveOption(this.options.url,U,te);le.open(ve,Ae,!0),this.resolveOption(this.options.timeout,U)&&(le.timeout=this.resolveOption(this.options.timeout,U)),le.withCredentials=!!this.options.withCredentials,le.onload=function(We){ne._finishedUploading(U,le,We)},le.ontimeout=function(){oe._handleUploadError(U,le,"Request timedout after ".concat(oe.options.timeout/1e3," seconds"))},le.onerror=function(){fe._handleUploadError(U,le)},(null!=le.upload?le.upload:le).onprogress=function(We){return Y._updateFilesUploadProgress(U,le,We)};var je=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};for(var Ye in this.options.binaryBody&&(je["Content-Type"]=U[0].type),this.options.headers&&z(A)(je,this.options.headers),je){var ft=je[Ye];ft&&le.setRequestHeader(Ye,ft)}if(this.options.binaryBody){X=!0,$=!1,we=void 0;try{for(ue=U[Symbol.iterator]();!(X=(Ve=ue.next()).done);X=!0){var Rt=Ve.value;this.emit("sending",Rt,le)}}catch(We){$=!0,we=We}finally{try{X||null==ue.return||ue.return()}finally{if($)throw we}}this.options.uploadMultiple&&this.emit("sendingmultiple",U,le),this.submitRequest(le,null,U)}else{var Ee=new FormData;if(this.options.params){var Le=this.options.params;for(var ot in"function"==typeof Le&&(Le=Le.call(this,U,le,U[0].upload.chunked?this._getChunk(U[0],le):null)),Le){var yt=Le[ot];if(Array.isArray(yt))for(var pt=0;pt<yt.length;pt++)Ee.append(ot,yt[pt]);else Ee.append(ot,yt)}}X=!0,$=!1,we=void 0;try{var Ve;for(ue=U[Symbol.iterator]();!(X=(Ve=ue.next()).done);X=!0)this.emit("sending",Rt=Ve.value,le,Ee)}catch(We){$=!0,we=We}finally{try{X||null==ue.return||ue.return()}finally{if($)throw we}}for(this.options.uploadMultiple&&this.emit("sendingmultiple",U,le,Ee),this._addFormElementData(Ee),pt=0;pt<te.length;pt++){var et=te[pt];Ee.append(et.name,et.data,et.filename)}this.submitRequest(le,Ee,U)}}},{key:"_transformFiles",value:function(U,te){for(var ne=this,oe=function(X){ne.options.transformFile.call(ne,U[X],function($){fe[X]=$,++Y===U.length&&te(fe)})},fe=[],Y=0,le=0;le<U.length;le++)oe(le)}},{key:"_addFormElementData",value:function(U){var te=!0,ne=!1,oe=void 0;if("FORM"===this.element.tagName)try{for(var fe=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(te=($=fe.next()).done);te=!0){var Y=$.value,le=Y.getAttribute("name"),X=Y.getAttribute("type");if(X&&(X=X.toLowerCase()),null!=le)if("SELECT"===Y.tagName&&Y.hasAttribute("multiple")){te=!0,ne=!1,oe=void 0;try{var $;for(fe=Y.options[Symbol.iterator]();!(te=($=fe.next()).done);te=!0){var we=$.value;we.selected&&U.append(le,we.value)}}catch(ue){ne=!0,oe=ue}finally{try{te||null==fe.return||fe.return()}finally{if(ne)throw oe}}}else(!X||"checkbox"!==X&&"radio"!==X||Y.checked)&&U.append(le,Y.value)}}catch(ue){ne=!0,oe=ue}finally{try{te||null==fe.return||fe.return()}finally{if(ne)throw oe}}}},{key:"_updateFilesUploadProgress",value:function(U,te,ne){var oe=!0,fe=!1,Y=void 0;if(U[0].upload.chunked){var le=this._getChunk(ue=U[0],te);ne?(le.progress=100*ne.loaded/ne.total,le.total=ne.total,le.bytesSent=ne.loaded):(le.progress=100,le.bytesSent=le.total),ue.upload.progress=0,ue.upload.total=0,ue.upload.bytesSent=0;for(var X=0;X<ue.upload.totalChunkCount;X++)ue.upload.chunks[X]&&void 0!==ue.upload.chunks[X].progress&&(ue.upload.progress+=ue.upload.chunks[X].progress,ue.upload.total+=ue.upload.chunks[X].total,ue.upload.bytesSent+=ue.upload.chunks[X].bytesSent);ue.upload.progress=ue.upload.progress/ue.upload.totalChunkCount,this.emit("uploadprogress",ue,ue.upload.progress,ue.upload.bytesSent)}else try{for(var $,we=U[Symbol.iterator]();!(oe=($=we.next()).done);oe=!0){var ue;(ue=$.value).upload.total&&ue.upload.bytesSent&&ue.upload.bytesSent==ue.upload.total||(ne?(ue.upload.progress=100*ne.loaded/ne.total,ue.upload.total=ne.total,ue.upload.bytesSent=ne.loaded):(ue.upload.progress=100,ue.upload.bytesSent=ue.upload.total),this.emit("uploadprogress",ue,ue.upload.progress,ue.upload.bytesSent))}}catch(ve){fe=!0,Y=ve}finally{try{oe||null==we.return||we.return()}finally{if(fe)throw Y}}}},{key:"_finishedUploading",value:function(U,te,ne){var oe;if(U[0].status!==G.CANCELED&&4===te.readyState){if("arraybuffer"!==te.responseType&&"blob"!==te.responseType&&(oe=te.responseText,te.getResponseHeader("content-type")&&~te.getResponseHeader("content-type").indexOf("application/json")))try{oe=JSON.parse(oe)}catch(fe){ne=fe,oe="Invalid JSON response from server."}this._updateFilesUploadProgress(U,te),200<=te.status&&te.status<300?U[0].upload.chunked?U[0].upload.finishedChunkUpload(this._getChunk(U[0],te),oe):this._finished(U,oe,ne):this._handleUploadError(U,te,oe)}}},{key:"_handleUploadError",value:function(U,te,ne){if(U[0].status!==G.CANCELED){if(U[0].upload.chunked&&this.options.retryChunks){var oe=this._getChunk(U[0],te);if(oe.retries++<this.options.retryChunksLimit)return void this._uploadData(U,[oe.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(U,ne||this.options.dictResponseError.replace("{{statusCode}}",te.status),te)}}},{key:"submitRequest",value:function(U,te,ne){if(1==U.readyState)if(this.options.binaryBody)if(ne[0].upload.chunked){var oe=this._getChunk(ne[0],U);U.send(oe.dataBlock.data)}else U.send(ne[0]);else U.send(te);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(U,te,ne){var oe=!0,fe=!1,Y=void 0;try{for(var le,X=U[Symbol.iterator]();!(oe=(le=X.next()).done);oe=!0){var $=le.value;$.status=G.SUCCESS,this.emit("success",$,te,ne),this.emit("complete",$)}}catch(we){fe=!0,Y=we}finally{try{oe||null==X.return||X.return()}finally{if(fe)throw Y}}if(this.options.uploadMultiple&&(this.emit("successmultiple",U,te,ne),this.emit("completemultiple",U)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(U,te,ne){var oe=!0,fe=!1,Y=void 0;try{for(var le,X=U[Symbol.iterator]();!(oe=(le=X.next()).done);oe=!0){var $=le.value;$.status=G.ERROR,this.emit("error",$,te,ne),this.emit("complete",$)}}catch(we){fe=!0,Y=we}finally{try{oe||null==X.return||X.return()}finally{if(fe)throw Y}}if(this.options.uploadMultiple&&(this.emit("errormultiple",U,te,ne),this.emit("completemultiple",U)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=S,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(U){var te=16*Math.random()|0;return("x"===U?te:3&te|8).toString(16)})}}]),G}(S);x.initClass(),x.options={},x.optionsForElement=function(de){return de.getAttribute("id")?x.options[B(de.getAttribute("id"))]:void 0},x.instances=[],x.forElement=function(de){if("string"==typeof de&&(de=document.querySelector(de)),null==de?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return de.dropzone},x.discover=function(){var de;if(document.querySelectorAll)de=document.querySelectorAll(".dropzone");else{de=[];var G=function(U){return function(){var te=[],ne=!0,oe=!1,fe=void 0;try{for(var Y,le=U[Symbol.iterator]();!(ne=(Y=le.next()).done);ne=!0){var X=Y.value;/(^| )dropzone($| )/.test(X.className)?te.push(de.push(X)):te.push(void 0)}}catch($){oe=!0,fe=$}finally{try{ne||null==le.return||le.return()}finally{if(oe)throw fe}}return te}()};G(document.getElementsByTagName("div")),G(document.getElementsByTagName("form"))}return function(){var U=[],te=!0,ne=!1,oe=void 0;try{for(var fe,Y=de[Symbol.iterator]();!(te=(fe=Y.next()).done);te=!0){var le=fe.value;!1!==x.optionsForElement(le)?U.push(new x(le)):U.push(void 0)}}catch(X){ne=!0,oe=X}finally{try{te||null==Y.return||Y.return()}finally{if(ne)throw oe}}return U}()},x.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],x.isBrowserSupported=function(){var de=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==x.blacklistedBrowsers&&(x.blockedBrowsers=x.blacklistedBrowsers);var G=!0,U=!1,te=void 0;try{for(var ne,oe=x.blockedBrowsers[Symbol.iterator]();!(G=(ne=oe.next()).done);G=!0)ne.value.test(navigator.userAgent)&&(de=!1)}catch(fe){U=!0,te=fe}finally{try{G||null==oe.return||oe.return()}finally{if(U)throw te}}}else de=!1;else de=!1;return de},x.dataURItoBlob=function(de){for(var G=atob(de.split(",")[1]),U=de.split(",")[0].split(":")[1].split(";")[0],te=new ArrayBuffer(G.length),ne=new Uint8Array(te),oe=0,fe=G.length,Y=0<=fe;Y?oe<=fe:oe>=fe;Y?oe++:oe--)ne[oe]=G.charCodeAt(oe);return new Blob([te],{type:U})};var H=function(de,G){return de.filter(function(U){return U!==G}).map(function(U){return U})},B=function(de){return de.replace(/[\-_](\w)/g,function(G){return G.charAt(1).toUpperCase()})};x.createElement=function(de){var G=document.createElement("div");return G.innerHTML=de,G.childNodes[0]},x.elementInside=function(de,G){if(de===G)return!0;for(;de=de.parentNode;)if(de===G)return!0;return!1},x.getElement=function(de,G){var U;if("string"==typeof de?U=document.querySelector(de):null!=de.nodeType&&(U=de),null==U)throw new Error("Invalid `".concat(G,"` option provided. Please provide a CSS selector or a plain HTML element."));return U},x.getElements=function(de,G){var te;if(de instanceof Array){te=[];try{var ne=!0,oe=!1,fe=void 0;try{for(var Y=de[Symbol.iterator]();!(ne=(le=Y.next()).done);ne=!0)te.push(this.getElement(le.value,G))}catch(X){oe=!0,fe=X}finally{try{ne||null==Y.return||Y.return()}finally{if(oe)throw fe}}}catch{te=null}}else if("string"==typeof de){te=[],ne=!0,oe=!1,fe=void 0;try{var le;for(Y=document.querySelectorAll(de)[Symbol.iterator]();!(ne=(le=Y.next()).done);ne=!0)te.push(le.value)}catch(X){oe=!0,fe=X}finally{try{ne||null==Y.return||Y.return()}finally{if(oe)throw fe}}}else null!=de.nodeType&&(te=[de]);if(null==te||!te.length)throw new Error("Invalid `".concat(G,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return te},x.confirm=function(de,G,U){return window.confirm(de)?G():U?.()},x.isValidFile=function(de,G){if(!G)return!0;G=G.split(",");var U=de.type,te=U.replace(/\/.*$/,""),ne=!0,oe=!1,fe=void 0;try{for(var Y,le=G[Symbol.iterator]();!(ne=(Y=le.next()).done);ne=!0){var X=Y.value;if("."===(X=X.trim()).charAt(0)){if(-1!==de.name.toLowerCase().indexOf(X.toLowerCase(),de.name.length-X.length))return!0}else if(/\/\*$/.test(X)){if(te===X.replace(/\/.*$/,""))return!0}else if(U===X)return!0}}catch($){oe=!0,fe=$}finally{try{ne||null==le.return||le.return()}finally{if(oe)throw fe}}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(de){return this.each(function(){return new x(this,de)})}),x.ADDED="added",x.QUEUED="queued",x.ACCEPTED=x.QUEUED,x.UPLOADING="uploading",x.PROCESSING=x.UPLOADING,x.CANCELED="canceled",x.ERROR="error",x.SUCCESS="success";var ae=function(de,G,U,te,ne,oe,fe,Y,le,X){var $=function(we){var ue=we.naturalHeight,ve=document.createElement("canvas");ve.width=1,ve.height=ue;var Ae=ve.getContext("2d");Ae.drawImage(we,0,0);for(var je=Ae.getImageData(1,0,1,ue).data,Ye=0,ft=ue,Rt=ue;Rt>Ye;)0===je[4*(Rt-1)+3]?ft=Rt:Ye=Rt,Rt=ft+Ye>>1;var Ee=Rt/ue;return 0===Ee?1:Ee}(G);return de.drawImage(G,U,te,ne,oe,fe,Y,le,X/$)},he=function(){"use strict";function de(){q(this,de)}return I(de,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(G){for(var U="",te=void 0,ne=void 0,oe="",fe=void 0,Y=void 0,le=void 0,X="",$=0;fe=(te=G[$++])>>2,Y=(3&te)<<4|(ne=G[$++])>>4,le=(15&ne)<<2|(oe=G[$++])>>6,X=63&oe,isNaN(ne)?le=X=64:isNaN(oe)&&(X=64),U=U+this.KEY_STR.charAt(fe)+this.KEY_STR.charAt(Y)+this.KEY_STR.charAt(le)+this.KEY_STR.charAt(X),te=ne=oe="",fe=Y=le=X="",$<G.length;);return U}},{key:"restore",value:function(G,U){if(!G.match("data:image/jpeg;base64,"))return U;var te=this.decode64(G.replace("data:image/jpeg;base64,","")),ne=this.slice2Segments(te),oe=this.exifManipulation(U,ne);return"data:image/jpeg;base64,".concat(this.encode64(oe))}},{key:"exifManipulation",value:function(G,U){var te=this.getExifArray(U),ne=this.insertExif(G,te);return new Uint8Array(ne)}},{key:"getExifArray",value:function(G){for(var U=void 0,te=0;te<G.length;){if(255===(U=G[te])[0]&225===U[1])return U;te++}return[]}},{key:"insertExif",value:function(G,U){var te=G.replace("data:image/jpeg;base64,",""),ne=this.decode64(te),oe=ne.indexOf(255,3),fe=ne.slice(0,oe),Y=ne.slice(oe);return fe.concat(U).concat(Y)}},{key:"slice2Segments",value:function(G){for(var U=0,te=[];!(255===G[U]&218===G[U+1]);){if(255===G[U]&216===G[U+1])U+=2;else{var ne=U+(256*G[U+2]+G[U+3])+2,oe=G.slice(U,ne);te.push(oe),U=ne}if(U>G.length)break}return te}},{key:"decode64",value:function(G){var U=void 0,te=void 0,ne="",oe=void 0,fe=void 0,Y="",le=0,X=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(G)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),G=G.replace(/[^A-Za-z0-9\+\/\=]/g,"");U=this.KEY_STR.indexOf(G.charAt(le++))<<2|(oe=this.KEY_STR.indexOf(G.charAt(le++)))>>4,te=(15&oe)<<4|(fe=this.KEY_STR.indexOf(G.charAt(le++)))>>2,ne=(3&fe)<<6|(Y=this.KEY_STR.indexOf(G.charAt(le++))),X.push(U),64!==fe&&X.push(te),64!==Y&&X.push(ne),U=te=ne="",oe=fe=Y="",le<G.length;);return X}}]),de}();he.initClass(),window.Dropzone=x}();var $bu_=new function(){var z=this;this.version="3.3.44npm",this.vsakt={c:"106",f:"105",s:"15.6",e:"106",i:"12",ios:"15.6",samsung:"17.0.7",o:"89",e_a:"104",o_a:"70",y:"22.7.0",v:"5.4",uc:"13.4.0"},this.vsinsecure_below={c:"100.0.5195.102",f:"100.3",s:"11.1.1",e:16,i:11,ios:"12.3",samsung:12,o:62,o_a:52,y:"20",v:"2.7",uc:"13.1"},this.vsdefault={c:-3,f:-3,s:-1,e:17,i:11,ios:10,samsung:9.9,o:-3,o_a:-3,y:20.4,v:2.6,uc:13,a:535},this.names={c:"Chrome",f:"Firefox",s:"Safari",e:"Edge",i:"Internet Explorer",ios:"iOS",samsung:"Samsung Internet",o:"Opera",o_a:"Opera",e_a:"Edge",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",a:"Android Browser",x:"Other",silk:"Silk"},this.get_browser=function(O){O=(O||navigator.userAgent).replace("_",".");var I={n:"x",v:0,t:"other browser",age_years:void 0,no_device_update:!1,available:z.vsakt};function R(E,x){return!!new RegExp(x,"i").test(O)&&E}I.other=R("bot","Pagespeed|pingdom|Preview|ktxn|dynatrace|Ruxit|PhantomJS|Headless|Lighthouse|bot|spider|archiver|transcoder|crawl|checker|monitoring|prerender|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Expeditor")||R("TV","SMART-TV|SmartTV")||R("niche browser","motorola edge|Comodo.Dragon|OculusBrowser|Falkon|Brave|Classic Browser|Dorado|LBBROWSER|Focus|waterfox|Firefox/56.2|Firefox/56.3|Whale|MIDP|k-meleon|sparrow|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|Basilisk|QupZilla|Otter|Midori|qutebrowser|slimjet")||R("mobile without upgrade path or landing page","OPR/44.12.2246|cros|kindle|tizen|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10"),I.embedded=/"QtWebEngine|Teams|Electron/i.test(O),I.mobile=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(O),I.discontinued=/netscape|greenbrowser|camino|flot|fennec|galeon|coolnovo/i.test(O);for(var V=[["CriOS.VV","c","ios"],["FxiOS.VV","f","ios"],["Trident.*rv:VV","i","i"],["Trident.VV","i","i"],["UCBrowser.VV","uc","c"],["MSIE.VV","i","i"],["Edge.VV","e","e"],["Edg.VV","e","c"],["EdgA.VV","e_a","c"],["Vivaldi.VV","v","c"],["Android.*OPR.VV","o_a","c"],["OPR.VV","o","c"],["YaBrowser.VV","y","c"],["SamsungBrowser.VV","samsung","c"],["Silk.VV","silk","c"],["Chrome.VV","c","c"],["Firefox.VV","f","f"],[" OS.VV.*Safari","ios","ios"],["Version.VV.*Safari","s","s"],["Safari.VV","s","s"],["Opera.*Version.VV","o"],["Opera.VV","o"]],F="(\\d+\\.?\\d+\\.?\\d*\\.?\\d*)",W=0;W<V.length;W++)if(O.match(new RegExp(V[W][0].replace("VV",F),"i"))){I.n=V[W][1],I.engine=V[W][2];break}if(I.fullv=RegExp.$1,I.v=parseFloat(I.fullv),/windows.nt.5|windows.nt.4|windows.nt.6.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5/i.test(O)&&(I.no_device_update=!0,I.available={}),"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&(I.n="ios",I.engine="ios",I.fullv=I.v=13,I.no_device_update=!0),/iphone|ipod|ipad|ios/i.test(O)){O.match(new RegExp("OS."+F,"i")),I.n="ios",I.fullv=RegExp.$1,I.v=parseFloat(I.fullv),I.engine="ios";var A=z.available_ios(O,I.v);A<12&&11===Math.round(I.v)&&(A=12),I.available={ios:A},parseFloat(I.available.ios)<11&&(I.no_device_update=!0)}if(/windows.nt.5.1|windows.nt.5.2|windows.nt.6.0/i.test(O)&&(I.available={c:49.9,f:52.9},I.no_device_update=!0),/os x 10.6/i.test(O)&&(I.available={s:"5.1.10",c:49.9,f:48},I.no_device_update=!0),/os x 10.7|os x 10.8/i.test(O)&&(I.available={s:"6.2.8",c:49.9,f:48},I.no_device_update=!0),/os x 10.9/i.test(O)&&(I.available.s="9.1.3"),/os x 10.10/i.test(O)&&(I.available.s="10.1.2"),O.indexOf("Android")>-1&&"s"===I.n){var P=parseInt((/WebKit\/([0-9]+)/i.exec(O)||0)[1],10)||2e3;P<=534&&(I.n="a",I.fullv=I.v=P,I.is_insecure=!0)}I.t=z.names[I.n]+" "+I.v,I.is_supported=I.is_latest=z.vsakt[I.n]?z.less(I.fullv,z.vsakt[I.n])<=0:void 0,I.vmaj=Math.round(I.v),I.is_insecure=I.is_insecure||!z.vsinsecure_below[I.n]?void 0:1===z.less(I.fullv,z.vsinsecure_below[I.n]),("f"===I.n&&102===I.vmaj||"i"===I.n&&11===I.vmaj)&&(I.is_supported=!0,I.is_insecure=!1,"f"===I.n&&(I.esr=!0)),"ios"===I.n&&I.v>10.3&&(I.is_supported=!0),("a"===I.n||"x"===I.n)&&(I.t=z.names[I.n]),"e"===I.n&&(I.t=z.names[I.n]+" "+I.vmaj,I.is_supported=1!=z.less(I.fullv,"18.15063")),I.n in["c","f","o","e"]&&z.less(I.fullv,parseFloat(z.vsakt[I.n])-1)<=0&&(I.is_supported=!0);var v={f:7,c:8,o:8,i:1,e:1,s:1};return v[I.n]&&(I.age_years=Math.round((z.vsakt[I.n]-I.v)/v[I.n]*10)/10||0),I.engine&&(O.match(new RegExp({e:"Edge.VV",c:"Chrome.VV",f:"Firefox.VV",s:"Version.VV",i:"MSIE.VV",ios:" OS.VV"}[I.engine].replace("VV",F),"i")),I.engine_version=parseFloat(RegExp.$1)),I},this.semver=function(re){if(re instanceof Array)return re;var q=(re+".0.0.0").split(".");return[parseInt(q[0])||0,parseInt(q[1])||0,parseInt(q[2])||0,parseInt(q[3])||0]},this.less=function(re,q){re=z.semver(re),q=z.semver(q);for(var O=0;;O++){if(O>=re.length)return O>=q.length?0:1;if(O>=q.length)return-1;var I=q[O]-re[O];if(I)return I>0?1:-1}},this.available_ios=function(re,q){var O=Math.max(window.screen.height,window.screen.width),I=window.devicePixelRatio;return/ipad/i.test(re)?1024==O&&2==I?10:1112==O||1366==O?15:1024==O&&q<6?5:9:1==I?6:3==I||812==O||736==O||667==O?15:568==O?10:480==O?7:6}};window.$bu_getBrowser=$bu_.get_browser;var $buo=function(z,re){var O,q=window.navigator,I=(z=window._buorgres=z||{}).l||(q.languages?q.languages[0]:null)||q.language||q.browserLanguage||q.userLanguage||document.documentElement.getAttribute("lang")||"en";z.llfull=I.replace("_","-").toLowerCase().substr(0,5),z.ll=z.llfull.substr(0,2),z.domain=void 0!==z.domain?z.domain:(/file:/.test(location.href)?"https:":"")+"//browser-update.org",z.apiver=z.api||z.c||-1,z.jsv=$bu_.version;var R=z.apiver<2018&&{i:10,f:11,o:21,s:8,c:30}||{},V=z.notify||z.vs||{};0!==V.e&&(V.e=V.e||V.i),V.i=V.i||V.e;var F=z.required||{};for(O in 0!==F.e&&(F.e=F.e||F.i),F.i||(F.i=F.e,$bu_.vsakt.i=$bu_.vsakt.e),$bu_.vsdefault)V[O]&&(F[O]=$bu_.less(V[O],0)>=0?parseFloat($bu_.vsakt[O])+parseFloat(V[O])+.01:parseFloat(V[O])+.01),(!(O in F)||null==F[O])&&(F[O]=$bu_.vsdefault[O]),$bu_.less(F[O],0)>=0&&(F[O]=parseFloat($bu_.vsakt[O])+parseFloat(F[O])),R[O]&&1===$bu_.less(F[O],R[O])&&(F[O]=R[O]);if(F.ios=F.ios||F.s,F.i<79&&F.i>65&&(F.i=F.i-60),F.e<79&&F.e>65&&(F.e=F.e-60),z.required=F,z.reminder=z.reminder<.1?0:z.reminder||168,z.reminderClosed=z.reminderClosed<1?0:z.reminderClosed||168,z.onshow=z.onshow||function(A){},z.onclick=z.onclick||function(A){},z.onclose=z.onclose||function(A){},z.pageurl=z.pageurl||location.hostname||"x",z.newwindow=!1!==z.newwindow,z.test=re||z.test||"#test-bu"===location.hash||!1,z.ignorecookie=z.ignorecookie||"#ignorecookie-bu"===location.hash,z.reasons=[],z.hide_reasons=[],z.notified=function W(A){var P=A.browser=$bu_.get_browser(A.override_ua);return A.is_below_required=F[P.n]&&1===$bu_.less(P.fullv,F[P.n]),!1!==P.other&&A.hide_reasons.push("is other browser:"+P.other),!1!==P.embedded&&A.hide_reasons.push("is embedded browser:"+P.embedded),P.esr&&!A.notify_esr&&A.hide_reasons.push("Extended support (ESR)"),P.mobile&&!1===A.mobile&&A.hide_reasons.push("do not notify mobile"),P.is_latest&&A.hide_reasons.push("is latest version of the browser"),P.no_device_update&&A.hide_reasons.push("no device update"),A.is_below_required&&A.reasons.push("below required"),(A.insecure||A.unsecure)&&P.is_insecure&&A.reasons.push("insecure"),A.unsupported&&!P.is_supported&&A.reasons.push("no vendor support"),!(A.hide_reasons.length>0)&&A.reasons.length>0}(z),z.already_shown=document.cookie.indexOf("browserupdateorg=pause")>-1&&!z.ignorecookie,z.test||z.notified&&!z.already_shown){if(z.setCookie=function(A){document.cookie="browserupdateorg=pause; expires="+new Date((new Date).getTime()+36e5*A).toGMTString()+"; path=/; SameSite=Lax"+(/https:/.test(location.href)?"; Secure":"")},z.already_shown&&(z.ignorecookie||z.test)&&z.setCookie(-10),z.reminder>0&&z.setCookie(z.reminder),z.nomessage)return void z.onshow(z);$buo_show()}};typeof module<"u"&&(module.exports=$buo);var $buo_show=function(){var z=window._buorgres,re=$bu_getBrowser(),q=z.burl||"http"+(/MSIE/i.test(navigator.userAgent)?"":"s")+"://browser-update.org/";z.url||(z.url=q+(z.l&&z.l+"/"||"")+"update-browser.html"+(z.test?"?force_outdated=true":"")+"#"+z.jsv+":"+z.pageurl),z.url_permanent_hide=z.url_permanent_hide||q+"block-ignore-browser-update-warning.html";var R,I={en:{msg:"Your web browser ({brow_name}) is out of date.",msgmore:"Update your browser for more security, speed and the best experience on this site.",bupdate:"Update browser",bignore:"Ignore",remind:"You will be reminded in {days} days.",bnever:"Never show again"},ar:{msg:"\u0645\u062a\u0635\u0641\u062d \u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 ({brow_name}) \u063a\u064a\u0631 \u0645\u064f\u062d\u062f\u0651\u062b.",msgmore:"\u0642\u0645 \u0628\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u062a\u0635\u0641\u062d \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0623\u0645\u0627\u0646 \u0648\u0627\u0644\u0633\u0631\u0639\u0629 \u0648\u0644\u0623\u0641\u0636\u0644 \u062a\u062c\u0631\u0628\u0629 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639.",bupdate:"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u062a\u0635\u0641\u062d",bignore:"\u062a\u062c\u0627\u0647\u0644",remind:"\u0633\u064a\u062a\u0645 \u062a\u0630\u0643\u064a\u0631\u0643 \u0641\u064a \u063a\u0636\u0648\u0646 {days} \u0623\u064a\u0627\u0645.",bnever:"\u0644\u0627 \u062a\u0638\u0647\u0631 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649"},bg:{msg:"\u0412\u0430\u0448\u0438\u044f\u0442 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044a\u0440 ({brow_name}) \u0435 \u043e\u0441\u0442\u0430\u0440\u044f\u043b.",msgmore:"\u0410\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u0439\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0430 \u0441\u0438 \u0437\u0430 \u043f\u043e\u0432\u0435\u0447\u0435 \u0441\u0438\u0433\u0443\u0440\u043d\u043e\u0441\u0442, \u0431\u044a\u0440\u0437\u0438\u043d\u0430 \u0438 \u043d\u0430\u0439-\u0434\u043e\u0431\u0440\u043e\u0442\u043e \u0438\u0437\u0436\u0438\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0442\u043e\u0437\u0438 \u0441\u0430\u0439\u0442.",bupdate:"\u0410\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0430",bignore:"\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0430\u0439",remind:"\u0429\u0435 \u0432\u0438 \u0431\u044a\u0434\u0435 \u043d\u0430\u043f\u043e\u043c\u043d\u0435\u043d\u043e \u0441\u043b\u0435\u0434 {days} \u0434\u043d\u0438.",bnever:"\u041d\u0438\u043a\u043e\u0433\u0430 \u043f\u043e\u0432\u0435\u0447\u0435 \u0434\u0430 \u043d\u0435 \u0441\u0435 \u043f\u043e\u043a\u0430\u0437\u0432\u0430"},ca:{msg:"El teu navegador ({brow_name}) est\xe0 desactualitzat.",msgmore:"Actualitzeu el vostre navegador per obtenir m\xe9s seguretat, velocitat i una millor experi\xe8ncia en aquest lloc.",bupdate:"Actualitza el navegador",bignore:"Ignorar",remind:"T'ho recordarem d'aqu\xed a {days} dies.",bnever:"No ho tornis a mostrar"},cs:{msg:"V\xe1\u0161 prohl\xed\u017ee\u010d ({brow_name}) je zastaral\xfd.",msgmore:"Aktualizujte prohl\xed\u017ee\u010d pro lep\u0161\xed zabezpe\u010den\xed, rychlost a nejlep\u0161\xed z\xe1\u017eitek z tohoto webu.",bupdate:"Aktualizovat prohl\xed\u017ee\u010d",bignore:"Ignorovat",remind:"Znovu budete upozorn\u011bni za {days} dn\u016f.",bnever:"Ji\u017e nezobrazovat"},cy:{msg:"Mae eich porwr gwe ({brow_name}) angen ei ddiweddaru.",msgmore:"Diweddarwch eich porwr i gael mwy o ddiogelwch, cyflymder a'r profiad gorau ar y safle hwn.",bupdate:"Diweddaru porwr",bignore:"Anwybyddu",remind:"Byddwn yn eich atgoffa mewn {days} diwrnod.",bnever:"Peidiwch \xe2 dangos eto"},da:{msg:"Din web browser ({brow_name}) er for\xe6ldet",msgmore:"Opdater din browser for mere sikkerhed, hastighed og den bedste oplevelse p\xe5 denne side.",bupdate:"Opdater browser",bignore:"Ignorer",remind:"Du vil blive p\xe5mindet om {days} dage.",bnever:"Vis aldrig igen"},de:{msg:"Ihr Webbrowser ({brow_name}) ist veraltet.",msgmore:"Aktualisieren Sie Ihren Browser f\xfcr mehr Sicherheit, Geschwindigkeit und den besten Komfort auf dieser Seite.",bupdate:"Browser aktualisieren",bignore:"Ignorieren",remind:"Sie werden in {days} Tagen wieder erinnert.",bnever:"Nie wieder anzeigen"},el:{msg:"\u03a4\u03bf \u03c0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03b5\u03c1\u03b9\u03ae\u03b3\u03b7\u03c3\u03ae\u03c2 \u03c3\u03b1\u03c2 ({brow_name}) \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03c7\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03bf.",msgmore:"\u0395\u03bd\u03b7\u03bc\u03b5\u03c1\u03ce\u03c3\u03c4\u03b5 \u03c4\u03bf \u03c0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03b5\u03c1\u03b9\u03ae\u03b3\u03b7\u03c3\u03ae\u03c2 \u03c3\u03b1\u03c2 \u03b3\u03b9\u03b1 \u03c0\u03b5\u03c1\u03b9\u03c3\u03c3\u03cc\u03c4\u03b5\u03c1\u03b7 \u03b1\u03c3\u03c6\u03ac\u03bb\u03b5\u03b9\u03b1, \u03c4\u03b1\u03c7\u03cd\u03c4\u03b7\u03c4\u03b1 \u03ba\u03b1\u03b9 \u03c4\u03b7\u03bd \u03ba\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03b7 \u03b5\u03bc\u03c0\u03b5\u03b9\u03c1\u03af\u03b1 \u03c3' \u03b1\u03c5\u03c4\u03cc\u03bd \u03c4\u03bf\u03bd \u03b9\u03c3\u03c4\u03cc\u03c4\u03bf\u03c0\u03bf.",bupdate:"\u0395\u03bd\u03b7\u03bc\u03b5\u03c1\u03ce\u03c3\u03c4\u03b5 \u03c4\u03bf \u03c0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03b5\u03c1\u03b9\u03ae\u03b3\u03b7\u03c3\u03b7\u03c2",bignore:"\u0391\u03b3\u03bd\u03bf\u03ae\u03c3\u03c4\u03b5",remind:"\u0398\u03b1 \u03c3\u03b1\u03c2 \u03c4\u03bf \u03c5\u03c0\u03b5\u03bd\u03b8\u03c5\u03bc\u03af\u03c3\u03bf\u03c5\u03bc\u03b5 \u03c3\u03b5 {days} \u03b7\u03bc\u03ad\u03c1\u03b5\u03c2.",bnever:"\u039d\u03b1 \u03bc\u03b7\u03bd \u03b5\u03bc\u03c6\u03b1\u03bd\u03b9\u03c3\u03c4\u03b5\u03af \u03be\u03b1\u03bd\u03ac"},es:{msg:"Su navegador web ({brow_name}) est\xe1 desactualizado.",msgmore:"Actualice su navegador para obtener m\xe1s seguridad, velocidad y para disfrutar de la mejor experiencia en este sitio.",bupdate:"Actualizar navegador",bignore:"Ignorar",remind:"Se le recordar\xe1 en {days} d\xedas.",bnever:"No mostrar de nuevo"},et:{msg:"Teie veebilehitseja ({brow_name}) on vananenud.",msgmore:"Veebilehitseja uuendamisega kaasneb nii parem turvalisus, kiirus kui ka kasutusmugavus.",bupdate:"Uuenda veebilehitsejat",bignore:"Eira",remind:"Uus meeldetuletus {days} p\xe4eva p\xe4rast.",bnever:"\xc4ra kunagi enam n\xe4ita"},fa:{msg:"\u0645\u0631\u0648\u0631\u06af\u0631 \u0634\u0645\u0627 ({brow_name}) \u0642\u062f\u06cc\u0645\u06cc \u0627\u0633\u062a.",msgmore:"\u0628\u0631\u0627\u06cc \u0627\u06cc\u0645\u0646\u06cc\u060c \u0633\u0631\u0639\u062a \u0648 \u062a\u062c\u0631\u0628\u0647 \u0628\u0647\u062a\u0631 \u0645\u0631\u0648\u0631\u06af\u0631 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647\u200c\u0631\u0648\u0632 \u06a9\u0646\u06cc\u062f.",bupdate:"\u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0645\u0631\u0648\u0631\u06af\u0631",bignore:"\u0646\u0627\u062f\u06cc\u062f\u0647 \u06af\u0631\u0641\u062a\u0646",remind:"\u0628\u0647 \u0634\u0645\u0627 \u062a\u0627 {days} \u0631\u0648\u0632 \u062f\u06cc\u06af\u0631 \u062f\u0648\u0628\u0627\u0631\u0647 \u06cc\u0627\u062f\u200c\u0622\u0648\u0631\u06cc \u062e\u0648\u0627\u0647\u062f \u0634\u062f.",bnever:"\u0647\u0631\u06af\u0632 \u0646\u0645\u0627\u06cc\u0634 \u0646\u062f\u0647"},fi:{msg:"Selaimesi ({brow_name}) on vanhentunut.",msgmore:"P\xe4ivit\xe4 selaimesi saadaksesi tietoturvap\xe4ivityksi\xe4, nopeutta sek\xe4 parhaan k\xe4ytt\xf6kokemuksen sivustolla.",bupdate:"P\xe4ivit\xe4 selain",bignore:"Ohita",remind:"Saat uuden muistutuksen {days} p\xe4iv\xe4n p\xe4\xe4st\xe4.",bnever:"\xc4l\xe4 n\xe4yt\xe4 uudestaan"},fr:{msg:"Votre navigateur Web ({brow_name}) n'est pas \xe0 jour.",msgmore:"Mettez \xe0 jour votre navigateur pour plus de s\xe9curit\xe9 et de rapidit\xe9 et une meilleure exp\xe9rience sur ce site.",bupdate:"Mettre \xe0 jour le navigateur",bignore:"Ignorer",remind:"Vous serez rappel\xe9 dans {days} jours.",bnever:"Ne plus afficher"},gl:{msg:"T\xe1 an l\xedonl\xe9itheoir agat ({brow_name}) as d\xe1ta.",msgmore:"Actualiza o teu navegador para obter m\xe1is seguridade, rapidez e mellor experiencia neste sitio.",bupdate:"Actualizar navegador web",bignore:"Ignorar",remind:"Lembraralle en {days} d\xedas.",bnever:"Non volver mostrar m\xe1is"},he:{msg:"\u05d3\u05e4\u05d3\u05e4\u05df ({brow_name}) \u05e9\u05dc\u05da \u05d0\u05d9\u05e0\u05d5 \u05de\u05e2\u05d5\u05d3\u05db\u05df.",msgmore:"\u05e2\u05d3\u05db\u05df/\u05d9 \u05d0\u05ea \u05d4\u05d3\u05e4\u05d3\u05e4\u05df \u05e9\u05dc\u05da \u05dc\u05e9\u05d9\u05e4\u05d5\u05e8 \u05d4\u05d0\u05d1\u05d8\u05d7\u05d4 \u05d5\u05d4\u05de\u05d4\u05d9\u05e8\u05d5\u05ea \u05d5\u05db\u05d3\u05d9 \u05dc\u05d9\u05d4\u05e0\u05d5\u05ea \u05de\u05d4\u05d7\u05d5\u05d5\u05d9\u05d4 \u05d4\u05d8\u05d5\u05d1\u05d4 \u05d1\u05d9\u05d5\u05ea\u05e8 \u05d1\u05d0\u05ea\u05e8 \u05d6\u05d4.",bupdate:"\u05e2\u05d3\u05db\u05df \u05d3\u05e4\u05d3\u05e4\u05df",bignore:"\u05d4\u05ea\u05e2\u05dc\u05dd",remind:"\u05ea\u05e7\u05d1\u05dc/\u05d9 \u05ea\u05d6\u05db\u05d5\u05e8\u05ea \u05d1\u05e2\u05d5\u05d3  {days} \u05d9\u05de\u05d9\u05dd.",bnever:"\u05d0\u05dc \u05ea\u05e6\u05d9\u05d2 \u05e9\u05d5\u05d1"},hi:{msg:"\u0906\u092a\u0915\u093e \u0935\u0947\u092c \u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 ({brow_name}) \u092a\u0941\u0930\u093e\u0928\u093e \u0939\u0948\u0964",msgmore:"\u0907\u0938 \u0938\u093e\u0907\u091f \u092a\u0930 \u0905\u0927\u093f\u0915 \u0938\u0941\u0930\u0915\u094d\u0937\u093e, \u0917\u0924\u093f \u0914\u0930 \u0938\u0930\u094d\u0935\u094b\u0924\u094d\u0924\u092e \u0905\u0928\u0941\u092d\u0935 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0905\u092a\u0928\u0947 \u092c\u094d\u0930\u093e\u0909\u095b\u0930 \u0915\u094b \u0905\u092a\u0921\u0947\u091f \u0915\u0930\u0947\u0902 \u0964",bupdate:"\u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 \u0905\u092a\u0921\u0947\u091f \u0915\u0930\u0947\u0902",bignore:"\u0928\u091c\u0930\u0905\u0902\u0926\u093e\u091c \u0915\u0930\u0947\u0902",remind:"\u0906\u092a\u0915\u094b {days} \u0926\u093f\u0928\u094b\u0902 \u092e\u0947\u0902 \u092f\u093e\u0926 \u0926\u093f\u0932\u093e\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964",bnever:"\u092b\u093f\u0930 \u0915\u092d\u0940 \u092e\u0924 \u0926\u093f\u0916\u093e\u0928\u093e"},hu:{msg:"Az \xd6n webb\xf6ng\xe9sz\u0151je ({brow_name}) elavult.",msgmore:"Friss\xedtse b\xf6ng\xe9sz\u0151j\xe9t a nagyobb biztons\xe1g, sebess\xe9g \xe9s \xe9lm\xe9ny \xe9rdek\xe9ben!",bupdate:"B\xf6ng\xe9sz\u0151 friss\xedt\xe9se",bignore:"Mell\u0151z\xe9s",remind:"\xdajra eml\xe9keztet\xfcnk {days} napon bel\xfcl.",bnever:"Ne mutassa t\xf6bbet"},id:{msg:"Peramban web ({brow_name}) Anda sudah usang.",msgmore:"Perbarui peramban Anda untuk pengalaman terbaik, lebih aman, dan cepat di situs ini.",bupdate:"Perbarui peramban",bignore:"Abaikan",remind:"Anda akan diingatkan kembali dalam {days} hari.",bnever:"Jangan pernah tampilkan lagi"},it:{msg:"Il tuo browser ({brow_name}) non \xe8 aggiornato.",msgmore:"Aggiorna il browser per una maggiore sicurezza, velocit\xe0 e la migliore esperienza su questo sito.",bupdate:"Aggiorna browser",bignore:"Ignora",remind:"Riceverai un promemoria tra {days} giorni.",bnever:"Non mostrare di nuovo"},ja:{msg:"\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\uff08{brow_name}\uff09\u306f\u6700\u65b0\u7248\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",msgmore:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u30b9\u30d4\u30fc\u30c9\u3001\u305d\u3057\u3066\u3053\u306e\u30b5\u30a4\u30c8\u3067\u306e\u6700\u826f\u306e\u4f53\u9a13\u306e\u305f\u3081\u306b\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002",bupdate:"\u30d6\u30e9\u30a6\u30b6\u3092\u66f4\u65b0\u3059\u308b",bignore:"\u7121\u8996\u3059\u308b",remind:"{days} \u65e5\u5f8c\u306b\u3082\u3046\u4e00\u5ea6\u304a\u77e5\u3089\u305b\u3057\u307e\u3059\u3002",bnever:"\u6b21\u56de\u304b\u3089\u8868\u793a\u3057\u306a\u3044"},ko:{msg:"\uadc0\ud558\uc758 \uc6f9 \ube0c\ub77c\uc6b0\uc800({brow_name})\ub294 \uc624\ub798\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",msgmore:"\uc774 \uc0ac\uc774\ud2b8\uc5d0\uc11c \ubcf4\uc548, \uc18d\ub3c4\uc640 \ucd5c\uc0c1\uc758 \uacbd\ud5d8\uc744 \uc5bb\uc73c\ub824\uba74 \ube0c\ub77c\uc6b0\uc800\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uc2ed\uc2dc\uc624.",bupdate:"\ube0c\ub77c\uc6b0\uc800 \uc5c5\ub370\uc774\ud2b8\ud558\uae30",bignore:"\ubb34\uc2dc\ud558\uae30",remind:"{days}\uc77c \ud6c4\uc5d0 \uc54c\ub824 \ub4dc\ub9bd\ub2c8\ub2e4.",bnever:"\ub2e4\uc2dc \ud45c\uc2dc\ud558\uc9c0 \uc54a\uae30"},lt:{msg:"J\u016bs\u0173 nar\u0161ykl\u0117 ({brow_name}) yra pasenusi.",msgmore:"Atsinaujinkite savo nar\u0161ykl\u0119 nor\u0117dami gauti daugiau saugumo, grei\u010dio ir pa\u010di\u0173 geriausi\u0173 patir\u010di\u0173 \u0161ioje svetain\u0117je.",bupdate:"Atnaujinti nar\u0161ykl\u0119",bignore:"Nepaisyti",remind:"Jums bus priminta po {days} dien\u0173.",bnever:"Daugiau niekada nerodyti"},lv:{msg:"J\u016bsu p\u0101rl\u016bkprogramma ({brow_name}) ir novecojusi.",msgmore:"Atjaunojiet savu p\u0101rl\u016bkprogrammu liel\u0101kai dro\u0161\u012bbai, \u0101trumam un lab\u0101kai pieredzei ar \u0161o vietni.",bupdate:"Atjaunin\u0101t p\u0101rl\u016bkprogrammu",bignore:"Ignor\u0113t",remind:"Jums tiks par\u0101d\u012bts atg\u0101din\u0101jums p\u0113c {days} dien\u0101m.",bnever:"Vairs ner\u0101d\u012bt"},ms:{msg:"Pelayar web anda ({brow_name}) sudah lapuk.",msgmore:"Kemas kini pelayar anda untuk lebih keselamatan, kelajuan dan pengalaman terbaik di laman web ini.",bupdate:"Kemas kini pelayar",bignore:"Abaikan",remind:"Anda akan diingatkan dalam {days} hari.",bnever:"Jangan tunjukkan lagi"},nl:{msg:"Uw webbrowser ({brow_name}) is verouderd.",msgmore:"Update uw browser voor meer veiligheid, snelheid en om deze site optimaal te kunnen gebruiken.",bupdate:"Browser updaten",bignore:"Negeren",remind:"We zullen u er in {days} dagen aan herinneren.",bnever:"Nooit meer tonen"}};I.no=I.nn=I.nb={msg:"Nettleseren din ({brow_name}) er utdatert.",msgmore:"Oppdater nettleseren din for \xf8kt sikkerhet, hastighet og den beste opplevelsen p\xe5 dette nettstedet.",bupdate:"Oppdater nettleser",bignore:"Ignorer",remind:"Du vil f\xe5 en p\xe5minnelse om {days} dager.",bnever:"Aldri vis igjen"},I.pl={msg:"Twoja przegl\u0105darka ({brow_name}) jest nieaktualna.",msgmore:"Zaktualizuj przegl\u0105dark\u0119, by korzysta\u0107 z tej strony bezpieczniej, szybciej i po prostu sprawniej.",bupdate:"Aktualizuj przegl\u0105dark\u0119",bignore:"Ignoruj",remind:"Przypomnimy o tym za {days} dni.",bnever:"Nie pokazuj wi\u0119cej"},I.pt={msg:"Seu navegador da web ({brow_name}) est\xe1 desatualizado.",msgmore:"Atualize seu navegador para ter mais seguran\xe7a e velocidade, al\xe9m da melhor experi\xeancia neste site.",bupdate:"Atualizar navegador",bignore:"Ignorar",remind:"Voc\xea ser\xe1 relembrado em {days} dias.",bnever:"N\xe3o mostrar novamente"},I.ro={msg:"Browserul t\u0103u ({brow_name}) nu este actualizat.",msgmore:"Actualizeaz\u0103 browserul pentru o mai mare siguran\u021b\u0103, vitez\u0103 \u0219i cea mai bun\u0103 experien\u021b\u0103 pe acest site.",bupdate:"Actualizeaz\u0103 browser",bignore:"Ignor\u0103",remind:"\u021ai se va reaminti peste {days} zile.",bnever:"Nu mai ar\u0103ta"},I.ru={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0443\u0441\u0442\u0430\u0440\u0435\u043b.",msgmore:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0440\u043e\u0432\u043d\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438, \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430.",bupdate:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c",remind:"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043d\u0435\u0439.",bnever:"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c "},I.sk={msg:"V\xe1\u0161 internetov\xfd prehliada\u010d ({brow_name}) je zastaran\xfd.",msgmore:"Pre v\xe4\u010d\u0161iu bezpe\u010dnos\u0165, r\xfdchlos\u0165 a lep\u0161iu sk\xfasenos\u0165 s touto str\xe1nkou si aktualizujte svoj prehliada\u010d.",bupdate:"Aktualizova\u0165 prehliada\u010d",bignore:"Ignorova\u0165",remind:"Bude v\xe1m to pripomenut\xe9 o {days} dn\xed.",bnever:"U\u017e nikdy viac neukazova\u0165"},I.sl={msg:"Va\u0161 spletni brskalnik ({brow_name}) je zastarel.",msgmore:"Posodobite svoj brskalnik za dodatno varnost, hitrost in najbolj\u0161o izku\u0161njo na tem spletnem mestu.",bupdate:"Posodobi brskalnik",bignore:"Prezri",remind:"Opomnik boste prejeli \u010dez toliko dni: {days}.",bnever:"Ne prika\u017ei ve\u010d"},I.sq={msg:"Shfletuesi juaj ({brow_name}) \xebsht\xeb i vjetruar.",msgmore:"P\xebrdit\xebsoni shfletuesin tuaj p\xebr m\xeb tep\xebr siguri, shpejt\xebsi dhe p\xebr m\xeb t\xeb mirin e funksionimeve n\xeb k\xebt\xeb sajt.",bupdate:"P\xebrdit\xebso shfletuesin",bignore:"Shp\xebrfille",remind:"Do t\u2019ju rikujtohet pas {days} dit\xebsh.",bnever:"Mos e shfaq kurr\xeb m\xeb"},I.sr={msg:"Va\u0161 pretra\u017eiva\u010d ({brow_name}) je zastareo.",msgmore:"Ima poznate sigurnosne probleme i najverovatnije ne\u0107e prikazati sve funkcionalnisti ovog i drugih sajtova.",bupdate:"Nadogradi pretra\u017eiva\u010d",bignore:"Ignorisi",remind:"Zaboravic\u0301ete za {days} dana.",bnever:"Ne prikazuj opet"},I.sv={msg:"Din webbl\xe4sare ({brow_name}) \xe4r f\xf6r\xe5ldrad. ",msgmore:"Uppdatera din webbl\xe4sare f\xf6r mer s\xe4kerhet, hastighet och den b\xe4sta upplevelsen p\xe5 den h\xe4r sajten. ",bupdate:"Uppdatera webbl\xe4saren",bignore:"Ignorera",remind:"Du f\xe5r en p\xe5minnelse om {days} dagar.",bnever:"Visa aldrig igen"},I.th={msg:"\u0e40\u0e27\u0e47\u0e1a\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13 ({brow_name}) \u0e25\u0e49\u0e32\u0e2a\u0e21\u0e31\u0e22\u0e41\u0e25\u0e49\u0e27",msgmore:"\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e17\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e27\u0e32\u0e21\u0e1b\u0e25\u0e2d\u0e14\u0e20\u0e31\u0e22, \u0e04\u0e27\u0e32\u0e21\u0e40\u0e23\u0e47\u0e27 \u0e41\u0e25\u0e30\u0e1b\u0e23\u0e30\u0e2a\u0e1a\u0e01\u0e32\u0e23\u0e13\u0e4c\u0e17\u0e35\u0e48\u0e14\u0e35\u0e17\u0e35\u0e48\u0e2a\u0e38\u0e14\u0e1a\u0e19\u0e40\u0e27\u0e47\u0e1a\u0e44\u0e0b\u0e15\u0e4c\u0e19\u0e35\u0e49",bupdate:"\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e17\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c",bignore:"\u0e02\u0e49\u0e32\u0e21",remind:"\u0e04\u0e38\u0e13\u0e08\u0e30\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e43\u0e19 {days} \u0e27\u0e31\u0e19",bnever:"\u0e44\u0e21\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e41\u0e2a\u0e14\u0e07\u0e2d\u0e35\u0e01"},I.tr={msg:"Web taray\u0131c\u0131n\u0131z ({brow_name}) g\xfcncel de\u011fil.",msgmore:"Daha fazla g\xfcvenlik ve h\u0131z ile bu sitede en iyi deneyim i\xe7in taray\u0131c\u0131n\u0131z\u0131 g\xfcncelleyin.",bupdate:"Taray\u0131c\u0131y\u0131 g\xfcncelle",bignore:"Yok say",remind:"{days} g\xfcn sonra bir hat\u0131rlatma alacaks\u0131n\u0131z.",bnever:"Bir daha g\xf6sterme"},I.uk={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0437\u0430\u0441\u0442\u0430\u0440\u0456\u043b\u0438\u0439.",msgmore:"\u041e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043b\u044f \u0431\u0456\u043b\u044c\u0448\u043e\u0457 \u0431\u0435\u0437\u043f\u0435\u043a\u0438, \u0448\u0432\u0438\u0434\u043a\u043e\u0441\u0442\u0456 \u0442\u0430 \u043f\u043e\u0432\u043d\u043e\u0446\u0456\u043d\u043d\u043e\u0457 \u0440\u043e\u0431\u043e\u0442\u0438 \u0446\u044c\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0443.",bupdate:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0438",remind:"\u0412\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u0454\u0442\u0435 \u043d\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043d\u0456\u0432.",bnever:"\u0411\u0456\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438"},I.uz={msg:"Sizning ({brow_name}) veb-brauzeringiz eskirgan",msgmore:"Xavfsizlik, tezkorlik va ushbu sayt imkoniyatlaridan to`liq foydalanish uchun brauzeringizni yangilang.",bupdate:"Brauzeringizni yangilang",bignore:"E\u2019tibor bermaslik",remind:"Sizga {days} kundan so`ng eslatammiz.",bnever:"Hech qachon qayta ko'rsatmang"},I.vi={msg:"Tr\xecnh duy\u1ec7t web c\u1ee7a b\u1ea1n ({brow_name}) \u0111\xe3 l\u1ed7i th\u1eddi.",msgmore:"C\u1eadp nh\u1eadt tr\xecnh duy\u1ec7t c\u1ee7a b\u1ea1n \u0111\u1ec3 c\xf3 th\xeam b\u1ea3o m\u1eadt, t\u1ed1c \u0111\u1ed9 v\xe0 tr\u1ea3i nghi\u1ec7m t\u1ed1t nh\u1ea5t tr\xean trang web n\xe0y.",bupdate:"C\u1eadp nh\u1eadt tr\xecnh duy\u1ec7t",bignore:"B\u1ecf qua",remind:"B\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c nh\u1eafc nh\u1edf sau {days} ng\xe0y.",bnever:"Kh\xf4ng bao gi\u1edd hi\u1ec3n th\u1ecb l\u1ea1i"},I.zh={msg:"\u60a8\u7684\u7f51\u9875\u6d4f\u89c8\u5668\uff08{brow_name}\uff09\u5df2\u8fc7\u671f\u3002",msgmore:"\u66f4\u65b0\u60a8\u7684\u6d4f\u89c8\u5668\uff0c\u4ee5\u4fbf\u5728\u8be5\u7f51\u7ad9\u4e0a\u83b7\u5f97\u66f4\u5b89\u5168\u3001\u66f4\u5feb\u901f\u548c\u6700\u597d\u7684\u4f53\u9a8c\u3002",bupdate:"\u66f4\u65b0\u6d4f\u89c8\u5668",bignore:"\u5ffd\u7565",remind:"\u4f1a\u5728{days}\u5929\u540e\u63d0\u9192\u60a8\u3002",bnever:"\u4e0d\u518d\u663e\u793a"},I["zh-tw"]=I["zh-hans-cn"]={msg:"\u60a8\u7684\u7db2\u8def\u700f\u89bd\u5668\uff08{brow_name}\uff09\u5df2\u904e\u820a\u3002",msgmore:"\u66f4\u65b0\u60a8\u7684\u700f\u89bd\u5668\u4ee5\u7372\u5f97\u66f4\u4f73\u7684\u5b89\u5168\u6027\u3001\u901f\u5ea6\u4ee5\u53ca\u5728\u6b64\u7db2\u7ad9\u7684\u6700\u4f73\u9ad4\u9a57\u3002",bupdate:"\u66f4\u65b0\u700f\u89bd\u5668",bignore:"\u5ffd\u7565",remind:"\u60a8\u5c07\u5728 {days} \u5929\u5f8c\u6536\u5230\u63d0\u9192\u3002",bnever:"\u4e0d\u8981\u518d\u986f\u793a"};var V=z["text_for_"+re.n+"_in_"+z.ll]||z["text_for_"+re.n]||z["text_"+z.llfull]||z["text_in_"+z.ll]||z["text_"+z.ll]||z.text;if(I=R=I[z.llfull]||I[z.ll]||I.en,V)if("string"==typeof V)I=R=V;else for(var F in V)R[F]=V[F];R.msg&&(I='<b class="buorg-mainmsg">'+I.msg+'</b> <span class="buorg-moremsg">'+I.msgmore+'</span> <span class="buorg-buttons"><a{up_but}>'+I.bupdate+"</a> <a{ignore_but}>"+I.bignore+"</a></span>");var W="";z.newwindow&&(W=' target="_blank" rel="noopener"');var A=z.div=document.createElement("div");A.id=A.className="buorg";var P="<style>.buorg-icon {width: 22px; height: 16px; vertical-align: middle; position: relative; top: -0.05em; display: inline-block; background: no-repeat 0px center url(https://browser-update.org/static/img/small/"+re.n+".png);}</style>",v="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:center;  color:#000; background-color: #fff8ea; font: 18px Calibri,Helvetica,sans-serif; box-shadow: 0 0 5px rgba(0,0,0,0.2);animation: buorgfly 1s ease-out 0s;}.buorg-pad { padding: 9px;  line-height: 1.7em; }.buorg-buttons { display: block; text-align: center; }#buorgig,#buorgul,#buorgpermanent { color: #fff; text-decoration: none; cursor:pointer; box-shadow: 0 0 2px rgba(0,0,0,0.4); padding: 1px 10px; border-radius: 4px; font-weight: normal; background: #5ab400;    white-space: nowrap;    margin: 0 2px; display: inline-block;}#buorgig { background-color: #edbc68;}@media only screen and (max-width: 700px){.buorg div { padding:5px 12px 5px 9px; line-height: 1.3em;}}@keyframes buorgfly {from {opacity:0;transform:translateY(-50px)} to {opacity:1;transform:translateY(0px)}}.buorg-fadeout {transition: visibility 0s 8.5s, opacity 8s ease-out .5s;}</style>";R.msg&&("ar"==z.ll||"he"==z.ll||"fa"==z.ll)&&(v+="<style>.buorg {direction:RTL; unicode-bidi:embed;}</style>"),!R.msg&&I.indexOf&&-1!==I.indexOf("%s")?(I=function O(){for(var B=arguments,ae=B[0],he=1;he<B.length;++he)ae=ae.replace(/%s/,B[he]);return ae}(I,re.t,' id="buorgul" href="'+z.url+'"'+W),A.innerHTML="<div>"+I+'<div id="buorgclose"><a id="buorga">&times;</a></div></div>'+(P+="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer; color:#000; font: 13px Arial,sans-serif;color:#000;}.buorg div { padding:5px 36px 5px 40px; }.buorg>div>a,.buorg>div>a:visited{color:#E25600; text-decoration: underline;}#buorgclose{position:absolute;right:6px;top:0px;height:20px;width:12px;font:18px bold;padding:0;}#buorga{display:block;}@media only screen and (max-width: 700px){.buorg div { padding:5px 15px 5px 9px; }}</style>"),z.addmargin=!0):("bottom"===z.style?v+="<style>.buorg {bottom:0; top:auto; border-top:1px solid #A29330; } @keyframes buorgfly {from {opacity:0;transform:translateY(50px)} to {opacity:1;transform:translateY(0px)}}</style>":"corner"===z.style?v+="<style> .buorg { text-align: left; width:300px; top:50px; right:50px; left:auto; border:1px solid #A29330; } .buorg-buttons, .buorg-mainmsg, .buorg-moremsg { display: block; } .buorg-buttons a {margin: 4px 2px;} .buorg-icon {display: none;}</style>":z.addmargin=!0,I=I.replace("{brow_name}",re.t).replace("{up_but}",' id="buorgul" href="'+z.url+'"'+W).replace("{ignore_but}",' id="buorgig" role="button" tabindex="0"'),A.innerHTML='<div class="buorg-pad" role="status" aria-live="polite"><span class="buorg-icon"> </span>'+I+"</div>"+P+v),z.text=I,z.container?(z.container.appendChild(A),z.addmargin=!1):document.body.insertBefore(A,document.body.firstChild);var S=document.getElementById("buorgul");if(S&&(S.onclick=function(B){A.onclick=null,z.onclick(z),!z.noclose&&(z.setCookie(z.reminderClosed),z.noclose||(A.style.display="none",z.addmargin&&!1!==z.shift_page_down&&(E.style.marginTop=z.bodymt)))}),V||(A.style.cursor="pointer",A.onclick=function(){z.newwindow?window.open(z.url,"_blank"):window.location.href=z.url,z.setCookie(z.reminderClosed),z.onclick(z)}),z.addmargin&&!1!==z.shift_page_down){var E=document.getElementsByTagName("html")[0]||document.body;z.bodymt=E.style.marginTop,E.style.marginTop=A.clientHeight+"px"}var x=document.getElementById("buorga")||document.getElementById("buorgig");if(x&&(x.onclick=function(B){return A.onclick=null,z.onclose(z),z.addmargin&&!1!==z.shift_page_down&&(E.style.marginTop=z.bodymt),z.setCookie(z.reminderClosed),!z.no_permanent_hide&&R.bnever&&R.remind?(z.div.innerHTML='<div class="buorg-pad"><span class="buorg-moremsg">'+(z.reminderClosed>24?R.remind.replace("{days}",Math.round(z.reminderClosed/24)):"")+'</span> <span class="buorg-buttons"><a id="buorgpermanent" role="button" tabindex="0" href="'+z.url_permanent_hide+'"'+W+">"+R.bnever+"</a></span></div>"+P+v,A.className="buorg buorg-fadeout",document.getElementById("buorgpermanent").onclick=function(ae){z.setCookie(8760),z.div.style.display="none"},z.div.style.opacity=0,z.div.style.visibility="hidden",!1):(z.div.style.display="none",!1)},(z.noclose||0==z.reminderClosed)&&x.parentNode.removeChild(x)),z.onshow(z),z.test&&!z.dont_show_debuginfo){var H=document.createElement("script");H.src=z.domain+"/update.test.js",document.body.appendChild(H)}};
/*!
* @license
* 
* dhtmlxScheduler v.6.0.5 Standard
* 
* To use dhtmlxScheduler in non-GPL projects (and get Pro version of the product), please obtain Commercial/Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxScheduler/#licensing or contact us at sales@dhtmlx.com
* 
* (c) XB Software Ltd.
* 
*/!function(z,re){"object"==typeof exports&&"object"==typeof module?module.exports=re():"function"==typeof define&&define.amd?define("dhtmlxscheduler",[],re):"object"==typeof exports?exports.dhtmlxscheduler=re():z.dhtmlxscheduler=re()}(window,function(){return function(z){var re={};function q(O){if(re[O])return re[O].exports;var I=re[O]={i:O,l:!1,exports:{}};return z[O].call(I.exports,I,I.exports,q),I.l=!0,I.exports}return q.m=z,q.c=re,q.d=function(O,I,R){q.o(O,I)||Object.defineProperty(O,I,{enumerable:!0,get:R})},q.r=function(O){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},q.t=function(O,I){if(1&I&&(O=q(O)),8&I||4&I&&"object"==typeof O&&O&&O.__esModule)return O;var R=Object.create(null);if(q.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:O}),2&I&&"string"!=typeof O)for(var V in O)q.d(R,V,function(F){return O[F]}.bind(null,V));return R},q.n=function(O){var I=O&&O.__esModule?function(){return O.default}:function(){return O};return q.d(I,"a",I),I},q.o=function(O,I){return Object.prototype.hasOwnProperty.call(O,I)},q.p="/codebase/",q(q.s=9)}([function(z,re,q){"use strict";(function(O){var I;I=typeof window<"u"?window:O,re.a=I}).call(this,q(1))},function(z,re){function q(I){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(I)}var O;O=function(){return this}();try{O=O||new Function("return this")()}catch{"object"===(typeof window>"u"?"undefined":q(window))&&(O=window)}z.exports=O},function(z,re){z.exports=function(q){return function(){var O={};for(var I in this._events){var R=this._events[I];-1==R.id.toString().indexOf("#")&&(O[R.id]=R)}return O}.bind(q)}},function(z,re){z.exports=function(q){if("string"==typeof q||"number"==typeof q)return q;var O="";for(var I in q){var R="";q.hasOwnProperty(I)&&(R=I+"="+(R="string"==typeof q[I]?encodeURIComponent(q[I]):"number"==typeof q[I]?q[I]:encodeURIComponent(JSON.stringify(q[I]))),O.length&&(R="&"+R),O+=R)}return O}},function(z,re,q){"use strict";q.r(re)},function(z,re){var q,O,I=z.exports={};function R(){throw new Error("setTimeout has not been defined")}function V(){throw new Error("clearTimeout has not been defined")}function F(B){if(q===setTimeout)return setTimeout(B,0);if((q===R||!q)&&setTimeout)return q=setTimeout,setTimeout(B,0);try{return q(B,0)}catch{try{return q.call(null,B,0)}catch{return q.call(this,B,0)}}}!function(){try{q="function"==typeof setTimeout?setTimeout:R}catch{q=R}try{O="function"==typeof clearTimeout?clearTimeout:V}catch{O=V}}();var W,A=[],P=!1,v=-1;function S(){P&&W&&(P=!1,W.length?A=W.concat(A):v=-1,A.length&&E())}function E(){if(!P){var B=F(S);P=!0;for(var ae=A.length;ae;){for(W=A,A=[];++v<ae;)W&&W[v].run();v=-1,ae=A.length}W=null,P=!1,function(he){if(O===clearTimeout)return clearTimeout(he);if((O===V||!O)&&clearTimeout)return O=clearTimeout,clearTimeout(he);try{O(he)}catch{try{return O.call(null,he)}catch{return O.call(this,he)}}}(B)}}function x(B,ae){this.fun=B,this.array=ae}function H(){}I.nextTick=function(B){var ae=new Array(arguments.length-1);if(arguments.length>1)for(var he=1;he<arguments.length;he++)ae[he-1]=arguments[he];A.push(new x(B,ae)),1!==A.length||P||F(E)},x.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={},I.on=H,I.addListener=H,I.once=H,I.off=H,I.removeListener=H,I.removeAllListeners=H,I.emit=H,I.prependListener=H,I.prependOnceListener=H,I.listeners=function(B){return[]},I.binding=function(B){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(B){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},function(z,re,q){(function(O,I,R){var V,W,P;function A(P){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(P)}
/* @preserve
       * The MIT License (MIT)
       * 
       * Copyright (c) 2013-2018 Petka Antonov
       * 
       * Permission is hereby granted, free of charge, to any person obtaining a copy
       * of this software and associated documentation files (the "Software"), to deal
       * in the Software without restriction, including without limitation the rights
       * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       * copies of the Software, and to permit persons to whom the Software is
       * furnished to do so, subject to the following conditions:
       * 
       * The above copyright notice and this permission notice shall be included in
       * all copies or substantial portions of the Software.
       * 
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
       * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
       * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
       * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
       * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
       * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
       * THE SOFTWARE.
       * 
       */P=function(){return function E(x,H,B){function ae(G,U){if(!H[G]){if(!x[G]){var te="function"==typeof _dereq_&&_dereq_;if(!U&&te)return te(G,!0);if(he)return he(G,!0);var ne=new Error("Cannot find module '"+G+"'");throw ne.code="MODULE_NOT_FOUND",ne}var oe=H[G]={exports:{}};x[G][0].call(oe.exports,function(fe){return ae(x[G][1][fe]||fe)},oe,oe.exports,E,x,H,B)}return H[G].exports}for(var he="function"==typeof _dereq_&&_dereq_,de=0;de<B.length;de++)ae(B[de]);return ae}({1:[function(E,x,H){"use strict";var B;try{throw new Error}catch(te){B=te}var ae=E("./schedule"),he=E("./queue");function de(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new he(16),this._normalQueue=new he(16),this._haveDrainedQueues=!1;var te=this;this.drainQueues=function(){te._drainQueues()},this._schedule=ae}function G(te){for(;te.length()>0;)U(te)}function U(te){var ne=te.shift();if("function"!=typeof ne)ne._settlePromises();else{var oe=te.shift(),fe=te.shift();ne.call(oe,fe)}}de.prototype.setScheduler=function(te){var ne=this._schedule;return this._schedule=te,this._customScheduler=!0,ne},de.prototype.hasCustomScheduler=function(){return this._customScheduler},de.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},de.prototype.fatalError=function(te,ne){ne?(O.stderr.write("Fatal "+(te instanceof Error?te.stack:te)+"\n"),O.exit(2)):this.throwLater(te)},de.prototype.throwLater=function(te,ne){if(1===arguments.length&&(ne=te,te=function(){throw ne}),typeof setTimeout<"u")setTimeout(function(){te(ne)},0);else try{this._schedule(function(){te(ne)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},de.prototype.invokeLater=function(te,ne,oe){this._lateQueue.push(te,ne,oe),this._queueTick()},de.prototype.invoke=function(te,ne,oe){this._normalQueue.push(te,ne,oe),this._queueTick()},de.prototype.settlePromises=function(te){this._normalQueue._pushOne(te),this._queueTick()},de.prototype._drainQueues=function(){G(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,G(this._lateQueue)},de.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},de.prototype._reset=function(){this._isTickUsed=!1},x.exports=de,x.exports.firstLineError=B},{"./queue":17,"./schedule":18}],2:[function(E,x,H){"use strict";x.exports=function(B,ae,he,de){var G=!1,U=function(fe,Y){this._reject(Y)},te=function(fe,Y){Y.promiseRejectionQueued=!0,Y.bindingPromise._then(U,U,null,this,fe)},ne=function(fe,Y){0==(50397184&this._bitField)&&this._resolveCallback(Y.target)},oe=function(fe,Y){Y.promiseRejectionQueued||this._reject(fe)};B.prototype.bind=function(fe){G||(G=!0,B.prototype._propagateFrom=de.propagateFromFunction(),B.prototype._boundValue=de.boundValueFunction());var Y=he(fe),le=new B(ae);le._propagateFrom(this,1);var X=this._target();if(le._setBoundTo(Y),Y instanceof B){var $={promiseRejectionQueued:!1,promise:le,target:X,bindingPromise:Y};X._then(ae,te,void 0,le,$),Y._then(ne,oe,void 0,le,$),le._setOnCancel(Y)}else le._resolveCallback(X);return le},B.prototype._setBoundTo=function(fe){void 0!==fe?(this._bitField=2097152|this._bitField,this._boundTo=fe):this._bitField=-2097153&this._bitField},B.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},B.bind=function(fe,Y){return B.resolve(Y).bind(fe)}}},{}],3:[function(E,x,H){"use strict";var B;typeof Promise<"u"&&(B=Promise);var ae=E("./promise")();ae.noConflict=function(){try{Promise===ae&&(Promise=B)}catch{}return ae},x.exports=ae},{"./promise":15}],4:[function(E,x,H){"use strict";x.exports=function(B,ae,he,de){var G=E("./util"),U=G.tryCatch,te=G.errorObj,ne=B._async;B.prototype.break=B.prototype.cancel=function(){if(!de.cancellation())return this._warn("cancellation is disabled");for(var oe=this,fe=oe;oe._isCancellable();){if(!oe._cancelBy(fe)){fe._isFollowing()?fe._followee().cancel():fe._cancelBranched();break}var Y=oe._cancellationParent;if(null==Y||!Y._isCancellable()){oe._isFollowing()?oe._followee().cancel():oe._cancelBranched();break}oe._isFollowing()&&oe._followee().cancel(),oe._setWillBeCancelled(),fe=oe,oe=Y}},B.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},B.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},B.prototype._cancelBy=function(oe){return oe===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},B.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},B.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),ne.invoke(this._cancelPromises,this,void 0))},B.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},B.prototype._unsetOnCancel=function(){this._onCancelField=void 0},B.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},B.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},B.prototype._doInvokeOnCancel=function(oe,fe){if(G.isArray(oe))for(var Y=0;Y<oe.length;++Y)this._doInvokeOnCancel(oe[Y],fe);else if(void 0!==oe)if("function"==typeof oe){if(!fe){var le=U(oe).call(this._boundValue());le===te&&(this._attachExtraTrace(le.e),ne.throwLater(le.e))}}else oe._resultCancelled(this)},B.prototype._invokeOnCancel=function(){var oe=this._onCancel();this._unsetOnCancel(),ne.invoke(this._doInvokeOnCancel,this,oe)},B.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},B.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(E,x,H){"use strict";x.exports=function(B){var ae=E("./util"),he=E("./es5").keys,de=ae.tryCatch,G=ae.errorObj;return function(U,te,ne){return function(oe){var fe=ne._boundValue();e:for(var Y=0;Y<U.length;++Y){var le=U[Y];if(le===Error||null!=le&&le.prototype instanceof Error){if(oe instanceof le)return de(te).call(fe,oe)}else if("function"==typeof le){var X=de(le).call(fe,oe);if(X===G)return X;if(X)return de(te).call(fe,oe)}else if(ae.isObject(oe)){for(var $=he(le),we=0;we<$.length;++we){var ue=$[we];if(le[ue]!=oe[ue])continue e}return de(te).call(fe,oe)}}return B}}}},{"./es5":10,"./util":21}],6:[function(E,x,H){"use strict";x.exports=function(B){var ae=!1,he=[];function de(){this._trace=new de.CapturedTrace(G())}function G(){var U=he.length-1;if(U>=0)return he[U]}return B.prototype._promiseCreated=function(){},B.prototype._pushContext=function(){},B.prototype._popContext=function(){return null},B._peekContext=B.prototype._peekContext=function(){},de.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,he.push(this._trace))},de.prototype._popContext=function(){if(void 0!==this._trace){var U=he.pop(),te=U._promiseCreated;return U._promiseCreated=null,te}return null},de.CapturedTrace=null,de.create=function(){if(ae)return new de},de.deactivateLongStackTraces=function(){},de.activateLongStackTraces=function(){var U=B.prototype._pushContext,te=B.prototype._popContext,ne=B._peekContext,oe=B.prototype._peekContext,fe=B.prototype._promiseCreated;de.deactivateLongStackTraces=function(){B.prototype._pushContext=U,B.prototype._popContext=te,B._peekContext=ne,B.prototype._peekContext=oe,B.prototype._promiseCreated=fe,ae=!1},ae=!0,B.prototype._pushContext=de.prototype._pushContext,B.prototype._popContext=de.prototype._popContext,B._peekContext=B.prototype._peekContext=G,B.prototype._promiseCreated=function(){var Y=this._peekContext();Y&&null==Y._promiseCreated&&(Y._promiseCreated=this)}},de}},{}],7:[function(E,x,H){"use strict";x.exports=function(B,ae,he,de){var G,U,te,ne,oe=B._async,fe=E("./errors").Warning,Y=E("./util"),le=E("./es5"),X=Y.canAttachTrace,$=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,we=/\((?:timers\.js):\d+:\d+\)/,ue=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,ve=null,Ae=null,je=!1,Ye=0!=Y.env("BLUEBIRD_DEBUG"),ft=!(0==Y.env("BLUEBIRD_WARNINGS")||!Ye&&!Y.env("BLUEBIRD_WARNINGS")),Rt=!(0==Y.env("BLUEBIRD_LONG_STACK_TRACES")||!Ye&&!Y.env("BLUEBIRD_LONG_STACK_TRACES")),Ee=0!=Y.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(ft||!!Y.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){var He=[];function mt(){for(var at=0;at<He.length;++at)He[at]._notifyUnhandledRejection();Ce()}function Ce(){He.length=0}ne=function(at){He.push(at),setTimeout(mt,1)},le.defineProperty(B,"_unhandledRejectionCheck",{value:mt}),le.defineProperty(B,"_unhandledRejectionClear",{value:Ce})})(),B.prototype.suppressUnhandledRejections=function(){var He=this._target();He._bitField=-1048577&He._bitField|524288},B.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ne(this))},B.prototype._notifyUnhandledRejectionIsHandled=function(){ln("rejectionHandled",G,void 0,this)},B.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},B.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},B.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var He=this._settledValue();this._setUnhandledRejectionIsNotified(),ln("unhandledRejection",U,He,this)}},B.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},B.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},B.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},B.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},B.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},B.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},B.prototype._warn=function(He,mt,Ce){return Xt(He,mt,Ce||this)},B.onPossiblyUnhandledRejection=function(He){var mt=B._getContext();U=Y.contextBind(mt,He)},B.onUnhandledRejectionHandled=function(He){var mt=B._getContext();G=Y.contextBind(mt,He)};var Le=function(){};B.longStackTraces=function(){if(oe.haveItemsQueued()&&!dt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!dt.longStackTraces&&nn()){var He=B.prototype._captureStackTrace,mt=B.prototype._attachExtraTrace,Ce=B.prototype._dereferenceTrace;dt.longStackTraces=!0,Le=function(){if(oe.haveItemsQueued()&&!dt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");B.prototype._captureStackTrace=He,B.prototype._attachExtraTrace=mt,B.prototype._dereferenceTrace=Ce,ae.deactivateLongStackTraces(),dt.longStackTraces=!1},B.prototype._captureStackTrace=st,B.prototype._attachExtraTrace=Vt,B.prototype._dereferenceTrace=Qt,ae.activateLongStackTraces()}},B.hasLongStackTraces=function(){return dt.longStackTraces&&nn()};var ot={unhandledrejection:{before:function(){var He=Y.global.onunhandledrejection;return Y.global.onunhandledrejection=null,He},after:function(He){Y.global.onunhandledrejection=He}},rejectionhandled:{before:function(){var He=Y.global.onrejectionhandled;return Y.global.onrejectionhandled=null,He},after:function(He){Y.global.onrejectionhandled=He}}},yt=function(){var He=function(Ce,at){if(!Ce)return!Y.global.dispatchEvent(at);var St;try{return St=Ce.before(),!Y.global.dispatchEvent(at)}finally{Ce.after(St)}};try{if("function"==typeof CustomEvent){var mt=new CustomEvent("CustomEvent");return Y.global.dispatchEvent(mt),function(Ce,at){Ce=Ce.toLowerCase();var St=new CustomEvent(Ce,{detail:at,cancelable:!0});return le.defineProperty(St,"promise",{value:at.promise}),le.defineProperty(St,"reason",{value:at.reason}),He(ot[Ce],St)}}return"function"==typeof Event?(mt=new Event("CustomEvent"),Y.global.dispatchEvent(mt),function(Ce,at){Ce=Ce.toLowerCase();var St=new Event(Ce,{cancelable:!0});return St.detail=at,le.defineProperty(St,"promise",{value:at.promise}),le.defineProperty(St,"reason",{value:at.reason}),He(ot[Ce],St)}):((mt=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),Y.global.dispatchEvent(mt),function(Ce,at){Ce=Ce.toLowerCase();var St=document.createEvent("CustomEvent");return St.initCustomEvent(Ce,!1,!0,at),He(ot[Ce],St)})}catch{}return function(){return!1}}(),pt=Y.isNode?function(){return O.emit.apply(O,arguments)}:Y.global?function(He){var mt="on"+He.toLowerCase(),Ce=Y.global[mt];return!!Ce&&(Ce.apply(Y.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function Ve(He,mt){return{promise:mt}}var et={promiseCreated:Ve,promiseFulfilled:Ve,promiseRejected:Ve,promiseResolved:Ve,promiseCancelled:Ve,promiseChained:function(He,mt,Ce){return{promise:mt,child:Ce}},warning:function(He,mt){return{warning:mt}},unhandledRejection:function(He,mt,Ce){return{reason:mt,promise:Ce}},rejectionHandled:Ve},We=function(He){var mt=!1;try{mt=pt.apply(null,arguments)}catch(at){oe.throwLater(at),mt=!0}var Ce=!1;try{Ce=yt(He,et[He].apply(null,arguments))}catch(at){oe.throwLater(at),Ce=!0}return Ce||mt};function bt(){return!1}function xt(He,mt,Ce){var at=this;try{He(mt,Ce,function(St){if("function"!=typeof St)throw new TypeError("onCancel must be a function, got: "+Y.toString(St));at._attachCancellationCallback(St)})}catch(St){return St}}function Me(He){if(!this._isCancellable())return this;var mt=this._onCancel();void 0!==mt?Y.isArray(mt)?mt.push(He):this._setOnCancel([mt,He]):this._setOnCancel(He)}function Oe(){return this._onCancelField}function Fe(He){this._onCancelField=He}function Ge(){this._cancellationParent=void 0,this._onCancelField=void 0}function kt(He,mt){if(0!=(1&mt)){this._cancellationParent=He;var Ce=He._branchesRemainingToCancel;void 0===Ce&&(Ce=0),He._branchesRemainingToCancel=Ce+1}0!=(2&mt)&&He._isBound()&&this._setBoundTo(He._boundTo)}B.config=function(He){if("longStackTraces"in(He=Object(He))&&(He.longStackTraces?B.longStackTraces():!He.longStackTraces&&B.hasLongStackTraces()&&Le()),"warnings"in He){var mt=He.warnings;dt.warnings=!!mt,Ee=dt.warnings,Y.isObject(mt)&&"wForgottenReturn"in mt&&(Ee=!!mt.wForgottenReturn)}if("cancellation"in He&&He.cancellation&&!dt.cancellation){if(oe.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");B.prototype._clearCancellationData=Ge,B.prototype._propagateFrom=kt,B.prototype._onCancel=Oe,B.prototype._setOnCancel=Fe,B.prototype._attachCancellationCallback=Me,B.prototype._execute=xt,Ut=kt,dt.cancellation=!0}if("monitoring"in He&&(He.monitoring&&!dt.monitoring?(dt.monitoring=!0,B.prototype._fireEvent=We):!He.monitoring&&dt.monitoring&&(dt.monitoring=!1,B.prototype._fireEvent=bt)),"asyncHooks"in He&&Y.nodeSupportsAsyncResource){var at=!!He.asyncHooks;dt.asyncHooks!==at&&(dt.asyncHooks=at,at?he():de())}return B},B.prototype._fireEvent=bt,B.prototype._execute=function(He,mt,Ce){try{He(mt,Ce)}catch(at){return at}},B.prototype._onCancel=function(){},B.prototype._setOnCancel=function(He){},B.prototype._attachCancellationCallback=function(He){},B.prototype._captureStackTrace=function(){},B.prototype._attachExtraTrace=function(){},B.prototype._dereferenceTrace=function(){},B.prototype._clearCancellationData=function(){},B.prototype._propagateFrom=function(He,mt){};var Ut=function(He,mt){0!=(2&mt)&&He._isBound()&&this._setBoundTo(He._boundTo)};function Lt(){var He=this._boundTo;return void 0!==He&&He instanceof B?He.isFulfilled()?He.value():void 0:He}function st(){this._trace=new Un(this._peekContext())}function Vt(He,mt){if(X(He)){var Ce=this._trace;if(void 0!==Ce&&mt&&(Ce=Ce._parent),void 0!==Ce)Ce.attachExtraTrace(He);else if(!He.__stackCleaned__){var at=Nt(He);Y.notEnumerableProp(He,"stack",at.message+"\n"+at.stack.join("\n")),Y.notEnumerableProp(He,"__stackCleaned__",!0)}}}function Qt(){this._trace=void 0}function Xt(He,mt,Ce){if(dt.warnings){var at,St=new fe(He);if(mt)Ce._attachExtraTrace(St);else if(dt.longStackTraces&&(at=B._peekContext()))at.attachExtraTrace(St);else{var Je=Nt(St);St.stack=Je.message+"\n"+Je.stack.join("\n")}We("warning",St)||Bt(St,"",!0)}}function Wt(He){for(var mt=[],Ce=0;Ce<He.length;++Ce){var at=He[Ce],St="    (No stack trace)"===at||ve.test(at),Je=St&&Et(at);St&&!Je&&(je&&" "!==at.charAt(0)&&(at="    "+at),mt.push(at))}return mt}function Nt(He){var mt=He.stack,Ce=He.toString();return mt="string"==typeof mt&&mt.length>0?function(at){for(var St=at.stack.replace(/\s+$/g,"").split("\n"),Je=0;Je<St.length;++Je){var lt=St[Je];if("    (No stack trace)"===lt||ve.test(lt))break}return Je>0&&"SyntaxError"!=at.name&&(St=St.slice(Je)),St}(He):["    (No stack trace)"],{message:Ce,stack:"SyntaxError"==He.name?mt:Wt(mt)}}function Bt(He,mt,Ce){var at;typeof console<"u"&&(at=Y.isObject(He)?mt+Ae(He.stack,He):mt+String(He),"function"==typeof te?te(at,Ce):"function"!=typeof console.log&&"object"!==A(console.log)||console.log(at))}function ln(He,mt,Ce,at){var St=!1;try{"function"==typeof mt&&(St=!0,"rejectionHandled"===He?mt(at):mt(Ce,at))}catch(Je){oe.throwLater(Je)}"unhandledRejection"===He?We(He,Ce,at)||St||Bt(Ce,"Unhandled rejection "):We(He,at)}function Ft(He){var mt,Ce;if("function"==typeof He)mt="[function "+(He.name||"anonymous")+"]";else{if(mt=He&&"function"==typeof He.toString?He.toString():Y.toString(He),/\[object [a-zA-Z0-9$_]+\]/.test(mt))try{mt=JSON.stringify(He)}catch{}0===mt.length&&(mt="(empty array)")}return"(<"+((Ce=mt).length<41?Ce:Ce.substr(0,38)+"...")+">, no stack trace)"}function nn(){return"function"==typeof Dn}var Et=function(){return!1},Mt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Tn(He){var mt=He.match(Mt);if(mt)return{fileName:mt[1],line:parseInt(mt[2],10)}}function Un(He){this._parent=He,this._promisesCreated=0;var mt=this._length=1+(void 0===He?0:He._length);Dn(this,Un),mt>32&&this.uncycle()}Y.inherits(Un,Error),ae.CapturedTrace=Un,Un.prototype.uncycle=function(){var He=this._length;if(!(He<2)){for(var mt=[],Ce={},at=0,St=this;void 0!==St;++at)mt.push(St),St=St._parent;for(at=(He=this._length=at)-1;at>=0;--at){var Je=mt[at].stack;void 0===Ce[Je]&&(Ce[Je]=at)}for(at=0;at<He;++at){var lt=Ce[mt[at].stack];if(void 0!==lt&&lt!==at){lt>0&&(mt[lt-1]._parent=void 0,mt[lt-1]._length=1),mt[at]._parent=void 0,mt[at]._length=1;var De=at>0?mt[at-1]:this;lt<He-1?(De._parent=mt[lt+1],De._parent.uncycle(),De._length=De._parent._length+1):(De._parent=void 0,De._length=1);for(var It=De._length+1,qt=at-2;qt>=0;--qt)mt[qt]._length=It,It++;return}}}},Un.prototype.attachExtraTrace=function(He){if(!He.__stackCleaned__){this.uncycle();for(var mt=Nt(He),Ce=mt.message,at=[mt.stack],St=this;void 0!==St;)at.push(Wt(St.stack.split("\n"))),St=St._parent;(function(Je){for(var lt=Je[0],De=1;De<Je.length;++De){for(var It=Je[De],qt=lt.length-1,ge=lt[qt],vt=-1,Ct=It.length-1;Ct>=0;--Ct)if(It[Ct]===ge){vt=Ct;break}for(Ct=vt;Ct>=0&&lt[qt]===It[Ct];--Ct)lt.pop(),qt--;lt=It}})(at),function(Je){for(var lt=0;lt<Je.length;++lt)(0===Je[lt].length||lt+1<Je.length&&Je[lt][0]===Je[lt+1][0])&&(Je.splice(lt,1),lt--)}(at),Y.notEnumerableProp(He,"stack",function(Je,lt){for(var De=0;De<lt.length-1;++De)lt[De].push("From previous event:"),lt[De]=lt[De].join("\n");return De<lt.length&&(lt[De]=lt[De].join("\n")),Je+"\n"+lt.join("\n")}(Ce,at)),Y.notEnumerableProp(He,"__stackCleaned__",!0)}};var Dn=function(){var He=/^\s*at\s*/,mt=function(Je,lt){return"string"==typeof Je?Je:void 0!==lt.name&&void 0!==lt.message?lt.toString():Ft(lt)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,ve=He,Ae=mt;var Ce=Error.captureStackTrace;return Et=function(Je){return $.test(Je)},function(Je,lt){Error.stackTraceLimit+=6,Ce(Je,lt),Error.stackTraceLimit-=6}}var at,St=new Error;if("string"==typeof St.stack&&St.stack.split("\n")[0].indexOf("stackDetection@")>=0)return ve=/@/,Ae=mt,je=!0,function(Je){Je.stack=(new Error).stack};try{throw new Error}catch(Je){at="stack"in Je}return"stack"in St||!at||"number"!=typeof Error.stackTraceLimit?(Ae=function(Je,lt){return"string"==typeof Je?Je:"object"!==A(lt)&&"function"!=typeof lt||void 0===lt.name||void 0===lt.message?Ft(lt):lt.toString()},null):(ve=He,Ae=mt,function(Je){Error.stackTraceLimit+=6;try{throw new Error}catch(lt){Je.stack=lt.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&void 0!==console.warn&&(te=function(He){console.warn(He)},Y.isNode&&O.stderr.isTTY?te=function(He,mt){console.warn((mt?"\x1b[33m":"\x1b[31m")+He+"\x1b[0m\n")}:Y.isNode||"string"!=typeof(new Error).stack||(te=function(He,mt){console.warn("%c"+He,mt?"color: darkorange":"color: red")}));var dt={warnings:ft,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return Rt&&B.longStackTraces(),{asyncHooks:function(){return dt.asyncHooks},longStackTraces:function(){return dt.longStackTraces},warnings:function(){return dt.warnings},cancellation:function(){return dt.cancellation},monitoring:function(){return dt.monitoring},propagateFromFunction:function(){return Ut},boundValueFunction:function(){return Lt},checkForgottenReturns:function(He,mt,Ce,at,St){if(void 0===He&&null!==mt&&Ee){if(void 0!==St&&St._returnedNonUndefined()||0==(65535&at._bitField))return;Ce&&(Ce+=" ");var Je="",lt="";if(mt._trace){for(var De=mt._trace.stack.split("\n"),It=Wt(De),qt=It.length-1;qt>=0;--qt){var ge=It[qt];if(!we.test(ge)){var vt=ge.match(ue);vt&&(Je="at "+vt[1]+":"+vt[2]+":"+vt[3]+" ");break}}if(It.length>0){var Ct=It[0];for(qt=0;qt<De.length;++qt)if(De[qt]===Ct){qt>0&&(lt="\n"+De[qt-1]);break}}}at._warn("a promise was created in a "+Ce+"handler "+Je+"but was not returned from it, see http://goo.gl/rRqMUw"+lt,!0,mt)}},setBounds:function(He,mt){if(nn()){for(var Ce,at,St=(He.stack||"").split("\n"),Je=(mt.stack||"").split("\n"),lt=-1,De=-1,It=0;It<St.length;++It)if(qt=Tn(St[It])){Ce=qt.fileName,lt=qt.line;break}for(It=0;It<Je.length;++It){var qt;if(qt=Tn(Je[It])){at=qt.fileName,De=qt.line;break}}lt<0||De<0||!Ce||!at||Ce!==at||lt>=De||(Et=function(ge){if($.test(ge))return!0;var vt=Tn(ge);return!!(vt&&vt.fileName===Ce&&lt<=vt.line&&vt.line<=De)})}},warn:Xt,deprecated:function(He,mt){var Ce=He+" is deprecated and will be removed in a future version.";return mt&&(Ce+=" Use "+mt+" instead."),Xt(Ce)},CapturedTrace:Un,fireDomEvent:yt,fireGlobalEvent:pt}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(E,x,H){"use strict";x.exports=function(B){function ae(){return this.value}function he(){throw this.reason}B.prototype.return=B.prototype.thenReturn=function(de){return de instanceof B&&de.suppressUnhandledRejections(),this._then(ae,void 0,void 0,{value:de},void 0)},B.prototype.throw=B.prototype.thenThrow=function(de){return this._then(he,void 0,void 0,{reason:de},void 0)},B.prototype.catchThrow=function(de){if(arguments.length<=1)return this._then(void 0,he,void 0,{reason:de},void 0);var G=arguments[1];return this.caught(de,function(){throw G})},B.prototype.catchReturn=function(de){if(arguments.length<=1)return de instanceof B&&de.suppressUnhandledRejections(),this._then(void 0,ae,void 0,{value:de},void 0);var G=arguments[1];return G instanceof B&&G.suppressUnhandledRejections(),this.caught(de,function(){return G})}}},{}],9:[function(E,x,H){"use strict";var B,ae,he=E("./es5"),de=he.freeze,G=E("./util"),U=G.inherits,te=G.notEnumerableProp;function ne(Ae,je){function Ye(ft){if(!(this instanceof Ye))return new Ye(ft);te(this,"message","string"==typeof ft?ft:je),te(this,"name",Ae),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return U(Ye,Error),Ye}var oe=ne("Warning","warning"),fe=ne("CancellationError","cancellation error"),Y=ne("TimeoutError","timeout error"),le=ne("AggregateError","aggregate error");try{B=TypeError,ae=RangeError}catch{B=ne("TypeError","type error"),ae=ne("RangeError","range error")}for(var X="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),$=0;$<X.length;++$)"function"==typeof Array.prototype[X[$]]&&(le.prototype[X[$]]=Array.prototype[X[$]]);he.defineProperty(le.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),le.prototype.isOperational=!0;var we=0;function ue(Ae){if(!(this instanceof ue))return new ue(Ae);te(this,"name","OperationalError"),te(this,"message",Ae),this.cause=Ae,this.isOperational=!0,Ae instanceof Error?(te(this,"message",Ae.message),te(this,"stack",Ae.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}le.prototype.toString=function(){var Ae=Array(4*we+1).join(" "),je="\n"+Ae+"AggregateError of:\n";we++,Ae=Array(4*we+1).join(" ");for(var Ye=0;Ye<this.length;++Ye){for(var ft=this[Ye]===this?"[Circular AggregateError]":this[Ye]+"",Rt=ft.split("\n"),Ee=0;Ee<Rt.length;++Ee)Rt[Ee]=Ae+Rt[Ee];je+=(ft=Rt.join("\n"))+"\n"}return we--,je},U(ue,Error);var ve=Error.__BluebirdErrorTypes__;ve||(ve=de({CancellationError:fe,TimeoutError:Y,OperationalError:ue,RejectionError:ue,AggregateError:le}),he.defineProperty(Error,"__BluebirdErrorTypes__",{value:ve,writable:!1,enumerable:!1,configurable:!1})),x.exports={Error,TypeError:B,RangeError:ae,CancellationError:ve.CancellationError,OperationalError:ve.OperationalError,TimeoutError:ve.TimeoutError,AggregateError:ve.AggregateError,Warning:oe}},{"./es5":10,"./util":21}],10:[function(E,x,H){var B=function(){"use strict";return void 0===this}();if(B)x.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:B,propertyIsWritable:function(U,te){var ne=Object.getOwnPropertyDescriptor(U,te);return!(ne&&!ne.writable&&!ne.set)}};else{var ae={}.hasOwnProperty,he={}.toString,de={}.constructor.prototype,G=function(U){var te=[];for(var ne in U)ae.call(U,ne)&&te.push(ne);return te};x.exports={isArray:function(U){try{return"[object Array]"===he.call(U)}catch{return!1}},keys:G,names:G,defineProperty:function(U,te,ne){return U[te]=ne.value,U},getDescriptor:function(U,te){return{value:U[te]}},freeze:function(U){return U},getPrototypeOf:function(U){try{return Object(U).constructor.prototype}catch{return de}},isES5:B,propertyIsWritable:function(){return!0}}}},{}],11:[function(E,x,H){"use strict";x.exports=function(B,ae,he){var de=E("./util"),G=B.CancellationError,U=de.errorObj,te=E("./catch_filter")(he);function ne($,we,ue){this.promise=$,this.type=we,this.handler=ue,this.called=!1,this.cancelPromise=null}function oe($){this.finallyHandler=$}function fe($,we){return null!=$.cancelPromise&&(arguments.length>1?$.cancelPromise._reject(we):$.cancelPromise._cancel(),$.cancelPromise=null,!0)}function Y(){return X.call(this,this.promise._target()._settledValue())}function le($){if(!fe(this,$))return U.e=$,U}function X($){var we=this.promise,ue=this.handler;if(!this.called){this.called=!0;var ve=this.isFinallyHandler()?ue.call(we._boundValue()):ue.call(we._boundValue(),$);if(ve===he)return ve;if(void 0!==ve){we._setReturnedNonUndefined();var Ae=ae(ve,we);if(Ae instanceof B){if(null!=this.cancelPromise){if(Ae._isCancelled()){var je=new G("late cancellation observer");return we._attachExtraTrace(je),U.e=je,U}Ae.isPending()&&Ae._attachCancellationCallback(new oe(this))}return Ae._then(Y,le,void 0,this,void 0)}}}return we.isRejected()?(fe(this),U.e=$,U):(fe(this),$)}return ne.prototype.isFinallyHandler=function(){return 0===this.type},oe.prototype._resultCancelled=function(){fe(this.finallyHandler)},B.prototype._passThrough=function($,we,ue,ve){return"function"!=typeof $?this.then():this._then(ue,ve,void 0,new ne(this,we,$),void 0)},B.prototype.lastly=B.prototype.finally=function($){return this._passThrough($,0,X,X)},B.prototype.tap=function($){return this._passThrough($,1,X)},B.prototype.tapCatch=function($){var we=arguments.length;if(1===we)return this._passThrough($,1,void 0,X);var ue,ve=new Array(we-1),Ae=0;for(ue=0;ue<we-1;++ue){var je=arguments[ue];if(!de.isObject(je))return B.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+de.classString(je)));ve[Ae++]=je}ve.length=Ae;var Ye=arguments[ue];return this._passThrough(te(ve,Ye,this),1,void 0,X)},ne}},{"./catch_filter":5,"./util":21}],12:[function(E,x,H){"use strict";x.exports=function(B,ae,he,de,G){E("./util"),B.join=function(){var te,ne=arguments.length-1;ne>0&&"function"==typeof arguments[ne]&&(te=arguments[ne]);var oe=[].slice.call(arguments);te&&oe.pop();var fe=new ae(oe).promise();return void 0!==te?fe.spread(te):fe}}},{"./util":21}],13:[function(E,x,H){"use strict";x.exports=function(B,ae,he,de,G){var U=E("./util"),te=U.tryCatch;B.method=function(ne){if("function"!=typeof ne)throw new B.TypeError("expecting a function but got "+U.classString(ne));return function(){var oe=new B(ae);oe._captureStackTrace(),oe._pushContext();var fe=te(ne).apply(this,arguments),Y=oe._popContext();return G.checkForgottenReturns(fe,Y,"Promise.method",oe),oe._resolveFromSyncValue(fe),oe}},B.attempt=B.try=function(ne){if("function"!=typeof ne)return de("expecting a function but got "+U.classString(ne));var oe,fe=new B(ae);if(fe._captureStackTrace(),fe._pushContext(),arguments.length>1){G.deprecated("calling Promise.try with more than 1 argument");var Y=arguments[1],le=arguments[2];oe=U.isArray(Y)?te(ne).apply(le,Y):te(ne).call(le,Y)}else oe=te(ne)();var X=fe._popContext();return G.checkForgottenReturns(oe,X,"Promise.try",fe),fe._resolveFromSyncValue(oe),fe},B.prototype._resolveFromSyncValue=function(ne){ne===U.errorObj?this._rejectCallback(ne.e,!1):this._resolveCallback(ne,!0)}}},{"./util":21}],14:[function(E,x,H){"use strict";var B=E("./util"),ae=B.maybeWrapAsError,he=E("./errors").OperationalError,de=E("./es5"),G=/^(?:name|message|stack|cause)$/;function U(te){var ne,le;if((le=te)instanceof Error&&de.getPrototypeOf(le)===Error.prototype){(ne=new he(te)).name=te.name,ne.message=te.message,ne.stack=te.stack;for(var oe=de.keys(te),fe=0;fe<oe.length;++fe){var Y=oe[fe];G.test(Y)||(ne[Y]=te[Y])}return ne}return B.markAsOriginatingFromRejection(te),te}x.exports=function(te,ne){return function(oe,fe){if(null!==te){if(oe){var Y=U(ae(oe));te._attachExtraTrace(Y),te._reject(Y)}else if(ne){var le=[].slice.call(arguments,1);te._fulfill(le)}else te._fulfill(fe);te=null}}}},{"./errors":9,"./es5":10,"./util":21}],15:[function(E,x,H){"use strict";x.exports=function(){var B=function(){return new ue("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},ae=function(){return new We.PromiseInspection(this._target())},he=function(Oe){return We.reject(new ue(Oe))};function de(){}var G={},U=E("./util");U.setReflectHandler(ae);var te=function(){var Oe=O.domain;return void 0===Oe?null:Oe},ne=function(){return{domain:te(),async:null}},oe=U.isNode&&U.nodeSupportsAsyncResource?E("async_hooks").AsyncResource:null,fe=function(){return{domain:te(),async:new oe("Bluebird::Promise")}},Y=U.isNode?ne:function(){return null};U.notEnumerableProp(We,"_getContext",Y);var le=E("./es5"),X=E("./async"),$=new X;le.defineProperty(We,"_async",{value:$});var we=E("./errors"),ue=We.TypeError=we.TypeError;We.RangeError=we.RangeError;var ve=We.CancellationError=we.CancellationError;We.TimeoutError=we.TimeoutError,We.OperationalError=we.OperationalError,We.RejectionError=we.OperationalError,We.AggregateError=we.AggregateError;var Ae=function(){},je={},Ye={},ft=E("./thenables")(We,Ae),Rt=E("./promise_array")(We,Ae,ft,he,de),Ee=E("./context")(We),Le=E("./debuggability")(We,Ee,function(){Y=fe,U.notEnumerableProp(We,"_getContext",fe)},function(){Y=ne,U.notEnumerableProp(We,"_getContext",ne)}),ot=E("./finally")(We,ft,Ye),yt=E("./catch_filter")(Ye),pt=E("./nodeback"),Ve=U.errorObj,et=U.tryCatch;function We(Oe){Oe!==Ae&&function(Fe,Ge){if(null==Fe||Fe.constructor!==We)throw new ue("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof Ge)throw new ue("expecting a function but got "+U.classString(Ge))}(this,Oe),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(Oe),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function bt(Oe){this.promise._resolveCallback(Oe)}function xt(Oe){this.promise._rejectCallback(Oe,!1)}function Me(Oe){var Fe=new We(Ae);Fe._fulfillmentHandler0=Oe,Fe._rejectionHandler0=Oe,Fe._promise0=Oe,Fe._receiver0=Oe}return We.prototype.toString=function(){return"[object Promise]"},We.prototype.caught=We.prototype.catch=function(Oe){var Fe=arguments.length;if(Fe>1){var Ge,kt=new Array(Fe-1),Ut=0;for(Ge=0;Ge<Fe-1;++Ge){var Lt=arguments[Ge];if(!U.isObject(Lt))return he("Catch statement predicate: expecting an object but got "+U.classString(Lt));kt[Ut++]=Lt}if(kt.length=Ut,"function"!=typeof(Oe=arguments[Ge]))throw new ue("The last argument to .catch() must be a function, got "+U.toString(Oe));return this.then(void 0,yt(kt,Oe,this))}return this.then(void 0,Oe)},We.prototype.reflect=function(){return this._then(ae,ae,void 0,this,void 0)},We.prototype.then=function(Oe,Fe){if(Le.warnings()&&arguments.length>0&&"function"!=typeof Oe&&"function"!=typeof Fe){var Ge=".then() only accepts functions but was passed: "+U.classString(Oe);arguments.length>1&&(Ge+=", "+U.classString(Fe)),this._warn(Ge)}return this._then(Oe,Fe,void 0,void 0,void 0)},We.prototype.done=function(Oe,Fe){this._then(Oe,Fe,void 0,void 0,void 0)._setIsFinal()},We.prototype.spread=function(Oe){return"function"!=typeof Oe?he("expecting a function but got "+U.classString(Oe)):this.all()._then(Oe,void 0,void 0,je,void 0)},We.prototype.toJSON=function(){var Oe={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(Oe.fulfillmentValue=this.value(),Oe.isFulfilled=!0):this.isRejected()&&(Oe.rejectionReason=this.reason(),Oe.isRejected=!0),Oe},We.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new Rt(this).promise()},We.prototype.error=function(Oe){return this.caught(U.originatesFromRejection,Oe)},We.getNewLibraryCopy=x.exports,We.is=function(Oe){return Oe instanceof We},We.fromNode=We.fromCallback=function(Oe){var Fe=new We(Ae);Fe._captureStackTrace();var Ge=arguments.length>1&&!!Object(arguments[1]).multiArgs,kt=et(Oe)(pt(Fe,Ge));return kt===Ve&&Fe._rejectCallback(kt.e,!0),Fe._isFateSealed()||Fe._setAsyncGuaranteed(),Fe},We.all=function(Oe){return new Rt(Oe).promise()},We.cast=function(Oe){var Fe=ft(Oe);return Fe instanceof We||((Fe=new We(Ae))._captureStackTrace(),Fe._setFulfilled(),Fe._rejectionHandler0=Oe),Fe},We.resolve=We.fulfilled=We.cast,We.reject=We.rejected=function(Oe){var Fe=new We(Ae);return Fe._captureStackTrace(),Fe._rejectCallback(Oe,!0),Fe},We.setScheduler=function(Oe){if("function"!=typeof Oe)throw new ue("expecting a function but got "+U.classString(Oe));return $.setScheduler(Oe)},We.prototype._then=function(Oe,Fe,Ge,kt,Ut){var Lt=void 0!==Ut,st=Lt?Ut:new We(Ae),Vt=this._target(),Qt=Vt._bitField;Lt||(st._propagateFrom(this,3),st._captureStackTrace(),void 0===kt&&0!=(2097152&this._bitField)&&(kt=0!=(50397184&Qt)?this._boundValue():Vt===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,st));var Xt=Y();if(0!=(50397184&Qt)){var Wt,Nt,Bt=Vt._settlePromiseCtx;0!=(33554432&Qt)?(Nt=Vt._rejectionHandler0,Wt=Oe):0!=(16777216&Qt)?(Nt=Vt._fulfillmentHandler0,Wt=Fe,Vt._unsetRejectionIsUnhandled()):(Bt=Vt._settlePromiseLateCancellationObserver,Nt=new ve("late cancellation observer"),Vt._attachExtraTrace(Nt),Wt=Fe),$.invoke(Bt,Vt,{handler:U.contextBind(Xt,Wt),promise:st,receiver:kt,value:Nt})}else Vt._addCallbacks(Oe,Fe,st,kt,Xt);return st},We.prototype._length=function(){return 65535&this._bitField},We.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},We.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},We.prototype._setLength=function(Oe){this._bitField=-65536&this._bitField|65535&Oe},We.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},We.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},We.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},We.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},We.prototype._isFinal=function(){return(4194304&this._bitField)>0},We.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},We.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},We.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},We.prototype._setAsyncGuaranteed=function(){if(!$.hasCustomScheduler()){var Oe=this._bitField;this._bitField=Oe|(536870912&Oe)>>2^134217728}},We.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},We.prototype._receiverAt=function(Oe){var Fe=0===Oe?this._receiver0:this[4*Oe-4+3];if(Fe!==G)return void 0===Fe&&this._isBound()?this._boundValue():Fe},We.prototype._promiseAt=function(Oe){return this[4*Oe-4+2]},We.prototype._fulfillmentHandlerAt=function(Oe){return this[4*Oe-4+0]},We.prototype._rejectionHandlerAt=function(Oe){return this[4*Oe-4+1]},We.prototype._boundValue=function(){},We.prototype._migrateCallback0=function(Oe){var Fe=Oe._fulfillmentHandler0,Ge=Oe._rejectionHandler0,kt=Oe._promise0,Ut=Oe._receiverAt(0);void 0===Ut&&(Ut=G),this._addCallbacks(Fe,Ge,kt,Ut,null)},We.prototype._migrateCallbackAt=function(Oe,Fe){var Ge=Oe._fulfillmentHandlerAt(Fe),kt=Oe._rejectionHandlerAt(Fe),Ut=Oe._promiseAt(Fe),Lt=Oe._receiverAt(Fe);void 0===Lt&&(Lt=G),this._addCallbacks(Ge,kt,Ut,Lt,null)},We.prototype._addCallbacks=function(Oe,Fe,Ge,kt,Ut){var Lt=this._length();if(Lt>=65531&&(Lt=0,this._setLength(0)),0===Lt)this._promise0=Ge,this._receiver0=kt,"function"==typeof Oe&&(this._fulfillmentHandler0=U.contextBind(Ut,Oe)),"function"==typeof Fe&&(this._rejectionHandler0=U.contextBind(Ut,Fe));else{var st=4*Lt-4;this[st+2]=Ge,this[st+3]=kt,"function"==typeof Oe&&(this[st+0]=U.contextBind(Ut,Oe)),"function"==typeof Fe&&(this[st+1]=U.contextBind(Ut,Fe))}return this._setLength(Lt+1),Lt},We.prototype._proxy=function(Oe,Fe){this._addCallbacks(void 0,void 0,Fe,Oe,null)},We.prototype._resolveCallback=function(Oe,Fe){if(0==(117506048&this._bitField)){if(Oe===this)return this._rejectCallback(B(),!1);var Ge=ft(Oe,this);if(!(Ge instanceof We))return this._fulfill(Oe);Fe&&this._propagateFrom(Ge,2);var kt=Ge._target();if(kt!==this){var Ut=kt._bitField;if(0==(50397184&Ut)){var Lt=this._length();Lt>0&&kt._migrateCallback0(this);for(var st=1;st<Lt;++st)kt._migrateCallbackAt(this,st);this._setFollowing(),this._setLength(0),this._setFollowee(Ge)}else if(0!=(33554432&Ut))this._fulfill(kt._value());else if(0!=(16777216&Ut))this._reject(kt._reason());else{var Vt=new ve("late cancellation observer");kt._attachExtraTrace(Vt),this._reject(Vt)}}else this._reject(B())}},We.prototype._rejectCallback=function(Oe,Fe,Ge){var kt=U.ensureErrorObject(Oe),Ut=kt===Oe;if(!Ut&&!Ge&&Le.warnings()){var Lt="a promise was rejected with a non-error: "+U.classString(Oe);this._warn(Lt,!0)}this._attachExtraTrace(kt,!!Fe&&Ut),this._reject(Oe)},We.prototype._resolveFromExecutor=function(Oe){if(Oe!==Ae){var Fe=this;this._captureStackTrace(),this._pushContext();var Ge=!0,kt=this._execute(Oe,function(Ut){Fe._resolveCallback(Ut)},function(Ut){Fe._rejectCallback(Ut,Ge)});Ge=!1,this._popContext(),void 0!==kt&&Fe._rejectCallback(kt,!0)}},We.prototype._settlePromiseFromHandler=function(Oe,Fe,Ge,kt){var Ut=kt._bitField;if(0==(65536&Ut)){var Lt;kt._pushContext(),Fe===je?Ge&&"number"==typeof Ge.length?Lt=et(Oe).apply(this._boundValue(),Ge):(Lt=Ve).e=new ue("cannot .spread() a non-array: "+U.classString(Ge)):Lt=et(Oe).call(Fe,Ge);var st=kt._popContext();0==(65536&(Ut=kt._bitField))&&(Lt===Ye?kt._reject(Ge):Lt===Ve?kt._rejectCallback(Lt.e,!1):(Le.checkForgottenReturns(Lt,st,"",kt,this),kt._resolveCallback(Lt)))}},We.prototype._target=function(){for(var Oe=this;Oe._isFollowing();)Oe=Oe._followee();return Oe},We.prototype._followee=function(){return this._rejectionHandler0},We.prototype._setFollowee=function(Oe){this._rejectionHandler0=Oe},We.prototype._settlePromise=function(Oe,Fe,Ge,kt){var Ut=Oe instanceof We,Lt=this._bitField,st=0!=(134217728&Lt);0!=(65536&Lt)?(Ut&&Oe._invokeInternalOnCancel(),Ge instanceof ot&&Ge.isFinallyHandler()?(Ge.cancelPromise=Oe,et(Fe).call(Ge,kt)===Ve&&Oe._reject(Ve.e)):Fe===ae?Oe._fulfill(ae.call(Ge)):Ge instanceof de?Ge._promiseCancelled(Oe):Ut||Oe instanceof Rt?Oe._cancel():Ge.cancel()):"function"==typeof Fe?Ut?(st&&Oe._setAsyncGuaranteed(),this._settlePromiseFromHandler(Fe,Ge,kt,Oe)):Fe.call(Ge,kt,Oe):Ge instanceof de?Ge._isResolved()||(0!=(33554432&Lt)?Ge._promiseFulfilled(kt,Oe):Ge._promiseRejected(kt,Oe)):Ut&&(st&&Oe._setAsyncGuaranteed(),0!=(33554432&Lt)?Oe._fulfill(kt):Oe._reject(kt))},We.prototype._settlePromiseLateCancellationObserver=function(Oe){var Fe=Oe.handler,Ge=Oe.promise,kt=Oe.receiver,Ut=Oe.value;"function"==typeof Fe?Ge instanceof We?this._settlePromiseFromHandler(Fe,kt,Ut,Ge):Fe.call(kt,Ut,Ge):Ge instanceof We&&Ge._reject(Ut)},We.prototype._settlePromiseCtx=function(Oe){this._settlePromise(Oe.promise,Oe.handler,Oe.receiver,Oe.value)},We.prototype._settlePromise0=function(Oe,Fe,Ge){var kt=this._promise0,Ut=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(kt,Oe,Ut,Fe)},We.prototype._clearCallbackDataAtIndex=function(Oe){var Fe=4*Oe-4;this[Fe+2]=this[Fe+3]=this[Fe+0]=this[Fe+1]=void 0},We.prototype._fulfill=function(Oe){var Fe=this._bitField;if(!((117506048&Fe)>>>16)){if(Oe===this){var Ge=B();return this._attachExtraTrace(Ge),this._reject(Ge)}this._setFulfilled(),this._rejectionHandler0=Oe,(65535&Fe)>0&&(0!=(134217728&Fe)?this._settlePromises():$.settlePromises(this),this._dereferenceTrace())}},We.prototype._reject=function(Oe){var Fe=this._bitField;if(!((117506048&Fe)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=Oe,this._isFinal())return $.fatalError(Oe,U.isNode);(65535&Fe)>0?$.settlePromises(this):this._ensurePossibleRejectionHandled()}},We.prototype._fulfillPromises=function(Oe,Fe){for(var Ge=1;Ge<Oe;Ge++){var kt=this._fulfillmentHandlerAt(Ge),Ut=this._promiseAt(Ge),Lt=this._receiverAt(Ge);this._clearCallbackDataAtIndex(Ge),this._settlePromise(Ut,kt,Lt,Fe)}},We.prototype._rejectPromises=function(Oe,Fe){for(var Ge=1;Ge<Oe;Ge++){var kt=this._rejectionHandlerAt(Ge),Ut=this._promiseAt(Ge),Lt=this._receiverAt(Ge);this._clearCallbackDataAtIndex(Ge),this._settlePromise(Ut,kt,Lt,Fe)}},We.prototype._settlePromises=function(){var Oe=this._bitField,Fe=65535&Oe;if(Fe>0){if(0!=(16842752&Oe)){var Ge=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,Ge,Oe),this._rejectPromises(Fe,Ge)}else{var kt=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,kt,Oe),this._fulfillPromises(Fe,kt)}this._setLength(0)}this._clearCancellationData()},We.prototype._settledValue=function(){var Oe=this._bitField;return 0!=(33554432&Oe)?this._rejectionHandler0:0!=(16777216&Oe)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&le.defineProperty(We.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),We.defer=We.pending=function(){return Le.deprecated("Promise.defer","new Promise"),{promise:new We(Ae),resolve:bt,reject:xt}},U.notEnumerableProp(We,"_makeSelfResolutionError",B),E("./method")(We,Ae,ft,he,Le),E("./bind")(We,Ae,ft,Le),E("./cancel")(We,Rt,he,Le),E("./direct_resolve")(We),E("./synchronous_inspection")(We),E("./join")(We,Rt,ft,Ae,$),We.Promise=We,We.version="3.7.2",U.toFastProperties(We),U.toFastProperties(We.prototype),Me({a:1}),Me({b:2}),Me({c:3}),Me(1),Me(function(){}),Me(void 0),Me(!1),Me(new We(Ae)),Le.setBounds(X.firstLineError,U.lastLineError),We}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21,async_hooks:void 0}],16:[function(E,x,H){"use strict";x.exports=function(B,ae,he,de,G){var U=E("./util");function te(ne){var oe=this._promise=new B(ae);ne instanceof B&&(oe._propagateFrom(ne,3),ne.suppressUnhandledRejections()),oe._setOnCancel(this),this._values=ne,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return U.inherits(te,G),te.prototype.length=function(){return this._length},te.prototype.promise=function(){return this._promise},te.prototype._init=function ne(oe,fe){var Y=he(this._values,this._promise);if(Y instanceof B){var le=(Y=Y._target())._bitField;if(this._values=Y,0==(50397184&le))return this._promise._setAsyncGuaranteed(),Y._then(ne,this._reject,void 0,this,fe);if(0==(33554432&le))return 0!=(16777216&le)?this._reject(Y._reason()):this._cancel();Y=Y._value()}if(null!==(Y=U.asArray(Y)))0!==Y.length?this._iterate(Y):-5===fe?this._resolveEmptyArray():this._resolve(function($){switch($){case-2:return[];case-3:return{};case-6:return new Map}}(fe));else{var X=de("expecting an array or an iterable object but got "+U.classString(Y)).reason();this._promise._rejectCallback(X,!1)}},te.prototype._iterate=function(ne){var oe=this.getActualLength(ne.length);this._length=oe,this._values=this.shouldCopyValues()?new Array(oe):this._values;for(var fe=this._promise,Y=!1,le=null,X=0;X<oe;++X){var $=he(ne[X],fe);le=$ instanceof B?($=$._target())._bitField:null,Y?null!==le&&$.suppressUnhandledRejections():null!==le?0==(50397184&le)?($._proxy(this,X),this._values[X]=$):Y=0!=(33554432&le)?this._promiseFulfilled($._value(),X):0!=(16777216&le)?this._promiseRejected($._reason(),X):this._promiseCancelled(X):Y=this._promiseFulfilled($,X)}Y||fe._setAsyncGuaranteed()},te.prototype._isResolved=function(){return null===this._values},te.prototype._resolve=function(ne){this._values=null,this._promise._fulfill(ne)},te.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},te.prototype._reject=function(ne){this._values=null,this._promise._rejectCallback(ne,!1)},te.prototype._promiseFulfilled=function(ne,oe){return this._values[oe]=ne,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},te.prototype._promiseCancelled=function(){return this._cancel(),!0},te.prototype._promiseRejected=function(ne){return this._totalResolved++,this._reject(ne),!0},te.prototype._resultCancelled=function(){if(!this._isResolved()){var ne=this._values;if(this._cancel(),ne instanceof B)ne.cancel();else for(var oe=0;oe<ne.length;++oe)ne[oe]instanceof B&&ne[oe].cancel()}},te.prototype.shouldCopyValues=function(){return!0},te.prototype.getActualLength=function(ne){return ne},te}},{"./util":21}],17:[function(E,x,H){"use strict";function B(ae){this._capacity=ae,this._length=0,this._front=0}B.prototype._willBeOverCapacity=function(ae){return this._capacity<ae},B.prototype._pushOne=function(ae){var he=this.length();this._checkCapacity(he+1),this[this._front+he&this._capacity-1]=ae,this._length=he+1},B.prototype.push=function(ae,he,de){var G=this.length()+3;if(this._willBeOverCapacity(G))return this._pushOne(ae),this._pushOne(he),void this._pushOne(de);var U=this._front+G-3;this._checkCapacity(G);var te=this._capacity-1;this[U+0&te]=ae,this[U+1&te]=he,this[U+2&te]=de,this._length=G},B.prototype.shift=function(){var ae=this._front,he=this[ae];return this[ae]=void 0,this._front=ae+1&this._capacity-1,this._length--,he},B.prototype.length=function(){return this._length},B.prototype._checkCapacity=function(ae){this._capacity<ae&&this._resizeTo(this._capacity<<1)},B.prototype._resizeTo=function(ae){var he=this._capacity;this._capacity=ae,function(de,G,U,te,ne){for(var oe=0;oe<ne;++oe)U[oe+te]=de[oe+0],de[oe+0]=void 0}(this,0,this,he,this._front+this._length&he-1)},x.exports=B},{}],18:[function(E,x,H){"use strict";var B,te,ne,oe,fe,ae=E("./util"),he=ae.getNativePromise();if(ae.isNode&&typeof MutationObserver>"u"){var de=I.setImmediate,G=O.nextTick;B=ae.isRecentNode?function(te){de.call(I,te)}:function(te){G.call(O,te)}}else if("function"==typeof he&&"function"==typeof he.resolve){var U=he.resolve();B=function(te){U.then(te)}}else B=typeof MutationObserver<"u"&&(typeof window>"u"||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(te=document.createElement("div"),ne={attributes:!0},oe=!1,fe=document.createElement("div"),new MutationObserver(function(){te.classList.toggle("foo"),oe=!1}).observe(fe,ne),function(Y){var le=new MutationObserver(function(){le.disconnect(),Y()});le.observe(te,ne),oe||(oe=!0,fe.classList.toggle("foo"))}):void 0!==R?function(te){R(te)}:typeof setTimeout<"u"?function(te){setTimeout(te,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};x.exports=B},{"./util":21}],19:[function(E,x,H){"use strict";x.exports=function(B){function ae(oe){void 0!==oe?(oe=oe._target(),this._bitField=oe._bitField,this._settledValueField=oe._isFateSealed()?oe._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}ae.prototype._settledValue=function(){return this._settledValueField};var he=ae.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},de=ae.prototype.error=ae.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},G=ae.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},U=ae.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},te=ae.prototype.isPending=function(){return 0==(50397184&this._bitField)},ne=ae.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};ae.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},B.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},B.prototype._isCancelled=function(){return this._target().__isCancelled()},B.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},B.prototype.isPending=function(){return te.call(this._target())},B.prototype.isRejected=function(){return U.call(this._target())},B.prototype.isFulfilled=function(){return G.call(this._target())},B.prototype.isResolved=function(){return ne.call(this._target())},B.prototype.value=function(){return he.call(this._target())},B.prototype.reason=function(){var oe=this._target();return oe._unsetRejectionIsUnhandled(),de.call(oe)},B.prototype._value=function(){return this._settledValue()},B.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},B.PromiseInspection=ae}},{}],20:[function(E,x,H){"use strict";x.exports=function(B,ae){var he=E("./util"),de=he.errorObj,G=he.isObject,U={}.hasOwnProperty;return function(te,ne){if(G(te)){if(te instanceof B)return te;var oe=function(Y){try{return(le=Y).then}catch(le){return de.e=le,de}var le}(te);if(oe===de){ne&&ne._pushContext();var fe=B.reject(oe.e);return ne&&ne._popContext(),fe}if("function"==typeof oe)return function(Y){try{return U.call(Y,"_promise0")}catch{return!1}}(te)?(fe=new B(ae),te._then(fe._fulfill,fe._reject,void 0,fe,null),fe):function(Y,le,X){var $=new B(ae),we=$;X&&X._pushContext(),$._captureStackTrace(),X&&X._popContext();var ue=!0,ve=he.tryCatch(le).call(Y,function(Ae){$&&($._resolveCallback(Ae),$=null)},function(Ae){$&&($._rejectCallback(Ae,ue,!0),$=null)});return ue=!1,$&&ve===de&&($._rejectCallback(ve.e,!0,!0),$=null),we}(te,oe,ne)}return te}}},{"./util":21}],21:[function(E,x,H){"use strict";var de,B=E("./es5"),ae=typeof navigator>"u",he={e:{}},G=typeof self<"u"?self:typeof window<"u"?window:void 0!==I?I:void 0!==this?this:null;function U(){try{var st=de;return de=null,st.apply(this,arguments)}catch(Vt){return he.e=Vt,he}}function oe(st){return null==st||!0===st||!1===st||"string"==typeof st||"number"==typeof st}function $(st,Vt,Qt){return oe(st)||B.defineProperty(st,Vt,{value:Qt,configurable:!0,enumerable:!1,writable:!0}),st}var ue=function(){var st=[Array.prototype,Object.prototype,Function.prototype],Vt=function(Wt){for(var Nt=0;Nt<st.length;++Nt)if(st[Nt]===Wt)return!0;return!1};if(B.isES5){var Qt=Object.getOwnPropertyNames;return function(Wt){for(var Nt=[],Bt=Object.create(null);null!=Wt&&!Vt(Wt);){var ln;try{ln=Qt(Wt)}catch{return Nt}for(var Ft=0;Ft<ln.length;++Ft){var nn=ln[Ft];if(!Bt[nn]){Bt[nn]=!0;var Et=Object.getOwnPropertyDescriptor(Wt,nn);null!=Et&&null==Et.get&&null==Et.set&&Nt.push(nn)}}Wt=B.getPrototypeOf(Wt)}return Nt}}var Xt={}.hasOwnProperty;return function(Wt){if(Vt(Wt))return[];var Nt=[];e:for(var Bt in Wt)if(Xt.call(Wt,Bt))Nt.push(Bt);else{for(var ln=0;ln<st.length;++ln)if(Xt.call(st[ln],Bt))continue e;Nt.push(Bt)}return Nt}}(),ve=/this\s*\.\s*\S+\s*=/,Ye=/^[a-z$_][a-z$_0-9]*$/i;function Ee(st){try{return st+""}catch{return"[no string representation]"}}function Le(st){return st instanceof Error||null!==st&&"object"===A(st)&&"string"==typeof st.message&&"string"==typeof st.name}function pt(st){return Le(st)&&B.propertyIsWritable(st,"stack")}var Ve="stack"in new Error?function(st){return pt(st)?st:new Error(Ee(st))}:function(st){if(pt(st))return st;try{throw new Error(Ee(st))}catch(Vt){return Vt}};function et(st){return{}.toString.call(st)}var bt=function(st){return B.isArray(st)?st:null};if(typeof Symbol<"u"&&Symbol.iterator){var xt="function"==typeof Array.from?function(st){return Array.from(st)}:function(st){for(var Vt,Qt=[],Xt=st[Symbol.iterator]();!(Vt=Xt.next()).done;)Qt.push(Vt.value);return Qt};bt=function(st){return B.isArray(st)?st:null!=st&&"function"==typeof st[Symbol.iterator]?xt(st):null}}var Fe,st,Me=void 0!==O&&"[object process]"===et(O).toLowerCase(),Oe=void 0!==O&&void 0!==O.env,Lt={setReflectHandler:function(st){Fe=st},isClass:function Ae(st){try{if("function"==typeof st){var Vt=B.names(st.prototype),Qt=B.isES5&&Vt.length>1,Xt=Vt.length>0&&!(1===Vt.length&&"constructor"===Vt[0]),Wt=ve.test(st+"")&&B.names(st).length>0;if(Qt||Xt||Wt)return!0}return!1}catch{return!1}},isIdentifier:function ft(st){return Ye.test(st)},inheritedDataKeys:ue,getDataPropertyOrDefault:function X(st,Vt,Qt){if(!B.isES5)return{}.hasOwnProperty.call(st,Vt)?st[Vt]:void 0;var Xt=Object.getOwnPropertyDescriptor(st,Vt);return null!=Xt?null==Xt.get&&null==Xt.set?Xt.value:Qt:void 0},thrower:function we(st){throw st},isArray:B.isArray,asArray:bt,notEnumerableProp:$,isPrimitive:oe,isObject:function fe(st){return"function"==typeof st||"object"===A(st)&&null!==st},isError:Le,canEvaluate:ae,errorObj:he,tryCatch:function te(st){return de=st,U},inherits:function(st,Vt){var Qt={}.hasOwnProperty;function Xt(){for(var Wt in this.constructor=st,this.constructor$=Vt,Vt.prototype)Qt.call(Vt.prototype,Wt)&&"$"!==Wt.charAt(Wt.length-1)&&(this[Wt+"$"]=Vt.prototype[Wt])}return Xt.prototype=Vt.prototype,st.prototype=new Xt,st.prototype},withAppended:function le(st,Vt){var Qt,Xt=st.length,Wt=new Array(Xt+1);for(Qt=0;Qt<Xt;++Qt)Wt[Qt]=st[Qt];return Wt[Qt]=Vt,Wt},maybeWrapAsError:function Y(st){return oe(st)?new Error(Ee(st)):st},toFastProperties:function je(st){function Vt(){}Vt.prototype=st;var Qt=new Vt;function Xt(){return A(Qt.foo)}return Xt(),Xt(),st},filledRange:function Rt(st,Vt,Qt){for(var Xt=new Array(st),Wt=0;Wt<st;++Wt)Xt[Wt]=Vt+Wt+Qt;return Xt},toString:Ee,canAttachTrace:pt,ensureErrorObject:Ve,originatesFromRejection:function yt(st){return null!=st&&(st instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===st.isOperational)},markAsOriginatingFromRejection:function ot(st){try{$(st,"isOperational",!0)}catch{}},classString:et,copyDescriptors:function We(st,Vt,Qt){for(var Xt=B.names(st),Wt=0;Wt<Xt.length;++Wt){var Nt=Xt[Wt];if(Qt(Nt))try{B.defineProperty(Vt,Nt,B.getDescriptor(st,Nt))}catch{}}},isNode:Me,hasEnvVariables:Oe,env:function Ge(st){return Oe?O.env[st]:void 0},global:G,getNativePromise:function kt(){if("function"==typeof Promise)try{if("[object Promise]"===et(new Promise(function(){})))return Promise}catch{}},contextBind:function Ut(st,Vt){if(null===st||"function"!=typeof Vt||Vt===Fe)return Vt;null!==st.domain&&(Vt=st.domain.bind(Vt));var Qt=st.async;if(null!==Qt){var Xt=Vt;Vt=function(){var Wt=new Array(2).concat([].slice.call(arguments));return Wt[0]=Xt,Wt[1]=this,Qt.runInAsyncScope.apply(Qt,Wt)}}return Vt}};Lt.isRecentNode=Lt.isNode&&(O.versions&&O.versions.node?st=O.versions.node.split(".").map(Number):O.version&&(st=O.version.split(".").map(Number)),0===st[0]&&st[1]>10||st[0]>0),Lt.nodeSupportsAsyncResource=Lt.isNode&&function(){var st=!1;try{st="function"==typeof E("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{st=!1}return st}(),Lt.isNode&&Lt.toFastProperties(O);try{throw new Error}catch(st){Lt.lastLineError=st}x.exports=Lt},{"./es5":10,async_hooks:void 0}]},{},[3])(3)},"object"==A(re)&&void 0!==z?z.exports=P():void 0===(W="function"==typeof(V=P)?V.apply(re,[]):V)||(z.exports=W),typeof window<"u"&&null!==window?window.P=window.Promise:typeof self<"u"&&null!==self&&(self.P=self.Promise)}).call(this,q(5),q(1),q(7).setImmediate)},function(z,re,q){(function(O){var I=void 0!==O&&O||typeof self<"u"&&self||window,R=Function.prototype.apply;function V(F,W){this._id=F,this._clearFn=W}re.setTimeout=function(){return new V(R.call(setTimeout,I,arguments),clearTimeout)},re.setInterval=function(){return new V(R.call(setInterval,I,arguments),clearInterval)},re.clearTimeout=re.clearInterval=function(F){F&&F.close()},V.prototype.unref=V.prototype.ref=function(){},V.prototype.close=function(){this._clearFn.call(I,this._id)},re.enroll=function(F,W){clearTimeout(F._idleTimeoutId),F._idleTimeout=W},re.unenroll=function(F){clearTimeout(F._idleTimeoutId),F._idleTimeout=-1},re._unrefActive=re.active=function(F){clearTimeout(F._idleTimeoutId);var W=F._idleTimeout;W>=0&&(F._idleTimeoutId=setTimeout(function(){F._onTimeout&&F._onTimeout()},W))},q(8),re.setImmediate=typeof self<"u"&&self.setImmediate||void 0!==O&&O.setImmediate||this&&this.setImmediate,re.clearImmediate=typeof self<"u"&&self.clearImmediate||void 0!==O&&O.clearImmediate||this&&this.clearImmediate}).call(this,q(1))},function(z,re,q){(function(O,I){!function(R,V){"use strict";if(!R.setImmediate){var F,W=1,A={},P=!1,v=R.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(R);S=S&&S.setTimeout?S:R,"[object process]"==={}.toString.call(R.process)?F=function(H){I.nextTick(function(){x(H)})}:function(){if(R.postMessage&&!R.importScripts){var H=!0,B=R.onmessage;return R.onmessage=function(){H=!1},R.postMessage("","*"),R.onmessage=B,H}}()?(H="setImmediate$"+Math.random()+"$",B=function(ae){ae.source===R&&"string"==typeof ae.data&&0===ae.data.indexOf(H)&&x(+ae.data.slice(H.length))},R.addEventListener?R.addEventListener("message",B,!1):R.attachEvent("onmessage",B),F=function(ae){R.postMessage(H+ae,"*")}):R.MessageChannel?function(){var H=new MessageChannel;H.port1.onmessage=function(B){x(B.data)},F=function(B){H.port2.postMessage(B)}}():v&&"onreadystatechange"in v.createElement("script")?function(){var H=v.documentElement;F=function(B){var ae=v.createElement("script");ae.onreadystatechange=function(){x(B),ae.onreadystatechange=null,H.removeChild(ae),ae=null},H.appendChild(ae)}}():F=function(H){setTimeout(x,0,H)},S.setImmediate=function(H){"function"!=typeof H&&(H=new Function(""+H));for(var B=new Array(arguments.length-1),ae=0;ae<B.length;ae++)B[ae]=arguments[ae+1];var he={callback:H,args:B};return A[W]=he,F(W),W++},S.clearImmediate=E}var H,B;function E(H){delete A[H]}function x(H){if(P)setTimeout(x,0,H);else{var B=A[H];if(B){P=!0;try{!function(ae){var he=ae.callback,de=ae.args;switch(de.length){case 0:he();break;case 1:he(de[0]);break;case 2:he(de[0],de[1]);break;case 3:he(de[0],de[1],de[2]);break;default:he.apply(void 0,de)}}(B)}finally{E(H),P=!1}}}}}(typeof self>"u"?void 0===O?this:O:self)}).call(this,q(1),q(5))},function(z,re,q){"use strict";q.r(re),q.d(re,"scheduler",function(){return Wn}),q.d(re,"Scheduler",function(){return ti});var O=q(0);q(4);var F=function(){function u(){(function(ee,y){if(!(ee instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u),this._silent_mode=!1,this.listeners={}}return ee=u,(y=[{key:"_silentStart",value:function(){this._silent_mode=!0}},{key:"_silentEnd",value:function(){this._silent_mode=!1}}])&&function V(u,ee){for(var y=0;y<ee.length;y++){var N=ee[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}(ee.prototype,y),Object.defineProperty(ee,"prototype",{writable:!1}),u;var ee,y}(),A=function(u){var ee=new F;u.attachEvent=function(y,N,C){y="ev_"+y.toLowerCase(),ee.listeners[y]||(ee.listeners[y]=function(u){var ee={},y=0,N=function(){var C=!0;for(var c in ee){var m=ee[c].apply(u,arguments);C=C&&m}return C};return N.addEvent=function(C,c){if("function"==typeof C){var m;if(c&&c.id?m=c.id:(m=y,y++),c&&c.once){var w=C;C=function(){w(),N.removeEvent(m)}}return ee[m]=C,m}return!1},N.removeEvent=function(C){delete ee[C]},N.clear=function(){ee={}},N}(this)),C&&C.thisObject&&(N=N.bind(C.thisObject));var c=y+":"+ee.listeners[y].addEvent(N,C);return C&&C.id&&(c=C.id),c},u.attachAll=function(y){this.attachEvent("listen_all",y)},u.callEvent=function(y,N){if(ee._silent_mode)return!0;var C="ev_"+y.toLowerCase(),c=ee.listeners;return c.ev_listen_all&&c.ev_listen_all.apply(this,[y].concat(N)),!c[C]||c[C].apply(this,N)},u.checkEvent=function(y){return!!ee.listeners["ev_"+y.toLowerCase()]},u.detachEvent=function(y){if(y){var N=ee.listeners;for(var C in N)N[C].removeEvent(y);var c=y.split(":");if(N=ee.listeners,2===c.length){var m=c[0];N[m]&&N[m].removeEvent(c[1])}}},u.detachAllEvents=function(){for(var y in ee.listeners)ee.listeners[y].clear()}};function P(u){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}var v={event:function(u,ee,y){u.addEventListener?u.addEventListener(ee,y,!1):u.attachEvent&&u.attachEvent("on"+ee,y)},eventRemove:function(u,ee,y){u.removeEventListener?u.removeEventListener(ee,y,!1):u.detachEvent&&u.detachEvent("on"+ee,y)}};function E(u){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function x(u){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function H(u){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}var B=Date.now();function ae(u){return!(!u||"object"!==H(u)||!(u.getFullYear&&u.getMonth&&u.getDate))}var he={uid:function(){return B++},mixin:function(u,ee,y){for(var N in ee)(void 0===u[N]||y)&&(u[N]=ee[N]);return u},copy:function u(ee){var y,N,c;if(ee&&"object"==H(ee))switch(!0){case ae(ee):N=new Date(ee);break;case c=ee,Array.isArray?Array.isArray(c):c&&void 0!==c.length&&c.pop&&c.push:for(N=new Array(ee.length),y=0;y<ee.length;y++)N[y]=u(ee[y]);break;case function(c){return c&&"object"===H(c)&&"function String() { [native code] }"===Function.prototype.toString.call(c.constructor)}(ee):N=new String(ee);break;case function(c){return c&&"object"===H(c)&&"function Number() { [native code] }"===Function.prototype.toString.call(c.constructor)}(ee):N=new Number(ee);break;case function(c){return c&&"object"===H(c)&&"function Boolean() { [native code] }"===Function.prototype.toString.call(c.constructor)}(ee):N=new Boolean(ee);break;default:for(y in N={},ee){var C=H(ee[y]);"string"===C||"number"===C||"boolean"===C?N[y]=ee[y]:ae(ee[y])?N[y]=new Date(ee[y]):Object.prototype.hasOwnProperty.apply(ee,[y])&&(N[y]=u(ee[y]))}}return N||ee},defined:function(u){return void 0!==u},isDate:ae};function de(u){if(!u)return"";var ee=u.className||"";return ee.baseVal&&(ee=ee.baseVal),ee.indexOf||(ee=""),ee||""}function G(u,ee,y){void 0===y&&(y=!0);for(var N=u.target||u.srcElement,C="";N;){if(C=de(N)){var c=C.indexOf(ee);if(c>=0){if(!y)return N;var m=0===c||!(C.charAt(c-1)||"").trim(),w=c+ee.length>=C.length||!C.charAt(c+ee.length).trim();if(m&&w)return N}}N=N.parentNode}return null}function U(u){var ee=!1,y=!1;if(window.getComputedStyle){var N=window.getComputedStyle(u,null);ee=N.display,y=N.visibility}else u.currentStyle&&(ee=u.currentStyle.display,y=u.currentStyle.visibility);var C=!1,c=G({target:u},"dhx_form_repeat",!1);return c&&(C="0px"==c.style.height),C=C||!u.offsetHeight,"none"!=ee&&"hidden"!=y&&!C}function te(u){return!isNaN(u.getAttribute("tabindex"))&&1*u.getAttribute("tabindex")>=0}function ne(u){return!{a:!0,area:!0}[u.nodeName.loLowerCase()]||!!u.getAttribute("href")}function oe(u){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[u.nodeName.toLowerCase()]||!u.hasAttribute("disabled")}function fe(){return document.head.createShadowRoot||document.head.attachShadow}function Y(u){if(!u||!fe())return document.body;for(;u.parentNode&&(u=u.parentNode);)if(u instanceof ShadowRoot)return u.host;return document.body}var le,X={getAbsoluteLeft:function(u){return this.getOffset(u).left},getAbsoluteTop:function(u){return this.getOffset(u).top},getOffsetSum:function(u){for(var ee=0,y=0;u;)ee+=parseInt(u.offsetTop),y+=parseInt(u.offsetLeft),u=u.offsetParent;return{top:ee,left:y}},getOffsetRect:function(u){var ee=u.getBoundingClientRect(),y=0,N=0;if(/Mobi/.test(navigator.userAgent)){var C=document.createElement("div");C.style.position="absolute",C.style.left="0px",C.style.top="0px",C.style.width="1px",C.style.height="1px",document.body.appendChild(C);var c=C.getBoundingClientRect();y=ee.top-c.top,N=ee.left-c.left,C.parentNode.removeChild(C)}else{var m=document.body,w=document.documentElement,T=window.pageYOffset||w.scrollTop||m.scrollTop,j=window.pageXOffset||w.scrollLeft||m.scrollLeft;y=ee.top+T-(w.clientTop||m.clientTop||0),N=ee.left+j-(w.clientLeft||m.clientLeft||0)}return{top:Math.round(y),left:Math.round(N)}},getOffset:function(u){return u.getBoundingClientRect?this.getOffsetRect(u):this.getOffsetSum(u)},closest:function(u,ee){return u&&ee?le(u,ee):null},insertAfter:function(u,ee){ee.nextSibling?ee.parentNode.insertBefore(u,ee.nextSibling):ee.parentNode.appendChild(u)},remove:function(u){u&&u.parentNode&&u.parentNode.removeChild(u)},getFocusableNodes:function(u){for(var ee=u.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),y=Array.prototype.slice.call(ee,0),N=0;N<y.length;N++)y[N].$position=N;for(y.sort(function(c,m){return 0===c.tabIndex&&0!==m.tabIndex?1:0!==c.tabIndex&&0===m.tabIndex?-1:c.tabIndex===m.tabIndex?c.$position-m.$position:c.tabIndex<m.tabIndex?-1:1}),N=0;N<y.length;N++){var C=y[N];(te(C)||oe(C)||ne(C))&&U(C)||(y.splice(N,1),N--)}return y},getClassName:de,locateCss:G,getRootNode:Y,hasShadowParent:function(u){return!!Y(u)},isShadowDomSupported:fe,getActiveElement:function(){var u=document.activeElement;return u.shadowRoot&&(u=u.shadowRoot.activeElement),u===document.body&&document.getSelection&&(u=document.getSelection().focusNode||document.body),u},getRelativeEventPosition:function(u,ee){var y=document.documentElement,N=function(C){var c=0,m=0,w=0,T=0;if(C.getBoundingClientRect){var j=C.getBoundingClientRect(),J=document.body,M=document.documentElement||document.body.parentNode||document.body,Z=window.pageYOffset||M.scrollTop||J.scrollTop,K=window.pageXOffset||M.scrollLeft||J.scrollLeft;c=j.top+Z-(M.clientTop||J.clientTop||0),m=j.left+K-(M.clientLeft||J.clientLeft||0),w=document.body.offsetWidth-j.right,T=document.body.offsetHeight-j.bottom}else{for(;C;)c+=parseInt(C.offsetTop,10),m+=parseInt(C.offsetLeft,10),C=C.offsetParent;w=document.body.offsetWidth-C.offsetWidth-m,T=document.body.offsetHeight-C.offsetHeight-c}return{y:Math.round(c),x:Math.round(m),width:C.offsetWidth,height:C.offsetHeight,right:Math.round(w),bottom:Math.round(T)}}(ee);return{x:u.clientX+y.scrollLeft-y.clientLeft-N.x+ee.scrollLeft,y:u.clientY+y.scrollTop-y.clientTop-N.y+ee.scrollTop}}};if(Element.prototype.closest)le=function(u,ee){return u.closest(ee)};else{var $=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;le=function(u,ee){var y=u;do{if($.call(y,ee))return y;y=y.parentElement||y.parentNode}while(null!==y&&1===y.nodeType);return null}}var we=typeof window<"u",ue={isIE:we&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:we&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:we&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:we&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:we&&navigator.userAgent.indexOf("Opera")>=0,isChrome:we&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:we&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:we&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:we&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:we&&-1!=navigator.userAgent.indexOf("Edge"),isNode:!we||typeof navigator>"u"},ve=q(6).Promise,Ae=q(3),je=q.n(Ae);function Ye(u){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function Rt(u){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function Ee(u){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}var Le=q(2),ot=q.n(Le);function yt(u){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function We(u){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function bt(u){return this.serverProcessor=u,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),A(this),this}function xt(u){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}bt.prototype={setTransactionMode:function(u,ee){"object"==We(u)?(this._tMode=u.mode||this._tMode,void 0!==u.headers&&(this._headers=u.headers),void 0!==u.payload&&(this._payload=u.payload),this._tSend=!!ee):(this._tMode=u,this._tSend=ee),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"===this._tMode||"REST-JSON"===this._tMode?(this._tSend=!1,this._endnm=!0,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),"CUSTOM"===this._tMode&&(this._tSend=!1,this._endnm=!0,this._router=u.router)},escape:function(u){function ee(y){return u.apply(this,arguments)}return ee.toString=function(){return u.toString()},ee}(function(u){return this._utf?encodeURIComponent(u):escape(u)}),enableUTFencoding:function(u){this._utf=!!u},setDataColumns:function(u){this._columns="string"==typeof u?u.split(","):u},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(u){this._endnm=!!u},enablePartialDataSend:function(u){this._changed=!!u},setUpdateMode:function(u,ee){this.autoUpdate="cell"==u,this.updateMode=u,this.dnd=ee},ignore:function(u,ee){this._silent_mode=!0,u.call(ee||window),this._silent_mode=!1},setUpdated:function(u,ee,y){if(!this._silent_mode){var N=this.findRow(u);y=y||"updated";var C=this.$scheduler.getUserData(u,this.action_param);C&&"updated"==y&&(y=C),ee?(this.set_invalid(u,!1),this.updatedRows[N]=u,this.$scheduler.setUserData(u,this.action_param,y),this._in_progress[u]&&(this._in_progress[u]="wait")):this.is_invalid(u)||(this.updatedRows.splice(N,1),this.$scheduler.setUserData(u,this.action_param,"")),this.markRow(u,ee,y),ee&&this.autoUpdate&&this.sendData(u)}},markRow:function(u,ee,y){var N="",C=this.is_invalid(u);if(C&&(N=this.styles[C],ee=!0),this.callEvent("onRowMark",[u,ee,y,C])&&(this.$scheduler[this._methods[0]](u,N=this.styles[ee?y:"clear"]+N),C&&C.details)){N+=this.styles[C+"_cell"];for(var c=0;c<C.details.length;c++)C.details[c]&&this.$scheduler[this._methods[1]](u,c,N)}},getActionByState:function(u){return"inserted"===u?"create":"updated"===u?"update":"deleted"===u?"delete":"update"},getState:function(u){return this.$scheduler.getUserData(u,this.action_param)},is_invalid:function(u){return this._invalid[u]},set_invalid:function(u,ee,y){y&&(ee={value:ee,details:y,toString:function(){return this.value.toString()}}),this._invalid[u]=ee},checkBeforeUpdate:function(u){return!0},sendData:function(u){return this.$scheduler.editStop&&this.$scheduler.editStop(),void 0===u||this._tSend?this.sendAllData():!this._in_progress[u]&&(this.messages=[],!(!this.checkBeforeUpdate(u)&&this.callEvent("onValidationError",[u,this.messages]))&&void this._beforeSendData(this._getRowData(u),u))},_beforeSendData:function(u,ee){if(!this.callEvent("onBeforeUpdate",[ee,this.getState(ee),u]))return!1;this._sendData(u,ee)},serialize:function(u,ee){if(this._serializeAsJson)return this._serializeAsJSON(u);if("string"==typeof u)return u;if(void 0!==ee)return this.serialize_one(u,"");var y=[],N=[];for(var C in u)u.hasOwnProperty(C)&&(y.push(this.serialize_one(u[C],C+this.post_delim)),N.push(C));return y.push("ids="+this.escape(N.join(","))),this.$scheduler.security_key&&y.push("dhx_security="+this.$scheduler.security_key),y.join("&")},serialize_one:function(u,ee){if("string"==typeof u)return u;var y=[],N="";for(var C in u)if(u.hasOwnProperty(C)){if(("id"==C||C==this.action_param)&&"REST"==this._tMode)continue;N="string"==typeof u[C]||"number"==typeof u[C]?u[C]:JSON.stringify(u[C]),y.push(this.escape((ee||"")+C)+"="+this.escape(N))}return y.join("&")},_applyPayload:function(u){var ee=this.$scheduler.ajax;if(this._payload)for(var y in this._payload)u=u+ee.urlSeparator(u)+this.escape(y)+"="+this.escape(this._payload[y]);return u},_sendData:function(u,ee){if(u){if(!this.callEvent("onBeforeDataSending",ee?[ee,this.getState(ee),u]:[null,null,u]))return!1;ee&&(this._in_progress[ee]=(new Date).valueOf());var y=this,N=this.$scheduler.ajax;if("CUSTOM"!==this._tMode){var C,c={callback:function(ce){var _e=[];if(ee)_e.push(ee);else if(u)for(var xe in u)_e.push(xe);return y.afterUpdate(y,ce,_e)},headers:y._headers},m=this.serverProcessor+(this._user?N.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.$scheduler.getUserData(0,"version")].join("&"):""),w=this._applyPayload(m);switch(this._tMode){case"GET":C=this._cleanupArgumentsBeforeSend(u),c.url=w+N.urlSeparator(w)+this.serialize(C,ee),c.method="GET";break;case"POST":C=this._cleanupArgumentsBeforeSend(u),c.url=w,c.method="POST",c.data=this.serialize(C,ee);break;case"JSON":C={};var T=this._cleanupItemBeforeSend(u);for(var j in T)j!==this.action_param&&"id"!==j&&"gr_id"!==j&&(C[j]=T[j]);c.url=w,c.method="POST",c.data=JSON.stringify({id:ee,action:u[this.action_param],data:C});break;case"REST":case"REST-JSON":switch(w=m.replace(/(&|\?)editing=true/,""),C="",this.getState(ee)){case"inserted":c.method="POST",c.data=this.serialize(u,ee);break;case"deleted":c.method="DELETE",w=w+("/"===w.slice(-1)?"":"/")+ee;break;default:c.method="PUT",c.data=this.serialize(u,ee),w=w+("/"===w.slice(-1)?"":"/")+ee}c.url=this._applyPayload(w)}return this._waitMode++,N.query(c)}var J,M=this.getState(ee),Z=this.getActionByState(M),K=function(ce){var _e=M;if(ce&&ce.responseText&&ce.setRequestHeader){200!==ce.status&&(_e="error");try{ce=JSON.parse(ce.responseText)}catch{}}_e=_e||"updated";var xe=ee,Pe=ee;ce&&(_e=ce.action||_e,xe=ce.sid||xe,Pe=ce.id||ce.tid||Pe),y.afterUpdateCallback(xe,Pe,_e,ce)};if(this._router instanceof Function)J=this._router("event",Z,u,ee);else switch(M){case"inserted":J=this._router.event.create(u);break;case"deleted":J=this._router.event.delete(ee);break;default:J=this._router.event.update(u,ee)}if(J){if(!J.then&&void 0===J.id&&void 0===J.tid&&void 0===J.action)throw new Error("Incorrect router return value. A Promise or a response object is expected");J.then?J.then(K).catch(function(ce){K(ce&&ce.action?ce:{action:"error",value:ce})}):K(J)}else K(null)}},sendAllData:function(){if(this.updatedRows.length&&"off"!==this.updateMode){this.messages=[];var u=!0;if(this._forEachUpdatedRow(function(ee){u=u&&this.checkBeforeUpdate(ee)}),!u&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(ee){if(!this._in_progress[ee]){if(this.is_invalid(ee))return;this._beforeSendData(this._getRowData(ee),ee)}})}},_getAllData:function(u){var ee={},y=!1;return this._forEachUpdatedRow(function(N){if(!this._in_progress[N]&&!this.is_invalid(N)){var C=this._getRowData(N);this.callEvent("onBeforeUpdate",[N,this.getState(N),C])&&(ee[N]=C,y=!0,this._in_progress[N]=(new Date).valueOf())}}),y?ee:null},findRow:function(u){var ee=0;for(ee=0;ee<this.updatedRows.length&&u!=this.updatedRows[ee];ee++);return ee},defineAction:function(u,ee){this._uActions||(this._uActions={}),this._uActions[u]=ee},afterUpdateCallback:function(u,ee,y,N){if(this.$scheduler){var C=u,c="error"!==y&&"invalid"!==y;if(c||this.set_invalid(u,y),this._uActions&&this._uActions[y]&&!this._uActions[y](N))return delete this._in_progress[C];"wait"!==this._in_progress[C]&&this.setUpdated(u,!1);var m=u;switch(y){case"inserted":case"insert":ee!=u&&(this.setUpdated(u,!1),this.$scheduler[this._methods[2]](u,ee),u=ee);break;case"delete":case"deleted":return this.$scheduler.setUserData(u,this.action_param,"true_deleted"),this.$scheduler[this._methods[3]](u,ee),delete this._in_progress[C],this.callEvent("onAfterUpdate",[u,y,ee,N])}"wait"!==this._in_progress[C]?(c&&this.$scheduler.setUserData(u,this.action_param,""),delete this._in_progress[C]):(delete this._in_progress[C],this.setUpdated(ee,!0,this.$scheduler.getUserData(u,this.action_param))),this.callEvent("onAfterUpdate",[m,y,ee,N])}},_errorResponse:function(u,ee){return this.$scheduler&&this.$scheduler.callEvent&&this.$scheduler.callEvent("onSaveError",[ee,u.xmlDoc]),this.cleanUpdate(ee)},_setDefaultTransactionMode:function(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!==this.serverProcessor.indexOf("?")?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)},afterUpdate:function(u,ee,y){var N=this.$scheduler.ajax;if(200===ee.xmlDoc.status){var C;try{C=JSON.parse(ee.xmlDoc.responseText)}catch{ee.xmlDoc.responseText.length||(C={})}if(C){var c=C.action||this.getState(y)||"updated",m=C.sid||y[0],w=C.tid||y[0];return u.afterUpdateCallback(m,w,c,C),void u.finalizeUpdate()}var T=N.xmltop("data",ee.xmlDoc);if(!T)return this._errorResponse(ee,y);var j=N.xpath("//data/action",T);if(!j.length)return this._errorResponse(ee,y);for(var J=0;J<j.length;J++){var M=j[J];c=M.getAttribute("type"),m=M.getAttribute("sid"),w=M.getAttribute("tid"),u.afterUpdateCallback(m,w,c,M)}u.finalizeUpdate()}else this._errorResponse(ee,y)},cleanUpdate:function(u){if(u)for(var ee=0;ee<u.length;ee++)delete this._in_progress[u[ee]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(u){if(!this._initialized){this.$scheduler=u,this.$scheduler._dp_init&&this.$scheduler._dp_init(this),this._setDefaultTransactionMode(),this._methods=this._methods||["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],N=this,(y=this.$scheduler)._validId=function(C){return!this._is_virtual_event||!this._is_virtual_event(C)},y.setUserData=function(C,c,m){if(C){var w=this.getEvent(C);w&&(w[c]=m)}else this._userdata[c]=m},y.getUserData=function(C,c){if(C){var m=this.getEvent(C);return m?m[c]:null}return this._userdata[c]},y._set_event_text_style=function(C,c){if(y.getEvent(C)){this.for_rendered(C,function(w){w.style.cssText+=";"+c});var m=this.getEvent(C);m._text_style=c,this.event_updated(m)}},y._update_callback=function(C,c){var m=y._xmlNodeToJSON(C.firstChild);"none"==m.rec_type&&(m.rec_pattern="none"),m.text=m.text||m._tagvalue,m.start_date=y._helpers.parseDate(m.start_date),m.end_date=y._helpers.parseDate(m.end_date),y.addEvent(m),y._add_rec_marker&&y.setCurrentView()},y._dp_change_event_id=function(C,c){y.getEvent(C)&&y.changeEventId(C,c)},y._dp_hook_delete=function(C,c){if(y.getEvent(C))return c&&C!=c&&("true_deleted"==this.getUserData(C,N.action_param)&&this.setUserData(C,N.action_param,"updated"),this.changeEventId(C,c)),this.deleteEvent(c,!0)},y.setDp=function(){this._dp=N},y.setDp();var ee=new function(y,N){this.$scheduler=y,this.$dp=N,this._dataProcessorHandlers=[],this.attach=function(){var C=this.$dp,c=this.$scheduler;this._dataProcessorHandlers.push(c.attachEvent("onEventAdded",function(m){!this._loading&&this._validId(m)&&C.setUpdated(m,!0,"inserted")})),this._dataProcessorHandlers.push(c.attachEvent("onConfirmedBeforeEventDelete",function(m){if(this._validId(m)){var w=C.getState(m);return"inserted"==w||this._new_event?(C.setUpdated(m,!1),!0):"deleted"!=w&&("true_deleted"==w||(C.setUpdated(m,!0,"deleted"),!1))}})),this._dataProcessorHandlers.push(c.attachEvent("onEventChanged",function(m){!this._loading&&this._validId(m)&&C.setUpdated(m,!0,"updated")})),this._dataProcessorHandlers.push(c.attachEvent("onClearAll",function(){C._in_progress={},C._invalid={},C.updatedRows=[],C._waitMode=0})),C.attachEvent("insertCallback",c._update_callback),C.attachEvent("updateCallback",c._update_callback),C.attachEvent("deleteCallback",function(m,w){c.getEvent(w)?(c.setUserData(w,this.action_param,"true_deleted"),c.deleteEvent(w)):c._add_rec_marker&&c._update_callback(m,w)})},this.detach=function(){for(var C in this._dataProcessorHandlers)this.$scheduler.detachEvent(this._dataProcessorHandlers[C]);this._dataProcessorHandlers=[]}}(this.$scheduler,this);ee.attach(),this.attachEvent("onDestroy",function(){delete this._getRowData,delete this.$scheduler._dp,delete this.$scheduler._dataprocessor,delete this.$scheduler._set_event_text_style,delete this.$scheduler._dp_change_event_id,delete this.$scheduler._dp_hook_delete,delete this.$scheduler,ee.detach()}),this.$scheduler.callEvent("onDataProcessorReady",[this]),this._initialized=!0,u._dataprocessor=this}var y,N},setOnAfterUpdate:function(u){this.attachEvent("onAfterUpdate",u)},setOnBeforeUpdateHandler:function(u){this.attachEvent("onBeforeDataSending",u)},setAutoUpdate:function(u,ee){u=u||2e3,this._user=ee||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(N,C,c,m){this.afterAutoUpdate(N,C,c,m)}),this.attachEvent("onFullSync",function(){this.fullSync()});var y=this;O.a.setInterval(function(){y.loadUpdate()},u)},afterAutoUpdate:function(u,ee,y,N){return"collision"!=ee||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(u,ee){var y=this.$scheduler.ajax;if(this._update_busy)return!1;this._update_busy=!0,y.get(u,ee)},_getXmlNodeValue:function(u){return u.firstChild?u.firstChild.nodeValue:""},loadUpdate:function(){var u=this,ee=this.$scheduler.ajax,y=this.$scheduler.getUserData(0,"version"),N=this.serverProcessor+ee.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+y].join("&");N=N.replace("editing=true&",""),this.getUpdates(N,function(C){var c=ee.xpath("//userdata",C);u.$scheduler.setUserData(0,"version",u._getXmlNodeValue(c[0]));var m=ee.xpath("//update",C);if(m.length){u._silent_mode=!0;for(var w=0;w<m.length;w++){var T=m[w].getAttribute("status"),j=m[w].getAttribute("id"),J=m[w].getAttribute("parent");switch(T){case"inserted":this.callEvent("insertCallback",[m[w],j,J]);break;case"updated":this.callEvent("updateCallback",[m[w],j,J]);break;case"deleted":this.callEvent("deleteCallback",[m[w],j,J])}}u._silent_mode=!1}u._update_busy=!1,u=null})},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._headers=null,this._payload=null,delete this._initialized},url:function(u){this.serverProcessor=this._serverProcessor=u},_serializeAsJSON:function(u){if("string"==typeof u)return u;var ee=this.$scheduler.utils.copy(u);return"REST-JSON"===this._tMode&&(delete ee.id,delete ee[this.action_param]),JSON.stringify(ee)},_cleanupArgumentsBeforeSend:function(u){var ee;if(void 0===u[this.action_param])for(var y in ee={},u)ee[y]=this._cleanupArgumentsBeforeSend(u[y]);else ee=this._cleanupItemBeforeSend(u);return ee},_cleanupItemBeforeSend:function(u){var ee=null;return u&&("deleted"===u[this.action_param]?((ee={}).id=u.id,ee[this.action_param]=u[this.action_param]):ee=u),ee},_forEachUpdatedRow:function(u){for(var ee=this.updatedRows.slice(),y=0;y<ee.length;y++){var N=ee[y];this.$scheduler.getUserData(N,this.action_param)&&u.call(this,N)}},_prepareDataItem:function(u){var ee={},y=this.$scheduler,N=y.utils.copy(u);for(var C in N)0!==C.indexOf("_")&&N[C]&&(ee[C]=N[C].getUTCFullYear?y._helpers.formatDate(N[C]):"object"==We(N[C])?this._prepareDataItem(N[C]):null===N[C]?"":N[C]);return ee[this.action_param]=y.getUserData(u.id,this.action_param),ee},_getRowData:function(u){var ee=this.$scheduler.getEvent(u);return ee||(ee={id:u}),this._prepareDataItem(ee)}};var Oe={date:{month_full:["\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u062b\u0627\u0646\u064a","\u0634\u0628\u0627\u0637","\u0622\u0630\u0627\u0631","\u0646\u064a\u0633\u0627\u0646","\u0623\u064a\u0627\u0631","\u062d\u0632\u064a\u0631\u0627\u0646","\u062a\u0645\u0648\u0632","\u0622\u0628","\u0623\u064a\u0644\u0648\u0644","\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u0623\u0648\u0644","\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u062b\u0627\u0646\u064a","\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u0623\u0648\u0644"],month_short:["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"],day_full:["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0623\u062b\u0646\u064a\u0646","\u0623\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0623\u0644\u062d\u0645\u064a\u0633","\u0623\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],day_short:["\u0627\u062d\u062f","\u0627\u062b\u0646\u064a\u0646","\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0631\u0628\u0639\u0627\u0621","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639\u0629","\u0633\u0628\u062a"]},labels:{dhx_cal_today_button:"\u0627\u0644\u064a\u0648\u0645",day_tab:"\u064a\u0648\u0645",week_tab:"\u0623\u0633\u0628\u0648\u0639",month_tab:"\u0634\u0647\u0631",new_event:"\u062d\u062f\u062b \u062c\u062f\u064a\u062f",icon_save:"\u0627\u062e\u0632\u0646",icon_cancel:"\u0627\u0644\u063a\u0627\u0621",icon_details:"\u062a\u0641\u0627\u0635\u064a\u0644",icon_edit:"\u062a\u062d\u0631\u064a\u0631",icon_delete:"\u062d\u0630\u0641",confirm_closing:"\u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a \u0633\u0648\u0641 \u062a\u0636\u064a\u0639, \u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f",confirm_deleting:"\u0627\u0644\u062d\u062f\u062b \u0633\u064a\u062a\u0645 \u062d\u0630\u0641\u0647\u0627 \u0646\u0647\u0627\u0626\u064a\u0627 \u060c \u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f",section_description:"\u0627\u0644\u0648\u0635\u0641",section_time:"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629",full_day:"\u0637\u0648\u0627\u0644 \u0627\u0644\u064a\u0648\u0645",confirm_recurring:"\u0647\u0644 \u062a\u0631\u064a\u062f \u062a\u062d\u0631\u064a\u0631 \u0645\u062c\u0645\u0648\u0639\u0629 \u0643\u0627\u0645\u0644\u0629 \u0645\u0646 \u0627\u0644\u0623\u062d\u062f\u0627\u062b \u0627\u0644\u0645\u062a\u0643\u0631\u0631\u0629\u061f",section_recurring:"\u062a\u0643\u0631\u0627\u0631 \u0627\u0644\u062d\u062f\u062b",button_recurring:"\u062a\u0639\u0637\u064a\u0644",button_recurring_open:"\u062a\u0645\u0643\u064a\u0646",button_edit_series:"\u062a\u062d\u0631\u064a\u0631 \u0633\u0644\u0633\u0644\u0629",button_edit_occurrence:"\u062a\u0639\u062f\u064a\u0644 \u0646\u0633\u062e\u0629",grid_tab:"\u062c\u062f\u0648\u0644",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},Fe={date:{month_full:["\u0421\u0442\u0443\u0434\u0437\u0435\u043d\u044c","\u041b\u044e\u0442\u044b","\u0421\u0430\u043a\u0430\u0432\u0456\u043a","\u041a\u0440\u0430\u0441\u0430\u0432\u0456\u043a","Ma\u0439","\u0427\u044d\u0440\u0432\u0435\u043d\u044c","\u041b\u0456\u043f\u0435\u043d\u044c","\u0416\u043d\u0456\u0432\u0435\u043d\u044c","\u0412\u0435\u0440\u0430\u0441\u0435\u043d\u044c","\u041a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a","\u041b\u0456\u0441\u0442\u0430\u043f\u0430\u0434","\u0421\u043d\u0435\u0436\u0430\u043d\u044c"],month_short:["\u0421\u0442\u0443\u0434\u0437","\u041b\u044e\u0442","\u0421\u0430\u043a","\u041a\u0440\u0430\u0441","Ma\u0439","\u0427\u044d\u0440","\u041b\u0456\u043f","\u0416\u043d\u0456\u0432","\u0412\u0435\u0440","\u041a\u0430\u0441\u0442","\u041b\u0456\u0441\u0442","\u0421\u043d\u0435\u0436"],day_full:["\u041d\u044f\u0434\u0437\u0435\u043b\u044f","\u041f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a","\u0410\u045e\u0442\u043e\u0440\u0430\u043a","\u0421\u0435\u0440\u0430\u0434\u0430","\u0427\u0430\u0446\u0432\u0435\u0440","\u041f\u044f\u0442\u043d\u0456\u0446\u0430","\u0421\u0443\u0431\u043e\u0442\u0430"],day_short:["\u041d\u0434","\u041f\u043d","\u0410\u045e\u0442","\u0421\u0440","\u0427\u0446\u0432","\u041f\u0442","\u0421\u0431"]},labels:{dhx_cal_today_button:"\u0421\u0451\u043d\u043d\u044f",day_tab:"\u0414\u0437\u0435\u043d\u044c",week_tab:"\u0422\u044b\u0434\u0437\u0435\u043d\u044c",month_tab:"\u041c\u0435\u0441\u044f\u0446",new_event:"\u041d\u043e\u0432\u0430\u044f \u043f\u0430\u0434\u0437\u0435\u044f",icon_save:"\u0417\u0430\u0445\u0430\u0432\u0430\u0446\u044c",icon_cancel:"\u0410\u0434\u043c\u044f\u043d\u0456\u0446\u044c",icon_details:"\u0414\u044d\u0442\u0430\u043b\u0456",icon_edit:"\u0417\u043c\u044f\u043d\u0456\u0446\u044c",icon_delete:"\u0412\u044b\u0434\u0430\u043b\u0456\u0446\u044c",confirm_closing:"",confirm_deleting:"\u041f\u0430\u0434\u0437\u0435\u044f \u0431\u0443\u0434\u0437\u0435 \u0432\u044b\u0434\u0430\u043b\u0435\u043d\u0430 \u043d\u0435\u0437\u0432\u0430\u0440\u043e\u0442\u043d\u0430, \u043f\u0440\u0430\u0446\u044f\u0433\u043d\u0443\u0446\u044c?",section_description:"\u0410\u043f\u0456\u0441\u0430\u043d\u043d\u0435",section_time:"\u041f\u0435\u0440\u044b\u044f\u0434 \u0447\u0430\u0441\u0443",full_day:"\u0423\u0432\u0435\u0441\u044c \u0434\u0437\u0435\u043d\u044c",confirm_recurring:"\u0412\u044b \u0445\u043e\u0447\u0430\u0446\u0435 \u0437\u043c\u044f\u043d\u0456\u0446\u044c \u0443\u0441\u044e \u0441\u0435\u0440\u044b\u044e \u043f\u0430\u045e\u0442\u0430\u0440\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0434\u0437\u0435\u0439?",section_recurring:"\u041f\u0430\u045e\u0442\u0430\u0440\u044d\u043d\u043d\u0435",button_recurring:"\u0410\u0434\u043a\u043b\u044e\u0447\u0430\u043d\u0430",button_recurring_open:"\u0423\u043a\u043b\u044e\u0447\u0430\u043d\u0430",button_edit_series:"\u0420\u044d\u0434\u0430\u0433\u0430\u0432\u0430\u0446\u044c \u0441\u0435\u0440\u044b\u044e",button_edit_occurrence:"\u0420\u044d\u0434\u0430\u0433\u0430\u0432\u0430\u0446\u044c \u0430\u0441\u043e\u0431\u043d\u0456\u043a",agenda_tab:"\u0421\u043f\u0456\u0441",date:"\u0414\u0430\u0442\u0430",description:"\u0410\u043f\u0456\u0441\u0430\u043d\u043d\u0435",year_tab:"\u0413\u043e\u0434",week_agenda_tab:"\u0421\u043f\u0456\u0441",grid_tab:"\u0421\u043fic",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0414\u0437\u0435\u043d\u044c",repeat_radio_week:"\u0422\u044b\u0434\u0437\u0435\u043d\u044c",repeat_radio_month:"\u041c\u0435\u0441\u044f\u0446",repeat_radio_year:"\u0413\u043e\u0434",repeat_radio_day_type:"\u041a\u043e\u0436\u043d\u044b",repeat_text_day_count:"\u0434\u0437\u0435\u043d\u044c",repeat_radio_day_type2:"\u041a\u043e\u0436\u043d\u044b \u043f\u0440\u0430\u0446\u043e\u045e\u043d\u044b \u0434\u0437\u0435\u043d\u044c",repeat_week:" \u041f\u0430\u045e\u0442\u0430\u0440\u0430\u0446\u044c \u043a\u043e\u0436\u043d\u044b",repeat_text_week_count:"\u0442\u044b\u0434\u0437\u0435\u043d\u044c",repeat_radio_month_type:"\u041f\u0430\u045e\u0442\u0430\u0440\u0430\u0446\u044c",repeat_radio_month_start:"",repeat_text_month_day:" \u0447\u044b\u0441\u043b\u0430 \u043a\u043e\u0436\u043d\u0430\u0433\u0430",repeat_text_month_count:"\u043c\u0435\u0441\u044f\u0446\u0443",repeat_text_month_count2_before:"\u043a\u043e\u0436\u043d\u044b ",repeat_text_month_count2_after:"\u043c\u0435\u0441\u044f\u0446",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"\u0434\u0435\u043d\u044c",select_year_month:"",repeat_radio_end:"\u0411\u0435\u0437 \u0434\u0430\u0442\u044b \u0437\u0430\u043a\u0430\u043d\u0447\u044d\u043d\u043d\u044f",repeat_text_occurences_count:"\u043f\u0430\u045e\u0442\u043e\u0440\u0430\u045e",repeat_radio_end2:"",repeat_radio_end3:"\u0414\u0430 ",month_for_recurring:["\u0421\u0442\u0443\u0434\u0437\u0435\u043d\u044f","\u041b\u044e\u0442\u0430\u0433\u0430","\u0421\u0430\u043a\u0430\u0432\u0456\u043a\u0430","\u041a\u0440\u0430\u0441\u0430\u0432\u0456\u043a\u0430","\u041c\u0430\u044f","\u0427\u044d\u0440\u0432\u0435\u043d\u044f","\u041b\u0456\u043fe\u043d\u044f","\u0416\u043d\u0456\u045e\u043d\u044f","\u0412\u0435\u0440\u0430\u0441\u043d\u044f","\u041a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a\u0430","\u041b\u0456\u0441\u0442\u0430\u043f\u0430\u0434\u0430","\u0421\u043d\u0435\u0436\u043d\u044f"],day_for_recurring:["\u041d\u044f\u0434\u0437\u0435\u043b\u044e","\u041f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a","\u0410\u045e\u0442\u043e\u0440\u0430\u043a","\u0421\u0435\u0440\u0430\u0434\u0443","\u0427\u0430\u0446\u0432\u0435\u0440","\u041f\u044f\u0442\u043d\u0456\u0446\u0443","\u0421\u0443\u0431\u043e\u0442\u0443"]}},Ge={date:{month_full:["Gener","Febrer","Mar\xe7","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{dhx_cal_today_button:"Hui",day_tab:"Dia",week_tab:"Setmana",month_tab:"Mes",new_event:"Nou esdeveniment",icon_save:"Guardar",icon_cancel:"Cancel\xb7lar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrar\xe0 definitivament, continuar ?",section_description:"Descripci\xf3",section_time:"Periode de temps",full_day:"Tot el dia",confirm_recurring:"\xbfDesitja modificar el conjunt d'esdeveniments repetits?",section_recurring:"Repeteixca l'esdeveniment",button_recurring:"Impedit",button_recurring_open:"Perm\xe9s",button_edit_series:"Edit s\xe8rie",button_edit_occurrence:"Edita Inst\xe0ncia",agenda_tab:"Agenda",date:"Data",description:"Descripci\xf3",year_tab:"Any",week_agenda_tab:"Agenda",grid_tab:"Taula",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},kt={date:{month_full:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],month_short:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_full:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],day_short:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},labels:{dhx_cal_today_button:"\u4eca\u5929",day_tab:"\u65e5",week_tab:"\u5468",month_tab:"\u6708",new_event:"\u65b0\u5efa\u65e5\u7a0b",icon_save:"\u4fdd\u5b58",icon_cancel:"\u5173\u95ed",icon_details:"\u8be6\u7ec6",icon_edit:"\u7f16\u8f91",icon_delete:"\u5220\u9664",confirm_closing:"\u8bf7\u786e\u8ba4\u662f\u5426\u64a4\u9500\u4fee\u6539!",confirm_deleting:"\u662f\u5426\u5220\u9664\u65e5\u7a0b?",section_description:"\u63cf\u8ff0",section_time:"\u65f6\u95f4\u8303\u56f4",full_day:"\u6574\u5929",confirm_recurring:"\u8bf7\u786e\u8ba4\u662f\u5426\u5c06\u65e5\u7a0b\u8bbe\u4e3a\u91cd\u590d\u6a21\u5f0f?",section_recurring:"\u91cd\u590d\u5468\u671f",button_recurring:"\u7981\u7528",button_recurring_open:"\u542f\u7528",button_edit_series:"\u7f16\u8f91\u7cfb\u5217",button_edit_occurrence:"\u7f16\u8f91\u5b9e\u4f8b",agenda_tab:"\u8bae\u7a0b",date:"\u65e5\u671f",description:"\u8bf4\u660e",year_tab:"\u4eca\u5e74",week_agenda_tab:"\u8bae\u7a0b",grid_tab:"\u7535\u7f51",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u6309\u5929",repeat_radio_week:"\u6309\u5468",repeat_radio_month:"\u6309\u6708",repeat_radio_year:"\u6309\u5e74",repeat_radio_day_type:"\u6bcf",repeat_text_day_count:"\u5929",repeat_radio_day_type2:"\u6bcf\u4e2a\u5de5\u4f5c\u65e5",repeat_week:" \u91cd\u590d \u6bcf",repeat_text_week_count:"\u661f\u671f\u7684:",repeat_radio_month_type:"\u91cd\u590d",repeat_radio_month_start:"\u5728",repeat_text_month_day:"\u65e5 \u6bcf",repeat_text_month_count:"\u6708",repeat_text_month_count2_before:"\u6bcf",repeat_text_month_count2_after:"\u6708",repeat_year_label:"\u5728",select_year_day2:"\u7684",repeat_text_year_day:"\u65e5",select_year_month:"\u6708",repeat_radio_end:"\u65e0\u7ed3\u675f\u65e5\u671f",repeat_text_occurences_count:"\u6b21\u7ed3\u675f",repeat_radio_end2:"\u91cd\u590d",repeat_radio_end3:"\u7ed3\u675f\u4e8e",month_for_recurring:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],day_for_recurring:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"]}},Ut={date:{month_full:["Leden","\xdanor","B\u0159ezen","Duben","Kv\u011bten","\u010cerven","\u010cervenec","Srpen","Z\xe1\u0159\xed","\u0158\xedjen","Listopad","Prosinec"],month_short:["Led","\xdan","B\u0159e","Dub","Kv\u011b","\u010cer","\u010cec","Srp","Z\xe1\u0159\xed","\u0158\xedj","List","Pro"],day_full:["Ned\u011ble","Pond\u011bl\xed","\xdater\xfd","St\u0159eda","\u010ctvrtek","P\xe1tek","Sobota"],day_short:["Ne","Po","\xdat","St","\u010ct","P\xe1","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"Den",week_tab:"T\xfdden",month_tab:"M\u011bs\xedc",new_event:"Nov\xe1 ud\xe1lost",icon_save:"Ulo\u017eit",icon_cancel:"Zp\u011bt",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Ud\xe1lost bude trvale smaz\xe1na, opravdu?",section_description:"Pozn\xe1mky",section_time:"Doba platnosti",confirm_recurring:"P\u0159ejete si upravit celou \u0159adu opakovan\xfdch ud\xe1lost\xed?",section_recurring:"Opakov\xe1n\xed ud\xe1losti",button_recurring:"Vypnuto",button_recurring_open:"Zapnuto",button_edit_series:"Edit series",button_edit_occurrence:"Upravit instance",agenda_tab:"Program",date:"Datum",description:"Pozn\xe1mka",year_tab:"Rok",full_day:"Full day",week_agenda_tab:"Program",grid_tab:"M\u0159\xed\u017eka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denn\u011b",repeat_radio_week:"T\xfddn\u011b",repeat_radio_month:"M\u011bs\xed\u010dn\u011b",repeat_radio_year:"Ro\u010dn\u011b",repeat_radio_day_type:"ka\u017ed\xfd",repeat_text_day_count:"Den",repeat_radio_day_type2:"pracovn\xed dny",repeat_week:"Opakuje ka\u017ed\xfdch",repeat_text_week_count:"T\xfddn\u016f na:",repeat_radio_month_type:"u ka\u017ed\xe9ho",repeat_radio_month_start:"na",repeat_text_month_day:"Den ka\u017ed\xe9ho",repeat_text_month_count:"M\u011bs\xedc",repeat_text_month_count2_before:"ka\u017ed\xfd",repeat_text_month_count2_after:"M\u011bs\xedc",repeat_year_label:"na",select_year_day2:"v",repeat_text_year_day:"Den v",select_year_month:"",repeat_radio_end:"bez data ukon\u010den\xed",repeat_text_occurences_count:"Ud\xe1losti",repeat_radio_end2:"po",repeat_radio_end3:"Konec",month_for_recurring:["Leden","\xdanor","B\u0159ezen","Duben","Kv\u011bten","\u010cerven","\u010cervenec","Srpen","Z\xe1\u0159\xed","\u0158\xedjen","Listopad","Prosinec"],day_for_recurring:["Ned\u011ble ","Pond\u011bl\xed","\xdater\xfd","St\u0159eda","\u010ctvrtek","P\xe1tek","Sobota"]}},Lt={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uge",month_tab:"M\xe5ned",new_event:"Ny begivenhed",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil g\xe5 tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du tilrette hele serien af gentagne begivenheder?",section_recurring:"Gentag begivenhed",button_recurring:"Frakoblet",button_recurring_open:"Tilkoblet",button_edit_series:"Rediger serien",button_edit_occurrence:"Rediger en kopi",agenda_tab:"Dagsorden",date:"Dato",description:"Beskrivelse",year_tab:"\xc5r",week_agenda_tab:"Dagsorden",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ugenlig",repeat_radio_month:"M\xe5nedlig",repeat_radio_year:"\xc5rlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"P\xe5 hver arbejdsdag",repeat_week:" Gentager sig hver",repeat_text_week_count:"uge p\xe5 f\xf8lgende dage:",repeat_radio_month_type:"Hver den",repeat_radio_month_start:"Den",repeat_text_month_day:" i hver",repeat_text_month_count:"m\xe5ned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"m\xe5ned",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen slutdato",repeat_text_occurences_count:"gentagelse",repeat_radio_end2:"Efter",repeat_radio_end3:"Slut",month_for_recurring:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"]}},st={date:{month_full:[" Januar"," Februar"," M\xe4rz "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{dhx_cal_today_button:"Heute",day_tab:"Tag",week_tab:"Woche",month_tab:"Monat",new_event:"neuer Eintrag",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"\xc4ndern",icon_delete:"L\xf6schen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gel\xf6scht",section_description:"Beschreibung",section_time:"Zeitspanne",full_day:"Ganzer Tag",confirm_recurring:"Wollen Sie alle Eintr\xe4ge bearbeiten oder nur diesen einzelnen Eintrag?",section_recurring:"Wiederholung",button_recurring:"Aus",button_recurring_open:"An",button_edit_series:"Bearbeiten Sie die Serie",button_edit_occurrence:"Bearbeiten Sie eine Kopie",agenda_tab:"Agenda",date:"Datum",description:"Beschreibung",year_tab:"Jahre",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"T\xe4glich",repeat_radio_week:"W\xf6chentlich",repeat_radio_month:"Monatlich",repeat_radio_year:"J\xe4hrlich",repeat_radio_day_type:"jeden",repeat_text_day_count:"Tag",repeat_radio_day_type2:"an jedem Arbeitstag",repeat_week:" Wiederholt sich jede",repeat_text_week_count:"Woche am:",repeat_radio_month_type:"an jedem",repeat_radio_month_start:"am",repeat_text_month_day:"Tag eines jeden",repeat_text_month_count:"Monats",repeat_text_month_count2_before:"jeden",repeat_text_month_count2_after:"Monats",repeat_year_label:"am",select_year_day2:"im",repeat_text_year_day:"Tag im",select_year_month:"",repeat_radio_end:"kein Enddatum",repeat_text_occurences_count:"Ereignissen",repeat_radio_end3:"Schlu\xdf",repeat_radio_end2:"nach",month_for_recurring:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]}},Vt={date:{month_full:["\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2","\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2","\u039c\u03ac\u03ca\u03bf\u03c2","\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2","\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2","\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2","\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2","\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2"],month_short:["\u0399\u0391\u039d","\u03a6\u0395\u0392","\u039c\u0391\u03a1","\u0391\u03a0\u03a1","\u039c\u0391\u0399","\u0399\u039f\u03a5\u039d","\u0399\u039f\u03a5\u039b","\u0391\u03a5\u0393","\u03a3\u0395\u03a0","\u039f\u039a\u03a4","\u039d\u039f\u0395","\u0394\u0395\u039a"],day_full:["\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae","\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1","\u03a4\u03c1\u03af\u03c4\u03b7","\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7","\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7","\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae","\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae"],day_short:["\u039a\u03a5","\u0394\u0395","\u03a4\u03a1","\u03a4\u0395","\u03a0\u0395","\u03a0\u0391","\u03a3\u0391"]},labels:{dhx_cal_today_button:"\u03a3\u03ae\u03bc\u03b5\u03c1\u03b1",day_tab:"\u0397\u03bc\u03ad\u03c1\u03b1",week_tab:"\u0395\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b1",month_tab:"\u039c\u03ae\u03bd\u03b1\u03c2",new_event:"\u039d\u03ad\u03bf \u03ad\u03c1\u03b3\u03bf",icon_save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7",icon_cancel:"\u0386\u03ba\u03c5\u03c1\u03bf",icon_details:"\u039b\u03b5\u03c0\u03c4\u03bf\u03bc\u03ad\u03c1\u03b5\u03b9\u03b5\u03c2",icon_edit:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1",icon_delete:"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae",confirm_closing:"",confirm_deleting:"\u03a4\u03bf \u03ad\u03c1\u03b3\u03bf \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03b5\u03af \u03bf\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03ac. \u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03c3\u03c5\u03bd\u03b5\u03c7\u03af\u03c3\u03b5\u03c4\u03b5;",section_description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",section_time:"\u03a7\u03c1\u03bf\u03bd\u03b9\u03ba\u03ae \u03c0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2",full_day:"\u03a0\u03bb\u03ae\u03c1\u03b7\u03c2 \u0397\u03bc\u03ad\u03c1\u03b1",confirm_recurring:"\u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03b8\u03b5\u03af\u03c4\u03b5 \u03bf\u03bb\u03cc\u03ba\u03bb\u03b7\u03c1\u03b7 \u03c4\u03b7\u03bd \u03bf\u03bc\u03ac\u03b4\u03b1 \u03c4\u03c9\u03bd \u03b5\u03c0\u03b1\u03bd\u03b1\u03bb\u03b1\u03bc\u03b2\u03b1\u03bd\u03cc\u03bc\u03b5\u03bd\u03c9\u03bd \u03ad\u03c1\u03b3\u03c9\u03bd;",section_recurring:"\u0395\u03c0\u03b1\u03bd\u03b1\u03bb\u03b1\u03bc\u03b2\u03b1\u03bd\u03cc\u03bc\u03b5\u03bd\u03bf \u03ad\u03c1\u03b3\u03bf",button_recurring:"\u0391\u03bd\u03b5\u03bd\u03b5\u03c1\u03b3\u03cc",button_recurring_open:"\u0395\u03bd\u03b5\u03c1\u03b3\u03cc",button_edit_series:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03c4\u03b5\u03af\u03c4\u03b5 \u03c4\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac",button_edit_occurrence:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03ad\u03bd\u03b1 \u03b1\u03bd\u03c4\u03af\u03b3\u03c1\u03b1\u03c6\u03bf",agenda_tab:"\u0397\u03bc\u03b5\u03c1\u03ae\u03c3\u03b9\u03b1 \u0394\u03b9\u03ac\u03c4\u03b1\u03be\u03b7",date:"\u0397\u03bc\u03b5\u03c1\u03bf\u03bc\u03b7\u03bd\u03af\u03b1",description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",year_tab:"\u0388\u03c4\u03bf\u03c2",week_agenda_tab:"\u0397\u03bc\u03b5\u03c1\u03ae\u03c3\u03b9\u03b1 \u0394\u03b9\u03ac\u03c4\u03b1\u03be\u03b7",grid_tab:"\u03a0\u03bb\u03ad\u03b3\u03bc\u03b1",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0397\u03bc\u03b5\u03c1\u03b7\u03c3\u03af\u03c9\u03c2",repeat_radio_week:"\u0395\u03b2\u03b4\u03bf\u03bc\u03b1\u03b4\u03b9\u03b1\u03af\u03c9\u03c2",repeat_radio_month:"\u039c\u03b7\u03bd\u03b9\u03b1\u03af\u03c9\u03c2",repeat_radio_year:"\u0395\u03c4\u03b7\u03c3\u03af\u03c9\u03c2",repeat_radio_day_type:"\u039a\u03ac\u03b8\u03b5",repeat_text_day_count:"\u03b7\u03bc\u03ad\u03c1\u03b1",repeat_radio_day_type2:"\u039a\u03ac\u03b8\u03b5 \u03b5\u03c1\u03b3\u03ac\u03c3\u03b9\u03bc\u03b7",repeat_week:" \u0395\u03c0\u03b1\u03bd\u03ac\u03bb\u03b7\u03c8\u03b7 \u03ba\u03ac\u03b8\u03b5",repeat_text_week_count:"\u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b1 \u03c4\u03b9\u03c2 \u03b5\u03c0\u03cc\u03bc\u03b5\u03bd\u03b5\u03c2 \u03b7\u03bc\u03ad\u03c1\u03b5\u03c2:",repeat_radio_month_type:"\u0395\u03c0\u03b1\u03bd\u03ac\u03bb\u03b7\u03c8\u03b7",repeat_radio_month_start:"\u03a4\u03b7\u03bd",repeat_text_month_day:"\u03b7\u03bc\u03ad\u03c1\u03b1 \u03ba\u03ac\u03b8\u03b5",repeat_text_month_count:"\u03bc\u03ae\u03bd\u03b1",repeat_text_month_count2_before:"\u03ba\u03ac\u03b8\u03b5",repeat_text_month_count2_after:"\u03bc\u03ae\u03bd\u03b1",repeat_year_label:"\u03a4\u03b7\u03bd",select_year_day2:"\u03c4\u03bf\u03c5",repeat_text_year_day:"\u03b7\u03bc\u03ad\u03c1\u03b1",select_year_month:"\u03bc\u03ae\u03bd\u03b1",repeat_radio_end:"\u03a7\u03c9\u03c1\u03af\u03c2 \u03b7\u03bc\u03b5\u03c1\u03bf\u03bc\u03b7\u03bd\u03af\u03b1 \u03bb\u03ae\u03be\u03b5\u03c9\u03c2",repeat_text_occurences_count:"\u03b5\u03c0\u03b1\u03bd\u03b1\u03bb\u03ae\u03c8\u03b5\u03b9\u03c2",repeat_radio_end3:"\u039b\u03ae\u03b3\u03b5\u03b9 \u03c4\u03b7\u03bd",repeat_radio_end2:"\u039c\u03b5\u03c4\u03ac \u03b1\u03c0\u03cc",month_for_recurring:["\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2","\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2","\u039c\u03ac\u03ca\u03bf\u03c2","\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2","\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2","\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2","\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2","\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2"],day_for_recurring:["\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae","\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1","\u03a4\u03c1\u03af\u03c4\u03b7","\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7","\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7","\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae","\u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf"]}},Qt={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daily",repeat_radio_week:"Weekly",repeat_radio_month:"Monthly",repeat_radio_year:"Yearly",repeat_radio_day_type:"Every",repeat_text_day_count:"day",repeat_radio_day_type2:"Every workday",repeat_week:" Repeat every",repeat_text_week_count:"week next days:",repeat_radio_month_type:"Repeat",repeat_radio_month_start:"On",repeat_text_month_day:"day every",repeat_text_month_count:"month",repeat_text_month_count2_before:"every",repeat_text_month_count2_after:"month",repeat_year_label:"On",select_year_day2:"of",repeat_text_year_day:"day",select_year_month:"month",repeat_radio_end:"No end date",repeat_text_occurences_count:"occurrences",repeat_radio_end2:"After",repeat_radio_end3:"End by",month_for_recurring:["January","February","March","April","May","June","July","August","September","October","November","December"],day_for_recurring:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},Xt={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],day_short:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"]},labels:{dhx_cal_today_button:"Hoy",day_tab:"D\xeda",week_tab:"Semana",month_tab:"Mes",new_event:"Nuevo evento",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrar\xe1 definitivamente, \xbfcontinuar?",section_description:"Descripci\xf3n",section_time:"Per\xedodo",full_day:"Todo el d\xeda",confirm_recurring:"\xbfDesea modificar el conjunto de eventos repetidos?",section_recurring:"Repita el evento",button_recurring:"Impedido",button_recurring_open:"Permitido",button_edit_series:"Editar la serie",button_edit_occurrence:"Editar este evento",agenda_tab:"D\xeda",date:"Fecha",description:"Descripci\xf3n",year_tab:"A\xf1o",week_agenda_tab:"D\xeda",grid_tab:"Reja",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Diariamente",repeat_radio_week:"Semanalmente",repeat_radio_month:"Mensualmente",repeat_radio_year:"Anualmente",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia",repeat_radio_day_type2:"Cada jornada de trabajo",repeat_week:" Repetir cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repita",repeat_radio_month_start:"El",repeat_text_month_day:"dia cada ",repeat_text_month_count:"mes",repeat_text_month_count2_before:"cada",repeat_text_month_count2_after:"mes",repeat_year_label:"El",select_year_day2:"del",repeat_text_year_day:"dia",select_year_month:"mes",repeat_radio_end:"Sin fecha de finalizaci\xf3n",repeat_text_occurences_count:"ocurrencias",repeat_radio_end3:"Fin",repeat_radio_end2:"Despu\xe9s de",month_for_recurring:["Enero","Febrero","\u041c\u0430rzo","\u0410bril","Mayo","Junio","Julio","\u0410gosto","Setiembre","Octubre","Noviembre","Diciembre"],day_for_recurring:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jeuves","Viernes","Sabado"]}},Wt={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{dhx_cal_today_button:"T\xe4n\xe4\xe4n",day_tab:"P\xe4iv\xe4",week_tab:"Viikko",month_tab:"Kuukausi",new_event:"Uusi tapahtuma",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",full_day:"Koko p\xe4iv\xe4",confirm_recurring:"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?",section_recurring:"Toista tapahtuma",button_recurring:"Ei k&auml;yt&ouml;ss&auml;",button_recurring_open:"K&auml;yt&ouml;ss&auml;",button_edit_series:"Muokkaa sarja",button_edit_occurrence:"Muokkaa kopio",agenda_tab:"Esityslista",date:"P\xe4iv\xe4m\xe4\xe4r\xe4",description:"Kuvaus",year_tab:"Vuoden",week_agenda_tab:"Esityslista",grid_tab:"Ritil\xe4",drag_to_create:"Luo uusi vet\xe4m\xe4ll\xe4",drag_to_move:"Siirr\xe4 vet\xe4m\xe4ll\xe4",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"P&auml;ivitt&auml;in",repeat_radio_week:"Viikoittain",repeat_radio_month:"Kuukausittain",repeat_radio_year:"Vuosittain",repeat_radio_day_type:"Joka",repeat_text_day_count:"p&auml;iv&auml;",repeat_radio_day_type2:"Joka arkip&auml;iv&auml;",repeat_week:"Toista joka",repeat_text_week_count:"viikko n&auml;in&auml; p&auml;ivin&auml;:",repeat_radio_month_type:"Toista",repeat_radio_month_start:"",repeat_text_month_day:"p&auml;iv&auml;n&auml; joka",repeat_text_month_count:"kuukausi",repeat_text_month_count2_before:"joka",repeat_text_month_count2_after:"kuukausi",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"p&auml;iv&auml;",select_year_month:"kuukausi",repeat_radio_end:"Ei loppumisaikaa",repeat_text_occurences_count:"Toiston j&auml;lkeen",repeat_radio_end3:"Loppuu",repeat_radio_end2:"",month_for_recurring:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],day_for_recurring:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"]}},Nt={date:{month_full:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],month_short:["Jan","F\xe9v","Mar","Avr","Mai","Juin","Juil","Ao\xfb","Sep","Oct","Nov","D\xe9c"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{dhx_cal_today_button:"Aujourd'hui",day_tab:"Jour",week_tab:"Semaine",month_tab:"Mois",new_event:"Nouvel \xe9v\xe9nement",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"D\xe9tails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'\xe9v\xe9nement sera effac\xe9 sans appel, \xeates-vous s\xfbr ?",section_description:"Description",section_time:"P\xe9riode",full_day:"Journ\xe9e compl\xe8te",confirm_recurring:"Voulez-vous \xe9diter toute une s\xe9rie d'\xe9v\xe8nements r\xe9p\xe9t\xe9s?",section_recurring:"P\xe9riodicit\xe9",button_recurring:"D\xe9sactiv\xe9",button_recurring_open:"Activ\xe9",button_edit_series:"Modifier la s\xe9rie",button_edit_occurrence:"Modifier une copie",agenda_tab:"Jour",date:"Date",description:"Description",year_tab:"Ann\xe9e",week_agenda_tab:"Jour",grid_tab:"Grille",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidienne",repeat_radio_week:"Hebdomadaire",repeat_radio_month:"Mensuelle",repeat_radio_year:"Annuelle",repeat_radio_day_type:"Chaque",repeat_text_day_count:"jour",repeat_radio_day_type2:"Chaque journ\xe9e de travail",repeat_week:" R\xe9p\xe9ter toutes les",repeat_text_week_count:"semaine:",repeat_radio_month_type:"R\xe9p\xe9ter",repeat_radio_month_start:"Le",repeat_text_month_day:"jour chaque",repeat_text_month_count:"mois",repeat_text_month_count2_before:"chaque",repeat_text_month_count2_after:"mois",repeat_year_label:"Le",select_year_day2:"du",repeat_text_year_day:"jour",select_year_month:"mois",repeat_radio_end:"Pas de date d&quot;ach\xe8vement",repeat_text_occurences_count:"occurrences",repeat_radio_end3:"Fin",repeat_radio_end2:"Apr\xe8s",month_for_recurring:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],day_for_recurring:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]}},Bt={date:{month_full:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],month_short:["\u05d9\u05e0\u05d5","\u05e4\u05d1\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0","\u05d9\u05d5\u05dc","\u05d0\u05d5\u05d2","\u05e1\u05e4\u05d8","\u05d0\u05d5\u05e7","\u05e0\u05d5\u05d1","\u05d3\u05e6\u05de"],day_full:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],day_short:["\u05d0","\u05d1","\u05d2","\u05d3","\u05d4","\u05d5","\u05e9"]},labels:{dhx_cal_today_button:"\u05d4\u05d9\u05d5\u05dd",day_tab:"\u05d9\u05d5\u05dd",week_tab:"\u05e9\u05d1\u05d5\u05e2",month_tab:"\u05d7\u05d5\u05d3\u05e9",new_event:"\u05d0\u05e8\u05d5\u05e2 \u05d7\u05d3\u05e9",icon_save:"\u05e9\u05de\u05d5\u05e8",icon_cancel:"\u05d1\u05d8\u05dc",icon_details:"\u05e4\u05e8\u05d8\u05d9\u05dd",icon_edit:"\u05e2\u05e8\u05d5\u05da",icon_delete:"\u05de\u05d7\u05e7",confirm_closing:"",confirm_deleting:"\u05d0\u05e8\u05d5\u05e2 \u05d9\u05de\u05d7\u05e7 \u05e1\u05d5\u05e4\u05d9\u05ea.\u05dc\u05d4\u05de\u05e9\u05d9\u05da?",section_description:"\u05ea\u05d9\u05d0\u05d5\u05e8",section_time:"\u05ea\u05e7\u05d5\u05e4\u05d4",confirm_recurring:"\u05d4\u05d0\u05dd \u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05e9\u05e0\u05d5\u05ea \u05db\u05dc \u05e1\u05d3\u05e8\u05ea \u05d0\u05e8\u05d5\u05e2\u05d9\u05dd \u05de\u05ea\u05de\u05e9\u05db\u05d9\u05dd?",section_recurring:"\u05dc\u05d4\u05e2\u05ea\u05d9\u05e7 \u05d0\u05e8\u05d5\u05e2",button_recurring:"\u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc",button_recurring_open:"\u05e4\u05e2\u05d9\u05dc",full_day:"\u05d9\u05d5\u05dd \u05e9\u05dc\u05dd",button_edit_series:"\u05e2\u05e8\u05d5\u05da \u05d0\u05ea \u05d4\u05e1\u05d3\u05e8\u05d4",button_edit_occurrence:"\u05e2\u05e8\u05d9\u05db\u05ea \u05e2\u05d5\u05ea\u05e7",agenda_tab:"\u05e1\u05d3\u05e8 \u05d9\u05d5\u05dd",date:"\u05ea\u05d0\u05e8\u05d9\u05da",description:"\u05ea\u05d9\u05d0\u05d5\u05e8",year_tab:"\u05dc\u05e9\u05e0\u05d4",week_agenda_tab:"\u05e1\u05d3\u05e8 \u05d9\u05d5\u05dd",grid_tab:"\u05e1\u05d5\u05e8\u05d2",drag_to_create:"Drag to create",drag_to_move:"\u05d2\u05e8\u05d5\u05e8 \u05db\u05d3\u05d9 \u05dc\u05d4\u05d6\u05d9\u05d6",message_ok:"OK",message_cancel:"\u05d1\u05d8\u05dc",next:"\u05d4\u05d1\u05d0",prev:"\u05d4\u05e7\u05d5\u05d3\u05dd",year:"\u05e9\u05e0\u05d4",month:"\u05d7\u05d5\u05d3\u05e9",day:"\u05d9\u05d5\u05dd",hour:"\u05e9\u05e2\u05d4",minute:"\u05d3\u05e7\u05d4",repeat_radio_day:"\u05d9\u05d5\u05de\u05d9",repeat_radio_week:"\u05e9\u05d1\u05d5\u05e2\u05d9",repeat_radio_month:"\u05d7\u05d5\u05d3\u05e9\u05d9",repeat_radio_year:"\u05e9\u05e0\u05ea\u05d9",repeat_radio_day_type:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_text_day_count:"\u05d9\u05de\u05d9\u05dd",repeat_radio_day_type2:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc \u05d9\u05d5\u05dd \u05e2\u05d1\u05d5\u05d3\u05d4",repeat_week:" \u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_text_week_count:"\u05e9\u05d1\u05d5\u05e2 \u05dc\u05e4\u05d9 \u05d9\u05de\u05d9\u05dd:",repeat_radio_month_type:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_radio_month_start:"\u05db\u05dc",repeat_text_month_day:"\u05d9\u05de\u05d9\u05dd \u05db\u05dc",repeat_text_month_count:"\u05d7\u05d5\u05d3\u05e9\u05d9\u05dd",repeat_text_month_count2_before:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_text_month_count2_after:"\u05d7\u05d5\u05d3\u05e9",repeat_year_label:"\u05db\u05dc",select_year_day2:"\u05d1\u05d7\u05d5\u05d3\u05e9",repeat_text_year_day:"\u05d9\u05de\u05d9\u05dd",select_year_month:"\u05d7\u05d5\u05d3\u05e9",repeat_radio_end:"\u05dc\u05e2\u05d5\u05dc\u05dd \u05dc\u05d0 \u05de\u05e1\u05ea\u05d9\u05d9\u05dd",repeat_text_occurences_count:"\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd",repeat_radio_end3:"\u05de\u05e1\u05ea\u05d9\u05d9\u05dd \u05d1",repeat_radio_end2:"\u05d0\u05d7\u05e8\u05d9",month_for_recurring:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],day_for_recurring:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"]}},ln={date:{month_full:["Janu\xe1r","Febru\xe1r","M\xe1rcius","\xc1prilis","M\xe1jus","J\xfanius","J\xfalius","Augusztus","Szeptember","Okt\xf3ber","November","December"],month_short:["Jan","Feb","M\xe1r","\xc1pr","M\xe1j","J\xfan","J\xfal","Aug","Sep","Okt","Nov","Dec"],day_full:["Vas\xe1rnap","H\xe9tf\xf5","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","szombat"],day_short:["Va","H\xe9","Ke","Sze","Cs\xfc","P\xe9","Szo"]},labels:{dhx_cal_today_button:"Ma",day_tab:"Nap",week_tab:"H\xe9t",month_tab:"H\xf3nap",new_event:"\xdaj esem\xe9ny",icon_save:"Ment\xe9s",icon_cancel:"M\xe9gse",icon_details:"R\xe9szletek",icon_edit:"Szerkeszt\xe9s",icon_delete:"T\xf6rl\xe9s",confirm_closing:"",confirm_deleting:"Az esem\xe9ny t\xf6r\xf6lve lesz, biztosan folytatja?",section_description:"Le\xedr\xe1s",section_time:"Id\xf5szak",full_day:"Egesz napos",confirm_recurring:"Biztosan szerkeszteni akarod az \xf6sszes ism\xe9tl\xf5d\xf5 esem\xe9ny be\xe1ll\xedt\xe1s\xe1t?",section_recurring:"Esem\xe9ny ism\xe9tl\xe9se",button_recurring:"Tilt\xe1s",button_recurring_open:"Enged\xe9lyez\xe9s",button_edit_series:"Edit series",button_edit_occurrence:"Szerkeszt\xe9s b\xedr\xf3s\xe1g",agenda_tab:"Napirend",date:"D\xe1tum",description:"Le\xedr\xe1s",year_tab:"\xc9v",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},Ft={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{dhx_cal_today_button:"Hari Ini",day_tab:"Hari",week_tab:"Minggu",month_tab:"Bulan",new_event:"Acara Baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",full_day:"Hari penuh",confirm_recurring:"Apakah acara ini akan berulang?",section_recurring:"Acara Rutin",button_recurring:"Tidak Difungsikan",button_recurring_open:"Difungsikan",button_edit_series:"Mengedit seri",button_edit_occurrence:"Mengedit salinan",agenda_tab:"Agenda",date:"Tanggal",description:"Keterangan",year_tab:"Tahun",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},nn={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{dhx_cal_today_button:"Oggi",day_tab:"Giorno",week_tab:"Settimana",month_tab:"Mese",new_event:"Nuovo evento",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"L'evento sar\xe0 eliminato, siete sicuri?",section_description:"Descrizione",section_time:"Periodo di tempo",full_day:"Intera giornata",confirm_recurring:"Vuoi modificare l'intera serie di eventi?",section_recurring:"Ripetere l'evento",button_recurring:"Disattivato",button_recurring_open:"Attivato",button_edit_series:"Modificare la serie",button_edit_occurrence:"Modificare una copia",agenda_tab:"Agenda",date:"Data",description:"Descrizione",year_tab:"Anno",week_agenda_tab:"Agenda",grid_tab:"Griglia",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidiano",repeat_radio_week:"Settimanale",repeat_radio_month:"Mensile",repeat_radio_year:"Annuale",repeat_radio_day_type:"Ogni",repeat_text_day_count:"giorno",repeat_radio_day_type2:"Ogni giornata lavorativa",repeat_week:" Ripetere ogni",repeat_text_week_count:"settimana:",repeat_radio_month_type:"Ripetere",repeat_radio_month_start:"Il",repeat_text_month_day:"giorno ogni",repeat_text_month_count:"mese",repeat_text_month_count2_before:"ogni",repeat_text_month_count2_after:"mese",repeat_year_label:"Il",select_year_day2:"del",repeat_text_year_day:"giorno",select_year_month:"mese",repeat_radio_end:"Senza data finale",repeat_text_occurences_count:"occorenze",repeat_radio_end3:"Fine",repeat_radio_end2:"Dopo",month_for_recurring:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Jiugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],day_for_recurring:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Joved\xec","Venerd\xec","Sabato"]}},Et={date:{month_full:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],month_short:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_full:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],day_short:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"]},labels:{dhx_cal_today_button:"\u4eca\u65e5",day_tab:"\u65e5",week_tab:"\u9031",month_tab:"\u6708",new_event:"\u65b0\u30a4\u30d9\u30f3\u30c8",icon_save:"\u4fdd\u5b58",icon_cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",icon_details:"\u8a73\u7d30",icon_edit:"\u7de8\u96c6",icon_delete:"\u524a\u9664",confirm_closing:"",confirm_deleting:"\u30a4\u30d9\u30f3\u30c8\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3001\u5b9c\u3057\u3044\u3067\u3059\u304b\uff1f",section_description:"\u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3",section_time:"\u671f\u9593",confirm_recurring:"\u7e70\u308a\u8fd4\u3055\u308c\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u5168\u3066\u7de8\u96c6\u3057\u307e\u3059\u304b\uff1f",section_recurring:"\u30a4\u30d9\u30f3\u30c8\u3092\u7e70\u308a\u8fd4\u3059",button_recurring:"\u7121\u52b9",button_recurring_open:"\u6709\u52b9",full_day:"\u7d42\u65e5",button_edit_series:"\u30b7\u30ea\u30fc\u30ba\u3092\u7de8\u96c6\u3057\u307e\u3059",button_edit_occurrence:"\u30b3\u30d4\u30fc\u3092\u7de8\u96c6",agenda_tab:"\u8b70\u984c\u306f",date:"\u65e5\u4ed8",description:"\u8aac\u660e",year_tab:"\u4eca\u5e74",week_agenda_tab:"\u8b70\u984c\u306f",grid_tab:"\u30b0\u30ea\u30c3\u30c9",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}};var Tn=function(){function u(ee){for(var y in function(N,C){if(!(N instanceof C))throw new TypeError("Cannot call a class as a function")}(this,u),this._locales={},ee)this._locales[y]=ee[y]}return ee=u,y=[{key:"addLocale",value:function(ee,y){this._locales[ee]=y}},{key:"getLocale",value:function(ee){return this._locales[ee]}}],y&&function Mt(u,ee){for(var y=0;y<ee.length;y++){var N=ee[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}(ee.prototype,y),Object.defineProperty(ee,"prototype",{writable:!1}),u;var ee,y}(),Un={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Mon","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{dhx_cal_today_button:"I dag",day_tab:"Dag",week_tab:"Uke",month_tab:"M\xe5ned",new_event:"Ny hendelse",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du forandre hele dette settet av repeterende hendelser?",section_recurring:"Repeter hendelsen",button_recurring:"Av",button_recurring_open:"P\xe5",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"\xc5r",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ukentlig",repeat_radio_month:"M\xe5nedlig",repeat_radio_year:"\xc5rlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"Alle hverdager",repeat_week:" Gjentas hver",repeat_text_week_count:"uke p\xe5:",repeat_radio_month_type:"P\xe5 hver",repeat_radio_month_start:"P\xe5",repeat_text_month_day:"dag hver",repeat_text_month_count:"m\xe5ned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"m\xe5ned",repeat_year_label:"p\xe5",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen sluttdato",repeat_text_occurences_count:"forekomst",repeat_radio_end3:"Stop den",repeat_radio_end2:"Etter",month_for_recurring:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],day_for_recurring:["Sondag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"]}},Dn={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{dhx_cal_today_button:"Vandaag",day_tab:"Dag",week_tab:"Week",month_tab:"Maand",new_event:"Nieuw item",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",full_day:"Hele dag",confirm_recurring:"Wilt u alle terugkerende items bijwerken?",section_recurring:"Item herhalen",button_recurring:"Uit",button_recurring_open:"Aan",button_edit_series:"Bewerk de serie",button_edit_occurrence:"Bewerk een kopie",agenda_tab:"Agenda",date:"Datum",description:"Omschrijving",year_tab:"Jaar",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagelijks",repeat_radio_week:"Wekelijks",repeat_radio_month:"Maandelijks",repeat_radio_year:"Jaarlijks",repeat_radio_day_type:"Elke",repeat_text_day_count:"dag(en)",repeat_radio_day_type2:"Elke werkdag",repeat_week:" Herhaal elke",repeat_text_week_count:"week op de volgende dagen:",repeat_radio_month_type:"Herhaal",repeat_radio_month_start:"Op",repeat_text_month_day:"dag iedere",repeat_text_month_count:"maanden",repeat_text_month_count2_before:"iedere",repeat_text_month_count2_after:"maanden",repeat_year_label:"Op",select_year_day2:"van",repeat_text_year_day:"dag",select_year_month:"maand",repeat_radio_end:"Geen eind datum",repeat_text_occurences_count:"keren",repeat_radio_end3:"Eindigd per",repeat_radio_end2:"Na",month_for_recurring:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],day_for_recurring:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"]}},dt={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uke",month_tab:"M\xe5ned",new_event:"Ny",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppf\xf8ringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",full_day:"Full dag",confirm_recurring:"Vil du endre hele settet med repeterende oppf\xf8ringer?",section_recurring:"Repeterende oppf\xf8ring",button_recurring:"Ikke aktiv",button_recurring_open:"Aktiv",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"\xc5r",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},He={date:{month_full:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa\u017a","Lis","Gru"],day_full:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],day_short:["Nie","Pon","Wto","\u015aro","Czw","Pi\u0105","Sob"]},labels:{dhx_cal_today_button:"Dzi\u015b",day_tab:"Dzie\u0144",week_tab:"Tydzie\u0144",month_tab:"Miesi\u0105c",new_event:"Nowe zdarzenie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczeg\xf3\u0142y",icon_edit:"Edytuj",icon_delete:"Usu\u0144",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usuni\u0119te na zawsze, kontynuowa\u0107?",section_description:"Opis",section_time:"Okres czasu",full_day:"Ca\u0142y dzie\u0144",confirm_recurring:"Czy chcesz edytowa\u0107 ca\u0142y zbi\xf3r powtarzaj\u0105cych si\u0119 zdarze\u0144?",section_recurring:"Powt\xf3rz zdarzenie",button_recurring:"Nieaktywne",button_recurring_open:"Aktywne",button_edit_series:"Edytuj seri\u0119",button_edit_occurrence:"Edytuj kopi\u0119",agenda_tab:"Agenda",date:"Data",description:"Opis",year_tab:"Rok",week_agenda_tab:"Agenda",grid_tab:"Tabela",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Codziennie",repeat_radio_week:"Co tydzie",repeat_radio_month:"Co miesic",repeat_radio_year:"Co rok",repeat_radio_day_type:"Kadego",repeat_text_day_count:"dnia",repeat_radio_day_type2:"Kadego dnia roboczego",repeat_week:" Powtarzaj kadego",repeat_text_week_count:"tygodnia w dni:",repeat_radio_month_type:"Powtrz",repeat_radio_month_start:"W",repeat_text_month_day:"dnia kadego",repeat_text_month_count:"miesica",repeat_text_month_count2_before:"kadego",repeat_text_month_count2_after:"miesica",repeat_year_label:"W",select_year_day2:"miesica",repeat_text_year_day:"dnia miesica",select_year_month:"",repeat_radio_end:"Bez daty kocowej",repeat_text_occurences_count:"wystpieniu/ach",repeat_radio_end3:"Zakocz w",repeat_radio_end2:"Po",month_for_recurring:["Stycznia","Lutego","Marca","Kwietnia","Maja","Czerwca","Lipca","Sierpnia","Wrzenia","Padziernka","Listopada","Grudnia"],day_for_recurring:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"]}},mt={date:{month_full:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{dhx_cal_today_button:"Hoje",day_tab:"Dia",week_tab:"Semana",month_tab:"M\xeas",new_event:"Novo evento",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Deletar",confirm_closing:"",confirm_deleting:"Tem certeza que deseja excluir?",section_description:"Descri\xe7\xe3o",section_time:"Per\xedodo de tempo",full_day:"Dia inteiro",confirm_recurring:"Deseja editar todos esses eventos repetidos?",section_recurring:"Repetir evento",button_recurring:"Desabilitar",button_recurring_open:"Habilitar",button_edit_series:"Editar a s\xe9rie",button_edit_occurrence:"Editar uma c\xf3pia",agenda_tab:"Dia",date:"Data",description:"Descri\xe7\xe3o",year_tab:"Ano",week_agenda_tab:"Dia",grid_tab:"Grade",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Di\xe1rio",repeat_radio_week:"Semanal",repeat_radio_month:"Mensal",repeat_radio_year:"Anual",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia(s)",repeat_radio_day_type2:"Cada trabalho di\xe1rio",repeat_week:" Repita cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repetir",repeat_radio_month_start:"Em",repeat_text_month_day:"todo dia",repeat_text_month_count:"m\xeas",repeat_text_month_count2_before:"todo",repeat_text_month_count2_after:"m\xeas",repeat_year_label:"Em",select_year_day2:"of",repeat_text_year_day:"dia",select_year_month:"m\xeas",repeat_radio_end:"Sem data final",repeat_text_occurences_count:"ocorr\xeancias",repeat_radio_end3:"Fim",repeat_radio_end2:"Depois",month_for_recurring:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],day_for_recurring:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"]}},Ce={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{dhx_cal_today_button:"Astazi",day_tab:"Zi",week_tab:"Saptamana",month_tab:"Luna",new_event:"Eveniment nou",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",full_day:"Toata ziua",confirm_recurring:"Vrei sa editezi toata seria de evenimente repetate?",section_recurring:"Repetare",button_recurring:"Dezactivata",button_recurring_open:"Activata",button_edit_series:"Editeaza serie",button_edit_occurrence:"Editeaza doar intrare",agenda_tab:"Agenda",date:"Data",description:"Descriere",year_tab:"An",week_agenda_tab:"Agenda",grid_tab:"Lista",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Zilnic",repeat_radio_week:"Saptamanal",repeat_radio_month:"Lunar",repeat_radio_year:"Anual",repeat_radio_day_type:"La fiecare",repeat_text_day_count:"zi(le)",repeat_radio_day_type2:"Fiecare zi lucratoare",repeat_week:" Repeta la fiecare",repeat_text_week_count:"saptamana in urmatoarele zile:",repeat_radio_month_type:"Repeta in",repeat_radio_month_start:"In a",repeat_text_month_day:"zi la fiecare",repeat_text_month_count:"luni",repeat_text_month_count2_before:"la fiecare",repeat_text_month_count2_after:"luni",repeat_year_label:"In",select_year_day2:"a lunii",repeat_text_year_day:"zi a lunii",select_year_month:"",repeat_radio_end:"Fara data de sfarsit",repeat_text_occurences_count:"evenimente",repeat_radio_end3:"La data",repeat_radio_end2:"Dupa",month_for_recurring:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],day_for_recurring:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"]}},at={date:{month_full:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","Ma\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","O\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],month_short:["\u042f\u043d\u0432","\u0424\u0435\u0432","Ma\u0440","A\u043f\u0440","Ma\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","A\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"],day_full:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"],day_short:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]},labels:{dhx_cal_today_button:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",day_tab:"\u0414\u0435\u043d\u044c",week_tab:"\u041d\u0435\u0434\u0435\u043b\u044f",month_tab:"\u041c\u0435\u0441\u044f\u0446",new_event:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435",icon_save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon_cancel:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",icon_details:"\u0414\u0435\u0442\u0430\u043b\u0438",icon_edit:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",icon_delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",confirm_closing:"",confirm_deleting:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e, \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?",section_description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",section_time:"\u041f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438",full_day:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",confirm_recurring:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u044e \u0441\u0435\u0440\u0438\u044e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u0439?",section_recurring:"\u041f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435",button_recurring:"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_recurring_open:"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_edit_series:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0438\u044e",button_edit_occurrence:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440",agenda_tab:"\u0421\u043f\u0438\u0441\u043e\u043a",date:"\u0414\u0430\u0442\u0430",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",year_tab:"\u0413\u043e\u0434",week_agenda_tab:"\u0421\u043f\u0438\u0441\u043e\u043a",grid_tab:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0414\u0435\u043d\u044c",repeat_radio_week:"\u041d\u0435\u0434\u0435\u043b\u044f",repeat_radio_month:"\u041c\u0435\u0441\u044f\u0446",repeat_radio_year:"\u0413\u043e\u0434",repeat_radio_day_type:"\u041a\u0430\u0436\u0434\u044b\u0439",repeat_text_day_count:"\u0434\u0435\u043d\u044c",repeat_radio_day_type2:"\u041a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u0434\u0435\u043d\u044c",repeat_week:" \u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c \u043a\u0430\u0436\u0434\u0443\u044e",repeat_text_week_count:"\u043d\u0435\u0434\u0435\u043b\u044e , \u0432:",repeat_radio_month_type:"\u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c",repeat_radio_month_start:"",repeat_text_month_day:" \u0447\u0438\u0441\u043b\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 ",repeat_text_month_count:"\u043c\u0435\u0441\u044f\u0446",repeat_text_month_count2_before:"\u043a\u0430\u0436\u0434\u044b\u0439 ",repeat_text_month_count2_after:"\u043c\u0435\u0441\u044f\u0446",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"\u0434\u0435\u043d\u044c",select_year_month:"",repeat_radio_end:"\u0411\u0435\u0437 \u0434\u0430\u0442\u044b \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",repeat_text_occurences_count:"\u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0439",repeat_radio_end3:"\u0414\u043e ",repeat_radio_end2:"",month_for_recurring:["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],day_for_recurring:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0443","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0443","\u0421\u0443\u0431\u0431\u043e\u0442\u0443"]}},St={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","\u010cetrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","\u010cet","Pet","Sob"]},labels:{dhx_cal_today_button:"Danes",day_tab:"Dan",week_tab:"Teden",month_tab:"Mesec",new_event:"Nov dogodek",icon_save:"Shrani",icon_cancel:"Prekli\u010di",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbri\u0161i",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. \u017delite nadaljevati?",section_description:"Opis",section_time:"\u010casovni okvir",full_day:"Ves dan",confirm_recurring:"\u017delite urediti celoten set ponavljajo\u010dih dogodkov?",section_recurring:"Ponovi dogodek",button_recurring:"Onemogo\u010deno",button_recurring_open:"Omogo\u010deno",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Zadeva",date:"Datum",description:"Opis",year_tab:"Leto",week_agenda_tab:"Zadeva",grid_tab:"Miza",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},Je={date:{month_full:["Janu\xe1r","Febru\xe1r","Marec","Apr\xedl","M\xe1j","J\xfan","J\xfal","August","September","Okt\xf3ber","November","December"],month_short:["Jan","Feb","Mar","Apr","M\xe1j","J\xfan","J\xfal","Aug","Sept","Okt","Nov","Dec"],day_full:["Nede\u013ea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","\u0160t","Pi","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"De\u0148",week_tab:"T\xfd\u017ede\u0148",month_tab:"Mesiac",new_event:"Nov\xe1 udalos\u0165",icon_save:"Ulo\u017ei\u0165",icon_cancel:"Sp\xe4\u0165",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmaza\u0165",confirm_closing:"Va\u0161e zmeny nebud\xfa ulo\u017een\xe9. Skuto\u010dne?",confirm_deleting:"Udalos\u0165 bude natrvalo vymazan\xe1. Skuto\u010dne?",section_description:"Pozn\xe1mky",section_time:"Doba platnosti",confirm_recurring:"Prajete si upravi\u0165 cel\xfa radu opakovan\xfdch udalost\xed?",section_recurring:"Opakovanie udalosti",button_recurring:"Vypnut\xe9",button_recurring_open:"Zapnut\xe9",button_edit_series:"Upravi\u0165 opakovania",button_edit_occurrence:"Upravi\u0165 in\u0161tancie",agenda_tab:"Program",date:"D\xe1tum",description:"Pozn\xe1mka",year_tab:"Rok",full_day:"Cel\xfd de\u0148",week_agenda_tab:"Program",grid_tab:"Mrie\u017eka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denne",repeat_radio_week:"T\xfd\u017edenne",repeat_radio_month:"Mesa\xe8ne",repeat_radio_year:"Ro\xe8ne",repeat_radio_day_type:"Ka\u017ed\xfd",repeat_text_day_count:"de\xf2",repeat_radio_day_type2:"Ka\u017ed\xfd prac. de\xf2",repeat_week:"Opakova ka\u017ed\xfd",repeat_text_week_count:"t\xfd\u017ede\xf2 v d\xf2och:",repeat_radio_month_type:"Opakova",repeat_radio_month_start:"On",repeat_text_month_day:"de\xf2 ka\u017ed\xfd",repeat_text_month_count:"mesiac",repeat_text_month_count2_before:"ka\u017ed\xfd",repeat_text_month_count2_after:"mesiac",repeat_year_label:"On",select_year_day2:"po\xe8as",repeat_text_year_day:"de\xf2",select_year_month:"mesiac",repeat_radio_end:"Bez d\xe1tumu ukon\xe8enia",repeat_text_occurences_count:"udalostiach",repeat_radio_end3:"Ukon\xe8i",repeat_radio_end2:"Po",month_for_recurring:["Janu\xe1r","Febru\xe1r","Marec","Apr\xedl","M\xe1j","J\xfan","J\xfal","August","September","Okt\xf3ber","November","December"],day_for_recurring:["Nede\xbea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"]}},lt={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],day_short:["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Vecka",month_tab:"M\xe5nad",new_event:"Ny h\xe4ndelse",icon_save:"Spara",icon_cancel:"\xc5ngra",icon_details:"Detaljer",icon_edit:"\xc4ndra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"\xc4r du s\xe4ker p\xe5 att du vill ta bort h\xe4ndelsen permanent?",section_description:"Beskrivning",section_time:"Tid",full_day:"Hela dagen",confirm_recurring:"Vill du redigera hela serien med repeterande h\xe4ndelser?",section_recurring:"Upprepa h\xe4ndelse",button_recurring:"Inaktiverat",button_recurring_open:"Aktiverat",button_edit_series:"Redigera serien",button_edit_occurrence:"Redigera en kopia",agenda_tab:"Dagordning",date:"Datum",description:"Beskrivning",year_tab:"\xc5r",week_agenda_tab:"Dagordning",grid_tab:"Galler",drag_to_create:"Dra f\xf6r att skapa ny",drag_to_move:"Dra f\xf6r att flytta",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagligen",repeat_radio_week:"Veckovis",repeat_radio_month:"M\xe5nadsvis",repeat_radio_year:"\xc5rligen",repeat_radio_day_type:"Var",repeat_text_day_count:"dag",repeat_radio_day_type2:"Varje arbetsdag",repeat_week:" Upprepa var",repeat_text_week_count:"vecka dessa dagar:",repeat_radio_month_type:"Upprepa",repeat_radio_month_start:"Den",repeat_text_month_day:"dagen var",repeat_text_month_count:"m\xe5nad",repeat_text_month_count2_before:"var",repeat_text_month_count2_after:"m\xe5nad",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"m\xe5nad",repeat_radio_end:"Inget slutdatum",repeat_text_occurences_count:"upprepningar",repeat_radio_end3:"Sluta efter",repeat_radio_end2:"Efter",month_for_recurring:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],day_for_recurring:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"]}},De={date:{month_full:["Ocak","\xdeubat","Mart","Nisan","May\xfds","Haziran","Temmuz","A\xf0ustos","Eyl\xfcl","Ekim","Kas\xfdm","Aral\xfdk"],month_short:["Oca","\xdeub","Mar","Nis","May","Haz","Tem","A\xf0u","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartes,","Sal\xfd","\xc7ar\xfeamba","Per\xfeembe","Cuma","Cumartesi"],day_short:["Paz","Pts","Sal","\xc7ar","Per","Cum","Cts"]},labels:{dhx_cal_today_button:"Bug\xfcn",day_tab:"G\xfcn",week_tab:"Hafta",month_tab:"Ay",new_event:"Uygun",icon_save:"Kaydet",icon_cancel:"\xddptal",icon_details:"Detaylar",icon_edit:"D\xfczenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Etkinlik silinecek, devam?",section_description:"A\xe7\xfdklama",section_time:"Zaman aral\xfd\xf0\xfd",full_day:"Tam g\xfcn",confirm_recurring:"T\xfcm tekrar eden etkinlikler silinecek, devam?",section_recurring:"Etkinli\xf0i tekrarla",button_recurring:"Pasif",button_recurring_open:"Aktif",button_edit_series:"Dizi d\xfczenleme",button_edit_occurrence:"Bir kopyas\u0131n\u0131 d\xfczenleyin",agenda_tab:"Ajanda",date:"Tarih",description:"A\xe7\xfdklama",year_tab:"Y\xfdl",week_agenda_tab:"Ajanda",grid_tab:"Izgara",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},It={date:{month_full:["\u0421\u0456\u0447\u0435\u043d\u044c","\u041b\u044e\u0442\u0438\u0439","\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u041a\u0432\u0456\u0442\u0435\u043d\u044c","\u0422\u0440\u0430\u0432\u0435\u043d\u044c","\u0427\u0435\u0440\u0432\u0435\u043d\u044c","\u041b\u0438\u043f\u0435\u043d\u044c","\u0421\u0435\u0440\u043f\u0435\u043d\u044c","\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0416\u043e\u0432\u0442\u0435\u043d\u044c","\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043d\u044c"],month_short:["\u0421\u0456\u0447","\u041b\u044e\u0442","\u0411\u0435\u0440","\u041a\u0432\u0456","\u0422\u0440\u0430","\u0427\u0435\u0440","\u041b\u0438\u043f","\u0421\u0435\u0440","\u0412\u0435\u0440","\u0416\u043e\u0432","\u041b\u0438\u0441","\u0413\u0440\u0443"],day_full:["\u041d\u0435\u0434\u0456\u043b\u044f","\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a","\u0412\u0456\u0432\u0442\u043e\u0440\u043e\u043a","\u0421\u0435\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f","\u0421\u0443\u0431\u043e\u0442\u0430"],day_short:["\u041d\u0435\u0434","\u041f\u043e\u043d","\u0412\u0456\u0432","\u0421\u0435\u0440","\u0427\u0435\u0442","\u041f\u0442\u043d","\u0421\u0443\u0431"]},labels:{dhx_cal_today_button:"\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456",day_tab:"\u0414\u0435\u043d\u044c",week_tab:"\u0422\u0438\u0436\u0434\u0435\u043d\u044c",month_tab:"\u041c\u0456\u0441\u044f\u0446\u044c",new_event:"\u041d\u043e\u0432\u0430 \u043f\u043e\u0434\u0456\u044f",icon_save:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",icon_cancel:"\u0412\u0456\u0434\u043c\u0456\u043d\u0430",icon_details:"\u0414\u0435\u0442\u0430\u043b\u0456",icon_edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",icon_delete:"\u0412\u0438\u043b\u0443\u0447\u0438\u0442\u0438",confirm_closing:"",confirm_deleting:"\u041f\u043e\u0434\u0456\u044f \u0432\u0438\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0432\u0436\u0434\u0438. \u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456?",section_description:"\u041e\u043f\u0438\u0441",section_time:"\u0427\u0430\u0441\u043e\u0432\u0438\u0439 \u043f\u0440\u043e\u043c\u0456\u0436\u043e\u043a",full_day:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",confirm_recurring:"\u0425\u043e\u0447\u0435\u0442\u0435 \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0435\u0441\u044c \u043f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u043d\u0438\u0445 \u043f\u043e\u0434\u0456\u0439?",section_recurring:"\u041f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u043d\u0430 \u043f\u043e\u0434\u0456\u044f",button_recurring:"\u0412\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_recurring_open:"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_edit_series:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0441\u0435\u0440\u0456\u044e",button_edit_occurrence:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043f\u0440\u0438\u043c\u0456\u0440\u043d\u0438\u043a",agenda_tab:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a",date:"\u0414\u0430\u0442\u0430",description:"\u041e\u043f\u0438\u0441",year_tab:"\u0420\u0456\u043a",week_agenda_tab:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a",grid_tab:"\u0422\u0430\u0431\u043b\u0438\u0446\u044f",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0414\u0435\u043d\u044c",repeat_radio_week:"\u0422\u0438\u0436\u0434\u0435\u043d\u044c",repeat_radio_month:"\u041c\u0456\u0441\u044f\u0446\u044c",repeat_radio_year:"\u0420\u0456\u043a",repeat_radio_day_type:"\u041a\u043e\u0436\u043d\u0438\u0439",repeat_text_day_count:"\u0434\u0435\u043d\u044c",repeat_radio_day_type2:"\u041a\u043e\u0436\u043d\u0438\u0439 \u0440\u043e\u0431\u043e\u0447\u0438\u0439 \u0434\u0435\u043d\u044c",repeat_week:" \u041f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u0442\u0438 \u043a\u043e\u0436\u0435\u043d",repeat_text_week_count:"\u0442\u0438\u0436\u0434\u0435\u043d\u044c , \u043f\u043e:",repeat_radio_month_type:"\u041f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u0442\u0438",repeat_radio_month_start:"",repeat_text_month_day:" \u0447\u0438\u0441\u043b\u0430 \u043a\u043e\u0436\u043d\u0438\u0439 ",repeat_text_month_count:"\u043c\u0456\u0441\u044f\u0446\u044c",repeat_text_month_count2_before:"\u043a\u043e\u0436\u0435\u043d ",repeat_text_month_count2_after:"\u043c\u0456\u0441\u044f\u0446\u044c",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"\u0434\u0435\u043d\u044c",select_year_month:"",repeat_radio_end:"\u0411\u0435\u0437 \u0434\u0430\u0442\u0438 \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f",repeat_text_occurences_count:"\u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u044c",repeat_radio_end3:"\u0414\u043e ",repeat_radio_end2:"",month_for_recurring:["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"],day_for_recurring:["\u041d\u0435\u0434\u0456\u043b\u044f\u043c","\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043a\u0430\u043c","\u0412\u0456\u0432\u0442\u043e\u0440\u043a\u0430\u043c","\u0421\u0435\u0440\u0435\u0434\u0430\u043c","\u0427\u0435\u0442\u0432\u0435\u0440\u0433\u0430\u043c","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f\u043c","\u0421\u0443\u0431\u043e\u0442\u0430\u043c"]}};function qt(u){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}var ge=function(u){var c,m,w,ee={version:"6.0.5"};m={agenda:"https://docs.dhtmlx.com/scheduler/agenda_view.html",grid:"https://docs.dhtmlx.com/scheduler/grid_view.html",map:"https://docs.dhtmlx.com/scheduler/map_view.html",unit:"https://docs.dhtmlx.com/scheduler/units_view.html",timeline:"https://docs.dhtmlx.com/scheduler/timeline_view.html",week_agenda:"https://docs.dhtmlx.com/scheduler/weekagenda_view.html",year:"https://docs.dhtmlx.com/scheduler/year_view.html",anythingElse:"https://docs.dhtmlx.com/scheduler/views.html"},w={agenda:"ext/dhtmlxscheduler_agenda_view.js",grid:"ext/dhtmlxscheduler_grid_view.js",map:"ext/dhtmlxscheduler_map_view.js",unit:"ext/dhtmlxscheduler_units.js",timeline:"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js",week_agenda:"ext/dhtmlxscheduler_week_agenda.js",year:"ext/dhtmlxscheduler_year_view.js",limit:"ext/dhtmlxscheduler_limit.js"},(c=ee)._commonErrorMessages={unknownView:function(T){var j=w[T]?"You're probably missing "+w[T]+".":"";return"`"+T+"` view is not defined. \nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \nRelated docs: "+(m[T]||m.anythingElse)+"\n"+(j?j+"\n":"")},collapsedContainer:function(T){return"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \nMake sure that the container has some initial height or use different units. For example:\n<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \n"}},c.createTimelineView=function(){throw new Error("scheduler.createTimelineView is not implemented. Be sure to add the required extension: "+w.timeline+"\nRelated docs: "+m.timeline)},c.createUnitsView=function(){throw new Error("scheduler.createUnitsView is not implemented. Be sure to add the required extension: "+w.unit+"\nRelated docs: "+m.unit)},c.createGridView=function(){throw new Error("scheduler.createGridView is not implemented. Be sure to add the required extension: "+w.grid+"\nRelated docs: "+m.grid)},c.addMarkedTimespan=function(){throw new Error("scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\nRelated docs: https://docs.dhtmlx.com/scheduler/limits.html")},c.renderCalendar=function(){throw new Error("scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\nhttps://docs.dhtmlx.com/scheduler/minicalendar.html")},c.exportToPNG=function(){throw new Error(["scheduler.exportToPNG is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},c.exportToPDF=function(){throw new Error(["scheduler.exportToPDF is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},function(c){var m=function u(ee,y){ee=ee||v.event,y=y||v.eventRemove;var N=[],C={attach:function(c,m,w,T){N.push({element:c,event:m,callback:w,capture:T}),ee(c,m,w,T)},detach:function(c,m,w,T){y(c,m,w,T);for(var j=0;j<N.length;j++){var J=N[j];J.element===c&&J.event===m&&J.callback===w&&J.capture===T&&(N.splice(j,1),j--)}},detachAll:function(){for(var c=N.slice(),m=0;m<c.length;m++){var w=c[m];C.detach(w.element,w.event,w.callback,w.capture),C.detach(w.element,w.event,w.callback,void 0),C.detach(w.element,w.event,w.callback,!1),C.detach(w.element,w.event,w.callback,!0)}N.splice(0,N.length)},extend:function(){return u(this.event,this.eventRemove)}};return C}();c.event=m.attach,c.eventRemove=m.detach,c._eventRemoveAll=m.detachAll,c._createDomEventScope=m.extend,c._trim=function(w){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(w)},c._isDate=function(w){return!(!w||"object"!=E(w)||!(w.getFullYear&&w.getMonth&&w.getDate))},c._isObject=function(w){return w&&"object"==E(w)}}(ee),function(c){A(c),function I(u){function ee(m){var w=document.createElement("div");return(m||"").split(" ").forEach(function(T){w.classList.add(T)}),w}var y_rows_container=function(){return ee("dhx_cal_navbar_rows_container")},y_row=function(){return ee("dhx_cal_navbar_row")},y_view=function(m){var w=ee("dhx_cal_tab");return w.setAttribute("name",m.view+"_tab"),w.setAttribute("data-tab",m.view),u.config.fix_tab_position&&(m.$firstTab?w.classList.add("dhx_cal_tab_first"):m.$lastTab?w.classList.add("dhx_cal_tab_last"):"week"!==m.view&&w.classList.add("dhx_cal_tab_standalone")),w},y_date=function(){return ee("dhx_cal_date")},y_button=function(m){return ee("dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab")},y_builtInButton=function(m){return ee("dhx_cal_"+m.view+"_button dhx_cal_nav_button")},y_spacer=function(){return ee("dhx_cal_line_spacer")},y_minicalendarButton=function(m){var w=ee("dhx_minical_icon");return m.click||w.$_eventAttached||u.event(w,"click",function(){u.isCalendarVisible()?u.destroyCalendar():u.renderCalendar({position:this,date:u.getState().date,navigation:!0,handler:function(T,j){u.setCurrentView(T),u.destroyCalendar()}})}),w};function N(m){var w=function(J){var M;if(J.view)switch(J.view){case"today":case"next":case"prev":M=y_builtInButton;break;case"date":M=y_date;break;case"spacer":M=y_spacer;break;case"button":M=y_button;break;case"minicalendar":M=y_minicalendarButton;break;default:M=y_view}else J.rows?M=y_rows_container:J.cols&&(M=y_row);return M}(m);if(w){var T=w(m);if(m.css&&T.classList.add(m.css),m.width&&((j=m.width)===1*j&&(j+="px"),T.style.width=j),m.height&&((j=m.height)===1*j&&(j+="px"),T.style.height=j),m.click&&T.addEventListener("click",m.click),m.html&&(T.innerHTML=m.html),m.align){var j="";"right"==m.align?j="flex-end":"left"==m.align&&(j="flex-start"),T.style.justifyContent=j}return T}}function C(m){return"string"==typeof m&&(m={view:m}),m.view||m.rows||m.cols||(m.view="button"),m}u._init_nav_bar=function(m){var w=this.$container.querySelector(".dhx_cal_navline");return w||((w=document.createElement("div")).className="dhx_cal_navline dhx_cal_navline_flex",u._update_nav_bar(m,w),w)};var c=null;u._update_nav_bar=function(m,w){if(m){var T=!1,J=m.height||u.xy.nav_height;null!==c&&c===J||(T=!0),T&&(u.xy.nav_height=J),w.innerHTML="",w.appendChild(function M(Z){var K,ce=document.createDocumentFragment();K=Array.isArray(Z)?Z:[Z];for(var _e=0;_e<K.length;_e++){var xe,Pe=C(K[_e]);"day"===Pe.view&&K[_e+1]&&("week"!==(xe=C(K[_e+1])).view&&"month"!==xe.view||(Pe.$firstTab=!0)),"month"===Pe.view&&K[_e-1]&&("week"!==(xe=C(K[_e-1])).view&&"day"!==xe.view||(Pe.$lastTab=!0));var ke=N(Pe);ce.appendChild(ke),(Pe.cols||Pe.rows)&&ke.appendChild(M(Pe.cols||Pe.rows))}return ce}(m)),u.unset_actions(),u._els=[],u.get_elements(),u.set_actions(),w.style.display=0===J?"none":"",c=J}}}(c),c._detachDomEvent=function(M,Z,K){M.removeEventListener?M.removeEventListener(Z,K,!1):M.detachEvent&&M.detachEvent("on"+Z,K)},c._init_once=function(){(function R(u){function ee(c){for(var m=document.body;c&&c!=m;)c=c.parentNode;return m==c}function y(c){return{w:c.innerWidth||document.documentElement.clientWidth,h:c.innerHeight||document.documentElement.clientHeight}}function N(c,m){var w,T=y(m);c.event(m,"resize",function(){clearTimeout(w),w=setTimeout(function(){if(ee(c.$container)&&!c.$destroyed){var j=y(m);(J=T).w==(M=j).w&&J.h==M.h||(T=j,C(c))}var J,M},150)})}function C(c){!c.$destroyed&&c.$root&&ee(c.$root)&&c.callEvent("onSchedulerResize",[])&&(c.updateView(),c.callEvent("onAfterSchedulerResize",[]))}!function(c){var m=c.$container;"static"==window.getComputedStyle(m).getPropertyValue("position")&&(m.style.position="relative");var T,j,J,w=document.createElement("iframe");w.className="scheduler_container_resize_watcher",w.tabIndex=-1,c.config.wai_aria_attributes&&(w.setAttribute("role","none"),w.setAttribute("aria-hidden",!0)),window.Sfdc||window.$A||window.Aura?(j=(T=c).$root.offsetHeight,J=T.$root.offsetWidth,function M(){T.$destroyed||(T.$root&&(T.$root.offsetHeight==j&&T.$root.offsetWidth==J||C(T),j=T.$root.offsetHeight,J=T.$root.offsetWidth),setTimeout(M,200))}()):(m.appendChild(w),w.contentWindow?N(c,w.contentWindow):(m.removeChild(w),N(c,window)))}(u)})(c),c._init_once=function(){}};function j(M){return!!(M.querySelector(".dhx_cal_header")&&M.querySelector(".dhx_cal_data")&&M.querySelector(".dhx_cal_navline"))}c.init=function(M,Z,K){if(!this.$destroyed){if(Z=Z||c._currentDate(),K=K||"week",this._obj&&this.unset_actions(),this._obj="string"==typeof M?document.getElementById(M):M,this.$container=this._obj,this.$root=this._obj,!this.$container.offsetHeight&&this.$container.offsetWidth&&"100%"===this.$container.style.height&&window.console.error(c._commonErrorMessages.collapsedContainer(),this.$container),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this.config.header||j(this.$container)||(this.config.header=function(ce){var _e=["day","week","month"];if(ce.matrix)for(var xe in ce.matrix)_e.push(xe);if(ce._props)for(var xe in ce._props)_e.push(xe);if(ce._grid&&ce._grid.names)for(var xe in ce._grid.names)_e.push(xe);return["map","agenda","week_agenda","year"].forEach(function(Pe){ce[Pe+"_view"]&&_e.push(Pe)}),_e.concat(["date"]).concat(["prev","today","next"])}(this),window.console.log(["Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.","Using a default header configuration: ","scheduler.config.header = "+JSON.stringify(this.config.header,null,2),"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html"].join("\n"))),this.config.header)this.$container.innerHTML="",this.$container.classList.add("dhx_cal_container"),this.config.header.height&&(this.xy.nav_height=this.config.header.height),this.$container.appendChild(function(M){return c._init_nav_bar(M)}(this.config.header)),this.$container.appendChild(function(M){var Z=document.createElement("div");return Z.className="dhx_cal_header",Z}()),this.$container.appendChild(function(M){var Z=document.createElement("div");return Z.className="dhx_cal_data",Z}());else if(!j(this.$container))throw new Error(["Required DOM elements are missing from the scheduler container.","Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup","Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig"].join("\n"));this.config.rtl&&(this.$container.className+=" dhx_cal_container_rtl"),this._skin_init&&c._skin_init(),c.date.init(),this._scroll=!0,this._quirks=this.$env.isIE&&"BackCompat"==document.compatMode,this._quirks7=this.$env.isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this._els=[],this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),c.callEvent("onSchedulerReady",[]),c.$initialized=!0,this.setCurrentView(Z,K)}},c.xy={min_event_height:40,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},c.keys={edit_save:13,edit_cancel:27},c.bind=function(M,Z){return M.bind?M.bind(Z):function(){return M.apply(Z,arguments)}},c.set_sizes=function(){var M=this._x=this._obj.clientWidth-this.xy.margin_left,Z=this._y=this._obj.clientHeight-this.xy.margin_top,K=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,ce=this._table_view?-1:this.xy.scale_width,_e=this.$container.querySelector(".dhx_cal_scale_placeholder");c._is_material_skin()?(_e||((_e=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(_e,this._els.dhx_cal_header[0])),_e.style.display="block",this.set_xy(_e,M,this.xy.scale_height+1,0,this.xy.nav_height+(this._quirks?-1:1))):_e&&_e.parentNode.removeChild(_e),this._lightbox&&(c.$container.offsetWidth<1200||this._setLbPosition(document.querySelector(".dhx_cal_light"))),this.set_xy(this._els.dhx_cal_navline[0],M,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],M-K,this.xy.scale_height,ce,this.xy.nav_height+(this._quirks?-1:1));var xe=this._els.dhx_cal_navline[0].offsetHeight;xe>0&&(this.xy.nav_height=xe);var Pe=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],M,Z-(Pe+2),0,Pe+2)},c.set_xy=function(M,Z,K,ce,_e){var xe="left";M.style.width=Math.max(0,Z)+"px",M.style.height=Math.max(0,K)+"px",arguments.length>3&&(this.config.rtl&&(xe="right"),M.style[xe]=ce+"px",M.style.top=_e+"px")},c.get_elements=function(){for(var M=this._obj.getElementsByTagName("DIV"),Z=0;Z<M.length;Z++){var K=c._getClassName(M[Z]),ce=M[Z].getAttribute("data-tab")||M[Z].getAttribute("name")||"";K&&(K=K.split(" ")[0]),this._els[K]||(this._els[K]=[]),this._els[K].push(M[Z]);var _e=c.locale.labels[ce+"_tab"]||c.locale.labels[ce||K];"string"!=typeof _e&&ce&&!M[Z].innerHTML&&(_e=ce.split("_")[0]),_e&&(this._waiAria.labelAttr(M[Z],_e),M[Z].innerHTML=_e)}};var J=c._createDomEventScope();c.unset_actions=function(){J.detachAll()},c.set_actions=function(){for(var M in this._els)if(this._click[M])for(var Z=0;Z<this._els[M].length;Z++){var K=this._els[M][Z],ce=this._click[M].bind(K);J.attach(K,"click",ce)}J.attach(this._obj,"selectstart",function(_e){return _e.preventDefault(),!1}),J.attach(this._obj,"mousemove",function(_e){c._temp_touch_block||c._on_mouse_move(_e)}),J.attach(this._obj,"mousedown",function(_e){c._ignore_next_click||c._on_mouse_down(_e)}),J.attach(this._obj,"mouseup",function(_e){c._ignore_next_click||c._on_mouse_up(_e)}),J.attach(this._obj,"dblclick",function(_e){c._on_dbl_click(_e)}),J.attach(this._obj,"contextmenu",function(_e){c.checkEvent("onContextMenu")&&_e.preventDefault();var xe=_e;return c.callEvent("onContextMenu",[c._locate_event(xe.target||xe.srcElement),xe])})},c.select=function(M){this._select_id!=M&&(c._close_not_saved(),this.editStop(!1),this._select_id&&this.unselect(),this._select_id=M,this.updateEvent(M),this.callEvent("onEventSelected",[M]))},c.unselect=function(M){if(!M||M==this._select_id){var Z=this._select_id;this._select_id=null,Z&&this.getEvent(Z)&&this.updateEvent(Z),this.callEvent("onEventUnselected",[Z])}},c.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},c._click={dhx_cal_data:function(M){if(c._ignore_next_click)return M.preventDefault&&M.preventDefault(),M.cancelBubble=!0,c._ignore_next_click=!1,!1;var Z=M.target,K=c._locate_event(Z);if(K){if(!c.callEvent("onClick",[K,M])||c.config.readonly)return}else c.callEvent("onEmptyClick",[c.getActionData(M).date,M]);if(K&&c.config.select){c.select(K);var ce=c._getClassName(Z);-1!=ce.indexOf("_icon")&&c._click.buttons[ce.split(" ")[1].replace("icon_","")](K)}else c._close_not_saved(),c.getState().select_id&&(new Date).valueOf()-(c._new_event||0)>500&&c.unselect()},dhx_cal_prev_button:function(){c._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(M,Z){var K=1;c.config.rtl&&(Z=-Z,K=-K),c.setCurrentView(c.date.add(c.date[c._mode+"_start"](new Date(c._date)),Z||K,c._mode))},dhx_cal_today_button:function(){c.callEvent("onBeforeTodayDisplayed",[])&&c.setCurrentView(c._currentDate())},dhx_cal_tab:function(){var M=this.getAttribute("data-tab"),Z=this.getAttribute("name"),K=M||Z.substring(0,Z.search("_tab"));c.setCurrentView(c._date,K)},buttons:{delete:function(M){c._dhtmlx_confirm(c.locale.labels.confirm_deleting,c.locale.labels.title_confirm_deleting,function(){c.deleteEvent(M)})},edit:function(M){c.edit(M)},save:function(M){c.editStop(!0)},details:function(M){c.showLightbox(M)},cancel:function(M){c.editStop(!1)}}},c._dhtmlx_confirm=function(M,Z,K){if(!M)return K();var ce={text:M};Z&&(ce.title=Z),K&&(ce.callback=function(_e){_e&&K()}),c.confirm(ce)},c.addEventNow=function(M,Z,K){var ce={};c._isObject(M)&&!c._isDate(M)&&(ce=M,M=null);var _e=6e4*(this.config.event_duration||this.config.time_step);M||(M=ce.start_date||Math.round(c._currentDate().valueOf()/_e)*_e);var xe=new Date(M);if(!Z){var Pe=this.config.first_hour;Pe>xe.getHours()&&(xe.setHours(Pe),M=xe.valueOf()),Z=M.valueOf()+_e}var ke=new Date(Z);xe.valueOf()==ke.valueOf()&&ke.setTime(ke.valueOf()+_e),ce.start_date=ce.start_date||xe,ce.end_date=ce.end_date||ke,ce.text=ce.text||this.locale.labels.new_event,ce.id=this._drag_id=ce.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var qe=this.addEvent(ce);return this.callEvent("onEventCreated",[this._drag_id,K]),this._loading=!1,this._drag_event={},this._on_mouse_up(K),qe},c._on_dbl_click=function(M,Z){if(Z=Z||M.target||M.srcElement,!this.config.readonly){var K=c._getClassName(Z).split(" ")[0];switch(K){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!c.config.dblclick_create)break;this.addEventNow(this.getActionData(M).date,null,M);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var ce=this._locate_event(Z);if(!this.callEvent("onDblClick",[ce,M]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(ce)._timed||!this.config.select?this.showLightbox(ce):this.edit(ce);break;case"dhx_time_block":case"dhx_cal_container":return;default:var _e=this["dblclick_"+K];if(_e)_e.call(this,M);else if(Z.parentNode&&Z!=this)return c._on_dbl_click(M,Z.parentNode)}}},c._get_column_index=function(M){var Z=0;if(this._cols){for(var K=0,ce=0;K+this._cols[ce]<M&&ce<this._cols.length;)K+=this._cols[ce],ce++;if(Z=ce+(this._cols[ce]?(M-K)/this._cols[ce]:0),this._ignores&&Z>=this._cols.length)for(;Z>=1&&this._ignores[Math.floor(Z)];)Z--}return Z},c._week_indexes_from_pos=function(M){if(this._cols){var Z=this._get_column_index(M.x);return M.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(Z)-1)),M.y=Math.max(0,Math.ceil(60*M.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),M}return M},c._mouse_coords=function(M){var Z,K=document.body,ce=document.documentElement;Z=this.$env.isIE||!M.pageX&&!M.pageY?{x:M.clientX+(K.scrollLeft||ce.scrollLeft||0)-K.clientLeft,y:M.clientY+(K.scrollTop||ce.scrollTop||0)-K.clientTop}:{x:M.pageX,y:M.pageY},this.config.rtl&&this._colsS?(Z.x=this.$container.querySelector(".dhx_cal_data").offsetWidth-Z.x,"month"!==this._mode&&(Z.x-=this.xy.scale_width)):Z.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);var _e=this.$container.querySelector(".dhx_cal_data");Z.y-=this.$domHelpers.getAbsoluteTop(_e)-this._els.dhx_cal_data[0].scrollTop,Z.ev=M;var xe=this["mouse_"+this._mode];if(xe)Z=xe.call(this,Z);else if(this._table_view){var Pe=this._get_column_index(Z.x);if(!this._cols||!this._colsS)return Z;var ke=0;for(ke=1;ke<this._colsS.heights.length&&!(this._colsS.heights[ke]>Z.y);ke++);Z.y=Math.ceil(24*(Math.max(0,Pe)+7*Math.max(0,ke-1))*60/this.config.time_step),(c._drag_mode||"month"==this._mode)&&(Z.y=24*(Math.max(0,Math.ceil(Pe)-1)+7*Math.max(0,ke-1))*60/this.config.time_step),"move"==this._drag_mode&&c._ignores_detected&&c.config.preserve_length&&(Z._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),Z.x=0}else Z=this._week_indexes_from_pos(Z);return Z.timestamp=+new Date,Z},c._close_not_saved=function(){if((new Date).valueOf()-(c._new_event||0)>500&&c._edit_id){var M=c.locale.labels.confirm_closing;c._dhtmlx_confirm(M,c.locale.labels.title_confirm_closing,function(){c.editStop(c.config.positive_closing)}),M&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},c._correct_shift=function(M,Z){return M-6e4*(new Date(c._min_date).getTimezoneOffset()-new Date(M).getTimezoneOffset())*(Z?-1:1)},c._is_pos_changed=function(M,Z){function K(ce,_e,xe){return Math.abs(ce-_e)>xe}return!M||!this._drag_pos||!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||Z.timestamp-this._drag_pos.timestamp>100||K(M.ev.clientX,Z.ev.clientX,5)||K(M.ev.clientY,Z.ev.clientY,5))},c._correct_drag_start_date=function(M){var Z;c.matrix&&(Z=c.matrix[c._mode]),Z=Z||{x_step:1,x_unit:"day"},M=new Date(M);var K=1;return(Z._start_correction||Z._end_correction)&&(K=60*(Z.last_hour||0)-(60*M.getHours()+M.getMinutes())||1),1*M+(c._get_fictional_event_length(M,K,Z)-K)},c._correct_drag_end_date=function(M,Z){var K;c.matrix&&(K=c.matrix[c._mode]);var ce=1*M+c._get_fictional_event_length(M,Z,K=K||{x_step:1,x_unit:"day"});return new Date(1*ce-(c._get_fictional_event_length(ce,-1,K,-1)+1))},c._on_mouse_move=function(M){if(this._drag_mode){var Z=this._mouse_coords(M);if(this._is_pos_changed(this._drag_pos,Z)){var K,ce;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var _e=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((_e=this._drag_pos).has_moved=!0),this._drag_pos=Z,this._drag_pos.has_moved=!0,"create"==this._drag_mode){if(_e&&(Z=_e),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,K=this._get_date_from_pos(Z).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[M,this._drag_id])?(this._loading=!1,void(this._drag_start=K)):void(this._loading=!1);ce=K;var xe=new Date(this._drag_start),Pe=new Date(ce);"day"!=this._mode&&"week"!=this._mode||xe.getHours()!=Pe.getHours()||xe.getMinutes()!=Pe.getMinutes()||(Pe=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(xe,Pe,this.locale.labels.new_event,this._drag_id,Z.fields),this.callEvent("onEventCreated",[this._drag_id,M]),this._loading=!1,this._drag_mode="new-size"}var ke,qe=this.config.time_step,rt=this.getEvent(this._drag_id);if(c.matrix&&(ke=c.matrix[c._mode]),ke=ke||{x_step:1,x_unit:"day"},"move"==this._drag_mode)K=this._min_date.valueOf()+6e4*(Z.y*this.config.time_step+24*Z.x*60),!Z.custom&&this._table_view&&(K+=1e3*this.date.time_part(rt.start_date)),!this._table_view&&this._dragEventBody&&void 0===this._drag_event._move_event_shift&&(this._drag_event._move_event_shift=K-rt.start_date),this._drag_event._move_event_shift&&(K-=this._drag_event._move_event_shift),K=this._correct_shift(K),Z._ignores&&this.config.preserve_length&&this._table_view?(K=c._correct_drag_start_date(K),ce=c._correct_drag_end_date(K,this._drag_event._event_length)):ce=rt.end_date.valueOf()-(rt.start_date.valueOf()-K);else{if(K=rt.start_date.valueOf(),ce=rt.end_date.valueOf(),this._table_view){var wt=this._min_date.valueOf()+Z.y*this.config.time_step*6e4+(Z.custom?0:864e5);if("month"==this._mode)if(wt=this._correct_shift(wt,!1),this._drag_from_start){var Xe=864e5;wt<=c.date.date_part(new Date(ce+Xe-1)).valueOf()&&(K=wt-Xe)}else ce=wt;else this.config.preserve_length?Z.resize_from_start?K=c._correct_drag_start_date(wt):ce=c._correct_drag_end_date(wt,0):Z.resize_from_start?K=wt:ce=wt}else{var ct=this.date.date_part(new Date(rt.end_date.valueOf()-1)).valueOf(),Ze=new Date(ct),nt=60/qe*(this.config.last_hour-this.config.first_hour);this.config.time_step=1;var jt=this._mouse_coords(M);this.config.time_step=qe;var Yt=Z.y*qe*6e4,Ht=Math.min(Z.y+1,nt)*qe*6e4,rn=6e4*jt.y;ce=Math.abs(Yt-rn)>Math.abs(Ht-rn)?ct+Ht:ct+Yt,ce+=6e4*(new Date(ce).getTimezoneOffset()-Ze.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize","week"!=this._mode&&"day"!=this._mode||(ce=this._correct_shift(ce))}if("new-size"==this._drag_mode)if(ce<=this._drag_start){var en=Z.shift||(this._table_view&&!Z.custom?864e5:0);K=ce-(Z.shift?0:en),ce=this._drag_start+(en||6e4*qe)}else K=this._drag_start;else ce<=K&&(ce=K+6e4*qe)}var sn=new Date(ce-1),hn=new Date(K);if("move"==this._drag_mode&&c.config.limit_drag_out&&(+hn<+c._min_date||+ce>+c._max_date)){if(+rt.start_date<+c._min_date||+rt.end_date>+c._max_date)hn=new Date(rt.start_date),ce=new Date(rt.end_date);else{var gn=ce-hn;+hn<+c._min_date?(hn=new Date(c._min_date),Z._ignores&&this.config.preserve_length&&this._table_view?(hn=new Date(c._correct_drag_start_date(hn)),ke._start_correction&&(hn=new Date(hn.valueOf()+ke._start_correction)),ce=new Date(1*hn+this._get_fictional_event_length(hn,this._drag_event._event_length,ke))):ce=new Date(+hn+gn)):(ce=new Date(c._max_date),Z._ignores&&this.config.preserve_length&&this._table_view?(ke._end_correction&&(ce=new Date(ce.valueOf()-ke._end_correction)),ce=new Date(1*ce-this._get_fictional_event_length(ce,0,ke,!0)),hn=new Date(1*ce-this._get_fictional_event_length(ce,this._drag_event._event_length,ke,!0)),this._ignores_detected&&(hn=c.date.add(hn,ke.x_step,ke.x_unit),ce=new Date(1*ce-this._get_fictional_event_length(ce,0,ke,!0)),ce=c.date.add(ce,ke.x_step,ke.x_unit))):hn=new Date(+ce-gn))}sn=new Date(ce-1)}if(!this._table_view&&this._dragEventBody&&!c.config.all_timed&&(!c._get_section_view()&&Z.x!=this._get_event_sday({start_date:new Date(K),end_date:new Date(K)})||new Date(K).getHours()<this.config.first_hour)&&(gn=ce-hn,"move"==this._drag_mode&&(Xe=this._min_date.valueOf()+24*Z.x*60*6e4,(hn=new Date(Xe)).setHours(this.config.first_hour),ce=new Date(hn.valueOf()+gn),sn=new Date(ce-1))),this._table_view||c.config.all_timed||!(!c.getView()&&Z.x!=this._get_event_sday({start_date:new Date(ce),end_date:new Date(ce)})||new Date(ce).getHours()>=this.config.last_hour)||(gn=ce-hn,Xe=this._min_date.valueOf()+24*Z.x*60*6e4,(ce=c.date.date_part(new Date(Xe))).setHours(this.config.last_hour),sn=new Date(ce-1),"move"==this._drag_mode&&(hn=new Date(+ce-gn))),this._table_view||sn.getDate()==hn.getDate()&&sn.getHours()<this.config.last_hour||c._allow_dnd)if(rt.start_date=hn,rt.end_date=new Date(ce),this.config.update_render){var jn=c._els.dhx_cal_data[0].scrollTop;this.update_view(),c._els.dhx_cal_data[0].scrollTop=jn}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(Ai){Ai.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,M])}}else if(c.checkEvent("onMouseMove")){var gi=this._locate_event(M.target||M.srcElement);this.callEvent("onMouseMove",[gi,M])}},c._on_mouse_down=function(M,Z){if(2!=M.button&&!this.config.readonly&&!this._drag_mode){var K=c._getClassName(Z=Z||M.target||M.srcElement).split(" ")[0];switch(this.config.drag_event_body&&"dhx_body"==K&&Z.parentNode&&-1===Z.parentNode.className.indexOf("dhx_cal_select_menu")&&(K="dhx_event_move",this._dragEventBody=!0),K){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize",c._drag_from_start=c._getClassName(Z).indexOf("dhx_event_resize_end")<0;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(Z.parentNode)return c._on_mouse_down(M,Z.parentNode);break;default:if((!c.checkEvent("onMouseDown")||c.callEvent("onMouseDown",[K,M]))&&Z.parentNode&&Z!=this&&"dhx_body"!=K)return c._on_mouse_down(M,Z.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var ce=this._locate_event(Z);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[ce,this._drag_mode,M])){if(this._drag_id=ce,(this._edit_id!=this._drag_id||this._edit_id&&"create"==this._drag_mode)&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=c._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(M)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},c._get_private_properties=function(M){var Z={};for(var K in M)0===K.indexOf("_")&&(Z[K]=!0);return Z},c._clear_temporary_properties=function(M,Z){var K=this._get_private_properties(M),ce=this._get_private_properties(Z);for(var _e in ce)K[_e]||delete Z[_e]},c._on_mouse_up=function(M){if(!M||2!=M.button||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var Z=this._drag_id,K=this._drag_mode,ce=!this._drag_pos||this._drag_pos.has_moved;delete this._drag_event._move_event_shift;var _e=this.getEvent(this._drag_id);if(ce&&(this._drag_event._dhx_changed||!this._drag_event.start_date||_e.start_date.valueOf()!=this._drag_event.start_date.valueOf()||_e.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var xe="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[_e,M,xe,this._drag_event]))if(this._drag_id=this._drag_mode=null,xe&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(Z)))return c.callEvent("onDragEnd",[Z,K,M]),this.showLightbox(Z);this._drag_pos=!0,this._select_id=this._edit_id=Z}else this._new_event||this.callEvent(xe?"onEventAdded":"onEventChanged",[Z,this.getEvent(Z)]);else xe?this.deleteEvent(_e.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(_e,this._drag_event),c._lame_copy(_e,this._drag_event),this.updateEvent(_e.id))}this._drag_pos&&(this._drag_pos.has_moved||!0===this._drag_pos)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),c.callEvent("onDragEnd",[Z,K,M])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null}},c._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load()||(this._render_wait=!0,0))},c.update_view=function(){this._reset_ignores(),this._update_nav_bar(this.config.header,this.$container.querySelector(".dhx_cal_navline"));var M=this[this._mode+"_view"];if(M?M.call(this,!0):this._reset_scale(),this._trigger_dyn_loading())return!0;this.render_view_data()},c.isViewExists=function(M){return!!(c[M+"_view"]||c.date[M+"_start"]&&c.templates[M+"_date"]&&c.templates[M+"_scale_date"])},c._set_aria_buttons_attrs=function(){for(var M=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],Z=0;Z<M.length;Z++)for(var K=this._els[M[Z]],ce=0;K&&ce<K.length;ce++){var _e=K[ce].getAttribute("data-tab")||K[ce].getAttribute("name"),xe=this.locale.labels[M[Z]];_e&&(xe=this.locale.labels[_e+"_tab"]||this.locale.labels[_e]||xe),"dhx_cal_next_button"==M[Z]?xe=this.locale.labels.next:"dhx_cal_prev_button"==M[Z]&&(xe=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(K[ce],xe||"")}},c.updateView=function(M,Z){if(!this.$container)throw new Error("The scheduler is not initialized. \n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**");M=M||this._date;var K=this._obj,ce="dhx_scheduler_"+this._mode,_e="dhx_scheduler_"+(Z=Z||this._mode);this._mode&&-1!=K.className.indexOf(ce)?K.className=K.className.replace(ce,_e):K.className+=" "+_e;var xe,Pe=!(this._mode!=Z||!this.config.preserve_scroll)&&this._els.dhx_cal_data[0].scrollTop;this._els.dhx_multi_day&&this._els.dhx_multi_day[0]&&(xe=this._els.dhx_multi_day[0].scrollTop),this[this._mode+"_view"]&&Z&&this._mode!=Z&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els.dhx_multi_day&&(this._els.dhx_multi_day[0].parentNode.removeChild(this._els.dhx_multi_day[0]),this._els.dhx_multi_day=null),this._mode=Z,this._date=M,this._table_view="month"==this._mode,this._dy_shift=0,this.update_view(),this._set_aria_buttons_attrs();var ke=this._els.dhx_cal_tab;if(ke)for(var qe=0;qe<ke.length;qe++){var rt=ke[qe];rt.getAttribute("data-tab")==this._mode||rt.getAttribute("name")==this._mode+"_tab"?(rt.classList.add("active"),this._waiAria.headerToggleState(rt,!0)):(rt.classList.remove("active"),this._waiAria.headerToggleState(rt,!1))}"number"==typeof Pe&&(this._els.dhx_cal_data[0].scrollTop=Pe),"number"==typeof xe&&this._els.dhx_multi_day&&this._els.dhx_multi_day[0]&&(this._els.dhx_multi_day[0].scrollTop=xe)},c.setCurrentView=function(M,Z){this.callEvent("onBeforeViewChange",[this._mode,this._date,Z||this._mode,M||this._date])&&(this.updateView(M,Z),this.callEvent("onViewChange",[this._mode,this._date]))},c.render=function(M,Z){c.setCurrentView(M,Z)},c._render_x_header=function(M,Z,K,ce,_e){_e=_e||0;var xe=document.createElement("div");xe.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(xe.className+=" "+this.templates[this._mode+"_scalex_class"](K));var Pe=this._cols[M]-1;"month"==this._mode&&0===M&&this.config.left_border&&(xe.className+=" dhx_scale_bar_border",Z+=1),this.set_xy(xe,Pe,this.xy.scale_height-2,Z,_e);var ke=this.templates[this._mode+"_scale_date"](K,this._mode);xe.innerHTML=ke,this._waiAria.dayHeaderAttr(xe,ke),ce.appendChild(xe)},c._get_columns_num=function(M,Z){var K=7;if(!c._table_view){var ce=c.date["get_"+c._mode+"_end"];ce&&(Z=ce(M)),K=Math.round((Z.valueOf()-M.valueOf())/864e5)}return K},c._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},c._get_view_end=function(){var M=this._get_timeunit_start(),Z=c.date.add(M,1,this._mode);if(!c._table_view){var K=c.date["get_"+c._mode+"_end"];K&&(Z=K(M))}return Z},c._calc_scale_sizes=function(M,Z,K){var ce=this.config.rtl,_e=M,xe=this._get_columns_num(Z,K);this._process_ignores(Z,xe,"day",1);for(var Pe=xe-this._ignores_detected,ke=0;ke<xe;ke++)this._ignores[ke]?(this._cols[ke]=0,Pe++):this._cols[ke]=Math.floor(_e/(Pe-ke)),_e-=this._cols[ke],this._colsS[ke]=(this._cols[ke-1]||0)+(this._colsS[ke-1]||(this._table_view?0:(ce?this.xy.scroll_width:this.xy.scale_width)+2));this._colsS.col_length=xe,this._colsS[xe]=this._cols[xe-1]+this._colsS[xe-1]||0},c._set_scale_col_size=function(M,Z,K){var ce=this.config;this.set_xy(M,Z-1,ce.hour_size_px*(ce.last_hour-ce.first_hour),K+this.xy.scale_width+1,0)},c._render_scales=function(M,Z){var K=new Date(c._min_date),ce=new Date(c._max_date),_e=this.date.date_part(c._currentDate()),xe=parseInt(M.style.width,10),Pe=new Date(this._min_date),ke=this._get_columns_num(K,ce);this._calc_scale_sizes(xe,K,ce);var qe=0;M.innerHTML="";for(var rt=0;rt<ke;rt++){if(this._ignores[rt]||this._render_x_header(rt,qe,Pe,M),!this._table_view){var wt=document.createElement("div"),Xe="dhx_scale_holder";Pe.valueOf()==_e.valueOf()&&(Xe="dhx_scale_holder_now"),wt.setAttribute("data-column-index",rt),this._ignores_detected&&this._ignores[rt]&&(Xe+=" dhx_scale_ignore"),wt.className=Xe+" "+this.templates.week_date_class(Pe,_e),this._waiAria.dayColumnAttr(wt,Pe),this._set_scale_col_size(wt,this._cols[rt],qe),Z.appendChild(wt),this.callEvent("onScaleAdd",[wt,Pe])}qe+=this._cols[rt],Pe=this.date.add(Pe,1,"day"),Pe=this.date.day_start(Pe)}},c._getNavDateElement=function(){return this.$container.querySelector(".dhx_cal_date")},c._reset_scale=function(){if(this.templates[this._mode+"_date"]){var ce,_e,M=this._els.dhx_cal_header[0],Z=this._els.dhx_cal_data[0],K=this.config;M.innerHTML="",Z.innerHTML="",Z.className="dhx_cal_data"+(K.readonly||!K.drag_resize?" dhx_resize_denied":"")+(K.readonly||!K.drag_move?" dhx_move_denied":""),this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var Pe=this._get_timeunit_start(),ke=c._get_view_end();ce=_e=this._table_view?c.date.week_start(Pe):Pe,this._min_date=ce;var qe=this.templates[this._mode+"_date"](Pe,ke,this._mode),rt=this._getNavDateElement();if(rt&&(rt.innerHTML=qe,this._waiAria.navBarDateAttr(rt,qe)),this._max_date=ke,c._render_scales(M,Z),this._table_view)this._reset_month_scale(Z,Pe,_e);else if(this._reset_hours_scale(Z,Pe,_e),K.multi_day){this._els.dhx_multi_day&&(this._els.dhx_multi_day[0].parentNode.removeChild(this._els.dhx_multi_day[0]),this._els.dhx_multi_day=null);var wt=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,Xe=document.createElement("div");Xe.className="dhx_multi_day",Xe.style.visibility="hidden";var ht=Math.max(this._colsS[this._colsS.col_length]+(K.rtl?this.xy.scale_width:this.xy.scroll_width)-2,0);this.set_xy(Xe,ht,0,0,wt),Z.parentNode.insertBefore(Xe,Z);var nt=Xe.cloneNode(!0);nt.className="dhx_multi_day_icon",nt.style.visibility="hidden",this.set_xy(nt,this.xy.scale_width,0,0,wt),Xe.appendChild(nt),this._els.dhx_multi_day=[Xe,nt],c.event(this._els.dhx_multi_day[0],"click",this._click.dhx_cal_data)}}},c._reset_hours_scale=function(M,Z,K){var ce=document.createElement("div");ce.className="dhx_scale_holder";for(var _e=new Date(1980,1,1,this.config.first_hour,0,0),xe=1*this.config.first_hour;xe<this.config.last_hour;xe++){var Pe=document.createElement("div");Pe.className="dhx_scale_hour",Pe.style.height=this.config.hour_size_px+"px";var ke=this.xy.scale_width;this.config.left_border&&(Pe.className+=" dhx_scale_hour_border"),Pe.style.width=ke+"px";var qe=c.templates.hour_scale(_e);Pe.innerHTML=qe,this._waiAria.hourScaleAttr(Pe,qe),ce.appendChild(Pe),_e=this.date.add(_e,1,"hour")}M.appendChild(ce),this.config.scroll_hour&&(M.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},c._currentDate=function(){return c.config.now_date?new Date(c.config.now_date):new Date},c._reset_ignores=function(){this._ignores={},this._ignores_detected=0},c._process_ignores=function(M,Z,K,ce,_e){this._reset_ignores();var xe=c["ignore_"+this._mode];if(xe)for(var Pe=new Date(M),ke=0;ke<Z;ke++)xe(Pe)&&(this._ignores_detected+=1,this._ignores[ke]=!0,_e&&Z++),Pe=c.date.add(Pe,ce,K),c.date[K+"_start"]&&(Pe=c.date[K+"_start"](Pe))},c._render_month_scale=function(M,Z,K,ce){var _e=c.date.add(Z,1,"month"),xe=new Date(K),Pe=c._currentDate();this.date.date_part(Pe),this.date.date_part(K),ce=ce||Math.ceil(Math.round((_e.valueOf()-K.valueOf())/864e5)/7);for(var ke=[],qe=0;qe<=7;qe++){var rt=(this._cols[qe]||0)-1;0===qe&&this.config.left_border&&(rt-=1),ke[qe]=rt+"px"}function wt(Bi){var ji=c._colsS.height;return void 0!==c._colsS.heights[Bi+1]&&(ji=c._colsS.heights[Bi+1]-(c._colsS.heights[Bi]||0)),ji}var Xe=0,ct=document.createElement("table");ct.setAttribute("cellpadding","0"),ct.setAttribute("cellspacing","0");var Ze=document.createElement("tbody");ct.appendChild(Ze);var ht=[];for(qe=0;qe<ce;qe++){var nt=document.createElement("tr");Ze.appendChild(nt);for(var jt=Math.max(wt(qe)-c.xy.month_head_height,0),Yt=0;Yt<7;Yt++){var Ht=document.createElement("td");nt.appendChild(Ht);var rn="";K<Z?rn="dhx_before":K>=_e?rn="dhx_after":K.valueOf()==Pe.valueOf()&&(rn="dhx_now"),this._ignores_detected&&this._ignores[Yt]&&(rn+=" dhx_scale_ignore"),Ht.className=rn+" "+this.templates.month_date_class(K,Pe),Ht.setAttribute("data-cell-date",c.templates.format_date(K));var en="dhx_month_body",sn="dhx_month_head";if(0===Yt&&this.config.left_border&&(en+=" dhx_month_body_border",sn+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[Yt])Ht.appendChild(document.createElement("div")),Ht.appendChild(document.createElement("div"));else{this._waiAria.monthCellAttr(Ht,K);var hn=document.createElement("div");hn.className=sn,hn.innerHTML=this.templates.month_day(K),Ht.appendChild(hn);var gn=document.createElement("div");gn.className=en,gn.style.height=jt+"px",gn.style.width=ke[Yt],Ht.appendChild(gn)}ht.push(K);var jn=K.getDate();(K=this.date.add(K,1,"day")).getDate()-jn>1&&(K=new Date(K.getFullYear(),K.getMonth(),jn+1,12,0))}c._colsS.heights[qe]=Xe,Xe+=wt(qe)}this._min_date=xe,this._max_date=K,M.innerHTML="",M.appendChild(ct),this._scales={};var gi=M.getElementsByTagName("div");for(qe=0;qe<ht.length;qe++){var Ai=ht[qe];this._scales[+Ai]=M=gi[2*qe+1]}for(qe=0;qe<ht.length;qe++)this.callEvent("onScaleAdd",[this._scales[+(Ai=ht[qe])],Ai]);return this._max_date},c._reset_month_scale=function(M,Z,K,ce){var _e=c.date.add(Z,1,"month"),xe=c._currentDate();this.date.date_part(xe),this.date.date_part(K),ce=ce||Math.ceil(Math.round((_e.valueOf()-K.valueOf())/864e5)/7);var Pe=Math.floor(M.clientHeight/ce)-this.xy.month_head_height;return this._colsS.height=Pe+this.xy.month_head_height,this._colsS.heights=[],c._render_month_scale(M,Z,K,ce)},c.getView=function(M){return M||(M=c.getState().mode),c.matrix&&c.matrix[M]?c.matrix[M]:c._props&&c._props[M]?c._props[M]:null},c.getLabel=function(M,Z){for(var K=this.config.lightbox.sections,ce=0;ce<K.length;ce++)if(K[ce].map_to==M)for(var _e=K[ce].options,xe=0;xe<_e.length;xe++)if(_e[xe].key==Z)return _e[xe].label;return""},c.updateCollection=function(M,Z){var K=c.serverList(M);return!!K&&(K.splice(0,K.length),K.push.apply(K,Z||[]),c.callEvent("onOptionsLoad",[]),c.resetLightbox(),c.hideCover(),!0)},c._lame_clone=function(M,Z){var K,ce,_e;for(Z=Z||[],K=0;K<Z.length;K+=2)if(M===Z[K])return Z[K+1];if(M&&"object"==P(M)){for(_e=Object.create(M),ce=[Array,Date,Number,String,Boolean],K=0;K<ce.length;K++)M instanceof ce[K]&&(_e=K?new ce[K](M):new ce[K]);for(K in Z.push(M,_e),M)Object.prototype.hasOwnProperty.apply(M,[K])&&(_e[K]=c._lame_clone(M[K],Z))}return _e||M},c._lame_copy=function(M,Z){for(var K in Z)Z.hasOwnProperty(K)&&(M[K]=Z[K]);return M},c._get_date_from_pos=function(M){var Z=this._min_date.valueOf()+6e4*(M.y*this.config.time_step+24*(this._table_view?0:M.x)*60);return new Date(this._correct_shift(Z))},c.getActionData=function(M){var Z=this._mouse_coords(M);return{date:this._get_date_from_pos(Z),section:Z.section}},c._focus=function(M,Z){if(M&&M.focus)if(this._mobile)window.setTimeout(function(){M.focus()},10);else try{Z&&M.select&&M.offsetWidth&&M.select(),M.focus()}catch{}},c._get_real_event_length=function(M,Z,K){var ce,_e=Z-M,xe=K._start_correction+K._end_correction||0,Pe=this["ignore_"+this._mode],ke=0;K.render?(ke=this._get_date_index(K,M),ce=this._get_date_index(K,Z)):ce=Math.round(_e/60/60/1e3/24);for(var qe=!0;ke<ce;){var rt=c.date.add(Z,-K.x_step,K.x_unit);Pe&&Pe(Z)&&(!qe||qe&&Pe(rt))?_e-=Z-rt:(_e-=xe,qe=!1),Z=rt,ce--}return _e},c._get_fictional_event_length=function(M,Z,K,ce){var _e=new Date(M),xe=ce?-1:1;if(K._start_correction||K._end_correction){var Pe;Pe=ce?60*_e.getHours()+_e.getMinutes()-60*(K.first_hour||0):60*(K.last_hour||0)-(60*_e.getHours()+_e.getMinutes());var ke=60*(K.last_hour-K.first_hour),qe=Math.ceil((Z/6e4-Pe)/ke);qe<0&&(qe=0),Z+=qe*(1440-ke)*60*1e3}var rt,wt=new Date(1*M+Z*xe),Xe=this["ignore_"+this._mode],ct=0;for(K.render?(ct=this._get_date_index(K,_e),rt=this._get_date_index(K,wt)):rt=Math.round(Z/60/60/1e3/24);ct*xe<=rt*xe;){var Ze=c.date.add(_e,K.x_step*xe,K.x_unit);Xe&&Xe(_e)&&(Z+=(Ze-_e)*xe,rt+=xe),_e=Ze,ct+=xe}return Z},c._get_section_view=function(){return this.getView()},c._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},c._is_initialized=function(){var M=this.getState();return this._obj&&M.date&&M.mode},c._is_lightbox_open=function(){return null!=this.getState().lightbox_id}}(ee),function(c){!function(){var m=new RegExp("<(?:.|\n)*?>","gm"),w=new RegExp(" +","gm");function T(Z){return(Z+"").replace(m," ").replace(w," ")}var j=new RegExp("'","gm");function J(Z){return(Z+"").replace(j,"&#39;")}for(var M in c._waiAria={getAttributeString:function(Z){var K=[" "];for(var ce in Z)if("function"!=typeof Z[ce]&&"object"!=x(Z[ce])){var _e=J(T(Z[ce]));K.push(ce+"='"+_e+"'")}return K.push(" "),K.join(" ")},setAttributes:function(Z,K){for(var ce in K)Z.setAttribute(ce,T(K[ce]));return Z},labelAttr:function(Z,K){return this.setAttributes(Z,{"aria-label":K})},label:function(Z){return c._waiAria.getAttributeString({"aria-label":Z})},hourScaleAttr:function(Z,K){this.labelAttr(Z,K)},monthCellAttr:function(Z,K){this.labelAttr(Z,c.templates.day_date(K))},navBarDateAttr:function(Z,K){this.labelAttr(Z,K)},dayHeaderAttr:function(Z,K){this.labelAttr(Z,K)},dayColumnAttr:function(Z,K){this.dayHeaderAttr(Z,c.templates.day_date(K))},headerButtonsAttributes:function(Z,K){return this.setAttributes(Z,{role:"button","aria-label":K})},headerToggleState:function(Z,K){return this.setAttributes(Z,{"aria-pressed":K?"true":"false"})},getHeaderCellAttr:function(Z){return c._waiAria.getAttributeString({"aria-label":Z})},eventAttr:function(Z,K){this._eventCommonAttr(Z,K)},_eventCommonAttr:function(Z,K){K.setAttribute("aria-label",T(c.templates.event_text(Z.start_date,Z.end_date,Z))),c.config.readonly&&K.setAttribute("aria-readonly",!0),Z.$dataprocessor_class&&K.setAttribute("aria-busy",!0),K.setAttribute("aria-selected",c.getState().select_id==Z.id?"true":"false")},setEventBarAttr:function(Z,K){this._eventCommonAttr(Z,K)},_getAttributes:function(Z,K){var ce={setAttribute:function(_e,xe){this[_e]=xe}};return Z.apply(this,[K,ce]),ce},eventBarAttrString:function(Z){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,Z))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(Z){return this.getAttributeString({role:"columnheader","aria-label":Z})},agendaHeadDescriptionString:function(Z){return this.agendaHeadDateString(Z)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(Z){var K=this._getAttributes(this._eventCommonAttr,Z);return K.role="row",this.getAttributeString(K)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":c.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(Z){return this.agendaEventAttrString(Z)},gridCellAttrString:function(Z,K,ce){return this.getAttributeString({role:"gridcell","aria-label":[void 0===K.label?K.id:K.label,": ",ce]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(Z){return this.gridRowAttrString(Z)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(Z,K){this.setAttributes(Z,{id:K+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(Z,K){this.setAttributes(Z,{"aria-labelledby":K+"",role:"grid"})},minicalRow:function(Z){this.setAttributes(Z,{role:"row"})},minicalDayCell:function(Z,K){var ce=K.valueOf()<c._max_date.valueOf()&&K.valueOf()>=c._min_date.valueOf();this.setAttributes(Z,{role:"gridcell","aria-label":c.templates.day_date(K),"aria-selected":ce?"true":"false"})},minicalHeadCell:function(Z){this.setAttributes(Z,{role:"columnheader"})},weekAgendaDayCell:function(Z,K){var ce=Z.querySelector(".dhx_wa_scale_bar"),_e=Z.querySelector(".dhx_wa_day_data"),xe=c.uid()+"";this.setAttributes(ce,{id:xe}),this.setAttributes(_e,{"aria-labelledby":xe})},weekAgendaEvent:function(Z,K){this.eventAttr(K,Z)},lightboxHiddenAttr:function(Z){Z.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(Z){Z.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(Z){return this.getAttributeString({role:"button","aria-label":Z,tabindex:"0"})},yearHeader:function(Z,K){this.setAttributes(Z,{id:K+""})},yearGrid:function(Z,K){this.minicalGrid(Z,K)},yearHeadCell:function(Z){return this.minicalHeadCell(Z)},yearRow:function(Z){return this.minicalRow(Z)},yearDayCell:function(Z){this.setAttributes(Z,{role:"gridcell"})},lightboxAttr:function(Z){Z.setAttribute("role","dialog"),Z.setAttribute("aria-hidden","true"),Z.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(Z){return this.getAttributeString({role:"button","aria-label":c.locale.labels[Z],tabindex:"0"})},eventMenuAttrString:function(Z){return this.getAttributeString({role:"button","aria-label":c.locale.labels[Z]})},lightboxHeader:function(Z,K){Z.setAttribute("aria-label",K)},lightboxSelectAttrString:function(Z){var K="";switch(Z){case"%Y":K=c.locale.labels.year;break;case"%m":K=c.locale.labels.month;break;case"%d":K=c.locale.labels.day;break;case"%H:%i":K=c.locale.labels.hour+" "+c.locale.labels.minute}return c._waiAria.getAttributeString({"aria-label":K})},messageButtonAttrString:function(Z){return"tabindex='0' role='button' aria-label='"+Z+"'"},messageInfoAttr:function(Z){Z.setAttribute("role","alert")},messageModalAttr:function(Z,K){Z.setAttribute("role","dialog"),K&&Z.setAttribute("aria-labelledby",K)},quickInfoAttr:function(Z){Z.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(Z,K){Z.setAttribute("aria-label",K)},quickInfoButtonAttrString:function(Z){return c._waiAria.getAttributeString({role:"button","aria-label":Z,tabindex:"0"})},tooltipAttr:function(Z){Z.setAttribute("role","tooltip")},tooltipVisibleAttr:function(Z){Z.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(Z){Z.setAttribute("aria-hidden","true")}},c._waiAria)c._waiAria[M]=function(Z){return function(){return c.config.wai_aria_attributes?Z.apply(this,arguments):" "}}(c._waiAria[M])}()}(ee),ee.utils=he,ee.$domHelpers=X,ee.utils.dom=X,ee.uid=he.uid,ee.mixin=he.mixin,ee.defined=he.defined,ee.assert=function(c){return function(m,w){m||c.config.show_errors&&!1!==c.callEvent("onError",[w])&&(c.message?c.message({type:"error",text:w,expire:-1}):console.log(w))}}(ee),ee.copy=he.copy,ee._getFocusableNodes=X.getFocusableNodes,ee._getClassName=X.getClassName,ee._locate_css=X.locateCss;var y=function(u){var ee="data-dhxbox",y=null;function N(ke,qe){var rt=ke.callback;_e.hide(ke.box),y=ke.box=null,rt&&rt(qe)}function C(ke){if(y){var qe=ke.which||ke.keyCode,rt=!1;if(xe.keyboard){if(13==qe||32==qe){var wt=ke.target||ke.srcElement;X.getClassName(wt).indexOf("scheduler_popup_button")>-1&&wt.click?wt.click():(N(y,!0),rt=!0)}27==qe&&(N(y,!1),rt=!0)}return rt?(ke.preventDefault&&ke.preventDefault(),!(ke.cancelBubble=!0)):void 0}}function c(ke){c.cover||(c.cover=document.createElement("div"),u.event(c.cover,"keydown",C),c.cover.className="dhx_modal_cover",document.body.appendChild(c.cover)),c.cover.style.display=ke?"inline-block":"none"}function m(ke,qe,rt){var wt=u._waiAria.messageButtonAttrString(ke),Xe=(qe||"").toLowerCase().replace(/ /g,"_"),ct="scheduler_".concat(Xe,"_button dhtmlx_").concat(Xe,"_button");return"<div ".concat(wt," class='scheduler_popup_button dhtmlx_popup_button ").concat(ct,"' data-result='").concat(rt,"' result='").concat(rt,"' ><div>").concat(ke,"</div></div>")}function w(ke){xe.area||(xe.area=document.createElement("div"),xe.area.className="scheduler_message_area dhtmlx_message_area",xe.area.style[xe.position]="5px",document.body.appendChild(xe.area)),xe.hide(ke.id);var qe=document.createElement("div");return qe.innerHTML="<div>"+ke.text+"</div>",qe.className="scheduler-info dhtmlx-info scheduler-"+ke.type+" dhtmlx-"+ke.type,u.event(qe,"click",function(){xe.hide(ke.id),ke=null}),u._waiAria.messageInfoAttr(qe),"bottom"==xe.position&&xe.area.firstChild?xe.area.insertBefore(qe,xe.area.firstChild):xe.area.appendChild(qe),ke.expire>0&&(xe.timers[ke.id]=window.setTimeout(function(){xe&&xe.hide(ke.id)},ke.expire)),xe.pull[ke.id]=qe,qe=null,ke.id}function T(){for(var ke=[].slice.apply(arguments,[0]),qe=0;qe<ke.length;qe++)if(ke[qe])return ke[qe]}function j(ke,qe,rt){var wt=ke.tagName?ke:function(Ze,ht,nt){var jt=document.createElement("div"),Yt=he.uid();u._waiAria.messageModalAttr(jt,Yt),jt.className=" scheduler_modal_box dhtmlx_modal_box scheduler-"+Ze.type+" dhtmlx-"+Ze.type,jt.setAttribute(ee,1);var Ht="";if(Ze.width&&(jt.style.width=Ze.width),Ze.height&&(jt.style.height=Ze.height),Ze.title&&(Ht+='<div class="scheduler_popup_title dhtmlx_popup_title">'+Ze.title+"</div>"),Ht+='<div class="scheduler_popup_text dhtmlx_popup_text" id="'+Yt+'"><span>'+(Ze.content?"":Ze.text)+'</span></div><div  class="scheduler_popup_controls dhtmlx_popup_controls">',ht&&(Ht+=m(T(Ze.ok,u.locale.labels.message_ok,"OK"),"ok",!0)),nt&&(Ht+=m(T(Ze.cancel,u.locale.labels.message_cancel,"Cancel"),"cancel",!1)),Ze.buttons)for(var rn=0;rn<Ze.buttons.length;rn++){var en=Ze.buttons[rn];"object"==xt(en)?Ht+=m(en.label,en.css||"scheduler_"+en.label.toLowerCase()+"_button dhtmlx_"+en.label.toLowerCase()+"_button",en.value||rn):Ht+=m(en,en,rn)}if(jt.innerHTML=Ht+="</div>",Ze.content){var sn=Ze.content;"string"==typeof sn&&(sn=document.getElementById(sn)),"none"==sn.style.display&&(sn.style.display=""),jt.childNodes[Ze.title?1:0].appendChild(sn)}return u.event(jt,"click",function(hn){var gn=hn.target||hn.srcElement;if(gn.className||(gn=gn.parentNode),X.closest(gn,".scheduler_popup_button")){var jn=gn.getAttribute("data-result");N(Ze,jn="true"==jn||"false"!=jn&&jn)}}),Ze.box=jt,(ht||nt)&&(y=Ze),jt}(ke,qe,rt);ke.hidden||c(!0),document.body.appendChild(wt);var Xe=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-wt.offsetWidth)/2)),ct=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-wt.offsetHeight)/2));return wt.style.top="top"==ke.position?"-3px":ct+"px",wt.style.left=Xe+"px",u.event(wt,"keydown",C),_e.focus(wt),ke.hidden&&_e.hide(wt),u.callEvent("onMessagePopup",[wt]),wt}function J(ke){return j(ke,!0,!1)}function M(ke){return j(ke,!0,!0)}function Z(ke){return j(ke)}function K(ke,qe,rt){return"object"!=xt(ke)&&("function"==typeof qe&&(rt=qe,qe=""),ke={text:ke,type:qe,callback:rt}),ke}function ce(ke,qe,rt,wt){return"object"!=xt(ke)&&(ke={text:ke,type:qe,expire:rt,id:wt}),ke.id=ke.id||he.uid(),ke.expire=ke.expire||xe.expire,ke}u.event(document,"keydown",C,!0);var _e=function(){var ke=K.apply(this,arguments);return ke.type=ke.type||"alert",Z(ke)};_e.hide=function(ke){for(;ke&&ke.getAttribute&&!ke.getAttribute(ee);)ke=ke.parentNode;ke&&(ke.parentNode.removeChild(ke),c(!1),u.callEvent("onAfterMessagePopup",[ke]))},_e.focus=function(ke){setTimeout(function(){var qe=X.getFocusableNodes(ke);qe.length&&qe[0].focus&&qe[0].focus()},1)};var xe=function(ke,qe,rt,wt){switch((ke=ce.apply(this,arguments)).type=ke.type||"info",ke.type.split("-")[0]){case"alert":return J(ke);case"confirm":return M(ke);case"modalbox":return Z(ke);default:return w(ke)}};xe.seed=(new Date).valueOf(),xe.uid=he.uid,xe.expire=4e3,xe.keyboard=!0,xe.position="top",xe.pull={},xe.timers={},xe.hideAll=function(){for(var ke in xe.pull)xe.hide(ke)},xe.hide=function(ke){var qe=xe.pull[ke];qe&&qe.parentNode&&(window.setTimeout(function(){qe.parentNode.removeChild(qe),qe=null},2e3),qe.className+=" hidden",xe.timers[ke]&&window.clearTimeout(xe.timers[ke]),delete xe.pull[ke])};var Pe=[];return u.attachEvent("onMessagePopup",function(ke){Pe.push(ke)}),u.attachEvent("onAfterMessagePopup",function(ke){for(var qe=0;qe<Pe.length;qe++)Pe[qe]===ke&&(Pe.splice(qe,1),qe--)}),u.attachEvent("onDestroy",function(){c.cover&&c.cover.parentNode&&c.cover.parentNode.removeChild(c.cover);for(var ke=0;ke<Pe.length;ke++)Pe[ke].parentNode&&Pe[ke].parentNode.removeChild(Pe[ke]);Pe=null,xe.area&&xe.area.parentNode&&xe.area.parentNode.removeChild(xe.area),xe=null}),{alert:function(){var ke=K.apply(this,arguments);return ke.type=ke.type||"confirm",J(ke)},confirm:function(){var ke=K.apply(this,arguments);return ke.type=ke.type||"alert",M(ke)},message:xe,modalbox:_e}}(ee);ee.utils.mixin(ee,y),ee.env=ee.$env=ue,ee.Promise=ve,function(c){c.destructor=function(){for(var m in c.callEvent("onDestroy",[]),this.clearAll(),this.$container&&(this.$container.innerHTML=""),this._eventRemoveAll&&this._eventRemoveAll(),this.resetLightbox&&this.resetLightbox(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.detachAllEvents(),this)0===m.indexOf("$")&&delete this[m];c.$destroyed=!0}}(ee),function(c){function m(w,T){var j={method:w};if(0===T.length)throw new Error("Arguments list of query is wrong.");if(1===T.length)return"string"==typeof T[0]?(j.url=T[0],j.async=!0):(j.url=T[0].url,j.async=T[0].async||!0,j.callback=T[0].callback,j.headers=T[0].headers),j.data=T[0].data?"string"!=typeof T[0].data?je()(T[0].data):T[0].data:"",j;switch(j.url=T[0],w){case"GET":case"DELETE":j.callback=T[1],j.headers=T[2];break;case"POST":case"PUT":j.data=T[1]?"string"!=typeof T[1]?je()(T[1]):T[1]:"",j.callback=T[2],j.headers=T[3]}return j}c.Promise=ve,c.ajax={cache:!0,method:"get",serializeRequestParams:je.a,parse:function(w){return"string"!=typeof w?w:(w=w.replace(/^[\s]+/,""),typeof DOMParser>"u"||c.$env.isIE?void 0!==window.ActiveXObject&&((T=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",T.loadXML(w)):T=(new DOMParser).parseFromString(w,"text/xml"),T);var T},xmltop:function(w,T,j){if(void 0===T.status||T.status<400){var J=T.responseXML?T.responseXML||T:this.parse(T.responseText||T);if(J&&null!==J.documentElement&&!J.getElementsByTagName("parsererror").length)return J.getElementsByTagName(w)[0]}return-1!==j&&c.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],j]),document.createElement("DIV")},xpath:function(w,T){if(T.nodeName||(T=T.responseXML||T),c.$env.isIE)return T.selectNodes(w)||[];for(var j,J=[],M=(T.ownerDocument||T).evaluate(w,T,null,XPathResult.ANY_TYPE,null);j=M.iterateNext();)J.push(j);return J},query:function(w){return this._call(w.method||"GET",w.url,w.data||"",w.async||!0,w.callback,w.headers)},get:function(w,T,j){var J=m("GET",arguments);return this.query(J)},getSync:function(w,T){var j=m("GET",arguments);return j.async=!1,this.query(j)},put:function(w,T,j,J){var M=m("PUT",arguments);return this.query(M)},del:function(w,T,j){var J=m("DELETE",arguments);return this.query(J)},post:function(w,T,j,J){(1==arguments.length||2==arguments.length&&"function"==typeof T)&&(T="");var M=m("POST",arguments);return this.query(M)},postSync:function(w,T,j){T=null===T?"":String(T);var J=m("POST",arguments);return J.async=!1,this.query(J)},_call:function(w,T,j,J,M,Z){return new c.Promise(function(K,ce){var _e=void 0===(typeof XMLHttpRequest>"u"?"undefined":Ye(XMLHttpRequest))||c.$env.isIE?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,xe=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(J&&_e.addEventListener("readystatechange",function(){if(4==_e.readyState||xe&&3==_e.readyState){if((200!=_e.status||""===_e.responseText)&&!c.callEvent("onAjaxError",[_e]))return;setTimeout(function(){"function"==typeof M&&M.apply(window,[{xmlDoc:_e,filePath:T}]),K(_e),"function"==typeof M&&(M=null,_e=null)},0)}}),"GET"!=w||this.cache||(T+=(T.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),_e.open(w,T,J),Z)for(var Pe in Z)_e.setRequestHeader(Pe,Z[Pe]);else"POST"==w.toUpperCase()||"PUT"==w||"DELETE"==w?_e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==w&&(j=null);if(_e.setRequestHeader("X-Requested-With","XMLHttpRequest"),_e.send(j),!J)return{xmlDoc:_e,filePath:T}}.bind(this))},urlSeparator:function(w){return-1!=w.indexOf("?")?"&":"?"}},c.$ajax=c.ajax}(ee),function ft(u){var ee=function(c,m){for(var w="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",T=c.match(/%[a-zA-Z]/g),j=0;j<T.length;j++)switch(T[j]){case"%j":case"%d":w+="set[2]=temp["+j+"]||1;";break;case"%n":case"%m":w+="set[1]=(temp["+j+"]||1)-1;";break;case"%y":w+="set[0]=temp["+j+"]*1+(temp["+j+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":w+="set[3]=temp["+j+"]||0;";break;case"%i":w+="set[4]=temp["+j+"]||0;";break;case"%Y":w+="set[0]=temp["+j+"]||0;";break;case"%a":case"%A":w+="set[3]=set[3]%12+((temp["+j+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":w+="set[5]=temp["+j+"]||0;";break;case"%M":w+="set[1]=this.locale.date.month_short_hash[temp["+j+"]]||0;";break;case"%F":w+="set[1]=this.locale.date.month_full_hash[temp["+j+"]]||0;"}var J="set[0],set[1],set[2],set[3],set[4],set[5]";return m&&(J=" Date.UTC("+J+")"),new Function("date","var set=[0,0,1,0,0,0]; "+w+" return new Date("+J+");")},y=function(c,m){return function(w){for(var T=[0,0,1,0,0,0],j=w.match(/[a-zA-Z]+|[0-9]+/g),J=c.match(/%[a-zA-Z]/g),M=0;M<J.length;M++)switch(J[M]){case"%j":case"%d":T[2]=j[M]||1;break;case"%n":case"%m":T[1]=(j[M]||1)-1;break;case"%y":T[0]=1*j[M]+(j[M]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":T[3]=j[M]||0;break;case"%i":T[4]=j[M]||0;break;case"%Y":T[0]=j[M]||0;break;case"%a":case"%A":T[3]=T[3]%12+("am"==(j[M]||"").toLowerCase()?0:12);break;case"%s":T[5]=j[M]||0;break;case"%M":T[1]=u.locale.date.month_short_hash[j[M]]||0;break;case"%F":T[1]=u.locale.date.month_full_hash[j[M]]||0}return m?new Date(Date.UTC(T[0],T[1],T[2],T[3],T[4],T[5])):new Date(T[0],T[1],T[2],T[3],T[4],T[5])}},N=!1;function C(){return"auto"===u.config.csp?N:u.config.csp}(function(){try{new Function("canUseCsp = false;")}catch{N=!0}})(),u.date={init:function(){for(var c=u.locale.date.month_short,m=u.locale.date.month_short_hash={},w=0;w<c.length;w++)m[c[w]]=w;for(c=u.locale.date.month_full,m=u.locale.date.month_full_hash={},w=0;w<c.length;w++)m[c[w]]=w},_bind_host_object:function(c){return c.bind?c.bind(u):function(){return c.apply(u,arguments)}},date_part:function(c){var m=new Date(c);return c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),c.getHours()&&(c.getDate()<m.getDate()||c.getMonth()<m.getMonth()||c.getFullYear()<m.getFullYear())&&c.setTime(c.getTime()+36e5*(24-c.getHours())),c},time_part:function(c){return(c.valueOf()/1e3-60*c.getTimezoneOffset())%86400},week_start:function(c){var m=c.getDay();return u.config.start_on_monday&&(0===m?m=6:m--),this.date_part(this.add(c,-1*m,"day"))},month_start:function(c){return c.setDate(1),this.date_part(c)},year_start:function(c){return c.setMonth(0),this.month_start(c)},day_start:function(c){return this.date_part(c)},_add_days:function(c,m){var w=new Date(c.valueOf());if(w.setDate(w.getDate()+m),m==Math.round(m)&&m>0){var T=(+w-+c)%864e5;if(T&&c.getTimezoneOffset()==w.getTimezoneOffset()){var j=T/36e5;w.setTime(w.getTime()+60*(24-j)*60*1e3)}}return m>=0&&!c.getHours()&&w.getHours()&&(w.getDate()<c.getDate()||w.getMonth()<c.getMonth()||w.getFullYear()<c.getFullYear())&&w.setTime(w.getTime()+36e5*(24-w.getHours())),w},add:function(c,m,w){var T=new Date(c.valueOf());switch(w){case"day":T=u.date._add_days(T,m);break;case"week":T=u.date._add_days(T,7*m);break;case"month":T.setMonth(T.getMonth()+m);break;case"year":T.setYear(T.getFullYear()+m);break;case"hour":T.setTime(T.getTime()+60*m*60*1e3);break;case"minute":T.setTime(T.getTime()+60*m*1e3);break;default:return u.date["add_"+w](c,m,w)}return T},to_fixed:function(c){return c<10?"0"+c:c},copy:function(c){return new Date(c.valueOf())},date_to_str:function(c,m){if(C())return T=c,j=m,function(J){return T.replace(/%[a-zA-Z]/g,function(M){switch(M){case"%d":return u.date.to_fixed(j?J.getUTCDate():J.getDate());case"%m":return u.date.to_fixed(j?J.getUTCMonth()+1:J.getMonth()+1);case"%j":return j?J.getUTCDate():J.getDate();case"%n":return j?J.getUTCMonth()+1:J.getMonth()+1;case"%y":return u.date.to_fixed(j?J.getUTCFullYear()%100:J.getFullYear()%100);case"%Y":return j?J.getUTCFullYear():J.getFullYear();case"%D":return j?u.locale.date.day_short[J.getUTCDay()]:u.locale.date.day_short[J.getDay()];case"%l":return j?u.locale.date.day_full[J.getUTCDay()]:u.locale.date.day_full[J.getDay()];case"%M":return j?u.locale.date.month_short[J.getUTCMonth()]:u.locale.date.month_short[J.getMonth()];case"%F":return j?u.locale.date.month_full[J.getUTCMonth()]:u.locale.date.month_full[J.getMonth()];case"%h":return u.date.to_fixed(j?(J.getUTCHours()+11)%12+1:(J.getHours()+11)%12+1);case"%g":return j?(J.getUTCHours()+11)%12+1:(J.getHours()+11)%12+1;case"%G":return j?J.getUTCHours():J.getHours();case"%H":return u.date.to_fixed(j?J.getUTCHours():J.getHours());case"%i":return u.date.to_fixed(j?J.getUTCMinutes():J.getMinutes());case"%a":return j?J.getUTCHours()>11?"pm":"am":J.getHours()>11?"pm":"am";case"%A":return j?J.getUTCHours()>11?"PM":"AM":J.getHours()>11?"PM":"AM";case"%s":return u.date.to_fixed(j?J.getUTCSeconds():J.getSeconds());case"%W":return u.date.to_fixed(j?u.date.getUTCISOWeek(J):u.date.getISOWeek(J));default:return M}})};var T,j;c=c.replace(/%[a-zA-Z]/g,function(T){switch(T){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return T}}),m&&(c=c.replace(/date\.get/g,"date.getUTC"));var w=new Function("date",'return "'+c+'";');return u.date._bind_host_object(w)},str_to_date:function(c,m,w){var T=C()?y:ee,j=T(c,m),J=/^[0-9]{4}(\-|\/)[0-9]{2}(\-|\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,M=/^[0-9]{2}\/[0-9]{2}\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,Z=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,K=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,ce=T("%Y-%m-%d %H:%i:%s",m),_e=T("%m/%d/%Y %H:%i:%s",m),xe=T("%d-%m-%Y %H:%i:%s",m);return function(Pe){if(!w&&!u.config.parse_exact_format){if(Pe&&Pe.getISOWeek)return new Date(Pe);if("number"==typeof Pe)return new Date(Pe);if(J.test(String(Pe)))return ce(Pe);if(M.test(String(Pe)))return _e(Pe);if(Z.test(String(Pe)))return xe(Pe);if(function(ke){return K.test(ke)}(Pe))return new Date(Pe)}return j.call(u,Pe)}},getISOWeek:function(c){if(!c)return!1;var m=(c=this.date_part(new Date(c))).getDay();0===m&&(m=7);var w=new Date(c.valueOf());w.setDate(c.getDate()+(4-m));var T=w.getFullYear(),j=Math.round((w.getTime()-new Date(T,0,1).getTime())/864e5);return 1+Math.floor(j/7)},getUTCISOWeek:function(c){return this.getISOWeek(this.convert_to_utc(c))},convert_to_utc:function(c){return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds())}}}(ee),function(c){c.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",date_format:"%Y-%m-%d %H:%i",api_date:"%d-%m-%Y %H:%i",parse_exact_format:!1,preserve_length:!0,time_step:5,start_on_monday:!0,first_hour:0,last_hour:24,readonly:!1,drag_resize:!0,drag_move:!0,drag_create:!0,drag_event_body:!0,dblclick_create:!0,edit_on_create:!0,details_on_create:!1,header:null,resize_month_events:!1,resize_month_timed:!1,responsive_lightbox:!1,rtl:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:0,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,touch_swipe_dates:!1,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0,csp:"auto",event_attribute:"data-event-id",show_errors:!0},c.config.buttons_left.$initial=c.config.buttons_left.join(),c.config.buttons_right.$initial=c.config.buttons_right.join(),c._helpers={parseDate:function(m){return(c.templates.xml_date||c.templates.parse_date)(m)},formatDate:function(m){return(c.templates.xml_format||c.templates.format_date)(m)}},c.templates={},c.init_templates=function(){var m=c.locale.labels;m.dhx_save_btn=m.icon_save,m.dhx_cancel_btn=m.icon_cancel,m.dhx_delete_btn=m.icon_delete;var w=c.date.date_to_str,T=c.config;(function(j,J){for(var M in J)j[M]||(j[M]=J[M])})(c.templates,{day_date:w(T.default_date),month_date:w(T.month_date),week_date:function(j,J){return T.rtl?c.templates.day_date(c.date.add(J,-1,"day"))+" &ndash; "+c.templates.day_date(j):c.templates.day_date(j)+" &ndash; "+c.templates.day_date(c.date.add(J,-1,"day"))},day_scale_date:w(T.default_date),month_scale_date:w(T.week_date),week_scale_date:w(T.day_date),hour_scale:w(T.hour_date),time_picker:w(T.hour_date),event_date:w(T.hour_date),month_day:w(T.month_day),load_format:w(T.load_date),format_date:w(T.date_format,T.server_utc),parse_date:c.date.str_to_date(T.date_format,T.server_utc),api_date:c.date.str_to_date(T.api_date,!1,!1),event_header:function(j,J,M){return c.templates.event_date(j)+" - "+c.templates.event_date(J)},event_text:function(j,J,M){return M.text},event_class:function(j,J,M){return""},month_date_class:function(j){return""},week_date_class:function(j){return""},event_bar_date:function(j,J,M){return c.templates.event_date(j)+" "},event_bar_text:function(j,J,M){return M.text},month_events_link:function(j,J){return"<a>View more("+J+" events)</a>"},drag_marker_class:function(j,J,M){return""},drag_marker_content:function(j,J,M){return""},tooltip_date_format:c.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(j,J,M){return"<b>Event:</b> "+M.text+"<br/><b>Start date:</b> "+c.templates.tooltip_date_format(j)+"<br/><b>End date:</b> "+c.templates.tooltip_date_format(J)}}),this.callEvent("onTemplatesReady",[])}}(ee),function(c){c._events={},c.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._new_event=null,this.clear_view(),this.callEvent("onClearAll",[])},c.addEvent=function(m,w,T,j,J){if(!arguments.length)return this.addEventNow();var M=m;1!=arguments.length&&((M=J||{}).start_date=m,M.end_date=w,M.text=T,M.id=j),M.id=M.id||c.uid(),M.text=M.text||"","string"==typeof M.start_date&&(M.start_date=this.templates.api_date(M.start_date)),"string"==typeof M.end_date&&(M.end_date=this.templates.api_date(M.end_date));var Z=6e4*(this.config.event_duration||this.config.time_step);M.start_date.valueOf()==M.end_date.valueOf()&&M.end_date.setTime(M.end_date.valueOf()+Z),M.start_date.setMilliseconds(0),M.end_date.setMilliseconds(0),M._timed=this.isOneDayEvent(M);var K=!this._events[M.id];return this._events[M.id]=M,this.event_updated(M),this._loading||this.callEvent(K?"onEventAdded":"onEventChanged",[M.id,M]),M.id},c.deleteEvent=function(m,w){var T=this._events[m];(w||this.callEvent("onBeforeEventDelete",[m,T])&&this.callEvent("onConfirmedBeforeEventDelete",[m,T]))&&(T&&(c.getState().select_id==m&&c.unselect(),delete this._events[m],this.event_updated(T),this._drag_id==T.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[m,T]))},c.getEvent=function(m){return this._events[m]},c.setEvent=function(m,w){w.id||(w.id=m),this._events[m]=w},c.for_rendered=function(m,w){for(var T=this._rendered.length-1;T>=0;T--)this._rendered[T].getAttribute(this.config.event_attribute)==m&&w(this._rendered[T],T)},c.changeEventId=function(m,w){if(m!=w){var T=this._events[m];T&&(T.id=w,this._events[w]=T,delete this._events[m]),this.for_rendered(m,function(j){j.setAttribute("event_id",w),j.setAttribute(c.config.event_attribute,w)}),this._select_id==m&&(this._select_id=w),this._edit_id==m&&(this._edit_id=w),this.callEvent("onEventIdChange",[m,w])}},function(){for(var m=["text","Text","start_date","StartDate","end_date","EndDate"],w=function(J){return function(M){return c.getEvent(M)[J]}},T=function(J){return function(M,Z){var K=c.getEvent(M);K[J]=Z,K._changed=!0,K._timed=this.isOneDayEvent(K),c.event_updated(K,!0)}},j=0;j<m.length;j+=2)c["getEvent"+m[j+1]]=w(m[j]),c["setEvent"+m[j+1]]=T(m[j])}(),c.event_updated=function(m,w){this.is_visible_events(m)?this.render_view_data():this.clear_event(m.id)},c.is_visible_events=function(m){if(!this._min_date||!this._max_date)return!1;if(m.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<m.end_date.valueOf()){var w=m.start_date.getHours(),T=m.end_date.getHours()+m.end_date.getMinutes()/60,j=this.config.last_hour,J=this.config.first_hour;return!(!this._table_view&&(T>j||T<=J)&&(w>=j||w<J)&&!((m.end_date.valueOf()-m.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||w<j&&T>J))}return!1},c.isOneDayEvent=function(m){var w=new Date(m.end_date.valueOf()-1);return m.start_date.getFullYear()===w.getFullYear()&&m.start_date.getMonth()===w.getMonth()&&m.start_date.getDate()===w.getDate()&&m.end_date.valueOf()-m.start_date.valueOf()<864e5},c.get_visible_events=function(m){var w=[];for(var T in this._events)this.is_visible_events(this._events[T])&&(m&&!this._events[T]._timed||this.filter_event(T,this._events[T])&&w.push(this._events[T]));return w},c.filter_event=function(m,w){var T=this["filter_"+this._mode];return!T||T(m,w)},c._is_main_area_event=function(m){return!!m._timed},c.render_view_data=function(m,w){var T=!1;if(!m){if(T=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),m=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var j=0,J=m.length;j<J;j++)this._recalculate_timed(m[j]);if(this.config.multi_day&&!this._table_view){var M=[],Z=[];for(j=0;j<m.length;j++)this._is_main_area_event(m[j])?M.push(m[j]):Z.push(m[j]);if(!this._els.dhx_multi_day){var K=c._commonErrorMessages.unknownView(this._mode);throw new Error(K)}this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(Z,w),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(M,w)}else{var ce=document.createDocumentFragment(),_e=this._els.dhx_cal_data[0];this._rendered_location=ce,this.render_data(m,w),_e.appendChild(ce),this._rendered_location=_e}T&&this.callEvent("onDataRender",[])},c._view_month_day=function(m){var w=c.getActionData(m).date;c.callEvent("onViewMoreClick",[w])&&c.setCurrentView(w,"day")},c._render_month_link=function(m){for(var w=this._rendered_location,T=this._lame_clone(m),j=m._sday;j<m._eday;j++){T._sday=j,T._eday=j+1;var J=c.date,M=c._min_date;M=J.add(M,T._sweek,"week"),M=J.add(M,T._sday,"day");var Z=c.getEvents(M,J.add(M,1,"day")).length,K=this._get_event_bar_pos(T),ce=K.x2-K.x,_e=document.createElement("div");c.event(_e,"click",function(xe){c._view_month_day(xe)}),_e.className="dhx_month_link",_e.style.top=K.y+"px",_e.style.left=K.x+"px",_e.style.width=ce+"px",_e.innerHTML=c.templates.month_events_link(M,Z),this._rendered.push(_e),w.appendChild(_e)}},c._recalculate_timed=function(m){var w;m&&(w="object"!=Rt(m)?this._events[m]:m)&&(w._timed=c.isOneDayEvent(w))},c.attachEvent("onEventChanged",c._recalculate_timed),c.attachEvent("onEventAdded",c._recalculate_timed),c.render_data=function(m,w){m=this._pre_render_events(m,w);for(var T={},j=0;j<m.length;j++)if(this._table_view)if("month"!=c._mode)this.render_event_bar(m[j]);else{var J=c.config.max_month_events;J!==1*J||m[j]._sorder<J?this.render_event_bar(m[j]):void 0!==J&&m[j]._sorder==J&&c._render_month_link(m[j])}else{var M=m[j],Z=c.locate_holder(M._sday);if(!Z)continue;T[M._sday]||(T[M._sday]={real:Z,buffer:document.createDocumentFragment(),width:Z.clientWidth});var K=T[M._sday];this.render_event(M,K.buffer,K.width)}for(var j in T)(K=T[j]).real&&K.buffer&&K.real.appendChild(K.buffer)},c._get_first_visible_cell=function(m){for(var w=0;w<m.length;w++)if(-1==(m[w].className||"").indexOf("dhx_scale_ignore"))return m[w];return m[0]},c._pre_render_events=function(m,w){var T=this.xy.bar_height,j=this._colsS.heights,J=this._colsS.heights=[0,0,0,0,0,0,0],M=this._els.dhx_cal_data[0];if(m=this._table_view?this._pre_render_events_table(m,w):this._pre_render_events_line(m,w),this._table_view)if(w)this._colsS.heights=j;else{var Z=M.firstChild;if(Z.rows){for(var K=0;K<Z.rows.length;K++){J[K]++;var ce=Z.rows[K].cells,_e=this._colsS.height-this.xy.month_head_height;if(J[K]*T>_e){var xe=_e;1*this.config.max_month_events!==this.config.max_month_events||J[K]<=this.config.max_month_events?xe=J[K]*T:(this.config.max_month_events+1)*T>_e&&(xe=(this.config.max_month_events+1)*T);for(var Pe=0;Pe<ce.length;Pe++)ce[Pe].childNodes[1].style.height=xe+"px"}J[K]=(J[K-1]||0)+c._get_first_visible_cell(ce).offsetHeight}if(J.unshift(0),Z.parentNode.offsetHeight<Z.parentNode.scrollHeight&&!c._colsS.scroll_fix&&c.xy.scroll_width){var ke=c._colsS,qe=ke[ke.col_length],rt=ke.heights.slice();this._calc_scale_sizes(qe-=c.xy.scroll_width||0,this._min_date,this._max_date),c._colsS.heights=rt,this.set_xy(this._els.dhx_cal_header[0],qe,this.xy.scale_height),c._render_scales(this._els.dhx_cal_header[0]),c._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),ke.scroll_fix=!0}}else if(m.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(J[0]=-1),m.length||-1==J[0]){var wt=(J[0]+1)*T+1,Xe=wt,ct=wt+"px";this.config.multi_day_height_limit&&(ct=(Xe=Math.min(wt,this.config.multi_day_height_limit))+"px"),M.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+Xe+"px",M.style.height=this._obj.offsetHeight-parseInt(M.style.top,10)-(this.xy.margin_top||0)+"px";var Ze=this._els.dhx_multi_day[0];Ze.style.height=ct,Ze.style.visibility=-1==J[0]?"hidden":"visible";var ht=this._els.dhx_multi_day[1];ht.style.height=ct,ht.style.visibility=-1==J[0]?"hidden":"visible",ht.className=J[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(J[0]+1)*T,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),J[0]=0,Xe!=wt&&(M.style.top=parseInt(M.style.top)+2+"px",Ze.style.overflowY="auto",ht.style.position="fixed",ht.style.top="",ht.style.left="")}}return m},c._get_event_sday=function(m){var w=this.date.day_start(new Date(m.start_date));return Math.round((w.valueOf()-this._min_date.valueOf())/864e5)},c._get_event_mapped_end_date=function(m){var w=m.end_date;if(this.config.separate_short_events){var T=(m.end_date-m.start_date)/6e4;T<this._min_mapped_duration&&(w=this.date.add(w,this._min_mapped_duration-T,"minute"))}return w},c._pre_render_events_line=function(m,w){m.sort(function(Ze,ht){return Ze.start_date.valueOf()==ht.start_date.valueOf()?Ze.id>ht.id?1:-1:Ze.start_date>ht.start_date?1:-1});var T=[],j=[];this._min_mapped_duration=Math.ceil(60*this.xy.min_event_height/this.config.hour_size_px);for(var J=0;J<m.length;J++){var M=m[J],K=M.end_date,ce=M.start_date.getHours(),_e=K.getHours();if(M._sday=this._get_event_sday(M),this._ignores[M._sday])m.splice(J,1),J--;else{if(T[M._sday]||(T[M._sday]=[]),!w){M._inner=!1;for(var xe=T[M._sday];xe.length;){var Pe=xe[xe.length-1];if(!(this._get_event_mapped_end_date(Pe).valueOf()<=M.start_date.valueOf()))break;xe.splice(xe.length-1,1)}for(var ke=xe.length,qe=!1,rt=0;rt<xe.length;rt++)if(this._get_event_mapped_end_date(Pe=xe[rt]).valueOf()<=M.start_date.valueOf()){qe=!0,M._sorder=Pe._sorder,ke=rt,M._inner=!0;break}if(xe.length&&(xe[xe.length-1]._inner=!0),!qe)if(xe.length)if(xe.length<=xe[xe.length-1]._sorder){if(xe[xe.length-1]._sorder)for(rt=0;rt<xe.length;rt++){for(var wt=!1,Xe=0;Xe<xe.length;Xe++)if(xe[Xe]._sorder==rt){wt=!0;break}if(!wt){M._sorder=rt;break}}else M._sorder=0;M._inner=!0}else{var ct=xe[0]._sorder;for(rt=1;rt<xe.length;rt++)xe[rt]._sorder>ct&&(ct=xe[rt]._sorder);M._sorder=ct+1,M._inner=!1}else M._sorder=0;xe.splice(ke,ke==xe.length?0:1,M),xe.length>(xe.max_count||0)?(xe.max_count=xe.length,M._count=xe.length):M._count=M._count?M._count:1}(ce<this.config.first_hour||_e>=this.config.last_hour)&&(j.push(M),m[J]=M=this._copy_event(M),ce<this.config.first_hour&&(M.start_date.setHours(this.config.first_hour),M.start_date.setMinutes(0)),_e>=this.config.last_hour&&(M.end_date.setMinutes(0),M.end_date.setHours(this.config.last_hour)),M.start_date>M.end_date||ce==this.config.last_hour)&&(m.splice(J,1),J--)}}if(!w){for(J=0;J<m.length;J++)m[J]._count=T[m[J]._sday].max_count;for(J=0;J<j.length;J++)j[J]._count=T[j[J]._sday].max_count}return m},c._time_order=function(m){m.sort(function(w,T){return w.start_date.valueOf()==T.start_date.valueOf()?w._timed&&!T._timed?1:!w._timed&&T._timed?-1:w.id>T.id?1:-1:w.start_date>T.start_date?1:-1})},c._is_any_multiday_cell_visible=function(m,w,T){var j=this._cols.length,J=!1,M=m,Z=!0,K=new Date(w);for(c.date.day_start(new Date(w)).valueOf()!=w.valueOf()&&(K=c.date.day_start(K),K=c.date.add(K,1,"day"));M<K;){Z=!1;var ce=this.locate_holder_day(M,!1,T)%j;if(!this._ignores[ce]){J=!0;break}M=c.date.add(M,1,"day")}return Z||J},c._pre_render_events_table=function(m,w){this._time_order(m);for(var T,j=[],J=[[],[],[],[],[],[],[]],M=this._colsS.heights,Z=this._cols.length,K={},ce=0;ce<m.length;ce++){var _e=m[ce],xe=_e.id;K[xe]||(K[xe]={first_chunk:!0,last_chunk:!0});var Pe=K[xe],ke=T||_e.start_date,qe=_e.end_date;ke<this._min_date&&(Pe.first_chunk=!1,ke=this._min_date),qe>this._max_date&&(Pe.last_chunk=!1,qe=this._max_date);var rt=this.locate_holder_day(ke,!1,_e);if(_e._sday=rt%Z,!this._ignores[_e._sday]||!_e._timed){var wt=this.locate_holder_day(qe,!0,_e)||Z;if(_e._eday=wt%Z||Z,_e._length=wt-rt,_e._sweek=Math.floor((this._correct_shift(ke.valueOf(),1)-this._min_date.valueOf())/(864e5*Z)),c._is_any_multiday_cell_visible(ke,qe,_e)){var Xe,ct=J[_e._sweek];for(Xe=0;Xe<ct.length&&!(ct[Xe]._eday<=_e._sday);Xe++);if(_e._sorder&&w||(_e._sorder=Xe),_e._sday+_e._length<=Z)T=null,j.push(_e),ct[Xe]=_e,M[_e._sweek]=ct.length-1,_e._first_chunk=Pe.first_chunk,_e._last_chunk=Pe.last_chunk;else{var Ze=this._copy_event(_e);Ze.id=_e.id,Ze._length=Z-_e._sday,Ze._eday=Z,Ze._sday=_e._sday,Ze._sweek=_e._sweek,Ze._sorder=_e._sorder,Ze.end_date=this.date.add(ke,Ze._length,"day"),Ze._first_chunk=Pe.first_chunk,Pe.first_chunk&&(Pe.first_chunk=!1),j.push(Ze),ct[Xe]=Ze,T=Ze.end_date,M[_e._sweek]=ct.length-1,ce--}}}}return j},c._copy_dummy=function(){var m=new Date(this.start_date),w=new Date(this.end_date);this.start_date=m,this.end_date=w},c._copy_event=function(m){return this._copy_dummy.prototype=m,new this._copy_dummy},c._rendered=[],c.clear_view=function(){for(var m=0;m<this._rendered.length;m++){var w=this._rendered[m];w.parentNode&&w.parentNode.removeChild(w)}this._rendered=[]},c.updateEvent=function(m){var w=this.getEvent(m);this.clear_event(m),w&&this.is_visible_events(w)&&this.filter_event(m,w)&&(this._table_view||this.config.multi_day||w._timed)&&(this.config.update_render?this.render_view_data():"month"!=this.getState().mode||this.getState().drag_id||this.isOneDayEvent(w)?this.render_view_data([w],!0):this.render_view_data())},c.clear_event=function(m){this.for_rendered(m,function(w,T){w.parentNode&&w.parentNode.removeChild(w),c._rendered.splice(T,1)})},c._y_from_date=function(m){var w=60*m.getHours()+m.getMinutes();return Math.round((60*w*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},c._calc_event_y=function(m,w){w=w||0;var T=60*m.start_date.getHours()+m.start_date.getMinutes(),j=60*m.end_date.getHours()+m.end_date.getMinutes()||60*c.config.last_hour;return{top:this._y_from_date(m.start_date),height:Math.max(w,(j-T)*this.config.hour_size_px/60)}},c.render_event=function(m,w,T){var j=c.xy.menu_width,J=this.config.use_select_menu_space?0:j;if(!(m._sday<0)){var M=c.locate_holder(m._sday);if(M){w=w||M;var Z=this._calc_event_y(m,c.xy.min_event_height),K=Z.top,ce=Z.height,_e=m._count||1,xe=m._sorder||0;T=T||M.clientWidth;var Pe=Math.floor((T-J)/_e),ke=xe*Pe+1;if(m._inner||(Pe*=_e-xe),this.config.cascade_event_display){var qe=this.config.cascade_event_count,rt=this.config.cascade_event_margin;ke=xe%qe*rt,Pe=Math.floor(T-J-ke-(m._inner?(_e-xe-1)%qe*rt/2:0))}var Xe=this._render_v_bar(m,J+ke,K,Pe,ce,m._text_style,c.templates.event_header(m.start_date,m.end_date,m),c.templates.event_text(m.start_date,m.end_date,m));if(this._waiAria.eventAttr(m,Xe),this._rendered.push(Xe),w.appendChild(Xe),ke=ke+parseInt(this.config.rtl?M.style.right:M.style.left,10)+J,this._edit_id==m.id){Xe.style.zIndex=1,Pe=Math.max(Pe-4,c.xy.editor_width),(Xe=document.createElement("div")).setAttribute("event_id",m.id),Xe.setAttribute(this.config.event_attribute,m.id),this._waiAria.eventAttr(m,Xe),Xe.className="dhx_cal_event dhx_cal_editor",this.config.rtl&&ke++,this.set_xy(Xe,Pe,ce-20,ke,K+(c.xy.event_header_height||14)),m.color&&(Xe.style.backgroundColor=m.color);var ct=c.templates.event_class(m.start_date,m.end_date,m);ct&&(Xe.className+=" "+ct);var Ze=document.createElement("div");this.set_xy(Ze,Pe-6,ce-26),Ze.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",Xe.appendChild(Ze),this._els.dhx_cal_data[0].appendChild(Xe),this._rendered.push(Xe),Ze.innerHTML="<textarea class='dhx_cal_editor'>"+m.text+"</textarea>",this._editor=Ze.querySelector("textarea"),this._quirks7&&(this._editor.style.height=ce-12+"px"),c.event(this._editor,"keydown",function(sn){if(sn.shiftKey)return!0;var hn=sn.keyCode;hn==c.keys.edit_save&&c.editStop(!0),hn==c.keys.edit_cancel&&c.editStop(!1),hn!=c.keys.edit_save&&hn!=c.keys.edit_cancel||sn.preventDefault&&sn.preventDefault()}),c.event(this._editor,"selectstart",function(sn){return sn.cancelBubble=!0,!0}),c._focus(this._editor,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(0!==this.xy.menu_width&&this._select_id==m.id){this.config.cascade_event_display&&this._drag_mode&&(Xe.style.zIndex=1);for(var ht,nt=this.config["icons_"+(this._edit_id==m.id?"edit":"select")],jt="",Yt=m.color?"background-color: "+m.color+";":"",Ht=m.textColor?"color: "+m.textColor+";":"",rn=0;rn<nt.length;rn++)ht=this._waiAria.eventMenuAttrString(nt[rn]),jt+="<div class='dhx_menu_icon "+nt[rn]+"' style='"+Yt+Ht+"' title='"+this.locale.labels[nt[rn]]+"'"+ht+"></div>";var en=this._render_v_bar(m,ke-j+1,K,j,20*nt.length+26-2,"","<div style='"+Yt+Ht+"' class='dhx_menu_head'></div>",jt,!0);en.style.left=ke-j+1,this._els.dhx_cal_data[0].appendChild(en),this._rendered.push(en)}this.config.drag_highlight&&this._drag_id==m.id&&this.highlightEventPosition(m)}}},c._render_v_bar=function(m,w,T,j,J,M,Z,K,ce){var _e=document.createElement("div"),xe=m.id,Pe=ce?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",ke=c.getState();ke.drag_id==m.id&&(Pe+=" dhx_cal_event_drag"),ke.select_id==m.id&&(Pe+=" dhx_cal_event_selected");var qe=c.templates.event_class(m.start_date,m.end_date,m);qe&&(Pe=Pe+" "+qe),this.config.cascade_event_display&&(Pe+=" dhx_cal_event_cascade");var rt=m.color?"background-color:"+m.color+";":"",wt=m.textColor?"color:"+m.textColor+";":"",Xe=c._border_box_events(),ct=j-2,ht=Xe?ct:j-6,nt=Xe?ct:j-(this._quirks?4:14),jt=Xe?ct-2:j-8,Yt=Xe?J-this.xy.event_header_height-1:J-(this._quirks?20:30)+1;_e.innerHTML='<div event_id="'+xe+'" '+this.config.event_attribute+'="'+xe+'" class="'+Pe+'" style="position:absolute; top:'+T+"px; "+(this.config.rtl?"right:":"left:")+w+"px; width:"+(Xe?ct:j-4)+"px; height:"+J+"px;"+(M||"")+'"></div>';var rn=_e.cloneNode(!0).firstChild;if(!ce&&c.renderEvent(rn,m,j,J,Z,K))return rn;var en='<div class="dhx_event_move dhx_header" style=" width:'+ht+"px;"+rt+'" >&nbsp;</div>';en+='<div class="dhx_event_move dhx_title" style="'+rt+wt+'">'+Z+"</div>",en+='<div class="dhx_body" style=" width:'+nt+"px; height:"+Yt+"px;"+rt+wt+'">'+K+"</div>";var sn="dhx_event_resize dhx_footer";return(ce||!1===m._drag_resize)&&(sn="dhx_resize_denied "+sn),(rn=_e.firstChild).innerHTML=en+='<div class="'+sn+'" style=" width:'+jt+"px;"+(ce?" margin-top:-1px;":"")+rt+wt+'" ></div>',rn},c.renderEvent=function(){return!1},c.locate_holder=function(m){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[m]},c.locate_holder_day=function(m,w){var T=Math.floor((this._correct_shift(m,1)-this._min_date)/864e5);return w&&this.date.time_part(m)&&T++,T},c._get_dnd_order=function(m,w,T){if(!this._drag_event)return m;this._drag_event._orig_sorder?m=this._drag_event._orig_sorder:this._drag_event._orig_sorder=m;for(var j=w*m;j+w>T;)m--,j-=w;return Math.max(m,0)},c._get_event_bar_pos=function(m){var T=this._colsS,j=T[m._sday],J=T[m._eday];this.config.rtl&&(j=T[T.col_length]-T[m._eday]+T[0],J=T[T.col_length]-T[m._sday]+T[0]),J==j&&(J=T[m._eday+1]);var M=this.xy.bar_height,Z=m._sorder;return m.id==this._drag_id&&(Z=c._get_dnd_order(Z,M,T.heights[m._sweek+1]-T.heights[m._sweek]-this.xy.month_head_height)),{x:j,x2:J,y:T.heights[m._sweek]+(T.height?this.xy.month_scale_height+2:2)+Z*M}},c.render_event_bar=function(m){var w=this._rendered_location,T=this._get_event_bar_pos(m),j=T.y,J=T.x,M=T.x2,Z="";if(M){var K=c.config.resize_month_events&&"month"==this._mode&&(!m._timed||c.config.resize_month_timed),ce=document.createElement("div"),_e=m.hasOwnProperty("_first_chunk")&&m._first_chunk,xe=m.hasOwnProperty("_last_chunk")&&m._last_chunk,qe=!0,rt="dhx_cal_event_clear";m._timed&&!K||(qe=!1,rt="dhx_cal_event_line"),_e&&(rt+=" dhx_cal_event_line_start"),xe&&(rt+=" dhx_cal_event_line_end"),K&&(m._timed||_e)&&(Z+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),K&&(m._timed||xe)&&(Z+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var wt=c.templates.event_class(m.start_date,m.end_date,m);wt&&(rt+=" "+wt);var Ze=["position:absolute","top:"+j+"px","left:"+J+"px","width:"+(M-J-3-(qe?1:0))+"px",m.textColor?"color:"+m.textColor+";":"",m.color?"background:"+m.color+";":"",m._text_style||""].join(";"),ht="<div event_id='"+m.id+"' "+this.config.event_attribute+"='"+m.id+"' class='"+rt+"' style='"+Ze+"'"+this._waiAria.eventBarAttrString(m)+">";K&&(ht+=Z),"month"==c.getState().mode&&(m=c.getEvent(m.id)),m._timed&&(ht+=c.templates.event_bar_date(m.start_date,m.end_date,m)),ht+=c.templates.event_bar_text(m.start_date,m.end_date,m)+"</div>",ce.innerHTML=ht+="</div>",this._rendered.push(ce.firstChild),w.appendChild(ce.firstChild)}},c._locate_event=function(m){for(var w=null;m&&!w&&m.getAttribute;)w=m.getAttribute(this.config.event_attribute),m=m.parentNode;return w},c.edit=function(m){this._edit_id!=m&&(this.editStop(!1,m),this._edit_id=m,this.updateEvent(m))},c.editStop=function(m,w){if(!w||this._edit_id!=w){var T=this.getEvent(this._edit_id);T&&(m&&(T.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(T.id),this._edit_stop_event(T,m))}},c._edit_stop_event=function(m,w){this._new_event?(w?this.callEvent("onEventAdded",[m.id,m]):m&&this.deleteEvent(m.id,!0),this._new_event=null):w&&this.callEvent("onEventChanged",[m.id,m])},c.getEvents=function(m,w){var T=[];for(var j in this._events){var J=this._events[j];J&&(!m&&!w||J.start_date<w&&J.end_date>m)&&T.push(J)}return T},c.getRenderedEvent=function(m){if(m){for(var w=c._rendered,T=0;T<w.length;T++){var j=w[T];if(j.getAttribute(c.config.event_attribute)==m)return j}return null}},c.showEvent=function(m,w){m&&"object"===Rt(m)&&(w=m.mode,xe=m.section,m=m.section);var T="number"==typeof m||"string"==typeof m?c.getEvent(m):m;if(w=w||c._mode,T&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[T,w]))){var j=c.config.scroll_hour;c.config.scroll_hour=T.start_date.getHours();var J=c.config.preserve_scroll;c.config.preserve_scroll=!1;var M=T.color,Z=T.textColor;if(c.config.highlight_displayed_event&&(T.color=c.config.displayed_event_color,T.textColor=c.config.displayed_event_text_color),c.setCurrentView(new Date(T.start_date),w),c.config.scroll_hour=j,c.config.preserve_scroll=J,c.matrix&&c.matrix[w]){var K=c.getView(),ce=K.y_property,_e=c.getEvent(T.id);if(_e){if(!xe){var xe=_e[ce];Array.isArray(xe)?xe=xe[0]:"string"==typeof xe&&c.config.section_delimiter&&xe.indexOf(c.config.section_delimiter)>-1&&(xe=xe.split(c.config.section_delimiter)[0])}var Pe=K.getSectionTop(xe),ke=K.posFromDate(_e.start_date),qe=c.$container.querySelector(".dhx_timeline_data_wrapper");if(ke-=(qe.offsetWidth-K.dx)/2,Pe=Pe-qe.offsetHeight/2+K.dy/2,K._smartRenderingEnabled())var rt=K.attachEvent("onScroll",function(){wt(),K.detachEvent(rt)});K.scrollTo({left:ke,top:Pe}),K._smartRenderingEnabled()||wt()}}else wt();c.callEvent("onAfterEventDisplay",[T,w])}function wt(){T.color=M,T.textColor=Z}}}(ee),function(c){c._append_drag_marker=function(m){if(!m.parentNode){var w=c._els.dhx_cal_data[0].lastChild,T=c._getClassName(w);T.indexOf("dhx_scale_holder")<0&&w.previousSibling&&(w=w.previousSibling),T=c._getClassName(w),w&&0===T.indexOf("dhx_scale_holder")&&w.appendChild(m)}},c._update_marker_position=function(m,w){var T=c._calc_event_y(w,0);m.style.top=T.top+"px",m.style.height=T.height+"px"},c.highlightEventPosition=function(m){var w=document.createElement("div");w.setAttribute("event_id",m.id),w.setAttribute(this.config.event_attribute,m.id),this._rendered.push(w),this._update_marker_position(w,m);var T=this.templates.drag_marker_class(m.start_date,m.end_date,m),j=this.templates.drag_marker_content(m.start_date,m.end_date,m);w.className="dhx_drag_marker",T&&(w.className+=" "+T),j&&(w.innerHTML=j),this._append_drag_marker(w)}}(ee),function pt(u){var y;u._loaded={},u._load=function(y,N){if(y=y||this._load_url){var C;if(y+=(-1==y.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(y+="&uid="+this.uid()),N=N||this._date,this._load_mode){var c=this.templates.load_format;for(N=this.date[this._load_mode+"_start"](new Date(N.valueOf()));N>this._min_date;)N=this.date.add(N,-1,this._load_mode);C=N;for(var m=!0;C<this._max_date;)C=this.date.add(C,1,this._load_mode),this._loaded[c(N)]&&m?N=this.date.add(N,1,this._load_mode):m=!1;var w=C;do{w=this.date.add(C=w,-1,this._load_mode)}while(w>N&&this._loaded[c(w)]);if(C<=N)return!1;for(u.ajax.get(y+"&from="+c(N)+"&to="+c(C),T);N<C;)this._loaded[c(N)]=!0,N=this.date.add(N,1,this._load_mode)}else u.ajax.get(y,T);return this.callEvent("onXLS",[]),this.callEvent("onLoadStart",[]),!0}function T(j){u.on_load(j),u.callEvent("onLoadEnd",[])}},u._parsers={},(y=u)._parsers.xml={canParse:function(N,C){if(C.responseXML&&C.responseXML.firstChild)return!0;try{var c=y.ajax.parse(C.responseText),m=y.ajax.xmltop("data",c);if(m&&"data"===m.tagName)return!0}catch{}return!1},parse:function(N){var C;if(N.xmlDoc.responseXML||(N.xmlDoc.responseXML=y.ajax.parse(N.xmlDoc.responseText)),"data"!=(C=y.ajax.xmltop("data",N.xmlDoc)).tagName)return null;var c=C.getAttribute("dhx_security");c&&(window.dhtmlx&&(window.dhtmlx.security_key=c),y.security_key=c);for(var m=y.ajax.xpath("//coll_options",N.xmlDoc),w=0;w<m.length;w++){var T=m[w].getAttribute("for"),j=y.serverList[T];j||(y.serverList[T]=j=[]),j.splice(0,j.length);for(var J=y.ajax.xpath(".//item",m[w]),M=0;M<J.length;M++){for(var Z=J[M].attributes,K={key:J[M].getAttribute("value"),label:J[M].getAttribute("label")},ce=0;ce<Z.length;ce++){var _e=Z[ce];"value"!=_e.nodeName&&"label"!=_e.nodeName&&(K[_e.nodeName]=_e.nodeValue)}j.push(K)}}m.length&&y.callEvent("onOptionsLoad",[]);var xe=y.ajax.xpath("//userdata",N.xmlDoc);for(w=0;w<xe.length;w++){var Pe=y._xmlNodeToJSON(xe[w]);y._userdata[Pe.name]=Pe.text}var ke=[];for(C=y.ajax.xpath("//event",N.xmlDoc),w=0;w<C.length;w++){var qe=ke[w]=y._xmlNodeToJSON(C[w]);y._init_event(qe)}return ke}},function(y){y.json=y._parsers.json={canParse:function(N){if(N&&"object"===Ee(N))return!0;if("string"==typeof N)try{var C=JSON.parse(N);return"[object Object]"===Object.prototype.toString.call(C)||"[object Array]"===Object.prototype.toString.call(C)}catch{return!1}return!1},parse:function(N){var C=[];"string"==typeof N&&(N=JSON.parse(N)),"[object Array]"===Object.prototype.toString.call(N)?C=N:N&&(N.events?C=N.events:N.data&&(C=N.data)),C=C||[],N.dhx_security&&(window.dhtmlx&&(window.dhtmlx.security_key=N.dhx_security),y.security_key=N.dhx_security);var c=N&&N.collections?N.collections:{},m=!1;for(var w in c)if(c.hasOwnProperty(w)){m=!0;var T=c[w],j=y.serverList[w];j||(y.serverList[w]=j=[]),j.splice(0,j.length);for(var J=0;J<T.length;J++){var M=T[J],Z={key:M.value,label:M.label};for(var K in M)if(M.hasOwnProperty(K)){if("value"==K||"label"==K)continue;Z[K]=M[K]}j.push(Z)}}m&&y.callEvent("onOptionsLoad",[]);for(var ce=[],_e=0;_e<C.length;_e++){var xe=C[_e];y._init_event(xe),ce.push(xe)}return ce}}}(u),function(y){y.ical=y._parsers.ical={canParse:function(N){return"string"==typeof N&&new RegExp("^BEGIN:VCALENDAR").test(N)},parse:function(N){var C=N.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(C.length){C[0]=C[0].replace(/[\r\n]+ /g,""),C[0]=C[0].replace(/[\r\n]+(?=[a-z \t])/g," "),C[0]=C[0].replace(/;[^:\r\n]*:/g,":");for(var c,m=[],w=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");null!==(c=w.exec(C));){for(var T,j={},J=/[^\r\n]+[\r\n]+/g;null!==(T=J.exec(c[1]));)this.parse_param(T.toString(),j);j.uid&&!j.id&&(j.id=j.uid),m.push(j)}return m}},parse_param:function(N,C){var c=N.indexOf(":");if(-1!=c){var m=N.substr(0,c).toLowerCase(),w=N.substr(c+1).replace(/\\,/g,",").replace(/[\r\n]+$/,"");"summary"==m?m="text":"dtstart"==m?(m="start_date",w=this.parse_date(w,0,0)):"dtend"==m&&(m="end_date",w=this.parse_date(w,0,0)),C[m]=w}},parse_date:function(N,C,c){var m=N.split("T"),w=!1;m[1]&&(C=m[1].substr(0,2),c=m[1].substr(2,2),w="Z"==m[1][6]);var T=m[0].substr(0,4),j=parseInt(m[0].substr(4,2),10)-1,J=m[0].substr(6,2);return y.config.server_utc||w?new Date(Date.UTC(T,j,J,C,c)):new Date(T,j,J,C,c)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"}}(u),u.on_load=function(y){var N;this.callEvent("onBeforeParse",[]);var C=!1,c=!1;for(var m in this._parsers){var w=this._parsers[m];if(w.canParse(y.xmlDoc.responseText,y.xmlDoc)){try{var T=y.xmlDoc.responseText;"xml"===m&&(T=y),(N=w.parse(T))||(C=!0)}catch{C=!0}c=!0;break}}if(!c)if(this._process&&this[this._process])try{N=this[this._process].parse(y.xmlDoc.responseText)}catch{C=!0}else C=!0;(C||y.xmlDoc.status&&y.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[y.xmlDoc]),N=[]),this._process_loading(N),this.callEvent("onXLE",[]),this.callEvent("onParse",[])},u._process_loading=function(y){this._loading=!0,this._not_render=!0;for(var N=0;N<y.length;N++)this.callEvent("onEventLoading",[y[N]])&&this.addEvent(y[N]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},u._init_event=function(y){y.text=y.text||y._tagvalue||"",y.start_date=u._init_date(y.start_date),y.end_date=u._init_date(y.end_date)},u._init_date=function(y){return y?"string"==typeof y?u._helpers.parseDate(y):new Date(y):null};var ee=ot()(u);u.serialize=function(){var y=[],N=ee();for(var C in N){var c={},m=N[C];for(var w in m)if("$"!=w.charAt(0)&&"_"!=w.charAt(0)){var T,j=m[w];T=u.utils.isDate(j)?u.defined(u.templates.xml_format)?u.templates.xml_format(j):u.templates.format_date(j):j,c[w]=T}y.push(c)}return y},u.parse=function(y,N){this._process=N,this.on_load({xmlDoc:{responseText:y}})},u.load=function(y,N){"string"==typeof N&&(this._process=N,N=arguments[2]),this._load_url=y,this._after_call=N,this._load(y,this._date)},u.setLoadMode=function(y){"all"==y&&(y=""),this._load_mode=y},u.serverList=function(y,N){return N?(this.serverList[y]=N.slice(0),this.serverList[y]):(this.serverList[y]=this.serverList[y]||[],this.serverList[y])},u._userdata={},u._xmlNodeToJSON=function(y){for(var N={},C=0;C<y.attributes.length;C++)N[y.attributes[C].name]=y.attributes[C].value;for(C=0;C<y.childNodes.length;C++){var c=y.childNodes[C];1==c.nodeType&&(N[c.tagName]=c.firstChild?c.firstChild.nodeValue:"")}return N.text||(N.text=y.firstChild?y.firstChild.nodeValue:""),N},u.attachEvent("onXLS",function(){var y;!0===this.config.show_loading&&((y=this.config.show_loading=document.createElement("div")).className="dhx_loading",y.style.left=Math.round((this._x-128)/2)+"px",y.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(y))}),u.attachEvent("onXLE",function(){var y=this.config.show_loading;y&&"object"==yt(y)&&(y.parentNode&&y.parentNode.removeChild(y),this.config.show_loading=!0)})}(ee),function(c){function m(){var T=!!window.Sfdc||!!window.$A||window.Aura||"$shadowResolver$"in document.body;return!0===c.config.csp||T?c.$root:document.body}c._lightbox_controls={},c.formSection=function(w){for(var T=this.config.lightbox.sections,j=0;j<T.length&&T[j].name!=w;j++);if(j===T.length)return null;var J=T[j];c._lightbox||c.getLightbox();var M=document.getElementById(J.id),Z=M.nextSibling,K={section:J,header:M,node:Z,getValue:function(_e){return c.form_blocks[J.type].get_value(Z,_e||{},J)},setValue:function(_e,xe){return c.form_blocks[J.type].set_value(Z,_e,xe||{},J)}},ce=c._lightbox_controls["get_"+J.type+"_control"];return ce?ce(K):K},c._lightbox_controls.get_template_control=function(w){return w.control=w.node,w},c._lightbox_controls.get_select_control=function(w){return w.control=w.node.getElementsByTagName("select")[0],w},c._lightbox_controls.get_textarea_control=function(w){return w.control=w.node.getElementsByTagName("textarea")[0],w},c._lightbox_controls.get_time_control=function(w){return w.control=w.node.getElementsByTagName("select"),w},c._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},c.form_blocks={template:{render:function(w){var T=c._lightbox_controls.defaults.template;return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(w.height||(T?T.height:30)||30)+"px;'></div>"},set_value:function(w,T,j,J){w.innerHTML=T||""},get_value:function(w,T,j){return w.innerHTML||""},focus:function(w){}},textarea:{render:function(w){var T=c._lightbox_controls.defaults.textarea;return"<div class='dhx_cal_ltext' style='height:"+(w.height||(T?T.height:200)||"130")+"px;'><textarea></textarea></div>"},set_value:function(w,T,j){c.form_blocks.textarea._get_input(w).value=T||""},get_value:function(w,T){return c.form_blocks.textarea._get_input(w).value},focus:function(w){var T=c.form_blocks.textarea._get_input(w);c._focus(T,!0)},_get_input:function(w){return w.getElementsByTagName("textarea")[0]}},select:{render:function(w){for(var T=c._lightbox_controls.defaults.select,J="<div class='dhx_cal_ltext' style='height:"+(w.height||(T?T.height:23)||"23")+"px;'><select style='width:100%;'>",M=0;M<w.options.length;M++)J+="<option value='"+w.options[M].key+"'>"+w.options[M].label+"</option>";return J+"</select></div>"},set_value:function(w,T,j,J){var M=w.firstChild;!M._dhx_onchange&&J.onchange&&(c.event(M,"change",J.onchange),M._dhx_onchange=!0),void 0===T&&(T=(M.options[0]||{}).value),M.value=T||""},get_value:function(w,T){return w.firstChild.value},focus:function(w){c._focus(w.firstChild,!0)}},time:{render:function(w){w.time_format||(w.time_format=["%H:%i","%d","%m","%Y"]),w._time_format_order={};var T=w.time_format,j=c.config,J=c.date.date_part(c._currentDate()),M=1440,Z=0;c.config.limit_time_select&&(M=60*j.last_hour+1,Z=60*j.first_hour,J.setHours(j.first_hour));for(var K="",ce=0;ce<T.length;ce++){var _e=T[ce];ce>0&&(K+=" ");var xe="",Pe="";switch(_e){case"%Y":var ke,qe,rt;xe="dhx_lightbox_year_select",w._time_format_order[3]=ce,w.year_range&&(isNaN(w.year_range)?w.year_range.push&&(qe=w.year_range[0],rt=w.year_range[1]):ke=w.year_range),ke=ke||10;var wt=wt||Math.floor(ke/2);qe=qe||J.getFullYear()-wt,rt=rt||qe+ke;for(var Xe=qe;Xe<rt;Xe++)Pe+="<option value='"+Xe+"'>"+Xe+"</option>";break;case"%m":for(xe="dhx_lightbox_month_select",w._time_format_order[2]=ce,Xe=0;Xe<12;Xe++)Pe+="<option value='"+Xe+"'>"+this.locale.date.month_full[Xe]+"</option>";break;case"%d":for(xe="dhx_lightbox_day_select",w._time_format_order[1]=ce,Xe=1;Xe<32;Xe++)Pe+="<option value='"+Xe+"'>"+Xe+"</option>";break;case"%H:%i":xe="dhx_lightbox_time_select",w._time_format_order[0]=ce,Xe=Z;var ct=J.getDate();for(w._time_values=[];Xe<M;)Pe+="<option value='"+Xe+"'>"+this.templates.time_picker(J)+"</option>",w._time_values.push(Xe),J.setTime(J.valueOf()+60*this.config.time_step*1e3),Xe=24*(J.getDate()!=ct?1:0)*60+60*J.getHours()+J.getMinutes()}if(Pe){var Ze=c._waiAria.lightboxSelectAttrString(_e);K+="<select class='"+xe+"' "+(w.readonly?"disabled='disabled'":"")+Ze+">"+Pe+"</select> "}}var ht=c._lightbox_controls.defaults.select;return"<div style='height:"+(w.height||(ht?ht.height:23)||23)+"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+K+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+K+"</div>"},set_value:function(w,T,j,J){var M,Z,K=c.config,ce=w.getElementsByTagName("select"),_e=J._time_format_order;if(K.full_day){if(!w._full_day){var xe="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+c.locale.labels.full_day+"&nbsp;</label></input>";c.config.wide_form||(xe=w.previousSibling.innerHTML+xe),w.previousSibling.innerHTML=xe,w._full_day=!0}var Pe=w.previousSibling.getElementsByTagName("input")[0];Pe.checked=0===c.date.time_part(j.start_date)&&0===c.date.time_part(j.end_date),ce[_e[0]].disabled=Pe.checked,ce[_e[0]+ce.length/2].disabled=Pe.checked,Pe.$_eventAttached||(Pe.$_eventAttached=!0,c.event(Pe,"click",function(){if(Pe.checked){var wt={};c.form_blocks.time.get_value(w,wt,J),M=c.date.date_part(wt.start_date),(+(Z=c.date.date_part(wt.end_date))==+M||+Z>=+M&&(0!==j.end_date.getHours()||0!==j.end_date.getMinutes()))&&(Z=c.date.add(Z,1,"day"))}else M=null,Z=null;ce[_e[0]].disabled=Pe.checked,ce[_e[0]+ce.length/2].disabled=Pe.checked,rt(ce,0,M||j.start_date),rt(ce,4,Z||j.end_date)}))}if(K.auto_end_date&&K.event_duration)for(var ke=function(){K.auto_end_date&&K.event_duration&&(M=new Date(ce[_e[3]].value,ce[_e[2]].value,ce[_e[1]].value,0,ce[_e[0]].value),Z=new Date(M.getTime()+60*c.config.event_duration*1e3),rt(ce,4,Z))},qe=0;qe<4;qe++)ce[qe].$_eventAttached||(ce[qe].$_eventAttached=!0,c.event(ce[qe],"change",ke));function rt(wt,Xe,ct){for(var Ze=J._time_values,ht=60*ct.getHours()+ct.getMinutes(),nt=ht,jt=!1,Yt=0;Yt<Ze.length;Yt++){var Ht=Ze[Yt];if(Ht===ht){jt=!0;break}Ht<ht&&(nt=Ht)}wt[Xe+_e[0]].value=jt?ht:nt,jt||nt||(wt[Xe+_e[0]].selectedIndex=-1),wt[Xe+_e[1]].value=ct.getDate(),wt[Xe+_e[2]].value=ct.getMonth(),wt[Xe+_e[3]].value=ct.getFullYear()}rt(ce,0,j.start_date),rt(ce,4,j.end_date)},get_value:function(w,T,j){var J=w.getElementsByTagName("select"),M=j._time_format_order;if(T.start_date=new Date(J[M[3]].value,J[M[2]].value,J[M[1]].value,0,J[M[0]].value),T.end_date=new Date(J[M[3]+4].value,J[M[2]+4].value,J[M[1]+4].value,0,J[M[0]+4].value),!J[M[3]].value||!J[M[3]+4].value){var Z=c.getEvent(c._lightbox_id);Z&&(T.start_date=Z.start_date,T.end_date=Z.end_date)}return T.end_date<=T.start_date&&(T.end_date=c.date.add(T.start_date,c.config.time_step,"minute")),{start_date:new Date(T.start_date),end_date:new Date(T.end_date)}},focus:function(w){c._focus(w.getElementsByTagName("select")[0])}}},c._setLbPosition=function(w){if(w){var T=window.pageYOffset||m().scrollTop||document.documentElement.scrollTop,j=window.pageXOffset||m().scrollLeft||document.documentElement.scrollLeft,J=window.innerHeight||document.documentElement.clientHeight;w.style.top=T?Math.round(T+Math.max((J-w.offsetHeight)/2,0))+"px":Math.round(Math.max((J-w.offsetHeight)/2,0)+9)+"px",w.style.left=document.documentElement.scrollWidth>m().offsetWidth?Math.round(j+(m().offsetWidth-w.offsetWidth)/2)+"px":Math.round((m().offsetWidth-w.offsetWidth)/2)+"px"}},c.showCover=function(w){w&&(w.style.display="block",this._setLbPosition(w)),c.config.responsive_lightbox&&(document.documentElement.classList.add("dhx_cal_overflow_container"),m().classList.add("dhx_cal_overflow_container")),this.show_cover()},c.showLightbox=function(w){if(w)if(this.callEvent("onBeforeLightbox",[w])){var T=this.getLightbox();this.showCover(T),this._fill_lightbox(w,T),this._waiAria.lightboxVisibleAttr(T),this.callEvent("onLightbox",[w])}else this._new_event&&(this._new_event=null)},c._fill_lightbox=function(w,T){var j=this.getEvent(w),J=T.getElementsByTagName("span"),M=[];if(c.templates.lightbox_header){M.push("");var Z=c.templates.lightbox_header(j.start_date,j.end_date,j);M.push(Z),J[1].innerHTML="",J[2].innerHTML=Z}else{var K=this.templates.event_header(j.start_date,j.end_date,j),ce=(this.templates.event_bar_text(j.start_date,j.end_date,j)||"").substr(0,70);M.push(K),M.push(ce),J[1].innerHTML=K,J[2].innerHTML=ce}this._waiAria.lightboxHeader(T,M.join(" "));for(var _e=this.config.lightbox.sections,xe=0;xe<_e.length;xe++){var Pe=_e[xe],ke=c._get_lightbox_section_node(Pe),qe=this.form_blocks[Pe.type];qe.set_value.call(this,ke,void 0!==j[Pe.map_to]?j[Pe.map_to]:Pe.default_value,j,Pe),_e[xe].focus&&qe.focus.call(this,ke)}c._lightbox_id=w},c._get_lightbox_section_node=function(w){return document.getElementById(w.id).nextSibling},c._lightbox_out=function(w){for(var T=this.config.lightbox.sections,j=0;j<T.length;j++){var J=document.getElementById(T[j].id),M=this.form_blocks[T[j].type].get_value.call(this,J=J&&J.nextSibling,w,T[j]);"auto"!=T[j].map_to&&(w[T[j].map_to]=M)}return w},c._empty_lightbox=function(w){var j=this.getEvent(c._lightbox_id);this._lame_copy(j,w),this.setEvent(j.id,j),this._edit_stop_event(j,!0),this.render_view_data()},c.hide_lightbox=function(w){c.endLightbox(!1,this.getLightbox())},c.hideCover=function(w){w&&(w.style.display="none"),this.hide_cover(),c.config.responsive_lightbox&&(document.documentElement.classList.remove("dhx_cal_overflow_container"),m().classList.remove("dhx_cal_overflow_container"))},c.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},c.show_cover=function(){this._cover||(this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover",m().appendChild(this._cover))},c.save_lightbox=function(){var w=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,w,this._new_event])||(this._empty_lightbox(w),this.hide_lightbox())},c.startLightbox=function(w,T){this._lightbox_id=w,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=T,this.showCover(T)},c.endLightbox=function(w,T){T=T||c.getLightbox();var j=c.getEvent(this._lightbox_id);j&&this._edit_stop_event(j,w),w&&c.render_view_data(),this.hideCover(T),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(T),this.callEvent("onAfterLightbox",[])},c.resetLightbox=function(){c._lightbox&&!c._custom_lightbox&&c._lightbox.parentNode.removeChild(c._lightbox),c._lightbox=null},c.cancel_lightbox=function(){this._lightbox_id&&this.callEvent("onEventCancel",[this._lightbox_id,!!this._new_event]),this.hide_lightbox()},c.hideLightbox=c.cancel_lightbox,c._init_lightbox_events=function(){if(!this.getLightbox().$_eventAttached){var w=this.getLightbox();w.$_eventAttached=!0,c.event(w,"click",function(T){var j=c.$domHelpers.closest(T.target,".dhx_btn_set");if(j){var J=j?j.getAttribute("data-action"):null;switch(J){case"dhx_save_btn":case"save":if(c.config.readonly_active)return;c.save_lightbox();break;case"dhx_delete_btn":case"delete":if(c.config.readonly_active)return;c._dhtmlx_confirm(c.locale.labels.confirm_deleting,c.locale.labels.title_confirm_deleting,function(){c.deleteEvent(c._lightbox_id),c._new_event=null,c.hide_lightbox()});break;case"dhx_cancel_btn":case"cancel":c.cancel_lightbox();break;default:c.callEvent("onLightboxButton",[J,j,T])}}else{var Z=c.$domHelpers.closest(T.target,".dhx_custom_button[data-section-index]");if(Z){var K=Number(Z.getAttribute("data-section-index"));c.form_blocks[c.config.lightbox.sections[K].type].button_click(c.$domHelpers.closest(Z,".dhx_cal_lsection"),Z,T)}}}),c.event(w,"keydown",function(T){var j=T||window.event,J=T.target||T.srcElement,M=J.querySelector("[dhx_button]");switch(M||(M=J.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(T||j).keyCode){case 32:if((T||j).shiftKey)return;M&&M.click&&M.click();break;case c.keys.edit_save:if((T||j).shiftKey)return;if(M&&M.click)M.click();else{if(c.config.readonly_active)return;c.save_lightbox()}break;case c.keys.edit_cancel:c.cancel_lightbox()}})}},c.setLightboxSize=function(){var w=this._lightbox;if(w){var T=w.childNodes[1];T.style.height="0px",T.style.height=T.scrollHeight+"px",w.style.height=T.scrollHeight+c.xy.lightbox_additional_height+"px",T.style.height=T.scrollHeight+"px"}},c._init_dnd_events=function(){c.event(m(),"mousemove",c._move_while_dnd),c.event(m(),"mouseup",c._finish_dnd),c._init_dnd_events=function(){}},c._move_while_dnd=function(w){if(c._dnd_start_lb){document.dhx_unselectable||(m().classList.add("dhx_unselectable"),document.dhx_unselectable=!0);var T=c.getLightbox(),j=[w.pageX,w.pageY];T.style.top=c._lb_start[1]+j[1]-c._dnd_start_lb[1]+"px",T.style.left=c._lb_start[0]+j[0]-c._dnd_start_lb[0]+"px"}},c._ready_to_dnd=function(w){var T=c.getLightbox();c._lb_start=[parseInt(T.style.left,10),parseInt(T.style.top,10)],c._dnd_start_lb=[w.pageX,w.pageY]},c._finish_dnd=function(){c._lb_start&&(c._lb_start=c._dnd_start_lb=!1,m().classList.remove("dhx_unselectable"),document.dhx_unselectable=!1)},c.getLightbox=function(){if(!this._lightbox){var w=document.createElement("div");w.className="dhx_cal_light",c.config.wide_form&&(w.className+=" dhx_cal_light_wide"),c.form_blocks.recurring&&(w.className+=" dhx_cal_light_rec"),c.config.rtl&&(w.className+=" dhx_cal_light_rtl"),c.config.responsive_lightbox&&(w.className+=" dhx_cal_light_responsive"),w.style.visibility="hidden";for(var T=this._lightbox_template,j=this.config.buttons_left,J=0;J<j.length;J++)T+="<div "+this._waiAria.lightboxButtonAttrString(j[J])+" data-action='"+j[J]+"' class='dhx_btn_set dhx_"+(c.config.rtl?"right":"left")+"_btn_set "+j[J]+"_set'><div class='"+j[J]+"'></div><div>"+c.locale.labels[j[J]]+"</div></div>";j=this.config.buttons_right;var M=c.config.rtl;for(J=0;J<j.length;J++)T+="<div "+this._waiAria.lightboxButtonAttrString(j[J])+" data-action='"+j[J]+"' class='dhx_btn_set dhx_"+(M?"left":"right")+"_btn_set "+j[J]+"_set' style='float:"+(M?"left":"right")+";'><div class='"+j[J]+"'></div><div>"+c.locale.labels[j[J]]+"</div></div>";w.innerHTML=T+="</div>",c.config.drag_lightbox&&(c.event(w.firstChild,"mousedown",c._ready_to_dnd),c.event(w.firstChild,"selectstart",function(ke){return ke.preventDefault(),!1}),w.firstChild.style.cursor="move",c._init_dnd_events()),this._waiAria.lightboxAttr(w),m().insertBefore(w,m().firstChild),this._lightbox=w;var Z=this.config.lightbox.sections;for(T="",J=0;J<Z.length;J++){var K=this.form_blocks[Z[J].type];if(K){Z[J].id="area_"+this.uid();var ce="";Z[J].button&&(ce="<div "+c._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+Z[J].button])+" class='dhx_custom_button' data-section-index='"+J+"' index='"+J+"'><div class='dhx_custom_button_"+Z[J].button+"'></div><div>"+this.locale.labels["button_"+Z[J].button]+"</div></div>"),this.config.wide_form&&(T+="<div class='dhx_wrap_section'>");var _e=this.locale.labels["section_"+Z[J].name];"string"!=typeof _e&&(_e=Z[J].name),T+="<div id='"+Z[J].id+"' class='dhx_cal_lsection'>"+ce+"<label>"+_e+"</label></div>"+K.render.call(this,Z[J]),T+="</div>"}}var xe=w.getElementsByTagName("div");for(J=0;J<xe.length;J++){var Pe=xe[J];if("dhx_cal_larea"==c._getClassName(Pe)){Pe.innerHTML=T;break}}c._bindLightboxLabels(Z),this.setLightboxSize(),this._init_lightbox_events(this),w.style.display="none",w.style.visibility="visible"}return this._lightbox},c._bindLightboxLabels=function(w){for(var T=0;T<w.length;T++){var j=w[T];if(j.id&&document.getElementById(j.id)){for(var J=document.getElementById(j.id).querySelector("label"),M=c._get_lightbox_section_node(j);M&&!M.querySelector;)M=M.nextSibling;var Z=!0;if(M){var K=M.querySelector("input, select, textarea");K&&(j.inputId=K.id||"input_"+c.uid(),K.id||(K.id=j.inputId),J.setAttribute("for",j.inputId),Z=!1)}Z&&c.form_blocks[j.type].focus&&c.event(J,"click",function(ce){return function(){var _e=c.form_blocks[ce.type],xe=c._get_lightbox_section_node(ce);_e&&_e.focus&&_e.focus.call(c,xe)}}(j))}}},c.attachEvent("onEventIdChange",function(w,T){this._lightbox_id==w&&(this._lightbox_id=T)}),c._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>"}(ee),function Ve(u){u._init_touch_events=function(){if((this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var ee=!0;try{document.createEvent("TouchEvent")}catch{ee=!1}ee?this._touch_events(["touchmove","touchstart","touchend"],function(y){return y.touches&&y.touches.length>1?null:y.touches[0]?{target:y.target,pageX:y.touches[0].pageX,pageY:y.touches[0].pageY,clientX:y.touches[0].clientX,clientY:y.touches[0].clientY}:y},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(y){return"mouse"==y.pointerType?null:y},function(y){return!y||"mouse"==y.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(y){return y.pointerType==y.MSPOINTER_TYPE_MOUSE?null:y},function(y){return!y||y.pointerType==y.MSPOINTER_TYPE_MOUSE})}},u._touch_events=function(ee,y,N){var C,c,m,w,T,j,J=0;function M(K,ce,_e){K.addEventListener(ce,function(xe){return!!u._is_lightbox_open()||(N(xe)?void 0:_e(xe))},{passive:!1})}function Z(K){N(K)||(u._hide_global_tip(),w&&(u._on_mouse_up(y(K)),u._temp_touch_block=!1),u._drag_id=null,u._drag_mode=null,u._drag_pos=null,u._pointerDragId=null,clearTimeout(m),w=j=!1,T=!0)}M(document.body,ee[0],function(K){if(!N(K)){var ce=y(K);if(ce){if(w)return function(_e){if(!N(_e)){var xe=u.getState().drag_mode,Pe=!!u.matrix&&u.matrix[u._mode],ke=u.render_view_data;"create"==xe&&Pe&&(u.render_view_data=function(){for(var qe=u.getState().drag_id,rt=u.getEvent(qe),wt=Pe.y_property,Xe=u.getEvents(rt.start_date,rt.end_date),ct=0;ct<Xe.length;ct++)Xe[ct][wt]!=rt[wt]&&(Xe.splice(ct,1),ct--);rt._sorder=Xe.length-1,rt._count=Xe.length,this.render_data([rt],u.getState().mode)}),u._on_mouse_move(_e),"create"==xe&&Pe&&(u.render_view_data=ke),_e.preventDefault&&_e.preventDefault(),_e.cancelBubble=!0}}(ce),K.preventDefault&&K.preventDefault(),K.cancelBubble=!0,u._update_global_tip(),!1;c=y(K),j&&(c?(C.target!=c.target||Math.abs(C.pageX-c.pageX)>5||Math.abs(C.pageY-c.pageY)>5)&&(T=!0,clearTimeout(m)):T=!0)}}}),M(this._els.dhx_cal_data[0],"touchcancel",Z),M(this._els.dhx_cal_data[0],"contextmenu",function(K){if(!N(K))return j?(K&&K.preventDefault&&K.preventDefault(),K.cancelBubble=!0,!1):void 0}),M(this._obj,ee[1],function(K){var ce;if(document&&document.body&&document.body.classList.add("dhx_cal_touch_active"),!N(K))if(u._pointerDragId=K.pointerId,w=T=!1,j=!0,ce=c=y(K)){var _e=new Date;if(!T&&!w&&_e-J<250)return u._click.dhx_cal_data(ce),window.setTimeout(function(){u.$destroyed||(ce.type="dblclick",u._on_dbl_click(ce))},50),K.preventDefault&&K.preventDefault(),K.cancelBubble=!0,u._block_next_stop=!0,!1;if(J=_e,!T&&!w&&u.config.touch_drag){var xe=u._locate_event(document.activeElement),Pe=u._locate_event(ce.target),ke=C?u._locate_event(C.target):null;if(xe&&Pe&&xe==Pe&&xe!=ke)return K.preventDefault&&K.preventDefault(),K.cancelBubble=!0,u._ignore_next_click=!1,u._click.dhx_cal_data(ce),C=ce,!1;m=setTimeout(function(){if(!u.$destroyed){w=!0;var qe=C.target,rt=u._getClassName(qe);qe&&-1!=rt.indexOf("dhx_body")&&(qe=qe.previousSibling),u._on_mouse_down(C,qe),u._drag_mode&&"create"!=u._drag_mode&&u.for_rendered(u._drag_id,function(wt,Xe){wt.style.display="none",u._rendered.splice(Xe,1)}),u.config.touch_tip&&u._show_global_tip(),u.updateEvent(u._drag_id)}},u.config.touch_drag),C=ce}}else T=!0}),M(this._els.dhx_cal_data[0],ee[2],function(K){if(document&&document.body&&document.body.classList.remove("dhx_cal_touch_active"),!N(K))return u.config.touch_swipe_dates&&!w&&function(ce,_e,xe,Pe){if(!ce||!_e)return!1;for(var ke=ce.target;ke&&ke!=u._obj;)ke=ke.parentNode;if(ke!=u._obj||u.matrix&&u.matrix[u.getState().mode]&&u.matrix[u.getState().mode].scrollable)return!1;var qe=Math.abs(ce.pageY-_e.pageY),rt=Math.abs(ce.pageX-_e.pageX);return qe<100&&rt>200&&(!qe||rt/qe>3)&&(ce.pageX>_e.pageX?u._click.dhx_cal_next_button():u._click.dhx_cal_prev_button(),!0)}(C,c)&&(u._block_next_stop=!0),w&&(u._ignore_next_click=!0,setTimeout(function(){u._ignore_next_click=!1},100)),Z(K),u._block_next_stop?(u._block_next_stop=!1,K.preventDefault&&K.preventDefault(),K.cancelBubble=!0,!1):void 0}),u.event(document.body,ee[2],Z)},u._show_global_tip=function(){u._hide_global_tip();var ee=u._global_tip=document.createElement("div");ee.className="dhx_global_tip",u._update_global_tip(1),document.body.appendChild(ee)},u._update_global_tip=function(ee){var y=u._global_tip;if(y){var N="";if(u._drag_id&&!ee){var C=u.getEvent(u._drag_id);C&&(N="<div>"+(C._timed?u.templates.event_header(C.start_date,C.end_date,C):u.templates.day_date(C.start_date,C.end_date,C))+"</div>")}y.innerHTML="create"==u._drag_mode||"new-size"==u._drag_mode?(u.locale.labels.drag_to_create||"Drag to create")+N:(u.locale.labels.drag_to_move||"Drag to move")+N}},u._hide_global_tip=function(){var ee=u._global_tip;ee&&ee.parentNode&&(ee.parentNode.removeChild(ee),u._global_tip=0)}}(ee),function(c){c.getRootView=function(){return{view:{render:function(){return{tag:"div",type:1,attrs:{style:"width:100%;height:100%;"},hooks:{didInsert:function(){c.setCurrentView()}},body:[{el:this.el,type:1}]}},init:function(){var m=document.createElement("DIV");m.id="scheduler_"+c.uid(),m.style.width="100%",m.style.height="100%",m.classList.add("dhx_cal_container"),m.cmp="grid",m.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" data-tab="day"></div><div class="dhx_cal_tab" data-tab="week"></div><div class="dhx_cal_tab" data-tab="month"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',c.init(m),this.el=m}},type:4}}}(ee),function et(u){var ee,y;function N(){if(u._is_material_skin())return!0;if(void 0!==y)return y;var c=document.createElement("div");c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",c.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>",document.body.appendChild(c);var m=window.getComputedStyle(c.querySelector(".dhx_body")).getPropertyValue("box-sizing");document.body.removeChild(c),(y="border-box"===m)||setTimeout(function(){y=void 0},1e3)}function C(){if(!u._is_material_skin()&&!u._border_box_events()){var c=y;y=void 0,ee=void 0,c!==N()&&u.$container&&u.getState().mode&&u.setCurrentView()}}u._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},u._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},u._is_material_skin=function(){return u.skin?(u.skin+"").indexOf("material")>-1:function(){if(void 0===ee){var c=document.createElement("div");c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",c.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>",document.body.appendChild(c);var w=window.getComputedStyle(c.querySelector(".dhx_cal_scale_placeholder")).getPropertyValue("position");ee="absolute"===w,setTimeout(function(){ee=null,c&&c.parentNode&&c.parentNode.removeChild(c)},500)}return ee}()},window.addEventListener("DOMContentLoaded",C),window.addEventListener("load",C),u._border_box_events=function(){return N()},u._configure=function(c,m,w){for(var T in m)void 0===c[T]&&(c[T]=m[T][w])},u._skin_init=function(){if(!u.skin)for(var c=document.getElementsByTagName("link"),m=0;m<c.length;m++){var w=c[m].href.match("dhtmlxscheduler_([a-z]+).css");if(w){u.skin=w[1];break}}var T=0;if(!u.skin||"classic"!==u.skin&&"glossy"!==u.skin||(T=1),u._is_material_skin()){var j=u.config.buttons_left.$initial,J=u.config.buttons_right.$initial;if(j&&u.config.buttons_left.slice().join()==j&&J&&u.config.buttons_right.slice().join()==J){var M=u.config.buttons_left.slice();u.config.buttons_left=u.config.buttons_right.slice(),u.config.buttons_right=M}u.xy.event_header_height=18,u.xy.week_agenda_scale_height=35,u.xy.map_icon_width=38,u._lightbox_controls.defaults.textarea.height=64,u._lightbox_controls.defaults.time.height="auto"}if(this._configure(u.config,u._skin_settings,T),this._configure(u.xy,u._skin_xy,T),"flat"===u.skin&&(u.xy.scale_height=35,u.templates.hour_scale=function(K){var ce=K.getMinutes();return ce=ce<10?"0"+ce:ce,"<span class='dhx_scale_h'>"+K.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+ce+"</span>"}),!T){var Z=u.config.minicalendar;Z&&(Z.padding=14),u.templates.event_bar_date=function(K,ce,_e){return"\u2022 <b>"+u.templates.event_date(K)+"</b> "},u.attachEvent("onTemplatesReady",function(){var K=u.date.date_to_str("%d");u.templates._old_month_day||(u.templates._old_month_day=u.templates.month_day);var ce=u.templates._old_month_day;if(u.templates.month_day=function(ct){if("month"==this._mode){var Ze=K(ct);return 1==ct.getDate()&&(Ze=u.locale.date.month_full[ct.getMonth()]+" "+Ze),+ct==+u.date.date_part(this._currentDate())&&(Ze=u.locale.labels.dhx_cal_today_button+" "+Ze),Ze}return ce.call(this,ct)},u.config.fix_tab_position){var _e=u._els.dhx_cal_navline[0].getElementsByTagName("div"),xe=null,Pe=211,ke=[14,75,136],qe=14;u._is_material_skin()&&(ke=[16,103,192],Pe=294,qe=-1);for(var rt=0;rt<_e.length;rt++){var wt=_e[rt],Xe=wt.getAttribute("data-tab")||wt.getAttribute("name");if(Xe){switch(wt.style.right="auto",Xe){case"day":case"day_tab":wt.style.left=ke[0]+"px",wt.className+=" dhx_cal_tab_first";break;case"week":case"week_tab":wt.style.left=ke[1]+"px";break;case"month":case"month_tab":wt.style.left=ke[2]+"px",wt.className+=" dhx_cal_tab_last";break;default:wt.style.left=Pe+"px",wt.className+=" dhx_cal_tab_standalone",Pe=Pe+qe+wt.offsetWidth}wt.className+=" "+Xe}else 0===(wt.className||"").indexOf("dhx_minical_icon")&&wt.parentNode==u._els.dhx_cal_navline[0]&&(xe=wt)}xe&&(xe.style.left=Pe+"px")}}),u._skin_init=function(){}}}}(ee),window.jQuery&&function(c){var m=0,w=[];c.fn.dhx_scheduler=function(T){if("string"!=typeof T){var j=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))j.push(window[this.getAttribute("dhxscheduler")]);else{var J="scheduler";m&&(J="scheduler"+(m+1),window[J]=Scheduler.getSchedulerInstance());var M=window[J];for(var Z in this.setAttribute("dhxscheduler",J),T)"data"!=Z&&(M.config[Z]=T[Z]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),M.init(this,M.config.date,M.config.mode),T.data&&M.parse(T.data),j.push(M),m++}}),1===j.length?j[0]:j}if(w[T])return w[T].apply(this,[]);c.error("Method "+T+" does not exist on jQuery.dhx_scheduler")}}(window.jQuery),function(c){!function(){var m=c.setCurrentView,w=c.updateView,T=null,j=null,J=function(K,ce){var _e=this;O.a.clearTimeout(j),O.a.clearTimeout(T);var xe=_e._date,Pe=_e._mode;Z(this,K,ce),j=setTimeout(function(){c.$destroyed||(_e.callEvent("onBeforeViewChange",[Pe,xe,ce||_e._mode,K||_e._date])?(w.call(_e,K,ce),_e.callEvent("onViewChange",[_e._mode,_e._date]),O.a.clearTimeout(T),j=0):Z(_e,xe,Pe))},c.config.delay_render)},M=function(K,ce){var _e=this,xe=arguments;Z(this,K,ce),O.a.clearTimeout(T),T=setTimeout(function(){c.$destroyed||j||w.apply(_e,xe)},c.config.delay_render)};function Z(K,ce,_e){ce&&(K._date=ce),_e&&(K._mode=_e)}c.attachEvent("onSchedulerReady",function(){c.config.delay_render?(c.setCurrentView=J,c.updateView=M):(c.setCurrentView=m,c.updateView=w)})}()}(ee),function(c){c.createDataProcessor=function(m){var w,T;m instanceof Function?w=m:m.hasOwnProperty("router")?w=m.router:m.hasOwnProperty("event")&&(w=m),T=w?"CUSTOM":m.mode||"REST-JSON";var j=new bt(m.url);return j.init(c),j.setTransactionMode({mode:T,router:w},m.batchUpdate),j},c.DataProcessor=bt}(ee),function(c){c.attachEvent("onSchedulerReady",function(){typeof dhtmlxError<"u"&&window.dhtmlxError.catchError("LoadXML",function(m,w,T){var j=T[0].responseText;switch(c.config.ajax_error){case"alert":O.a.alert(j);break;case"console":O.a.console.log(j)}})})}(ee);var N=new Tn({en:Qt,ar:Oe,be:Fe,ca:Ge,cn:kt,cs:Ut,da:Lt,de:st,el:Vt,es:Xt,fi:Wt,fr:Nt,he:Bt,hu:ln,id:Ft,it:nn,jp:Et,nb:Un,nl:Dn,no:dt,pl:He,pt:mt,ro:Ce,ru:at,si:St,sk:Je,sv:lt,tr:De,ua:It});ee.i18n={addLocale:N.addLocale,setLocale:function(c){if("string"==typeof c){var m=N.getLocale(c);m||(m=N.getLocale("en")),ee.locale=m}else if(c)if(ee.locale)for(var w in c)c[w]&&"object"===qt(c[w])?(ee.locale[w]||(ee.locale[w]={}),ee.mixin(ee.locale[w],c[w],!0)):ee.locale[w]=c[w];else ee.locale=c},getLocale:N.getLocale},ee.i18n.setLocale("en"),ee.ext={};var C={};return ee.plugins=function(c){(function(m,w,T){var j=[];for(var J in m)if(m[J]){var M=J.toLowerCase();w[M]&&w[M].forEach(function(Z){var K=Z.toLowerCase();m[K]||j.push(K)}),j.push(M)}return j.sort(function(Z,K){var ce=T[Z]||0,_e=T[K]||0;return ce>_e?1:ce<_e?-1:0}),j})(c,{treetimeline:["timeline"],daytimeline:["timeline"],outerdrag:["legacy"]},{legacy:1,limit:1,timeline:2,daytimeline:3,treetimeline:3,outerdrag:6}).forEach(function(m){if(!C[m]){var w=u.getExtension(m);if(!w)throw new Error("unknown plugin "+m);w(ee),C[m]=!0}})},ee};var Ct=function(){function u(ee){for(var y in function(N,C){if(!(N instanceof C))throw new TypeError("Cannot call a class as a function")}(this,u),this._extensions={},ee)this._extensions[y]=ee[y]}return ee=u,y=[{key:"addExtension",value:function(ee,y){this._extensions[ee]=y}},{key:"getExtension",value:function(ee){return this._extensions[ee]}}],y&&function vt(u,ee){for(var y=0;y<ee.length;y++){var N=ee[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}(ee.prototype,y),Object.defineProperty(ee,"prototype",{writable:!1}),u;var ee,y}();typeof dhtmlx<"u"&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(u,ee,y,N){y=y||'<div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div>';var C=document.createElement("DIV");return C.id="dhxSchedObj_"+this._genStr(12),C.innerHTML='<div id="'+C.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+y+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(C.firstChild),this.attachObject(C.id,!1,!0),this.vs[this.av].sched=N,this.vs[this.av].schedId=C.id,N.setSizes=N.updateView,N.destructor=function(){},N.init(C.id,u,ee),this.vs[this._viewRestore()].sched});var Qe=function(u,ee){ee(!1,"The ".concat(u,' extension is not included in this version of dhtmlxScheduler.<br>\n\t\tYou may need a <a href="https://docs.dhtmlx.com/scheduler/editions_comparison.html" target="_blank">Professional version of the component</a>.<br>\n\t\tContact us at <a href="https://dhtmlx.com/docs/contact.shtml" target="_blank">https://dhtmlx.com/docs/contact.shtml</a> if you have any questions.'))};function zt(u){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function yn(u){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function Xi(u){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function kn(u){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}function xn(u){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(u)}var $n=new(function(){function u(ee){(function(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")})(this,u),this._seed=0,this._schedulerPlugins=[],this._bundledExtensions=ee,this._extensionsManager=new Ct(ee)}return ee=u,y=[{key:"plugin",value:function(ee){this._schedulerPlugins.push(ee),O.a.scheduler&&ee(O.a.scheduler)}},{key:"getSchedulerInstance",value:function(ee){for(var y=ge(this._extensionsManager),N=0;N<this._schedulerPlugins.length;N++)this._schedulerPlugins[N](y);return y._internal_id=this._seed++,this.$syncFactory&&this.$syncFactory(y),ee&&this._initFromConfig(y,ee),y}},{key:"_initFromConfig",value:function(ee,y){if(y.plugins&&ee.plugins(y.plugins),y.config&&ee.mixin(ee.config,y.config,!0),y.templates&&ee.attachEvent("onTemplatesReady",function(){ee.mixin(ee.templates,y.templates,!0)},{once:!0}),y.events)for(var N in y.events)ee.attachEvent(N,y.events[N]);y.locale&&ee.i18n.setLocale(y.locale),Array.isArray(y.calendars)&&y.calendars.forEach(function(C){ee.addCalendar(C)}),y.container?ee.init(y.container):ee.init(),y.data&&("string"==typeof y.data?ee.load(y.data):ee.parse(y.data))}}],y&&function Be(u,ee){for(var y=0;y<ee.length;y++){var N=ee[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}(ee.prototype,y),Object.defineProperty(ee,"prototype",{writable:!1}),u;var ee,y}())({active_links:function(u){u.config.active_link_view="day",u._active_link_click=function(ee){var y=ee.target.getAttribute("data-link-date"),N=u.date.str_to_date(u.config.api_date,!1,!0);if(y)return u.setCurrentView(N(y),u.config.active_link_view),ee&&ee.preventDefault&&ee.preventDefault(),!1},u.attachEvent("onTemplatesReady",function(){var ee=function(N,C){u.templates["_active_links_old_"+(C=C||N+"_scale_date")]||(u.templates["_active_links_old_"+C]=u.templates[C]);var c=u.templates["_active_links_old_"+C],m=u.date.date_to_str(u.config.api_date);u.templates[C]=function(w){return"<a data-link-date='"+m(w)+"' href='#'>"+c(w)+"</a>"}};if(ee("week"),ee("","month_day"),this.matrix)for(var y in this.matrix)ee(y);this._detachDomEvent(this._obj,"click",u._active_link_click),u.event(this._obj,"click",u._active_link_click)})},agenda_view:function(u){u.date.add_agenda=function(ee){return u.date.add(ee,1,"year")},u.templates.agenda_time=function(ee,y,N){return N._timed?this.day_date(N.start_date,N.end_date,N)+" "+this.event_date(ee):u.templates.day_date(ee)+" &ndash; "+u.templates.day_date(y)},u.templates.agenda_text=function(ee,y,N){return N.text},u.templates.agenda_date=function(){return""},u.date.agenda_start=function(){return u.date.date_part(u._currentDate())},u.attachEvent("onTemplatesReady",function(){var ee=u.dblclick_dhx_cal_data;u.dblclick_dhx_cal_data=function(){if("agenda"==this._mode)!this.config.readonly&&this.config.dblclick_create&&this.addEventNow();else if(ee)return ee.apply(this,arguments)};var y=u.render_data;u.render_data=function(c){if("agenda"!=this._mode)return y.apply(this,arguments);C()};var N=u.render_view_data;function C(){var c=u.get_visible_events();c.sort(function(Pe,ke){return Pe.start_date>ke.start_date?1:-1});for(var m,w="<div class='dhx_agenda_area' "+u._waiAria.agendaDataAttrString()+">",T=0;T<c.length;T++){var j=c[T],J=j.color?"background:"+j.color+";":"",M=j.textColor?"color:"+j.textColor+";":"",Z=u.templates.event_class(j.start_date,j.end_date,j);m=u._waiAria.agendaEventAttrString(j);var K=u._waiAria.agendaDetailsBtnString();w+="<div "+m+" class='dhx_agenda_line"+(Z?" "+Z:"")+"' event_id='"+j.id+"' "+u.config.event_attribute+"='"+j.id+"' style='"+M+J+(j._text_style||"")+"'><div class='dhx_agenda_event_time'>"+(u.config.rtl?u.templates.agenda_time(j.end_date,j.start_date,j):u.templates.agenda_time(j.start_date,j.end_date,j))+"</div>",w+="<div "+K+" class='dhx_event_icon icon_details'>&nbsp;</div>",w+="<span>"+u.templates.agenda_text(j.start_date,j.end_date,j)+"</span></div>"}u._els.dhx_cal_data[0].innerHTML=w+="<div class='dhx_v_border'></div></div>",u._els.dhx_cal_data[0].childNodes[0].scrollTop=u._agendaScrollTop||0;var ce=u._els.dhx_cal_data[0].childNodes[0];ce.childNodes[ce.childNodes.length-1].style.height=ce.offsetHeight<u._els.dhx_cal_data[0].offsetHeight?"100%":ce.offsetHeight+"px";var _e=u._els.dhx_cal_data[0].firstChild.childNodes,xe=u._getNavDateElement();for(xe&&(xe.innerHTML=u.templates.agenda_date(u._min_date,u._max_date,u._mode)),u._rendered=[],T=0;T<_e.length-1;T++)u._rendered[T]=_e[T]}u.render_view_data=function(){return"agenda"==this._mode&&(u._agendaScrollTop=u._els.dhx_cal_data[0].childNodes[0].scrollTop,u._els.dhx_cal_data[0].childNodes[0].scrollTop=0),N.apply(this,arguments)},u.agenda_view=function(c){u._min_date=u.config.agenda_start||u.date.agenda_start(u._date),u._max_date=u.config.agenda_end||u.date.add_agenda(u._min_date,1),function(m){if(m){var w=u.locale.labels,T=u._waiAria.agendaHeadAttrString(),j=u._waiAria.agendaHeadDateString(w.date),J=u._waiAria.agendaHeadDescriptionString(w.description);u._els.dhx_cal_header[0].innerHTML="<div "+T+" class='dhx_agenda_line'><div "+j+">"+w.date+"</div><span class = 'description_header' style='padding-left:25px' "+J+">"+w.description+"</span></div>",u._table_view=!0,u.set_sizes()}}(c),c?(u._cols=null,u._colsS=null,u._table_view=!0,C()):u._table_view=!1}})},all_timed:function(u){u.config.all_timed="short",u.config.all_timed_month=!1;var ee=function(w){return!((w.end_date-w.start_date)/36e5>=24)||"resize"==u._drag_mode&&u._drag_id==w.id};u._safe_copy=function(w){var T=null,j=u._copy_event(w);return w.event_pid&&(T=u.getEvent(w.event_pid)),T&&T.isPrototypeOf(w)&&(delete j.event_length,delete j.event_pid,delete j.rec_pattern,delete j.rec_type),j};var y=u._pre_render_events_line,N=u._pre_render_events_table,C=function(w,T){return this._table_view?N.call(this,w,T):y.call(this,w,T)};u._pre_render_events_line=u._pre_render_events_table=function(w,T){if(!this.config.all_timed||this._table_view&&"month"!=this._mode||"month"==this._mode&&!this.config.all_timed_month)return C.call(this,w,T);for(var j=0;j<w.length;j++){var J=w[j];if(!J._timed)if("short"!=this.config.all_timed||ee(J)){var M=this._safe_copy(J);M._first_chunk=!J._virtual,M._drag_resize=!1,M._virtual=!0,M.start_date=new Date(M.start_date),void 0,qe=xe((ke=J).start_date),+ke.end_date>+qe?(M.end_date=xe(M.start_date),24!=this.config.last_hour&&(M.end_date=Pe(M.start_date,this.config.last_hour))):M.end_date=new Date(J.end_date);var Z=!1;M.start_date<this._max_date&&M.end_date>this._min_date&&M.start_date<M.end_date&&(w[j]=M,Z=!0);var K=this._safe_copy(J);if(K._virtual=!0,K.end_date=new Date(K.end_date),K.start_date=Pe(K.start_date<this._min_date?this._min_date:xe(J.start_date),this.config.first_hour),K.start_date<this._max_date&&K.start_date<K.end_date){if(!Z){w[j--]=K;continue}w.splice(j+1,0,K),K._last_chunk=!1}else M._last_chunk=!0,M._drag_resize=!0}else"month"!=this._mode&&w.splice(j--,1)}var ke,qe;return C.call(this,w,"move"!=this._drag_mode&&T);function xe(ke){var qe=u.date.add(ke,1,"day");return u.date.date_part(qe)}function Pe(ke,qe){var rt=u.date.date_part(new Date(ke));return rt.setHours(qe),rt}};var c=u.get_visible_events;u.get_visible_events=function(w){return c.call(this,(!this.config.all_timed||!this.config.multi_day)&&w)},u.attachEvent("onBeforeViewChange",function(w,T,j,J){return u._allow_dnd="day"==j||"week"==j,!0}),u._is_main_area_event=function(w){return!!(w._timed||!0===this.config.all_timed||"short"==this.config.all_timed&&ee(w))};var m=u.updateEvent;u.updateEvent=function(w){var T,j,J=u.getEvent(w);J&&(T=u.config.all_timed&&!(u.isOneDayEvent(u._events[w])||u.getState().drag_id))&&(j=u.config.update_render,u.config.update_render=!0),m.apply(u,arguments),J&&T&&(u.config.update_render=j)}},collision:function(u){var ee,y;function N(C){u._get_section_view()&&C&&(ee=u.getEvent(C)[u._get_section_property()])}u.config.collision_limit=1,u.attachEvent("onBeforeDrag",function(C){return N(C),!0}),u.attachEvent("onBeforeLightbox",function(C){var c=u.getEvent(C);return y=[c.start_date,c.end_date],N(C),!0}),u.attachEvent("onEventChanged",function(C){if(!C||!u.getEvent(C))return!0;var c=u.getEvent(C);if(!u.checkCollision(c)){if(!y)return!1;c.start_date=y[0],c.end_date=y[1],c._timed=this.isOneDayEvent(c)}return!0}),u.attachEvent("onBeforeEventChanged",function(C,c,m){return u.checkCollision(C)}),u.attachEvent("onEventAdded",function(C,c){u.checkCollision(c)||u.deleteEvent(C)}),u.attachEvent("onEventSave",function(C,c,m){if((c=u._lame_clone(c)).id=C,!c.start_date||!c.end_date){var w=u.getEvent(C);c.start_date=new Date(w.start_date),c.end_date=new Date(w.end_date)}return c.rec_type&&u._roll_back_dates(c),u.checkCollision(c)}),u._check_sections_collision=function(C,c){var m=u._get_section_property();return C[m]==c[m]&&C.id!=c.id},u.checkCollision=function(C){var c=[],m=u.config.collision_limit;if(C.rec_type)for(var w=u.getRecDates(C),T=0;T<w.length;T++)for(var j=u.getEvents(w[T].start_date,w[T].end_date),J=0;J<j.length;J++)(j[J].event_pid||j[J].id)!=C.id&&c.push(j[J]);else{c=u.getEvents(C.start_date,C.end_date);for(var M=0;M<c.length;M++){var Z=c[M];if(Z.id==C.id||Z.event_length&&[Z.event_pid,Z.event_length].join("#")==C.id){c.splice(M,1);break}}}var K=u._get_section_view(),ce=u._get_section_property(),_e=!0;if(K){var xe=0;for(M=0;M<c.length;M++)c[M].id!=C.id&&this._check_sections_collision(c[M],C)&&xe++;xe>=m&&(_e=!1)}else c.length>=m&&(_e=!1);if(!_e){var Pe=!u.callEvent("onEventCollision",[C,c]);return Pe||(C[ce]=ee||C[ce]),Pe}return _e}},container_autoresize:function(u){u.config.container_autoresize=!0,u.config.month_day_min_height=90,u.config.min_grid_size=25,u.config.min_map_size=400;var ee=u._pre_render_events,y=!0,N=0,C=0;u._pre_render_events=function(J,M){if(!u.config.container_autoresize||!y)return ee.apply(this,arguments);var Z=this.xy.bar_height,K=this._colsS.heights,ce=this._colsS.heights=[0,0,0,0,0,0,0],_e=this._els.dhx_cal_data[0];if(J=this._table_view?this._pre_render_events_table(J,M):this._pre_render_events_line(J,M),this._table_view)if(M)this._colsS.heights=K;else{var xe=_e.firstChild;if(xe.rows){for(var Pe=0;Pe<xe.rows.length;Pe++){if(ce[Pe]++,ce[Pe]*Z>this._colsS.height-this.xy.month_head_height){var ke=xe.rows[Pe].cells,qe=this._colsS.height-this.xy.month_head_height;1*this.config.max_month_events!==this.config.max_month_events||ce[Pe]<=this.config.max_month_events?qe=ce[Pe]*Z:(this.config.max_month_events+1)*Z>this._colsS.height-this.xy.month_head_height&&(qe=(this.config.max_month_events+1)*Z);for(var rt=0;rt<ke.length;rt++)ke[rt].childNodes[1].style.height=qe+"px";ce[Pe]=(ce[Pe-1]||0)+ke[0].offsetHeight}ce[Pe]=(ce[Pe-1]||0)+xe.rows[Pe].cells[0].offsetHeight}ce.unshift(0)}else if(J.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(ce[0]=-1),J.length||-1==ce[0]){var wt=(ce[0]+1)*Z+1;C!=wt+1&&(this._obj.style.height=N-C+wt-1+"px"),wt+="px",_e.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+parseInt(wt,10)+"px",_e.style.height=this._obj.offsetHeight-parseInt(_e.style.top,10)-(this.xy.margin_top||0)+"px";var Xe=this._els.dhx_multi_day[0];Xe.style.height=wt,Xe.style.visibility=-1==ce[0]?"hidden":"visible",(Xe=this._els.dhx_multi_day[1]).style.height=wt,Xe.style.visibility=-1==ce[0]?"hidden":"visible",Xe.className=ce[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(ce[0]+1)*Z,ce[0]=0}}return J};var c=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"],m=function(J){N=0;for(var M=0;M<c.length;M++){var Z=c[M],K=u._els[Z]?u._els[Z][0]:null,ce=0;switch(Z){case"dhx_cal_navline":case"dhx_cal_header":ce=parseInt(K.style.height,10);break;case"dhx_multi_day":C=ce=K?K.offsetHeight-1:0;break;case"dhx_cal_data":var _e=u.getState().mode;if(K.childNodes[1]&&"month"!=_e){for(var xe=0,Pe=0;Pe<K.childNodes.length;Pe++)K.childNodes[Pe].offsetHeight>xe&&(xe=K.childNodes[Pe].offsetHeight);ce=xe}else ce=Math.max(K.offsetHeight-1,K.scrollHeight);if("month"==_e)u.config.month_day_min_height&&!J&&(ce=K.getElementsByTagName("tr").length*u.config.month_day_min_height),J&&(K.style.height=ce+"px");else if("year"==_e)ce=190*u.config.year_y;else if("agenda"==_e){if(ce=0,K.childNodes&&K.childNodes.length)for(var ke=0;ke<K.childNodes.length;ke++)ce+=K.childNodes[ke].offsetHeight;ce+2<u.config.min_grid_size?ce=u.config.min_grid_size:ce+=2}else if("week_agenda"==_e){for(var qe,rt,wt=u.xy.week_agenda_scale_height+u.config.min_grid_size,Xe=0;Xe<K.childNodes.length;Xe++)for(rt=K.childNodes[Xe],ke=0;ke<rt.childNodes.length;ke++){for(var ct=0,Ze=rt.childNodes[ke].childNodes[1],ht=0;ht<Ze.childNodes.length;ht++)ct+=Ze.childNodes[ht].offsetHeight;qe=ct+u.xy.week_agenda_scale_height,(qe=1!=Xe||2!=ke&&3!=ke?qe:2*qe)>wt&&(wt=qe)}ce=3*wt}else if("map"==_e){ce=0;var nt=K.querySelectorAll(".dhx_map_line");for(ke=0;ke<nt.length;ke++)ce+=nt[ke].offsetHeight;ce+2<u.config.min_map_size?ce=u.config.min_map_size:ce+=2}else if(u._gridView)if(ce=0,K.childNodes[1].childNodes[0].childNodes&&K.childNodes[1].childNodes[0].childNodes.length){for(nt=K.childNodes[1].childNodes[0].childNodes[0].childNodes,ke=0;ke<nt.length;ke++)ce+=nt[ke].offsetHeight;(ce+=2)<u.config.min_grid_size&&(ce=u.config.min_grid_size)}else ce=u.config.min_grid_size;if(u.matrix&&u.matrix[_e]){if(J)K.style.height=(ce+=0)+"px";else{ce=0;for(var jt=u.matrix[_e],Yt=jt.y_unit,Ht=0;Ht<Yt.length;Ht++)ce+=jt.getSectionHeight(Yt[Ht].key);u.$container.clientWidth!=u.$container.scrollWidth&&(ce+=j())}ce-=1}("day"==_e||"week"==_e||u._props&&u._props[_e])&&(ce+=2)}N+=ce+=1}u._obj.style.height=N+"px",J||u.updateView()};function w(){y=!1,u.callEvent("onAfterSchedulerResize",[]),y=!0}var T=function(){if(!u.config.container_autoresize||!y)return!0;var J=u.getState().mode;if(!J)return!0;var M=window.requestAnimationFrame||window.setTimeout,Z=document.documentElement.scrollTop;M(function(){!u.$destroyed&&u.$initialized&&m()}),u.matrix&&u.matrix[J]||"month"==J?M(function(){!u.$destroyed&&u.$initialized&&(m(!0),document.documentElement.scrollTop=Z,w())},1):w()};function j(){var J=document.createElement("div");J.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(J);var M=J.offsetWidth-J.clientWidth;return document.body.removeChild(J),M}u.attachEvent("onBeforeViewChange",function(){var J=u.config.container_autoresize;if(u.xy.$original_scroll_width||(u.xy.$original_scroll_width=u.xy.scroll_width),u.xy.scroll_width=J?0:u.xy.$original_scroll_width,u.matrix)for(var M in u.matrix){var Z=u.matrix[M];Z.$original_section_autoheight||(Z.$original_section_autoheight=Z.section_autoheight),Z.section_autoheight=!J&&Z.$original_section_autoheight}return!0}),u.attachEvent("onViewChange",T),u.attachEvent("onXLE",T),u.attachEvent("onEventChanged",T),u.attachEvent("onEventCreated",T),u.attachEvent("onEventAdded",T),u.attachEvent("onEventDeleted",T),u.attachEvent("onAfterSchedulerResize",T),u.attachEvent("onClearAll",T),u.attachEvent("onBeforeExpand",function(){return y=!1,!0}),u.attachEvent("onBeforeCollapse",function(){return y=!0,!0})},cookie:function(u){function ee(C){return(C._obj.id||"scheduler")+"_settings"}var y=!0;u.attachEvent("onBeforeViewChange",function(C,c,m,w){if(y&&u._get_url_nav){var T=u._get_url_nav();(T.date||T.mode||T.event)&&(y=!1)}var j=ee(u);if(y){y=!1;var J=function(Z){var K=Z+"=";if(document.cookie.length>0){var ce=document.cookie.indexOf(K);if(-1!=ce){ce+=K.length;var _e=document.cookie.indexOf(";",ce);return-1==_e&&(_e=document.cookie.length),document.cookie.substring(ce,_e)}}return""}(j);if(J){u._min_date||(u._min_date=w),(J=unescape(J).split("@"))[0]=this._helpers.parseDate(J[0]);var M=this.isViewExists(J[1])?J[1]:m;return w=isNaN(+J[0])?w:J[0],window.setTimeout(function(){u.$destroyed||u.setCurrentView(w,M)},1),!1}}return!0}),u.attachEvent("onViewChange",function(C,c){var m,T;m=ee(u),T=escape(this._helpers.formatDate(c)+"@"+C),document.cookie=m+"="+T+"; expires=Sun, 31 Jan 9999 22:00:00 GMT"});var N=u._load;u._load=function(){var C=arguments;if(u._date)N.apply(this,C);else{var c=this;window.setTimeout(function(){N.apply(c,C)},1)}}},daytimeline:function(u){Qe("Day Timeline",u.assert)},drag_between:function(u){Qe("Drag Between",u.assert)},editors:function(u){u.form_blocks.combo={render:function(ee){return ee.cached_options||(ee.cached_options={}),"<div class='"+ee.type+"' style='height:"+(ee.height||20)+"px;' ></div>"},set_value:function(ee,y,N,C){(function(){K();var Z=u.attachEvent("onAfterLightbox",function(){K(),u.detachEvent(Z)});function K(){if(ee._combo&&ee._combo.DOMParent){var ce=ee._combo;ce.unload?ce.unload():ce.destructor&&ce.destructor(),ce.DOMParent=ce.DOMelem=null}}})(),window.dhx_globalImgPath=C.image_path||"/",ee._combo=new dhtmlXCombo(ee,C.name,ee.offsetWidth-8),C.onchange&&ee._combo.attachEvent("onChange",C.onchange),C.options_height&&ee._combo.setOptionHeight(C.options_height);var c=ee._combo;if(c.enableFilteringMode(C.filtering,C.script_path||null,!!C.cache),C.script_path){var m=N[C.map_to];m?C.cached_options[m]?(c.addOption(m,C.cached_options[m]),c.disable(1),c.selectOption(0),c.disable(0)):u.ajax.get(C.script_path+"?id="+m+"&uid="+u.uid(),function(Z){var K,ce=Z.xmlDoc.responseText;try{K=JSON.parse(ce).options[0].text}catch{K=u.ajax.xpath("//option",Z.xmlDoc)[0].childNodes[0].nodeValue}C.cached_options[m]=K,c.addOption(m,K),c.disable(1),c.selectOption(0),c.disable(0)}):c.setComboValue("")}else{for(var w=[],T=0;T<C.options.length;T++){var j=C.options[T];w.push([j.key,j.label,j.css])}if(c.addOption(w),N[C.map_to]){var M=c.getIndexByValue(N[C.map_to]);c.selectOption(M)}}},get_value:function(ee,y,N){var C=ee._combo.getSelectedValue();return N.script_path&&(N.cached_options[C]=ee._combo.getSelectedText()),C},focus:function(ee){}},u.form_blocks.radio={render:function(ee){var y="";y+="<div class='dhx_cal_ltext dhx_cal_radio' style='height:"+ee.height+"px;' >";for(var N=0;N<ee.options.length;N++){var C=u.uid();y+="<input id='"+C+"' type='radio' name='"+ee.name+"' value='"+ee.options[N].key+"'><label for='"+C+"'> "+ee.options[N].label+"</label>",ee.vertical&&(y+="<br/>")}return y+"</div>"},set_value:function(ee,y,N,C){for(var c=ee.getElementsByTagName("input"),m=0;m<c.length;m++)c[m].checked=!1,c[m].value==(N[C.map_to]||y)&&(c[m].checked=!0)},get_value:function(ee,y,N){for(var C=ee.getElementsByTagName("input"),c=0;c<C.length;c++)if(C[c].checked)return C[c].value},focus:function(ee){}},u.form_blocks.checkbox={render:function(ee){return u.config.wide_form?'<div class="dhx_cal_wide_checkbox" '+(ee.height?"style='height:"+ee.height+"px;'":"")+"></div>":""},set_value:function(ee,y,N,C){ee=document.getElementById(C.id);var c=u.uid(),m=void 0!==C.checked_value?y==C.checked_value:!!y;ee.className+=" dhx_cal_checkbox";var w="<input id='"+c+"' type='checkbox' value='true' name='"+C.name+"'"+(m?"checked='true'":"")+"'>",T="<label for='"+c+"'>"+(u.locale.labels["section_"+C.name]||C.name)+"</label>";if(u.config.wide_form?(ee.innerHTML=T,ee.nextSibling.innerHTML=w):ee.innerHTML=w+T,C.handler){var j=ee.getElementsByTagName("input")[0];if(j.$_eventAttached)return;j.$_eventAttached=!0,u.event(j,"click",C.handler)}},get_value:function(ee,y,N){var C=(ee=document.getElementById(N.id)).getElementsByTagName("input")[0];return C||(C=ee.nextSibling.getElementsByTagName("input")[0]),C.checked?N.checked_value||!0:N.unchecked_value||!1},focus:function(ee){}}},expand:function(u){u.ext.fullscreen={toggleIcon:null},u.expand=function(){if(u.callEvent("onBeforeExpand",[])){var ee=u._obj;do{ee._position=ee.style.position||"",ee.style.position="static"}while((ee=ee.parentNode)&&ee.style);(ee=u._obj).style.position="absolute",ee._width=ee.style.width,ee._height=ee.style.height,ee.style.width=ee.style.height="100%",ee.style.top=ee.style.left="0px";var y=document.body;y.scrollTop=0,(y=y.parentNode)&&(y.scrollTop=0),document.body._overflow=document.body.style.overflow||"",document.body.style.overflow="hidden",u._maximize(),u.callEvent("onExpand",[])}},u.collapse=function(){if(u.callEvent("onBeforeCollapse",[])){var ee=u._obj;do{ee.style.position=ee._position}while((ee=ee.parentNode)&&ee.style);(ee=u._obj).style.width=ee._width,ee.style.height=ee._height,document.body.style.overflow=document.body._overflow,u._maximize(),u.callEvent("onCollapse",[])}},u.attachEvent("onTemplatesReady",function(){var ee=document.createElement("div");ee.className="dhx_expand_icon",u.ext.fullscreen.toggleIcon=ee,u._obj.appendChild(ee),u.event(ee,"click",function(){u.expanded?u.collapse():u.expand()})}),u._maximize=function(){this.expanded=!this.expanded,u.ext.fullscreen.toggleIcon.style.backgroundPosition="0 "+(this.expanded?"0":"18")+"px";for(var ee=["left","top"],y=0;y<ee.length;y++){var N=u["_prev_margin_"+ee[y]];u.xy["margin_"+ee[y]]?(u["_prev_margin_"+ee[y]]=u.xy["margin_"+ee[y]],u.xy["margin_"+ee[y]]=0):N&&(u.xy["margin_"+ee[y]]=u["_prev_margin_"+ee[y]],delete u["_prev_margin_"+ee[y]])}u.setCurrentView()}},grid_view:function(u){Qe("Grid",u.assert)},html_templates:function(u){u.attachEvent("onTemplatesReady",function(){for(var ee=document.body.getElementsByTagName("DIV"),y=0;y<ee.length;y++){var N=ee[y].className||"";if(2==(N=N.split(":")).length&&"template"==N[0]){var C='return "'+(ee[y].innerHTML||"").replace(/"/g,'\\"').replace(/[\n\r]+/g,"")+'";';C=unescape(C).replace(/\{event\.([a-z]+)\}/g,function(c,m){return'"+ev.'+m+'+"'}),u.templates[N[1]]=Function("start","end","ev",C),ee[y].style.display="none"}}})},key_nav:function(u){function ee(y){var N={minicalButton:u.$keyboardNavigation.MinicalButton,minicalDate:u.$keyboardNavigation.MinicalCell,scheduler:u.$keyboardNavigation.SchedulerNode,dataArea:u.$keyboardNavigation.DataArea,timeSlot:u.$keyboardNavigation.TimeSlot,event:u.$keyboardNavigation.Event},C={};for(var c in N)C[c.toLowerCase()]=N[c];return C[y=(y+"").toLowerCase()]||N.scheduler}var y;u.config.key_nav=!0,u.config.key_nav_step=30,u.addShortcut=function(y,N,C){var c=ee(C);c&&c.prototype.bind(y,N)},u.getShortcutHandler=function(y,N){var C=ee(N);if(C){var c=u.$keyboardNavigation.shortcuts.parse(y);if(c.length)return C.prototype.findHandler(c[0])}},u.removeShortcut=function(y,N){var C=ee(N);C&&C.prototype.unbind(y)},u.focus=function(){if(u.config.key_nav){var y=u.$keyboardNavigation.dispatcher;y.enable();var N=y.getActiveNode();!N||N instanceof u.$keyboardNavigation.MinicalButton||N instanceof u.$keyboardNavigation.MinicalCell?y.setDefaultNode():y.focusNode(y.getActiveNode())}},u.$keyboardNavigation={},u._compose=function(){for(var y=Array.prototype.slice.call(arguments,0),N={},C=0;C<y.length;C++){var c=y[C];for(var m in"function"==typeof c&&(c=new c),c)N[m]=c[m]}return N},u.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(N){for(var C=[],c=this.getExpressions(this.trim(N)),m=0;m<c.length;m++){for(var w=this.getWords(c[m]),T=this.createCommand(),j=0;j<w.length;j++)this.commandKeys[w[j]]?T.modifiers[w[j]]=!0:T.keyCode=this.specialKeys[w[j]]?this.specialKeys[w[j]]:w[j].charCodeAt(0);C.push(T)}return C},getCommandFromEvent:function(N){var C=this.createCommand();C.modifiers.shift=!!N.shiftKey,C.modifiers.alt=!!N.altKey,C.modifiers.ctrl=!!N.ctrlKey,C.modifiers.meta=!!N.metaKey,C.keyCode=N.which||N.keyCode,C.keyCode>=96&&C.keyCode<=105&&(C.keyCode-=48);var c=String.fromCharCode(C.keyCode);return c&&(C.keyCode=c.toLowerCase().charCodeAt(0)),C},getHashFromEvent:function(N){return this.getHash(this.getCommandFromEvent(N))},getHash:function(N){var C=[];for(var c in N.modifiers)N.modifiers[c]&&C.push(c);return C.push(N.keyCode),C.join(this.junctionChar)},getExpressions:function(N){return N.split(this.junctionChar)},getWords:function(N){return N.split(this.combinationChar)},trim:function(N){return N.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}},(y=u).$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(N){this._handlers||(this._handlers={});var C=y.$keyboardNavigation.shortcuts.getHash(N);return this._handlers[C]},doAction:function(N,C){var c=this.findHandler(N);c&&(c.call(this,C),C.preventDefault?C.preventDefault():C.returnValue=!1)},bind:function(N,C){this._handlers||(this._handlers={});for(var c=y.$keyboardNavigation.shortcuts,m=c.parse(N),w=0;w<m.length;w++)this._handlers[c.getHash(m[w])]=C},unbind:function(N){for(var C=y.$keyboardNavigation.shortcuts,c=C.parse(N),m=0;m<c.length;m++)this._handlers[C.getHash(c[m])]&&delete this._handlers[C.getHash(c[m])]},bindAll:function(N){for(var C in N)this.bind(C,N[C])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}},function(y){y.$keyboardNavigation.getFocusableNodes=y._getFocusableNodes,y.$keyboardNavigation.trapFocus=function(N,C){if(9!=C.keyCode)return!1;for(var c,m=y.$keyboardNavigation.getFocusableNodes(N),w=document.activeElement,T=-1,j=0;j<m.length;j++)if(m[j]==w){T=j;break}if(C.shiftKey){if(c=m[T<=0?m.length-1:T-1])return c.focus(),C.preventDefault(),!0}else if(c=m[T>=m.length-1?0:T+1])return c.focus(),C.preventDefault(),!0;return!1}}(u),function(y){y.$keyboardNavigation.marker={clear:function(){for(var N=y.$container.querySelectorAll(".dhx_focus_slot"),C=0;C<N.length;C++)N[C].parentNode.removeChild(N[C])},createElement:function(){var N=document.createElement("div");return N.setAttribute("tabindex",-1),N.className="dhx_focus_slot",N},renderMultiple:function(N,C,c){for(var m=[],w=new Date(N),T=new Date(Math.min(C.valueOf(),y.date.add(y.date.day_start(new Date(N)),1,"day").valueOf()));w.valueOf()<C.valueOf();)m=m.concat(c.call(this,w,new Date(Math.min(T.valueOf(),C.valueOf())))),w=y.date.day_start(y.date.add(w,1,"day")),T=y.date.day_start(y.date.add(w,1,"day")),T=new Date(Math.min(T.valueOf(),C.valueOf()));return m},render:function(N,C,c){this.clear();var m=[],w=y.$keyboardNavigation.TimeSlot.prototype._modes;switch(y.$keyboardNavigation.TimeSlot.prototype._getMode()){case w.units:m=this.renderVerticalMarker(N,C,c);break;case w.timeline:m=this.renderTimelineMarker(N,C,c);break;case w.year:m=m.concat(this.renderMultiple(N,C,this.renderYearMarker));break;case w.month:m=this.renderMonthMarker(N,C);break;case w.weekAgenda:m=m.concat(this.renderMultiple(N,C,this.renderWeekAgendaMarker));break;case w.list:m=this.renderAgendaMarker(N,C);break;case w.dayColumns:m=m.concat(this.renderMultiple(N,C,this.renderVerticalMarker))}this.addWaiAriaLabel(m,N,C,c),this.addDataAttributes(m,N,C,c);for(var T=m.length-1;T>=0;T--)if(m[T].offsetWidth)return m[T];return null},addDataAttributes:function(N,C,c,m){for(var w=y.date.date_to_str(y.config.api_date),T=w(C),j=w(c),J=0;J<N.length;J++)N[J].setAttribute("data-start-date",T),N[J].setAttribute("data-end-date",j),m&&N[J].setAttribute("data-section",m)},addWaiAriaLabel:function(N,C,c,m){var w="",T=y.getState().mode,j=!1;w+=y.templates.day_date(C),y.date.day_start(new Date(C)).valueOf()!=C.valueOf()&&(w+=" "+y.templates.hour_scale(C),j=!0),y.date.day_start(new Date(C)).valueOf()!=y.date.day_start(new Date(c)).valueOf()&&(w+=" - "+y.templates.day_date(c),(j||y.date.day_start(new Date(c)).valueOf()!=c.valueOf())&&(w+=" "+y.templates.hour_scale(c))),m&&(y.matrix&&y.matrix[T]?w+=", "+y.templates[T+"_scale_label"](m.key,m.label,m):y._props&&y._props[T]&&(w+=", "+y.templates[T+"_scale_text"](m.key,m.label,m)));for(var J=0;J<N.length;J++)y._waiAria.setAttributes(N[J],{"aria-label":w,"aria-live":"polite"})},renderWeekAgendaMarker:function(N,C){for(var c=y.$container.querySelectorAll(".dhx_wa_day_cont .dhx_wa_scale_bar"),m=y.date.week_start(new Date(y.getState().min_date)),w=-1,T=y.date.day_start(new Date(N)),j=0;j<c.length&&(w++,y.date.day_start(new Date(m)).valueOf()!=T.valueOf());j++)m=y.date.add(m,1,"day");return-1!=w?this._wrapDiv(c[w]):[]},_wrapDiv:function(N){var C=this.createElement();return C.style.top=N.offsetTop+"px",C.style.left=N.offsetLeft+"px",C.style.width=N.offsetWidth+"px",C.style.height=N.offsetHeight+"px",N.appendChild(C),[C]},renderYearMarker:function(N,C){var c=y._get_year_cell(N);c.style.position="relative";var m=this.createElement();return m.style.top="0px",m.style.left="0px",m.style.width="100%",m.style.height="100%",c.appendChild(m),[m]},renderAgendaMarker:function(N,C){var c=this.createElement();return c.style.height="1px",c.style.width="100%",c.style.opacity=1,c.style.top="0px",c.style.left="0px",y.$container.querySelector(".dhx_cal_data").appendChild(c),[c]},renderTimelineMarker:function(N,C,c){var m=y._lame_copy({},y.matrix[y._mode]),w=m._scales;m.round_position=!1;var T=[],j=N?new Date(N):y._min_date,J=C?new Date(C):y._max_date;if(j.valueOf()<y._min_date.valueOf()&&(j=new Date(y._min_date)),J.valueOf()>y._max_date.valueOf()&&(J=new Date(y._max_date)),!m._trace_x)return T;for(var M=0;M<m._trace_x.length&&!y._is_column_visible(m._trace_x[M]);M++);if(M==m._trace_x.length)return T;var Z=w[c];if(!(j<C&&J>N))return T;var K=this.createElement(),ce=y._timeline_getX({start_date:N},!1,m)-1,_e=y._timeline_getX({start_date:C},!1,m)-1,xe=m._section_height[c]-1||m.dy-1,Pe=0;y._isRender("cell")&&(Pe=Z.offsetTop,ce+=m.dx,_e+=m.dx,Z=y.$container.querySelector(".dhx_cal_data"));var ke=Math.max(1,_e-ce-1);return K.style.cssText="height: "+xe+"px; left: "+ce+"px; width: "+ke+"px; top: "+Pe+"px;",Z&&(Z.appendChild(K),T.push(K)),T},renderMonthCell:function(N){for(var C=y.$container.querySelectorAll(".dhx_month_head"),c=[],m=0;m<C.length;m++)c.push(C[m].parentNode);var w=-1,T=0,j=-1,J=y.date.week_start(new Date(y.getState().min_date)),M=y.date.day_start(new Date(N));for(m=0;m<c.length&&(w++,6==j?(T++,j=0):j++,y.date.day_start(new Date(J)).valueOf()!=M.valueOf());m++)J=y.date.add(J,1,"day");if(-1==w)return[];var Z=y._colsS[j],K=y._colsS.heights[T],ce=this.createElement();ce.style.top=K+"px",ce.style.left=Z+"px",ce.style.width=y._cols[j]+"px",ce.style.height=(y._colsS.heights[T+1]-K||y._colsS.height)+"px";var _e=y.$container.querySelector(".dhx_cal_data"),xe=_e.querySelector("table");return xe.nextSibling?_e.insertBefore(ce,xe.nextSibling):_e.appendChild(ce),ce},renderMonthMarker:function(N,C){for(var c=[],m=N;m.valueOf()<C.valueOf();)c.push(this.renderMonthCell(m)),m=y.date.add(m,1,"day");return c},renderVerticalMarker:function(N,C,c){var m=y.locate_holder_day(N),w=[],T=null,j=y.config;if(y._ignores[m])return w;if(y._props&&y._props[y._mode]&&c){var J=y._props[y._mode];m=J.order[c];var M=J.order[c];J.days>1?m=y.locate_holder_day(N)+M:(m=M,J.size&&m>J.position+J.size&&(m=0))}if(!(T=y.locate_holder(m))||T.querySelector(".dhx_scale_hour"))return document.createElement("div");var Z=Math.max(60*N.getHours()+N.getMinutes(),60*j.first_hour),K=Math.min(60*C.getHours()+C.getMinutes(),60*j.last_hour);if(!K&&y.date.day_start(new Date(C)).valueOf()>y.date.day_start(new Date(N)).valueOf()&&(K=60*j.last_hour),K<=Z)return[];var ce=this.createElement(),_e=y.config.hour_size_px*j.last_hour+1;return ce.style.top=Math.round((60*Z*1e3-36e5*y.config.first_hour)*y.config.hour_size_px/36e5)%_e+"px",ce.style.lineHeight=ce.style.height=Math.max(Math.round(60*(K-Z)*1e3*y.config.hour_size_px/36e5)%_e,1)+"px",ce.style.width="100%",T.appendChild(ce),w.push(ce),w[0]}}}(u),function(y){y.$keyboardNavigation.SchedulerNode=function(){},y.$keyboardNavigation.SchedulerNode.prototype=y._compose(y.$keyboardNavigation.EventHandler,{getDefaultNode:function(){var N=new y.$keyboardNavigation.TimeSlot;return N.isValid()||(N=N.fallback()),N},_modes:{month:"month",year:"year",dayColumns:"dayColumns",timeline:"timeline",units:"units",weekAgenda:"weekAgenda",list:"list"},getMode:function(){var N=y.getState().mode;return y.matrix&&y.matrix[N]?this._modes.timeline:y._props&&y._props[N]?this._modes.units:"month"==N?this._modes.month:"year"==N?this._modes.year:"week_agenda"==N?this._modes.weekAgenda:"map"==N||"agenda"==N||y._grid&&y["grid_"+N]?this._modes.list:this._modes.dayColumns},focus:function(){y.focus()},blur:function(){},disable:function(){y.$container.setAttribute("tabindex","0")},enable:function(){y.$container&&y.$container.removeAttribute("tabindex")},isEnabled:function(){return y.$container.hasAttribute("tabindex")},_compareEvents:function(N,C){return N.start_date.valueOf()==C.start_date.valueOf()?N.id>C.id?1:-1:N.start_date.valueOf()>C.start_date.valueOf()?1:-1},_pickEvent:function(N,C,c,m){var w=y.getState();N=new Date(Math.max(w.min_date.valueOf(),N.valueOf())),C=new Date(Math.min(w.max_date.valueOf(),C.valueOf()));var T=y.getEvents(N,C);T.sort(this._compareEvents),m&&(T=T.reverse());for(var j=!!c,J=0;J<T.length&&j;J++)T[J].id==c&&(j=!1),T.splice(J,1),J--;for(J=0;J<T.length;J++)if(new y.$keyboardNavigation.Event(T[J].id).getNode())return T[J];return null},nextEventHandler:function(N){var C=y.$keyboardNavigation.dispatcher.activeNode,c=N||C&&C.eventId,m=null;if(c&&y.getEvent(c)){var w=y.getEvent(c);m=y.$keyboardNavigation.SchedulerNode.prototype._pickEvent(w.start_date,y.date.add(w.start_date,1,"year"),w.id,!1)}if(!m&&!N){var T=y.getState();m=y.$keyboardNavigation.SchedulerNode.prototype._pickEvent(T.min_date,y.date.add(T.min_date,1,"year"),null,!1)}if(m){var j=new y.$keyboardNavigation.Event(m.id);j.isValid()?(C&&C.blur(),y.$keyboardNavigation.dispatcher.setActiveNode(j)):this.nextEventHandler(m.id)}},prevEventHandler:function(N){var C=y.$keyboardNavigation.dispatcher.activeNode,c=N||C&&C.eventId,m=null;if(c&&y.getEvent(c)){var w=y.getEvent(c);m=y.$keyboardNavigation.SchedulerNode.prototype._pickEvent(y.date.add(w.end_date,-1,"year"),w.end_date,w.id,!0)}if(!m&&!N){var T=y.getState();m=y.$keyboardNavigation.SchedulerNode.prototype._pickEvent(y.date.add(T.max_date,-1,"year"),T.max_date,null,!0)}if(m){var j=new y.$keyboardNavigation.Event(m.id);j.isValid()?(C&&C.blur(),y.$keyboardNavigation.dispatcher.setActiveNode(j)):this.prevEventHandler(m.id)}},keys:{"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9":function(N){var C=y.$keyboardNavigation.HeaderCell.prototype.getNodes(".dhx_cal_navline .dhx_cal_tab"),c=N.key;void 0===c&&(c=N.keyCode-48),C[1*c-1]&&C[1*c-1].click()},"ctrl+left,meta+left":function(N){y._click.dhx_cal_prev_button()},"ctrl+right,meta+right":function(N){y._click.dhx_cal_next_button()},"ctrl+up,meta+up":function(N){y.$container.querySelector(".dhx_cal_data").scrollTop-=20},"ctrl+down,meta+down":function(N){y.$container.querySelector(".dhx_cal_data").scrollTop+=20},e:function(){this.nextEventHandler()},home:function(){y.setCurrentView(new Date)},"shift+e":function(){this.prevEventHandler()},"ctrl+enter,meta+enter":function(){y.addEventNow({start_date:new Date(y.getState().date)})},"ctrl+c,meta+c":function(N){y._key_nav_copy_paste(N)},"ctrl+v,meta+v":function(N){y._key_nav_copy_paste(N)},"ctrl+x,meta+x":function(N){y._key_nav_copy_paste(N)}}}),y.$keyboardNavigation.SchedulerNode.prototype.bindAll(y.$keyboardNavigation.SchedulerNode.prototype.keys)}(u),function(y){y.$keyboardNavigation.KeyNavNode=function(){},y.$keyboardNavigation.KeyNavNode.prototype=y._compose(y.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(N){y.$keyboardNavigation.dispatcher.setActiveNode(N)},compareTo:function(N){if(!N)return!1;for(var C in this){if(!!this[C]!=!!N[C])return!1;var c=!(!this[C]||!this[C].toString),m=!(!N[C]||!N[C].toString);if(m!=c)return!1;if(m&&c){if(N[C].toString()!=this[C].toString())return!1}else if(N[C]!=this[C])return!1}return!0},getNode:function(){},focus:function(){var N=this.getNode();N&&(N.setAttribute("tabindex","-1"),N.focus&&N.focus())},blur:function(){var N=this.getNode();N&&N.setAttribute("tabindex","-1")}})}(u),function(y){y.$keyboardNavigation.HeaderCell=function(N){this.index=N||0},y.$keyboardNavigation.HeaderCell.prototype=y._compose(y.$keyboardNavigation.KeyNavNode,{getNode:function(N){N=N||this.index||0;var C=this.getNodes();if(C[N])return C[N]},getNodes:function(N){N=N||[".dhx_cal_navline .dhx_cal_prev_button",".dhx_cal_navline .dhx_cal_next_button",".dhx_cal_navline .dhx_cal_today_button",".dhx_cal_navline .dhx_cal_tab"].join(", ");var C=Array.prototype.slice.call(y.$container.querySelectorAll(N));return C.sort(function(c,m){return c.offsetLeft-m.offsetLeft}),C},_handlers:null,isValid:function(){return!!this.getNode(this.index)},fallback:function(){var N=this.getNode(0);return N||(N=new y.$keyboardNavigation.TimeSlot),N},keys:{left:function(){var N=this.index-1;N<0&&(N=this.getNodes().length-1),this.moveTo(new y.$keyboardNavigation.HeaderCell(N))},right:function(){var N=this.index+1;N>=this.getNodes().length&&(N=0),this.moveTo(new y.$keyboardNavigation.HeaderCell(N))},down:function(){this.moveTo(new y.$keyboardNavigation.TimeSlot)},enter:function(){var N=this.getNode();N&&N.click()}}}),y.$keyboardNavigation.HeaderCell.prototype.bindAll(y.$keyboardNavigation.HeaderCell.prototype.keys)}(u),function(y){y.$keyboardNavigation.Event=function(N){if(this.eventId=null,y.getEvent(N)){var C=y.getEvent(N);this.start=new Date(C.start_date),this.end=new Date(C.end_date),this.section=this._getSection(C),this.eventId=N}},y.$keyboardNavigation.Event.prototype=y._compose(y.$keyboardNavigation.KeyNavNode,{_getNodes:function(){return Array.prototype.slice.call(y.$container.querySelectorAll("["+y.config.event_attribute+"]"))},_modes:y.$keyboardNavigation.SchedulerNode.prototype._modes,getMode:y.$keyboardNavigation.SchedulerNode.prototype.getMode,_handlers:null,isValid:function(){return!(!y.getEvent(this.eventId)||!this.getNode())},fallback:function(){var N=this._getNodes()[0],C=null;if(N&&y._locate_event(N)){var c=y._locate_event(N);C=new y.$keyboardNavigation.Event(c)}else C=new y.$keyboardNavigation.TimeSlot;return C},isScrolledIntoView:function(N){var C=N.getBoundingClientRect(),c=y.$container.querySelector(".dhx_cal_data").getBoundingClientRect();return!(C.bottom<c.top||C.top>c.bottom)},getNode:function(){var N="["+y.config.event_attribute+"='"+this.eventId+"']",C=y.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);if(C)return C;if(y.isMultisectionEvent&&y.isMultisectionEvent(y.getEvent(this.eventId))){for(var c=y.$container.querySelectorAll(N),m=0;m<c.length;m++)if(this.isScrolledIntoView(c[m]))return c[m];return c[0]}return y.$container.querySelector(N)},focus:function(){var N=y.getEvent(this.eventId),C=y.getState();(N.start_date.valueOf()>C.max_date.valueOf()||N.end_date.valueOf()<=C.min_date.valueOf())&&y.setCurrentView(N.start_date);var c=this.getNode();this.isScrolledIntoView(c)?y.$keyboardNavigation.dispatcher.keepScrollPosition(function(){y.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)}.bind(this)):y.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){y.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getSection:function(N){var C=null,c=y.getState().mode;return y.matrix&&y.matrix[c]?C=N[y.matrix[y.getState().mode].y_property]:y._props&&y._props[c]&&(C=N[y._props[c].map_to]),C},_moveToSlot:function(N){var C=y.getEvent(this.eventId);if(C){var c=this._getSection(C),m=new y.$keyboardNavigation.TimeSlot(C.start_date,null,c);this.moveTo(m.nextSlot(m,N))}else this.moveTo(new y.$keyboardNavigation.TimeSlot)},keys:{left:function(){this._moveToSlot("left")},right:function(){this._moveToSlot("right")},down:function(){this.getMode()==this._modes.list?y.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this._moveToSlot("down")},space:function(){var N=this.getNode();N&&N.click?N.click():this.moveTo(new y.$keyboardNavigation.TimeSlot)},up:function(){this.getMode()==this._modes.list?y.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this._moveToSlot("up")},delete:function(){y.getEvent(this.eventId)?y._click.buttons.delete(this.eventId):this.moveTo(new y.$keyboardNavigation.TimeSlot)},enter:function(){y.getEvent(this.eventId)?y.showLightbox(this.eventId):this.moveTo(new y.$keyboardNavigation.TimeSlot)}}}),y.$keyboardNavigation.Event.prototype.bindAll(y.$keyboardNavigation.Event.prototype.keys)}(u),function(y){y.$keyboardNavigation.TimeSlot=function(N,C,c,m){var w=y.getState(),T=y.matrix&&y.matrix[w.mode];N||(N=this.getDefaultDate()),C||(C=T?y.date.add(N,T.x_step,T.x_unit):y.date.add(N,y.config.key_nav_step,"minute")),this.section=c||this._getDefaultSection(),this.start_date=new Date(N),this.end_date=new Date(C),this.movingDate=m||null},y.$keyboardNavigation.TimeSlot.prototype=y._compose(y.$keyboardNavigation.KeyNavNode,{_handlers:null,getDefaultDate:function(){var N,C=y.getState(),c=new Date(C.date);c.setSeconds(0),c.setMilliseconds(0);var m=new Date;m.setSeconds(0),m.setMilliseconds(0);var w=y.matrix&&y.matrix[C.mode],T=!1;if(c.valueOf()===m.valueOf()&&(T=!0),w)T?("day"===w.x_unit?(m.setHours(0),m.setMinutes(0)):"hour"===w.x_unit&&m.setMinutes(0),N=m):N=y.date[w.name+"_start"](new Date(C.date)),N=this.findVisibleColumn(N);else if(N=new Date(y.getState().min_date),T&&(N=m),N=this.findVisibleColumn(N),T||N.setHours(y.config.first_hour),!y._table_view){var j=y.$container.querySelector(".dhx_cal_data");j.scrollTop&&N.setHours(y.config.first_hour+Math.ceil(j.scrollTop/y.config.hour_size_px))}return N},clone:function(N){return new y.$keyboardNavigation.TimeSlot(N.start_date,N.end_date,N.section,N.movingDate)},_getMultisectionView:function(){var N,C=y.getState();return y._props&&y._props[C.mode]?N=y._props[C.mode]:y.matrix&&y.matrix[C.mode]&&(N=y.matrix[C.mode]),N},_getDefaultSection:function(){var N=null;return this._getMultisectionView()&&!N&&(N=this._getNextSection()),N},_getNextSection:function(N,C){var c=this._getMultisectionView(),m=c.order[N],w=m;(w=void 0!==m?m+C:c.size&&c.position?c.position:0)<0&&(w=0);var T=c.options||c.y_unit;return w>=T.length&&(w=T.length-1),T[w]?T[w].key:null},isValid:function(){var N=y.getState();if(this.start_date.valueOf()<N.min_date.valueOf()||this.start_date.valueOf()>=N.max_date.valueOf()||!this.isVisible(this.start_date,this.end_date))return!1;var C=this._getMultisectionView();return!C||void 0!==C.order[this.section]},fallback:function(){var N=new y.$keyboardNavigation.TimeSlot;return N.isValid()?N:new y.$keyboardNavigation.DataArea},getNodes:function(){return Array.prototype.slice.call(y.$container.querySelectorAll(".dhx_focus_slot"))},getNode:function(){return this.getNodes()[0]},focus:function(){this.section&&y.getView()&&y.getView().smart_rendering&&y.getView().scrollTo&&!y.$container.querySelector('[data-section-id="'.concat(this.section,'"]'))&&y.getView().scrollTo({section:this.section}),y.$keyboardNavigation.marker.render(this.start_date,this.end_date,this.section),y.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this),y.$keyboardNavigation._pasteDate=this.start_date,y.$keyboardNavigation._pasteSection=this.section},blur:function(){y.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this),y.$keyboardNavigation.marker.clear()},_modes:y.$keyboardNavigation.SchedulerNode.prototype._modes,_getMode:y.$keyboardNavigation.SchedulerNode.prototype.getMode,addMonthDate:function(N,C,c){var m;switch(C){case"up":m=y.date.add(N,-1,"week");break;case"down":m=y.date.add(N,1,"week");break;case"left":m=y.date.day_start(y.date.add(N,-1,"day")),m=this.findVisibleColumn(m,-1);break;case"right":m=y.date.day_start(y.date.add(N,1,"day")),m=this.findVisibleColumn(m,1);break;default:m=y.date.day_start(new Date(N))}var w=y.getState();return(N.valueOf()<w.min_date.valueOf()||!c&&N.valueOf()>=w.max_date.valueOf())&&(m=new Date(w.min_date)),m},nextMonthSlot:function(N,C,c){var m,w;return(m=this.addMonthDate(N.start_date,C,c)).setHours(y.config.first_hour),(w=new Date(m)).setHours(y.config.last_hour),{start_date:m,end_date:w}},_alignTimeSlot:function(N,C,c,m){for(var w=new Date(C);w.valueOf()<N.valueOf();)w=y.date.add(w,m,c);return w.valueOf()>N.valueOf()&&(w=y.date.add(w,-m,c)),w},nextTimelineSlot:function(N,C,c){var m=y.getState(),w=y.matrix[m.mode],T=this._alignTimeSlot(N.start_date,y.date[w.name+"_start"](new Date(N.start_date)),w.x_unit,w.x_step),j=this._alignTimeSlot(N.end_date,y.date[w.name+"_start"](new Date(N.end_date)),w.x_unit,w.x_step);j.valueOf()<=T.valueOf()&&(j=y.date.add(T,w.x_step,w.x_unit));var J=this.clone(N);switch(J.start_date=T,J.end_date=j,J.section=N.section||this._getNextSection(),C){case"up":J.section=this._getNextSection(N.section,-1);break;case"down":J.section=this._getNextSection(N.section,1);break;case"left":J.start_date=this.findVisibleColumn(y.date.add(J.start_date,-w.x_step,w.x_unit),-1),J.end_date=y.date.add(J.start_date,w.x_step,w.x_unit);break;case"right":J.start_date=this.findVisibleColumn(y.date.add(J.start_date,w.x_step,w.x_unit),1),J.end_date=y.date.add(J.start_date,w.x_step,w.x_unit)}return(J.start_date.valueOf()<m.min_date.valueOf()||J.start_date.valueOf()>=m.max_date.valueOf())&&(c&&J.start_date.valueOf()>=m.max_date.valueOf()?J.start_date=new Date(m.max_date):(J.start_date=y.date[m.mode+"_start"](y.date.add(m.date,"left"==C?-1:1,m.mode)),J.end_date=y.date.add(J.start_date,w.x_step,w.x_unit))),J},nextUnitsSlot:function(N,C,c){var m=this.clone(N);m.section=N.section||this._getNextSection();var w=N.section||this._getNextSection(),T=y.getState(),j=y._props[T.mode];switch(C){case"left":w=this._getNextSection(N.section,-1),j.days>1&&j.order[w]==(j.size?j.size-1:j.options.length)-1&&y.date.add(N.start_date,-1,"day").valueOf()>=T.min_date.valueOf()&&(m=this.nextDaySlot(N,C,c));break;case"right":w=this._getNextSection(N.section,1),j.days>1&&!j.order[w]&&y.date.add(N.start_date,1,"day").valueOf()<T.max_date.valueOf()&&(m=this.nextDaySlot(N,C,c));break;default:m=this.nextDaySlot(N,C,c),w=N.section}return m.section=w,m},_moveDate:function(N,C){var c=this.findVisibleColumn(y.date.add(N,C,"day"),C);return c.setHours(N.getHours()),c.setMinutes(N.getMinutes()),c},isBeforeLastHour:function(N,C){var c=N.getMinutes(),m=N.getHours(),w=y.config.last_hour;return m<w||!C&&(24==w||m==w)&&!c},isAfterFirstHour:function(N,C){var c=N.getMinutes(),m=N.getHours(),T=y.config.last_hour;return m>=y.config.first_hour||!C&&!c&&(!m&&24==T||m==T)},isInVisibleDayTime:function(N,C){return this.isBeforeLastHour(N,C)&&this.isAfterFirstHour(N,C)},nextDaySlot:function(N,C,c){var m,w,T=y.config.key_nav_step,j=this._alignTimeSlot(N.start_date,y.date.day_start(new Date(N.start_date)),"minute",T),J=N.start_date;switch(C){case"up":if(m=y.date.add(j,-T,"minute"),!this.isInVisibleDayTime(m,!0)&&(!c||this.isInVisibleDayTime(J,!0))){var M=!0;c&&y.date.date_part(new Date(m)).valueOf()!=y.date.date_part(new Date(J)).valueOf()&&(M=!1),M&&(m=this.findVisibleColumn(y.date.add(N.start_date,-1,"day"),-1)),m.setHours(y.config.last_hour),m.setMinutes(0),m=y.date.add(m,-T,"minute")}w=y.date.add(m,T,"minute");break;case"down":m=y.date.add(j,T,"minute");var Z=c?m:y.date.add(m,T,"minute");this.isInVisibleDayTime(Z,!1)||c&&!this.isInVisibleDayTime(J,!1)||(c?(M=!0,y.date.date_part(new Date(J)).valueOf()==J.valueOf()&&(M=!1),M&&(m=this.findVisibleColumn(y.date.add(N.start_date,1,"day"),1)),m.setHours(y.config.first_hour),m.setMinutes(0),m=y.date.add(m,T,"minute")):((m=this.findVisibleColumn(y.date.add(N.start_date,1,"day"),1)).setHours(y.config.first_hour),m.setMinutes(0))),w=y.date.add(m,T,"minute");break;case"left":m=this._moveDate(N.start_date,-1),w=this._moveDate(N.end_date,-1);break;case"right":m=this._moveDate(N.start_date,1),w=this._moveDate(N.end_date,1);break;default:w=y.date.add(m=j,T,"minute")}return{start_date:m,end_date:w}},nextWeekAgendaSlot:function(N,C){var c,m,w=y.getState();switch(C){case"down":case"left":c=y.date.day_start(y.date.add(N.start_date,-1,"day")),c=this.findVisibleColumn(c,-1);break;case"up":case"right":c=y.date.day_start(y.date.add(N.start_date,1,"day")),c=this.findVisibleColumn(c,1);break;default:c=y.date.day_start(N.start_date)}return(N.start_date.valueOf()<w.min_date.valueOf()||N.start_date.valueOf()>=w.max_date.valueOf())&&(c=new Date(w.min_date)),(m=new Date(c)).setHours(y.config.last_hour),{start_date:c,end_date:m}},nextAgendaSlot:function(N,C){return{start_date:N.start_date,end_date:N.end_date}},isDateVisible:function(N){if(!y._ignores_detected)return!0;var C,c=y.matrix&&y.matrix[y.getState().mode];return C=c?y._get_date_index(c,N):y.locate_holder_day(N),!y._ignores[C]},findVisibleColumn:function(N,C){var c=N;C=C||1;for(var m=y.getState();!this.isDateVisible(c)&&(C>0&&c.valueOf()<=m.max_date.valueOf()||C<0&&c.valueOf()>=m.min_date.valueOf());)c=this.nextDateColumn(c,C);return c},nextDateColumn:function(N,C){C=C||1;var c=y.matrix&&y.matrix[y.getState().mode];return c?y.date.add(N,C*c.x_step,c.x_unit):y.date.day_start(y.date.add(N,C,"day"))},isVisible:function(N,C){if(!y._ignores_detected)return!0;for(var c=new Date(N);c.valueOf()<C.valueOf();){if(this.isDateVisible(c))return!0;c=this.nextDateColumn(c)}return!1},nextSlot:function(N,C,c,m){var w;c=c||this._getMode();var T=y.$keyboardNavigation.TimeSlot.prototype.clone(N);switch(c){case this._modes.units:w=this.nextUnitsSlot(T,C,m);break;case this._modes.timeline:w=this.nextTimelineSlot(T,C,m);break;case this._modes.year:case this._modes.month:w=this.nextMonthSlot(T,C,m);break;case this._modes.weekAgenda:w=this.nextWeekAgendaSlot(T,C,m);break;case this._modes.list:w=this.nextAgendaSlot(T,C,m);break;case this._modes.dayColumns:w=this.nextDaySlot(T,C,m)}return w.start_date.valueOf()>=w.end_date.valueOf()&&(w=this.nextSlot(w,C,c)),y.$keyboardNavigation.TimeSlot.prototype.clone(w)},extendSlot:function(N,C){var c;switch(this._getMode()){case this._modes.units:c="left"==C||"right"==C?this.nextUnitsSlot(N,C):this.extendUnitsSlot(N,C);break;case this._modes.timeline:c="down"==C||"up"==C?this.nextTimelineSlot(N,C):this.extendTimelineSlot(N,C);break;case this._modes.year:case this._modes.month:c=this.extendMonthSlot(N,C);break;case this._modes.dayColumns:c=this.extendDaySlot(N,C);break;case this._modes.weekAgenda:c=this.extendWeekAgendaSlot(N,C);break;default:c=N}var m=y.getState();return c.start_date.valueOf()<m.min_date.valueOf()&&(c.start_date=this.findVisibleColumn(m.min_date),c.start_date.setHours(y.config.first_hour)),c.end_date.valueOf()>m.max_date.valueOf()&&(c.end_date=this.findVisibleColumn(m.max_date,-1)),y.$keyboardNavigation.TimeSlot.prototype.clone(c)},extendTimelineSlot:function(N,C){return this.extendGenericSlot({left:"start_date",right:"end_date"},N,C,"timeline")},extendWeekAgendaSlot:function(N,C){return this.extendGenericSlot({left:"start_date",right:"end_date"},N,C,"weekAgenda")},extendGenericSlot:function(N,C,c,m){var w,T=C.movingDate;if(T||(T=N[c]),!T||!N[c])return C;if(!c)return y.$keyboardNavigation.TimeSlot.prototype.clone(C);(w=this.nextSlot({start_date:C[T],section:C.section},c,m,!0)).start_date.valueOf()==C.start_date.valueOf()&&(w=this.nextSlot({start_date:w.start_date,section:w.section},c,m,!0)),w.movingDate=T;var j=this.extendSlotDates(C,w,w.movingDate);return j.end_date.valueOf()<=j.start_date.valueOf()&&(w.movingDate="end_date"==w.movingDate?"start_date":"end_date"),j=this.extendSlotDates(C,w,w.movingDate),w.start_date=j.start_date,w.end_date=j.end_date,w},extendSlotDates:function(N,C,c){var m={start_date:null,end_date:null};return"start_date"==c?(m.start_date=C.start_date,m.end_date=N.end_date):(m.start_date=N.start_date,m.end_date=C.start_date),m},extendMonthSlot:function(N,C){return(N=this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},N,C,"month")).start_date.setHours(y.config.first_hour),N.end_date=y.date.add(N.end_date,-1,"day"),N.end_date.setHours(y.config.last_hour),N},extendUnitsSlot:function(N,C){var c;switch(C){case"down":case"up":c=this.extendDaySlot(N,C);break;default:c=N}return c.section=N.section,c},extendDaySlot:function(N,C){return this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},N,C,"dayColumns")},scrollSlot:function(N){var C=y.getState(),c=this.nextSlot(this,N);(c.start_date.valueOf()<C.min_date.valueOf()||c.start_date.valueOf()>=C.max_date.valueOf())&&y.setCurrentView(new Date(c.start_date)),this.moveTo(c)},keys:{left:function(){this.scrollSlot("left")},right:function(){this.scrollSlot("right")},down:function(){this._getMode()==this._modes.list?y.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this.scrollSlot("down")},up:function(){this._getMode()==this._modes.list?y.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this.scrollSlot("up")},"shift+down":function(){this.moveTo(this.extendSlot(this,"down"))},"shift+up":function(){this.moveTo(this.extendSlot(this,"up"))},"shift+right":function(){this.moveTo(this.extendSlot(this,"right"))},"shift+left":function(){this.moveTo(this.extendSlot(this,"left"))},enter:function(){var N={start_date:new Date(this.start_date),end_date:new Date(this.end_date)},C=y.getState().mode;y.matrix&&y.matrix[C]?N[y.matrix[y.getState().mode].y_property]=this.section:y._props&&y._props[C]&&(N[y._props[C].map_to]=this.section),y.addEventNow(N)}}}),y.$keyboardNavigation.TimeSlot.prototype.bindAll(y.$keyboardNavigation.TimeSlot.prototype.keys)}(u),function(y){y.$keyboardNavigation.MinicalButton=function(N,C){this.container=N,this.index=C||0},y.$keyboardNavigation.MinicalButton.prototype=y._compose(y.$keyboardNavigation.KeyNavNode,{isValid:function(){return!!this.container.offsetWidth},fallback:function(){var N=new y.$keyboardNavigation.TimeSlot;return N.isValid()?N:new y.$keyboardNavigation.DataArea},focus:function(){y.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),y.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),y.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},getNode:function(){return this.container.querySelector(this.index?".dhx_cal_next_button":".dhx_cal_prev_button")},keys:{right:function(N){this.moveTo(new y.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},left:function(N){this.moveTo(new y.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},down:function(){var N=new y.$keyboardNavigation.MinicalCell(this.container,0,0);N&&!N.isValid()&&(N=N.fallback()),this.moveTo(N)},enter:function(N){this.getNode().click()}}}),y.$keyboardNavigation.MinicalButton.prototype.bindAll(y.$keyboardNavigation.MinicalButton.prototype.keys)}(u),function(y){y.$keyboardNavigation.MinicalCell=function(N,C,c){this.container=N,this.row=C||0,this.col=c||0},y.$keyboardNavigation.MinicalCell.prototype=y._compose(y.$keyboardNavigation.KeyNavNode,{isValid:function(){var N=this._getGrid();return!(!N[this.row]||!N[this.row][this.col])},fallback:function(){var N=this.row,C=this.col,c=this._getGrid();c[N]||(N=0);var m=!0;if(N>c.length/2&&(m=!1),!c[N]){var w=new y.$keyboardNavigation.TimeSlot;return w.isValid()?w:new y.$keyboardNavigation.DataArea}if(m){for(var T=C;c[N]&&T<c[N].length;T++)if(c[N][T]||T!=c[N].length-1||(N++,C=0),c[N][T])return new y.$keyboardNavigation.MinicalCell(this.container,N,T)}else for(T=C;c[N]&&T<c[N].length;T--)if(c[N][T]||T||(C=c[--N].length-1),c[N][T])return new y.$keyboardNavigation.MinicalCell(this.container,N,T);return new y.$keyboardNavigation.MinicalButton(this.container,0)},focus:function(){y.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),y.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),y.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getNode:function(N,C){return this.container.querySelector(".dhx_year_body tr:nth-child("+(N+1)+") td:nth-child("+(C+1)+")")},getNode:function(){return this._getNode(this.row,this.col)},_getGrid:function(){for(var N=this.container.querySelectorAll(".dhx_year_body tr"),C=[],c=0;c<N.length;c++){C[c]=[];for(var m=N[c].querySelectorAll("td"),w=0;w<m.length;w++){var j=!0,J=y._getClassName(m[w]);(J.indexOf("dhx_after")>-1||J.indexOf("dhx_before")>-1||J.indexOf("dhx_scale_ignore")>-1)&&(j=!1),C[c][w]=j}}return C},keys:{right:function(N){var C=this._getGrid(),c=this.row,m=this.col+1;C[c]&&C[c][m]||(C[c+1]?(c+=1,m=0):m=this.col);var w=new y.$keyboardNavigation.MinicalCell(this.container,c,m);w.isValid()||(w=w.fallback()),this.moveTo(w)},left:function(N){var C=this._getGrid(),c=this.row,m=this.col-1;C[c]&&C[c][m]||(m=C[c-1]?C[c-=1].length-1:this.col);var w=new y.$keyboardNavigation.MinicalCell(this.container,c,m);w.isValid()||(w=w.fallback()),this.moveTo(w)},down:function(){var N=this._getGrid(),C=this.row+1,c=this.col;N[C]&&N[C][c]||(C=this.row);var m=new y.$keyboardNavigation.MinicalCell(this.container,C,c);m.isValid()||(m=m.fallback()),this.moveTo(m)},up:function(){var N=this._getGrid(),C=this.row-1,c=this.col;if(N[C]&&N[C][c]){var m=new y.$keyboardNavigation.MinicalCell(this.container,C,c);m.isValid()||(m=m.fallback()),this.moveTo(m)}else{var w=0;this.col>N[this.row].length/2&&(w=1),this.moveTo(new y.$keyboardNavigation.MinicalButton(this.container,w))}},enter:function(N){this.getNode().querySelector(".dhx_month_head").click()}}}),y.$keyboardNavigation.MinicalCell.prototype.bindAll(y.$keyboardNavigation.MinicalCell.prototype.keys)}(u),function(y){y.$keyboardNavigation.DataArea=function(N){this.index=N||0},y.$keyboardNavigation.DataArea.prototype=y._compose(y.$keyboardNavigation.KeyNavNode,{getNode:function(N){return y.$container.querySelector(".dhx_cal_data")},_handlers:null,isValid:function(){return!0},fallback:function(){return this},keys:{"up,down,right,left":function(){this.moveTo(new y.$keyboardNavigation.TimeSlot)}}}),y.$keyboardNavigation.DataArea.prototype.bindAll(y.$keyboardNavigation.DataArea.prototype.keys)}(u),function(u){!function(){var ee=[];function y(){return!!ee.length}function N(T){setTimeout(function(){if(u.$destroyed)return!0;y()||function(j,J){for(;j&&j!=J;)j=j.parentNode;return j==J}(document.activeElement,u.$container)||u.focus()},1)}function C(T){var j=(T=T||window.event).currentTarget;j==ee[ee.length-1]&&u.$keyboardNavigation.trapFocus(j,T)}if(u.attachEvent("onLightbox",function(){var T;T=u.getLightbox(),u.eventRemove(T,"keydown",C),u.event(T,"keydown",C),ee.push(T)}),u.attachEvent("onAfterLightbox",function(){var T=ee.pop();T&&u.eventRemove(T,"keydown",C),N()}),u.attachEvent("onAfterQuickInfo",function(){N()}),!u._keyNavMessagePopup){u._keyNavMessagePopup=!0;var c=null,m=null,w=[];u.attachEvent("onMessagePopup",function(T){for(c=document.activeElement,m=c;m&&u._getClassName(m).indexOf("dhx_cal_data")<0;)m=m.parentNode;m&&(m=m.parentNode),u.eventRemove(T,"keydown",C),u.event(T,"keydown",C),w.push(T)}),u.attachEvent("onAfterMessagePopup",function(){var T=w.pop();T&&u.eventRemove(T,"keydown",C),setTimeout(function(){if(u.$destroyed)return!0;for(var j=document.activeElement;j&&u._getClassName(j).indexOf("dhx_cal_light")<0;)j=j.parentNode;j||(c&&c.parentNode?c.focus():m&&m.parentNode&&m.focus(),c=null,m=null)},1)})}u.$keyboardNavigation.isModal=y}()}(u),function(y){y.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new y.$keyboardNavigation.SchedulerNode,keepScrollPosition:function(N){var C,c,m=y.$container.querySelector(".dhx_timeline_scrollable_data");m||(m=y.$container.querySelector(".dhx_cal_data")),m&&(C=m.scrollTop,c=m.scrollLeft),N(),m&&(m.scrollTop=C,m.scrollLeft=c)},enable:function(){if(y.$container){this.isActive=!0;var N=this;this.keepScrollPosition(function(){N.globalNode.enable(),N.setActiveNode(N.getActiveNode())})}},disable:function(){this.isActive=!1,this.globalNode.disable()},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){return this.globalNode.getDefaultNode()},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var N=this.activeNode;return N&&!N.isValid()&&(N=N.fallback()),N},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(N){N&&N.isValid()&&(this.activeNode&&this.activeNode.compareTo(N)||this.isEnabled()&&(this.blurNode(this.activeNode),this.activeNode=N,this.focusNode(this.activeNode)))},focusNode:function(N){N&&N.focus&&(N.focus(),N.getNode&&document.activeElement!=N.getNode()&&this.setActiveNode(new y.$keyboardNavigation.DataArea))},blurNode:function(N){N&&N.blur&&N.blur()},getInlineEditor:function(N){var C=y.$container.querySelector(".dhx_cal_editor["+y.config.event_attribute+"='"+N+"'] textarea");return C&&C.offsetWidth?C:null},keyDownHandler:function(N){if(!N.defaultPrevented){var C=this.getActiveNode();if((!y.$keyboardNavigation.isModal()||C&&C.container&&y.utils.dom.locateCss({target:C.container},"dhx_minical_popup",!1))&&(!y.getState().editor_id||!this.getInlineEditor(y.getState().editor_id))&&this.isEnabled()){N=N||window.event;var c=this.globalNode,m=y.$keyboardNavigation.shortcuts.getCommandFromEvent(N);C?C.findHandler(m)?C.doAction(m,N):c.findHandler(m)&&c.doAction(m,N):this.setDefaultNode()}}},_timeout:null,delay:function(N,C){clearTimeout(this._timeout),this._timeout=setTimeout(N,C||1)}}}(u),function(u){u._temp_key_scope=function(){u.config.key_nav=!0,u.$keyboardNavigation._pasteDate=null,u.$keyboardNavigation._pasteSection=null;var ee=null,y={};function N(m){m=m||window.event,y.x=m.clientX,y.y=m.clientY}function C(){for(var m,w,T=document.elementFromPoint(y.x,y.y);T&&T!=u._obj;)T=T.parentNode;return m=T==u._obj,w=u.$keyboardNavigation.dispatcher.isEnabled(),m||w}function c(m){return u._lame_copy({},m)}document.body?u.event(document.body,"mousemove",N):u.event(window,"load",function(){u.event(document.body,"mousemove",N)}),u.attachEvent("onMouseMove",function(m,w){var T=u.getState();if(T.mode&&T.min_date){var j=u.getActionData(w);u.$keyboardNavigation._pasteDate=j.date,u.$keyboardNavigation._pasteSection=j.section}}),u._make_pasted_event=function(m){var Z,w=u.$keyboardNavigation._pasteDate,T=u.$keyboardNavigation._pasteSection,j=m.end_date-m.start_date,J=c(m);if(delete(Z=J).rec_type,delete Z.rec_pattern,delete Z.event_pid,delete Z.event_length,J.start_date=new Date(w),J.end_date=new Date(J.start_date.valueOf()+j),T){var M=u._get_section_property();J[M]=u.config.multisection?m[M]:T}return J},u._do_paste=function(m,w,T){!1!==u.callEvent("onBeforeEventPasted",[m,w,T])&&(u.addEvent(w),u.callEvent("onEventPasted",[m,w,T]))},u._is_key_nav_active=function(){return!(!this._is_initialized()||this._is_lightbox_open()||!this.config.key_nav)},u.event(document,"keydown",function(m){(m.ctrlKey||m.metaKey)&&86==m.keyCode&&u._buffer_event&&!u.$keyboardNavigation.dispatcher.isEnabled()&&(u.$keyboardNavigation.dispatcher.isActive=C())}),u._key_nav_copy_paste=function(m){if(!u._is_key_nav_active())return!0;if(37==m.keyCode||39==m.keyCode){m.cancelBubble=!0;var w=u.date.add(u._date,37==m.keyCode?-1:1,u._mode);return u.setCurrentView(w),!0}var M,T=(M=u.$keyboardNavigation.dispatcher.getActiveNode())&&M.eventId?M.eventId:u._select_id;if((m.ctrlKey||m.metaKey)&&67==m.keyCode)return T&&(u._buffer_event=c(u.getEvent(T)),ee=!0,u.callEvent("onEventCopied",[u.getEvent(T)])),!0;if((m.ctrlKey||m.metaKey)&&88==m.keyCode&&T){ee=!1;var j=u._buffer_event=c(u.getEvent(T));u.updateEvent(j.id),u.callEvent("onEventCut",[j])}if((m.ctrlKey||m.metaKey)&&86==m.keyCode&&C()){if(j=(j=u._buffer_event?u.getEvent(u._buffer_event.id):u._buffer_event)||u._buffer_event){var J=u._make_pasted_event(j);ee?(J.id=u.uid(),u._do_paste(ee,J,j)):u.callEvent("onBeforeEventChanged",[J,m,!1,j])&&(u._do_paste(ee,J,j),ee=!0)}return!0}}},u._temp_key_scope()}(u),function(){var m;(function(u){u.$keyboardNavigation.attachSchedulerHandlers=function(){var ee,y=u.$keyboardNavigation.dispatcher,N=function(T){if(u.config.key_nav)return y.keyDownHandler(T)},C=function(){y.keepScrollPosition(function(){y.focusGlobalNode()})};u.attachEvent("onDataRender",function(){u.config.key_nav&&y.isEnabled()&&!u.getState().editor_id&&(clearTimeout(ee),ee=setTimeout(function(){if(u.$destroyed)return!0;y.isEnabled()||y.enable(),c()}))});var c=function(){if(y.isEnabled()){var T=y.getActiveNode();T&&(T.isValid()||(T=T.fallback()),!T||T instanceof u.$keyboardNavigation.MinicalButton||T instanceof u.$keyboardNavigation.MinicalCell||y.keepScrollPosition(function(){T.focus(!0)}))}};function m(T){if(!u.config.key_nav)return!0;var j,J=u.$keyboardNavigation.isChildOf(T.target||T.srcElement,u.$container.querySelector(".dhx_cal_data")),M=u.getActionData(T);u._locate_event(T.target||T.srcElement)?j=new u.$keyboardNavigation.Event(u._locate_event(T.target||T.srcElement)):J&&(j=new u.$keyboardNavigation.TimeSlot,M.date&&J&&(j=j.nextSlot(new u.$keyboardNavigation.TimeSlot(M.date,null,M.section)))),j&&(y.isEnabled()?M.date&&J&&y.delay(function(){y.setActiveNode(j)}):y.activeNode=j)}u.attachEvent("onSchedulerReady",function(){var T=u.$container;u.eventRemove(document,"keydown",N),u.eventRemove(T,"mousedown",m),u.eventRemove(T,"focus",C),u.config.key_nav?(u.event(document,"keydown",N),u.event(T,"mousedown",m),u.event(T,"focus",C),T.setAttribute("tabindex","0")):T.removeAttribute("tabindex")});var w=u.updateEvent;u.updateEvent=function(T){var j=w.apply(this,arguments);if(u.config.key_nav&&y.isEnabled()&&u.getState().select_id==T){var J=new u.$keyboardNavigation.Event(T);u.getState().lightbox_id||function(M){if(u.config.key_nav&&y.isEnabled()){var Z=M,K=new u.$keyboardNavigation.Event(Z.eventId);K.isValid()||(K=new u.$keyboardNavigation.TimeSlot(K.start||Z.start,K.end||Z.end,K.section||Z.section)).isValid()||(K=new u.$keyboardNavigation.TimeSlot),y.setActiveNode(K);var Pe=y.getActiveNode();Pe&&Pe.getNode&&document.activeElement!=Pe.getNode()&&y.focusNode(y.getActiveNode())}}(J)}return j},u.attachEvent("onEventDeleted",function(T){return u.config.key_nav&&y.isEnabled()&&y.getActiveNode().eventId==T&&y.setActiveNode(new u.$keyboardNavigation.TimeSlot),!0}),u.attachEvent("onClearAll",function(){if(!u.config.key_nav)return!0;y.isEnabled()&&y.getActiveNode()instanceof u.$keyboardNavigation.Event&&y.setActiveNode(new u.$keyboardNavigation.TimeSlot)})}})(u),(m=u).$keyboardNavigation._minicalendars=[],m.$keyboardNavigation.isMinical=function(w){for(var T=m.$keyboardNavigation._minicalendars,j=0;j<T.length;j++)if(this.isChildOf(w,T[j]))return!0;return!1},m.$keyboardNavigation.isChildOf=function(w,T){for(;w&&w!==T;)w=w.parentNode;return w===T},m.$keyboardNavigation.patchMinicalendar=function(){var w=m.$keyboardNavigation.dispatcher;function T(Z){var K=Z.target;w.enable(),w.setActiveNode(new m.$keyboardNavigation.MinicalButton(K,0))}function j(Z){var K=Z.target||Z.srcElement,ce=m.utils.dom.locateCss(Z,"dhx_cal_prev_button",!1),_e=m.utils.dom.locateCss(Z,"dhx_cal_next_button",!1),xe=m.utils.dom.locateCss(Z,"dhx_year_body",!1),Pe=0,ke=0;if(xe){for(var qe,rt,wt=K;wt&&"td"!=wt.tagName.toLowerCase();)wt=wt.parentNode;if(wt&&(qe=(rt=wt).parentNode),qe&&rt){for(var Xe=qe.parentNode.querySelectorAll("tr"),ct=0;ct<Xe.length;ct++)if(Xe[ct]==qe){Pe=ct;break}var Ze=qe.querySelectorAll("td");for(ct=0;ct<Ze.length;ct++)if(Ze[ct]==rt){ke=ct;break}}}var ht=Z.currentTarget;w.delay(function(){var nt;(ce||_e||xe)&&(ce?(nt=new m.$keyboardNavigation.MinicalButton(ht,0),w.setActiveNode(new m.$keyboardNavigation.MinicalButton(ht,0))):_e?nt=new m.$keyboardNavigation.MinicalButton(ht,1):xe&&(nt=new m.$keyboardNavigation.MinicalCell(ht,Pe,ke)),nt&&(w.enable(),nt.isValid()&&(w.activeNode=null,w.setActiveNode(nt))))})}if(m.renderCalendar){var J=m.renderCalendar;m.renderCalendar=function(){var Z=J.apply(this,arguments),K=m.$keyboardNavigation._minicalendars;m.eventRemove(Z,"click",j),m.event(Z,"click",j),m.eventRemove(Z,"focus",T),m.event(Z,"focus",T);for(var ce=!1,_e=0;_e<K.length;_e++)if(K[_e]==Z){ce=!0;break}if(ce||K.push(Z),w.isEnabled()){var xe=w.getActiveNode();xe&&xe.container==Z?w.focusNode(xe):Z.setAttribute("tabindex","0")}else Z.setAttribute("tabindex","0");return Z}}if(m.destroyCalendar){var M=m.destroyCalendar;m.destroyCalendar=function(Z,K){Z=Z||(m._def_count?m._def_count.firstChild:null);var ce=M.apply(this,arguments);if(!Z||!Z.parentNode)for(var _e=m.$keyboardNavigation._minicalendars,xe=0;xe<_e.length;xe++)_e[xe]==Z&&(m.eventRemove(_e[xe],"focus",T),_e.splice(xe,1),xe--);return ce}}};var y=u.$keyboardNavigation.dispatcher;if(u.$keyboardNavigation.attachSchedulerHandlers(),u.renderCalendar)u.$keyboardNavigation.patchMinicalendar();else var N=u.attachEvent("onSchedulerReady",function(){u.detachEvent(N),u.$keyboardNavigation.patchMinicalendar()});function C(){if(u.config.key_nav){var m=document.activeElement;return!(!m||u.utils.dom.locateCss(m,"dhx_cal_quick_info",!1))&&(u.$keyboardNavigation.isChildOf(m,u.$container)||u.$keyboardNavigation.isMinical(m))}}function c(m){m&&!y.isEnabled()?y.enable():!m&&y.isEnabled()&&y.disable()}setInterval(function(){if(u.$container&&u.$keyboardNavigation.isChildOf(u.$container,document.body)){var m=C();m?c(m):!m&&y.isEnabled()&&setTimeout(function(){u.$destroyed||(u.config.key_nav?c(C()):u.$container.removeAttribute("tabindex"))},100)}},500)}()},layer:function(u){u.attachEvent("onTemplatesReady",function(){this.layers.sort(function(y,N){return y.zIndex-N.zIndex}),u._dp_init=function(y){y._methods=["_set_event_text_style","","changeEventId","deleteEvent"],this.attachEvent("onEventAdded",function(N){!this._loading&&this.validId(N)&&this.getEvent(N)&&this.getEvent(N).layer==y.layer&&y.setUpdated(N,!0,"inserted")}),this.attachEvent("onBeforeEventDelete",function(N){if(this.getEvent(N)&&this.getEvent(N).layer==y.layer){if(!this.validId(N))return;var C=y.getState(N);return"inserted"==C||this._new_event?(y.setUpdated(N,!1),!0):"deleted"!=C&&("true_deleted"==C||(y.setUpdated(N,!0,"deleted"),!1))}return!0}),this.attachEvent("onEventChanged",function(N){!this._loading&&this.validId(N)&&this.getEvent(N)&&this.getEvent(N).layer==y.layer&&y.setUpdated(N,!0,"updated")}),y._getRowData=function(N,C){var c=this.obj.getEvent(N),m={};for(var w in c)0!==w.indexOf("_")&&(m[w]=c[w]&&c[w].getUTCFullYear?this.obj._helpers.formatDate(c[w]):c[w]);return m},y._clearUpdateFlag=function(){},y.attachEvent("insertCallback",u._update_callback),y.attachEvent("updateCallback",u._update_callback),y.attachEvent("deleteCallback",function(N,C){this.obj.setUserData(C,this.action_param,"true_deleted"),this.obj.deleteEvent(C)})},function(){var y=function c(m){if(null===m||"object"!=zt(m))return m;var w=new m.constructor;for(var T in m)w[T]=c(m[T]);return w};u._dataprocessors=[],u._layers_zindex={};for(var N=0;N<u.layers.length;N++){if(u.config["lightbox_"+u.layers[N].name]={},u.config["lightbox_"+u.layers[N].name].sections=y(u.config.lightbox.sections),u._layers_zindex[u.layers[N].name]=u.config.initial_layer_zindex||5+3*N,u.layers[N].url){var C=u.createDataProcessor({url:u.layers[N].url});C.layer=u.layers[N].name,u._dataprocessors.push(C),u._dataprocessors[N].init(u)}u.layers[N].isDefault&&(u.defaultLayer=u.layers[N].name)}}(),u.showLayer=function(y){this.toggleLayer(y,!0)},u.hideLayer=function(y){this.toggleLayer(y,!1)},u.toggleLayer=function(y,N){var C=this.getLayer(y);C.visible=void 0!==N?!!N:!C.visible,this.setCurrentView(this._date,this._mode)},u.getLayer=function(y){var N,C;"string"==typeof y&&(C=y),"object"==zt(y)&&(C=y.layer);for(var c=0;c<u.layers.length;c++)u.layers[c].name==C&&(N=u.layers[c]);return N},u.attachEvent("onBeforeLightbox",function(y){var N=this.getEvent(y);return this.config.lightbox.sections=this.config["lightbox_"+N.layer].sections,u.resetLightbox(),!0}),u.attachEvent("onClick",function(y,N){var C=u.getEvent(y);return!u.getLayer(C.layer).noMenu}),u.attachEvent("onEventCollision",function(y,N){var C=this.getLayer(y);if(!C.checkCollision)return!1;for(var c=0,m=0;m<N.length;m++)N[m].layer==C.name&&N[m].id!=y.id&&c++;return c>=u.config.collision_limit}),u.addEvent=function(y,N,C,c,m){var w=y;1!=arguments.length&&((w=m||{}).start_date=y,w.end_date=N,w.text=C,w.id=c,w.layer=this.defaultLayer),w.id=w.id||u.uid(),w.text=w.text||"","string"==typeof w.start_date&&(w.start_date=this.templates.api_date(w.start_date)),"string"==typeof w.end_date&&(w.end_date=this.templates.api_date(w.end_date)),w._timed=this.isOneDayEvent(w);var T=!this._events[w.id];this._events[w.id]=w,this.event_updated(w),this._loading||this.callEvent(T?"onEventAdded":"onEventChanged",[w.id,w])},this._evs_layer={};for(var ee=0;ee<this.layers.length;ee++)this._evs_layer[this.layers[ee].name]=[];u.addEventNow=function(y,N,C){var c={};"object"==zt(y)&&(c=y,y=null);var m=6e4*(this.config.event_duration||this.config.time_step);y||(y=Math.round(u._currentDate().valueOf()/m)*m);var w=new Date(y);if(!N){var T=this.config.first_hour;T>w.getHours()&&(w.setHours(T),y=w.valueOf()),N=y+m}c.start_date=c.start_date||w,c.end_date=c.end_date||new Date(N),c.text=c.text||this.locale.labels.new_event,c.id=this._drag_id=this.uid(),c.layer=this.defaultLayer,this._drag_mode="new-size",this._loading=!0,this.addEvent(c),this.callEvent("onEventCreated",[this._drag_id,C]),this._loading=!1,this._drag_event={},this._on_mouse_up(C)},u._t_render_view_data=function(y){if(this.config.multi_day&&!this._table_view){for(var N=[],C=[],c=0;c<y.length;c++)y[c]._timed?N.push(y[c]):C.push(y[c]);this._table_view=!0,this.render_data(C),this._table_view=!1,this.render_data(N)}else this.render_data(y)},u.render_view_data=function(){if(this._not_render)this._render_wait=!0;else{this._render_wait=!1,this.clear_view(),this._evs_layer={};for(var y=0;y<this.layers.length;y++)this._evs_layer[this.layers[y].name]=[];var N=this.get_visible_events();for(y=0;y<N.length;y++)this._evs_layer[N[y].layer]&&this._evs_layer[N[y].layer].push(N[y]);if("month"==this._mode){var C=[];for(y=0;y<this.layers.length;y++)this.layers[y].visible&&(C=C.concat(this._evs_layer[this.layers[y].name]));this._t_render_view_data(C)}else for(y=0;y<this.layers.length;y++)this.layers[y].visible&&this._t_render_view_data(this._evs_layer[this.layers[y].name])}},u._render_v_bar=function(y,N,C,c,m,w,T,j,J){var M=y.id;-1==T.indexOf("<div class=")&&(T=u.templates["event_header_"+y.layer]?u.templates["event_header_"+y.layer](y.start_date,y.end_date,y):T),-1==j.indexOf("<div class=")&&(j=u.templates["event_text_"+y.layer]?u.templates["event_text_"+y.layer](y.start_date,y.end_date,y):j);var Z=document.createElement("div"),K="dhx_cal_event",ce=u.templates["event_class_"+y.layer]?u.templates["event_class_"+y.layer](y.start_date,y.end_date,y):u.templates.event_class(y.start_date,y.end_date,y);ce&&(K=K+" "+ce);var _e=u._border_box_events(),xe=c-2,Xe='<div event_id="'+M+'" '+u.config.event_attribute+'="'+M+'" class="'+K+'" style="position:absolute; top:'+C+"px; left:"+N+"px; width:"+(_e?xe:c-4)+"px; height:"+m+"px;"+(w||"")+'">';return Xe+='<div class="dhx_header" style=" width:'+(_e?xe:c-6)+'px;" >&nbsp;</div>',Xe+='<div class="dhx_title">'+T+"</div>",Xe+='<div class="dhx_body" style=" width:'+(_e?xe:c-(this._quirks?4:14))+"px; height:"+(_e?m-this.xy.event_header_height:m-(this._quirks?20:30)+1)+'px;">'+j+"</div>",Z.innerHTML=Xe+='<div class="dhx_footer" style=" width:'+(_e?xe-2:c-8)+"px;"+(J?" margin-top:-1px;":"")+'" ></div></div>',Z.style.zIndex=100,Z.firstChild},u.render_event_bar=function(y){var N=this._els.dhx_cal_data[0],C=this._colsS[y._sday],c=this._colsS[y._eday];c==C&&(c=this._colsS[y._eday+1]);var w=this._colsS.heights[y._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+y._sorder*this.xy.bar_height,T=document.createElement("div"),j=y._timed?"dhx_cal_event_clear":"dhx_cal_event_line",J=u.templates["event_class_"+y.layer]?u.templates["event_class_"+y.layer](y.start_date,y.end_date,y):u.templates.event_class(y.start_date,y.end_date,y);J&&(j=j+" "+J);var M='<div event_id="'+y.id+'" '+this.config.event_attribute+'="'+y.id+'" class="'+j+'" style="position:absolute; top:'+w+"px; left:"+C+"px; width:"+(c-C-15)+"px;"+(y._text_style||"")+'">';y._timed&&(M+=u.templates["event_bar_date_"+y.layer]?u.templates["event_bar_date_"+y.layer](y.start_date,y.end_date,y):u.templates.event_bar_date(y.start_date,y.end_date,y)),M+=u.templates["event_bar_text_"+y.layer]?u.templates["event_bar_text_"+y.layer](y.start_date,y.end_date,y):u.templates.event_bar_text(y.start_date,y.end_date,y)+"</div>)",T.innerHTML=M+="</div>",this._rendered.push(T.firstChild),N.appendChild(T.firstChild)},u.render_event=function(y){var N=u.xy.menu_width;if(u.getLayer(y.layer).noMenu&&(N=0),!(y._sday<0)){var C=u.locate_holder(y._sday);if(C){var c=60*y.start_date.getHours()+y.start_date.getMinutes(),m=60*y.end_date.getHours()+y.end_date.getMinutes()||60*u.config.last_hour,w=Math.round((60*c*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)+1,T=Math.max(u.xy.min_event_height,(m-c)*this.config.hour_size_px/60)+1,j=Math.floor((C.clientWidth-N)/y._count),J=y._sorder*j+1;y._inner||(j*=y._count-y._sorder);var M=this._render_v_bar(y.id,N+J,w,j,T,y._text_style,u.templates.event_header(y.start_date,y.end_date,y),u.templates.event_text(y.start_date,y.end_date,y));if(this._rendered.push(M),C.appendChild(M),J=J+parseInt(C.style.left,10)+N,w+=this._dy_shift,M.style.zIndex=this._layers_zindex[y.layer],this._edit_id==y.id){M.style.zIndex=parseInt(M.style.zIndex)+1;var Z=M.style.zIndex;j=Math.max(j-4,u.xy.editor_width),(M=document.createElement("div")).setAttribute("event_id",y.id),M.setAttribute(this.config.event_attribute,y.id),this.set_xy(M,j,T-20,J,w+14),M.className="dhx_cal_editor",M.style.zIndex=Z;var K=document.createElement("div");this.set_xy(K,j-6,T-26),K.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",K.style.zIndex=Z,M.appendChild(K),this._els.dhx_cal_data[0].appendChild(M),this._rendered.push(M),K.innerHTML="<textarea class='dhx_cal_editor'>"+y.text+"</textarea>",this._quirks7&&(K.firstChild.style.height=T-12+"px"),this._editor=K.firstChild,this._editor.addEventListener("keypress",function(ke){if(ke.shiftKey)return!0;var qe=ke.keyCode;qe==u.keys.edit_save&&u.editStop(!0),qe==u.keys.edit_cancel&&u.editStop(!1)}),this._editor.addEventListener("selectstart",function(ke){return ke.cancelBubble=!0,!0}),K.firstChild.focus(),this._els.dhx_cal_data[0].scrollLeft=0,K.firstChild.select()}if(this._select_id==y.id){M.style.zIndex=parseInt(M.style.zIndex)+1;for(var ce=this.config["icons_"+(this._edit_id==y.id?"edit":"select")],_e="",xe=0;xe<ce.length;xe++)_e+="<div class='dhx_menu_icon "+ce[xe]+"' title='"+this.locale.labels[ce[xe]]+"'></div>";var Pe=this._render_v_bar(y.id,J-N+1,w,N,20*ce.length+26,"","<div class='dhx_menu_head'></div>",_e,!0);Pe.style.left=J-N+1,Pe.style.zIndex=M.style.zIndex,this._els.dhx_cal_data[0].appendChild(Pe),this._rendered.push(Pe)}}}},u.filter_agenda=function(y,N){var C=u.getLayer(N.layer);return C&&C.visible}})},limit:function(u){u.config.limit_start=null,u.config.limit_end=null,u.config.limit_view=!1,u.config.check_limits=!0,u.config.mark_now=!0,u.config.display_marked_timespans=!0,u.config.overwrite_marked_timespans=!0,u._temp_limit_scope=function(){var ee=null,y=function(c,m,w){var j,J,M,T="object"==yn(c)?c:{days:c};return T.type="dhx_time_block",T.css="",m&&(w&&(T.sections=w),j=T,M=m,(J=c)instanceof Date&&M instanceof Date?(j.start_date=J,j.end_date=M):(j.days=J,j.zones=M),T=j),T};u.blockTime=function(c,m,w){var T=y(c,m,w);return u.addMarkedTimespan(T)},u.unblockTime=function(c,m,w){var T=y(c,m=m||"fullday",w);return u.deleteMarkedTimespan(T)},u.attachEvent("onBeforeViewChange",function(c,m,w,T){function j(J,M){var Z=u.config.limit_start,K=u.config.limit_end,ce=u.date.add(J,1,M);return J.valueOf()>K.valueOf()||ce<=Z.valueOf()}return!u.config.limit_view||!j(T=T||m,w=w||c)||m.valueOf()==T.valueOf()||(setTimeout(function(){if(u.$destroyed)return!0;var J=j(m,w)?u.config.limit_start:m;u.setCurrentView(j(J,w)?null:J,w)},1),!1)}),u.checkInMarkedTimespan=function(c,m,w){m=m||"default";for(var T=!0,j=new Date(c.start_date.valueOf()),J=u.date.add(j,1,"day"),M=u._marked_timespans;j<c.end_date;j=u.date.date_part(J),J=u.date.add(j,1,"day")){var Z=+u.date.date_part(new Date(j)),K=C(c,M,j.getDay(),Z,m);if(K)for(var ce=0;ce<K.length;ce+=2){var _e=u._get_zone_minutes(j),xe=c.end_date>J||c.end_date.getDate()!=j.getDate()?1440:u._get_zone_minutes(c.end_date),Pe=K[ce],ke=K[ce+1];if(Pe<xe&&ke>_e&&!(T="function"==typeof w&&w(c,_e,xe,Pe,ke)))break}}return!T};var N=u.checkLimitViolation=function(c){if(!c||!u.config.check_limits)return!0;var m=u,w=m.config,T=[];if(c.rec_type)for(var j=u.getRecDates(c),J=0;J<j.length;J++){var M=u._copy_event(c);u._lame_copy(M,j[J]),T.push(M)}else T=[c];for(var Z=!0,K=0;K<T.length;K++){var ce=!0;(M=T[K])._timed=u.isOneDayEvent(M),(ce=!w.limit_start||!w.limit_end||M.start_date.valueOf()>=w.limit_start.valueOf()&&M.end_date.valueOf()<=w.limit_end.valueOf())&&(ce=!u.checkInMarkedTimespan(M,"dhx_time_block",function(_e,xe,Pe,ke,qe){var rt=!0;return xe<=qe&&xe>=ke&&((1440==qe||Pe<=qe)&&(rt=!1),_e._timed&&m._drag_id&&"new-size"==m._drag_mode?(_e.start_date.setHours(0),_e.start_date.setMinutes(qe)):rt=!1),(Pe>=ke&&Pe<=qe||xe<ke&&Pe>qe)&&(_e._timed&&m._drag_id&&"new-size"==m._drag_mode?(_e.end_date.setHours(0),_e.end_date.setMinutes(ke)):rt=!1),rt})),ce||(ce=m.checkEvent("onLimitViolation")?m.callEvent("onLimitViolation",[M.id,M]):ce),Z=Z&&ce}return Z||(m._drag_id=null,m._drag_mode=null),Z};function C(c,m,w,T,j){var J=u,M=[],Z={_props:"map_to",matrix:"y_property"};for(var K in Z){var ce=Z[K];if(J[K])for(var _e in J[K]){var xe=J[K][_e][ce];c[xe]&&(M=J._add_timespan_zones(M,u._get_blocked_zones(m[_e],c[xe],w,T,j)))}}return J._add_timespan_zones(M,u._get_blocked_zones(m,"global",w,T,j))}u._get_blocked_zones=function(c,m,w,T,j){var J=[];if(c&&c[m])for(var Z=this._get_relevant_blocked_zones(w,T,c[m],j),K=0;K<Z.length;K++)J=this._add_timespan_zones(J,Z[K].zones);return J},u._get_relevant_blocked_zones=function(c,m,w,T){var j;return u.config.overwrite_marked_timespans?j=w[m]&&w[m][T]?w[m][T]:w[c]&&w[c][T]?w[c][T]:[]:(j=[],w[m]&&w[m][T]&&(j=j.concat(w[m][T])),w[c]&&w[c][T]&&(j=j.concat(w[c][T]))),j},u.attachEvent("onMouseDown",function(c){return"dhx_time_block"!=c}),u.attachEvent("onBeforeDrag",function(c){return!c||N(u.getEvent(c))}),u.attachEvent("onClick",function(c,m){return N(u.getEvent(c))}),u.attachEvent("onBeforeLightbox",function(c){var m=u.getEvent(c);return ee=[m.start_date,m.end_date],N(m)}),u.attachEvent("onEventSave",function(c,m,w){if(!m.start_date||!m.end_date){var T=u.getEvent(c);m.start_date=new Date(T.start_date),m.end_date=new Date(T.end_date)}if(m.rec_type){var j=u._lame_clone(m);return u._roll_back_dates(j),N(j)}return N(m)}),u.attachEvent("onEventAdded",function(c){if(!c)return!0;var m=u.getEvent(c);return!N(m)&&u.config.limit_start&&u.config.limit_end&&(m.start_date<u.config.limit_start&&(m.start_date=new Date(u.config.limit_start)),m.start_date.valueOf()>=u.config.limit_end.valueOf()&&(m.start_date=this.date.add(u.config.limit_end,-1,"day")),m.end_date<u.config.limit_start&&(m.end_date=new Date(u.config.limit_start)),m.end_date.valueOf()>=u.config.limit_end.valueOf()&&(m.end_date=this.date.add(u.config.limit_end,-1,"day")),m.start_date.valueOf()>=m.end_date.valueOf()&&(m.end_date=this.date.add(m.start_date,this.config.event_duration||this.config.time_step,"minute")),m._timed=this.isOneDayEvent(m)),!0}),u.attachEvent("onEventChanged",function(c){if(!c)return!0;var m=u.getEvent(c);if(!N(m)){if(!ee)return!1;m.start_date=ee[0],m.end_date=ee[1],m._timed=this.isOneDayEvent(m)}return!0}),u.attachEvent("onBeforeEventChanged",function(c,m,w){return N(c)}),u.attachEvent("onBeforeEventCreated",function(c){var m=u.getActionData(c).date,w={_timed:!0,start_date:m,end_date:u.date.add(m,u.config.time_step,"minute")};return N(w)}),u.attachEvent("onViewChange",function(){u._mark_now()}),u.attachEvent("onAfterSchedulerResize",function(){return window.setTimeout(function(){if(u.$destroyed)return!0;u._mark_now()},1),!0}),u.attachEvent("onTemplatesReady",function(){u._mark_now_timer=window.setInterval(function(){u._is_initialized()&&u._mark_now()},6e4)}),u._mark_now=function(c){this._els.dhx_now_time||(this._els.dhx_now_time=[]);var m=u._currentDate(),w=this.config;if(u._remove_mark_now(),!c&&w.mark_now&&m<this._max_date&&m>this._min_date&&m.getHours()>=w.first_hour&&m.getHours()<w.last_hour){var T=this.locate_holder_day(m);this._els.dhx_now_time=u._append_mark_now(T,m)}},u._append_mark_now=function(c,m){var w=u._get_zone_minutes(m),T={zones:[w,w+1],css:"dhx_now_time",type:"dhx_now_time"};if(!this._table_view){if(this._props&&this._props[this._mode]){var j,J,M=this._props[this._mode],Z=M.size||M.options.length;M.days>1?(M.size&&M.options.length&&(c=(M.position+c)/M.options.length*M.size),j=c,J=c+Z):J=(j=0)+Z;for(var K=[],ce=j;ce<J;ce++){var _e=ce;T.days=_e;var xe=u._render_marked_timespan(T,null,_e)[0];K.push(xe)}return K}return T.days=c,u._render_marked_timespan(T,null,c)}if("month"==this._mode)return T.days=+u.date.date_part(m),u._render_marked_timespan(T,null,null)},u._remove_mark_now=function(){for(var c=this._els.dhx_now_time,m=0;m<c.length;m++){var w=c[m],T=w.parentNode;T&&T.removeChild(w)}this._els.dhx_now_time=[]},u._marked_timespans={global:{}},u._get_zone_minutes=function(c){return 60*c.getHours()+c.getMinutes()},u._prepare_timespan_options=function(c){var m=[],w=[];if("fullweek"==c.days&&(c.days=[0,1,2,3,4,5,6]),c.days instanceof Array){for(var T=c.days.slice(),j=0;j<T.length;j++){var J=u._lame_clone(c);J.days=T[j],m.push.apply(m,u._prepare_timespan_options(J))}return m}if(!c||!(c.start_date&&c.end_date&&c.end_date>c.start_date||void 0!==c.days&&c.zones)&&!c.type)return m;"fullday"==c.zones&&(c.zones=[0,1440]),c.zones&&c.invert_zones&&(c.zones=u.invertZones(c.zones)),c.id=u.uid(),c.css=c.css||"",c.type=c.type||"default";var M=c.sections;if(M){for(var Z in M)if(M.hasOwnProperty(Z)){var K=M[Z];for(K instanceof Array||(K=[K]),j=0;j<K.length;j++)(rt=u._lame_copy({},c)).sections={},rt.sections[Z]=K[j],w.push(rt)}}else w.push(c);for(var ce=0;ce<w.length;ce++){var _e=w[ce],xe=_e.start_date,Pe=_e.end_date;if(xe&&Pe)for(var ke=u.date.date_part(new Date(xe)),qe=u.date.add(ke,1,"day");ke<Pe;){var rt;delete(rt=u._lame_copy({},_e)).start_date,delete rt.end_date,rt.days=ke.valueOf();var wt=xe>ke?u._get_zone_minutes(xe):0,Xe=Pe>qe||Pe.getDate()!=ke.getDate()?1440:u._get_zone_minutes(Pe);rt.zones=[wt,Xe],m.push(rt),ke=qe,qe=u.date.add(qe,1,"day")}else _e.days instanceof Date&&(_e.days=u.date.date_part(_e.days).valueOf()),_e.zones=c.zones.slice(),m.push(_e)}return m},u._get_dates_by_index=function(c,m,w){var T=[];m=u.date.date_part(new Date(m||u._min_date)),w=new Date(w||u._max_date);for(var j=m.getDay(),J=c-j>=0?c-j:7-m.getDay()+c,M=u.date.add(m,J,"day");M<w;M=u.date.add(M,1,"week"))T.push(M);return T},u._get_css_classes_by_config=function(c){var m=[];return"dhx_time_block"==c.type&&(m.push("dhx_time_block"),c.css&&m.push("dhx_time_block_reset")),m.push("dhx_marked_timespan",c.css),m.join(" ")},u._get_block_by_config=function(c){var m=document.createElement("div");return c.html&&("string"==typeof c.html?m.innerHTML=c.html:m.appendChild(c.html)),m},u._render_marked_timespan=function(c,m,w){var T=[],j=u.config,J=this._min_date,M=this._max_date,Z=!1;if(!j.display_marked_timespans)return T;if(!w&&0!==w){if(c.days<7)w=c.days;else{var K=new Date(c.days);if(Z=+K,!(+M>+K&&+J<=+K))return T;w=K.getDay()}var ce=J.getDay();ce>w?w=7-(ce-w):w-=ce}var _e=c.zones,xe=u._get_css_classes_by_config(c);if(u._table_view&&"month"==u._mode){var Pe=[],ke=[];if(m)Pe.push(m),ke.push(w);else{ke=Z?[Z]:u._get_dates_by_index(w);for(var qe=0;qe<ke.length;qe++)Pe.push(this._scales[ke[qe]])}for(qe=0;qe<Pe.length;qe++){m=Pe[qe],w=ke[qe];var rt=Math.floor((this._correct_shift(w,1)-J.valueOf())/(864e5*this._cols.length)),wt=this.locate_holder_day(w,!1)%this._cols.length;if(!this._ignores[wt]){var Xe=this.config.rtl?this._colsS.col_length-1-wt:wt,ct=u._get_block_by_config(c),Ze=Math.max(m.offsetHeight-1,0),ht=Math.max(m.offsetWidth-1,0),nt=this._colsS[Xe],jt=this._colsS.heights[rt]+(this._colsS.height?this.xy.month_scale_height+2:2)-1;ct.className=xe,ct.style.top=jt+"px",ct.style.lineHeight=ct.style.height=Ze+"px";for(var Yt=0;Yt<_e.length;Yt+=2){var Ht=_e[qe];if((hn=_e[qe+1])<=Ht)return[];(gn=ct.cloneNode(!0)).style.left=nt+Math.round(Ht/1440*ht)+"px",gn.style.width=Math.round((hn-Ht)/1440*ht)+"px",m.appendChild(gn),T.push(gn)}}}}else{var rn=w;if(this._ignores[this.locate_holder_day(w,!1)])return T;if(this._props&&this._props[this._mode]&&c.sections&&c.sections[this._mode]){var en=this._props[this._mode];rn=en.order[c.sections[this._mode]];var sn=en.order[c.sections[this._mode]];en.days>1?rn=rn*(en.size||en.options.length)+sn:(rn=sn,en.size&&rn>en.position+en.size&&(rn=0))}for(m=m||u.locate_holder(rn),qe=0;qe<_e.length;qe+=2){var hn,gn;if(Ht=Math.max(_e[qe],60*j.first_hour),(hn=Math.min(_e[qe+1],60*j.last_hour))<=Ht){if(qe+2<_e.length)continue;return[]}(gn=u._get_block_by_config(c)).className=xe;var jn=24*this.config.hour_size_px+1;gn.style.top=Math.round((60*Ht*1e3-36e5*this.config.first_hour)*this.config.hour_size_px/36e5)%jn+"px",gn.style.lineHeight=gn.style.height=Math.max(Math.round(60*(hn-Ht)*1e3*this.config.hour_size_px/36e5)%jn,1)+"px",m.appendChild(gn),T.push(gn)}}return T},u._mark_timespans=function(){var c=this._els.dhx_cal_data[0],m=[];if(u._table_view&&"month"==u._mode)for(var w in this._scales){var T=new Date(+w);m.push.apply(m,u._on_scale_add_marker(this._scales[w],T))}else{T=new Date(u._min_date);for(var j=0,J=c.childNodes.length;j<J;j++){var M=c.childNodes[j];M.firstChild&&u._getClassName(M.firstChild).indexOf("dhx_scale_hour")>-1||(m.push.apply(m,u._on_scale_add_marker(M,T)),T=u.date.add(T,1,"day"))}}return m},u.markTimespan=function(c){var m=!1;this._els.dhx_cal_data||(u.get_elements(),m=!0);var w=u._marked_timespans_ids,T=u._marked_timespans_types,j=u._marked_timespans;u.deleteMarkedTimespan(),u.addMarkedTimespan(c);var J=u._mark_timespans();return m&&(u._els=[]),u._marked_timespans_ids=w,u._marked_timespans_types=T,u._marked_timespans=j,J},u.unmarkTimespan=function(c){if(c)for(var m=0;m<c.length;m++){var w=c[m];w.parentNode&&w.parentNode.removeChild(w)}},u._addMarkerTimespanConfig=function(c){var m=u._marked_timespans,w=c.id,T=u._marked_timespans_ids;T[w]||(T[w]=[]);var j=c.days,J=c.sections,M=c.type;if(c.id=w,J){for(var Z in J)if(J.hasOwnProperty(Z)){m[Z]||(m[Z]={});var K=J[Z],ce=m[Z];ce[K]||(ce[K]={}),ce[K][j]||(ce[K][j]={}),ce[K][j][M]||(ce[K][j][M]=[],u._marked_timespans_types||(u._marked_timespans_types={}),u._marked_timespans_types[M]||(u._marked_timespans_types[M]=!0));var _e=ce[K][j][M];c._array=_e,_e.push(c),T[w].push(c)}}else m.global[j]||(m.global[j]={}),m.global[j][M]||(m.global[j][M]=[]),u._marked_timespans_types||(u._marked_timespans_types={}),u._marked_timespans_types[M]||(u._marked_timespans_types[M]=!0),c._array=_e=m.global[j][M],_e.push(c),T[w].push(c)},u._marked_timespans_ids={},u.addMarkedTimespan=function(c){var m=u._prepare_timespan_options(c);if(m.length){for(var w=m[0].id,T=0;T<m.length;T++)u._addMarkerTimespanConfig(m[T]);return w}},u._add_timespan_zones=function(c,m){var w=c.slice();if(m=m.slice(),!w.length)return m;for(var T=0;T<w.length;T+=2)for(var j=w[T],J=w[T+1],M=T+2==w.length,Z=0;Z<m.length;Z+=2){var K=m[Z],ce=m[Z+1];if(ce>J&&K<=J||K<j&&ce>=j)w[T]=Math.min(j,K),w[T+1]=Math.max(J,ce),T-=2;else{if(!M)continue;w.splice(T+(j>K?0:2),0,K,ce)}m.splice(Z--,2);break}return w},u._subtract_timespan_zones=function(c,m){for(var w=c.slice(),T=0;T<w.length;T+=2)for(var j=w[T],J=w[T+1],M=0;M<m.length;M+=2){var Z=m[M],K=m[M+1];if(K>j&&Z<J){var ce=!1;j>=Z&&J<=K&&w.splice(T,2),j<Z&&(w.splice(T,2,j,Z),ce=!0),J>K&&w.splice(ce?T+2:T,ce?0:2,K,J),T-=2;break}}return w},u.invertZones=function(c){return u._subtract_timespan_zones([0,1440],c.slice())},u._delete_marked_timespan_by_id=function(c){var m=u._marked_timespans_ids[c];if(m)for(var w=0;w<m.length;w++)for(var T=m[w],j=T._array,J=0;J<j.length;J++)if(j[J]==T){j.splice(J,1);break}},u._delete_marked_timespan_by_config=function(c){var m,w=u._marked_timespans,T=c.sections,j=c.days,J=c.type||"default";if(T){for(var M in T)if(T.hasOwnProperty(M)&&w[M]){var Z=T[M];w[M][Z]&&(m=w[M][Z])}}else m=w.global;if(m)if(void 0!==j)m[j]&&m[j][J]&&(u._addMarkerTimespanConfig(c),u._delete_marked_timespans_list(m[j][J],c));else for(var K in m)if(m[K][J]){var ce=u._lame_clone(c);c.days=K,u._addMarkerTimespanConfig(ce),u._delete_marked_timespans_list(m[K][J],c)}},u._delete_marked_timespans_list=function(c,m){for(var w=0;w<c.length;w++){var T=c[w],j=u._subtract_timespan_zones(T.zones,m.zones);if(j.length)T.zones=j;else{c.splice(w,1),w--;for(var J=u._marked_timespans_ids[T.id],M=0;M<J.length;M++)if(J[M]==T){J.splice(M,1);break}}}},u.deleteMarkedTimespan=function(c){if(arguments.length||(u._marked_timespans={global:{}},u._marked_timespans_ids={},u._marked_timespans_types={}),"object"!=yn(c))u._delete_marked_timespan_by_id(c);else{c.start_date&&c.end_date||(void 0!==c.days||c.type||(c.days="fullweek"),c.zones||(c.zones="fullday"));var m=[];if(c.type)m.push(c.type);else for(var w in u._marked_timespans_types)m.push(w);for(var T=u._prepare_timespan_options(c),j=0;j<T.length;j++)for(var J=T[j],M=0;M<m.length;M++){var Z=u._lame_clone(J);Z.type=m[M],u._delete_marked_timespan_by_config(Z)}}},u._get_types_to_render=function(c,m){var w=c?u._lame_copy({},c):{};for(var T in m||{})m.hasOwnProperty(T)&&(w[T]=m[T]);return w},u._get_configs_to_render=function(c){var m=[];for(var w in c)c.hasOwnProperty(w)&&m.push.apply(m,c[w]);return m},u._on_scale_add_marker=function(c,m){if(!u._table_view||"month"==u._mode){var w=m.getDay(),T=m.valueOf(),j=this._mode,J=u._marked_timespans,M=[],Z=[];if(this._props&&this._props[j]){var K=this._props[j],ce=K.options,_e=ce[u._get_unit_index(K,m)];if(K.days>1){var xe=Math.round((m-u._min_date)/864e5);m=u.date.add(u._min_date,Math.floor(xe/(K.size||ce.length)),"day"),m=u.date.date_part(m)}else m=u.date.date_part(new Date(this._date));if(w=m.getDay(),T=m.valueOf(),J[j]&&J[j][_e.key]){var ke=J[j][_e.key],qe=u._get_types_to_render(ke[w],ke[T]);M.push.apply(M,u._get_configs_to_render(qe))}}var rt=J.global;u.config.overwrite_marked_timespans?M.push.apply(M,u._get_configs_to_render(rt[T]||rt[w])):(rt[T]&&M.push.apply(M,u._get_configs_to_render(rt[T])),rt[w]&&M.push.apply(M,u._get_configs_to_render(rt[w])));for(var Xe=0;Xe<M.length;Xe++)Z.push.apply(Z,u._render_marked_timespan(M[Xe],c,m));return Z}},u.attachEvent("onScaleAdd",function(){u._on_scale_add_marker.apply(u,arguments)}),u.dblclick_dhx_marked_timespan=function(c,m){u.callEvent("onScaleDblClick",[u.getActionData(c).date,m,c]),u.config.dblclick_create&&u.addEventNow(u.getActionData(c).date,null,c)}},u._temp_limit_scope()},map_view:function(u){var ee;u.xy.map_date_width=188,u.xy.map_icon_width=25,u.xy.map_description_width=400,u.config.map_resolve_event_location=!0,u.config.map_resolve_user_location=!0,u.config.map_initial_position=new google.maps.LatLng(48.724,8.215),u.config.map_error_position=new google.maps.LatLng(15,15),u.config.map_infowindow_max_width=300,u.config.map_type=google.maps.MapTypeId.ROADMAP,u.config.map_zoom_after_resolve=15,u.locale.labels.marker_geo_success="It seems you are here.",u.locale.labels.marker_geo_fail="Sorry, could not get your current position using geolocation.",u.templates.marker_date=u.date.date_to_str("%Y-%m-%d %H:%i"),u.templates.marker_text=function(y,N,C){return"<div><b>"+C.text+"</b><br/><br/>"+(C.event_location||"")+"<br/><br/>"+u.templates.marker_date(y)+" - "+u.templates.marker_date(N)+"</div>"},u.dblclick_dhx_map_area=function(){!this.config.readonly&&this.config.dblclick_create&&this.addEventNow({start_date:u._date,end_date:u.date.add(u._date,u.config.time_step,"minute")})},u.templates.map_time=function(y,N,C){return u.config.rtl&&!C._timed?u.templates.day_date(N)+" &ndash; "+u.templates.day_date(y):C._timed?this.day_date(C.start_date,C.end_date,C)+" "+this.event_date(y):u.templates.day_date(y)+" &ndash; "+u.templates.day_date(N)},u.templates.map_text=function(y,N,C){return C.text},u.date.map_start=function(y){return y},u.date.add_map=function(y,N,C){return new Date(y.valueOf())},u.templates.map_date=function(y,N,C){return""},u._latLngUpdate=!1,u.attachEvent("onSchedulerReady",function(){u._isMapPositionSet=!1;var y=document.createElement("div");y.className="dhx_map",y.id="dhx_gmap",y.style.display="none",u._obj.appendChild(y),u._els.dhx_gmap=[],u._els.dhx_gmap.push(y),T("dhx_gmap");var N={zoom:u.config.map_initial_zoom||10,center:u.config.map_initial_position,mapTypeId:u.config.map_type||google.maps.MapTypeId.ROADMAP},C=new google.maps.Map(document.getElementById("dhx_gmap"),N);C.disableDefaultUI=!1,C.disableDoubleClickZoom=!u.config.readonly,google.maps.event.addListener(C,"dblclick",function(K){if(!u.config.readonly&&u.config.dblclick_create){var ce=K.latLng;ee.geocode({latLng:ce},function(_e,xe){xe==google.maps.GeocoderStatus.OK&&u.addEventNow({lat:(ce=_e[0].geometry.location).lat(),lng:ce.lng(),event_location:_e[0].formatted_address,start_date:u._date,end_date:u.date.add(u._date,u.config.time_step,"minute")})})}});var c={content:""};u.config.map_infowindow_max_width&&(c.maxWidth=u.config.map_infowindow_max_width),u.map={_points:[],_markers:[],_infowindow:new google.maps.InfoWindow(c),_infowindows_content:[],_initialization_count:-1,_obj:C},ee=new google.maps.Geocoder,u.config.map_resolve_user_location&&navigator.geolocation&&(u._isMapPositionSet||navigator.geolocation.getCurrentPosition(function(K){var ce=new google.maps.LatLng(K.coords.latitude,K.coords.longitude);C.setCenter(ce),C.setZoom(u.config.map_zoom_after_resolve||10),u.map._infowindow.setContent(u.locale.labels.marker_geo_success),u.map._infowindow.position=C.getCenter(),u.map._infowindow.open(C),u._isMapPositionSet=!0},function(){u.map._infowindow.setContent(u.locale.labels.marker_geo_fail),u.map._infowindow.setPosition(C.getCenter()),u.map._infowindow.open(C),u._isMapPositionSet=!0})),google.maps.event.addListener(C,"resize",function(K){y.style.zIndex="5",C.setZoom(C.getZoom())}),google.maps.event.addListener(C,"tilesloaded",function(K){y.style.zIndex="5"}),y.style.display="none";var m=u.render_data;function w(){var K=u.get_visible_events();K.sort(function(Ze,ht){return Ze.start_date.valueOf()==ht.start_date.valueOf()?Ze.id>ht.id?1:-1:Ze.start_date>ht.start_date?1:-1});for(var ce="<div "+(rt=u._waiAria.mapAttrString())+" class='dhx_map_area'>",_e=0;_e<K.length;_e++){var xe=K[_e],Pe=xe.id==u._selected_event_id?"dhx_map_line highlight":"dhx_map_line",ke=xe.color?"background:"+xe.color+";":"",qe=xe.textColor?"color:"+xe.textColor+";":"",rt=u._waiAria.mapRowAttrString(xe),wt=u._waiAria.mapDetailsBtnString();ce+="<div "+rt+" class='"+Pe+"' event_id='"+xe.id+"' "+u.config.event_attribute+"='"+xe.id+"' style='"+ke+qe+(xe._text_style||"")+" width: "+(u.xy.map_date_width+u.xy.map_description_width+2)+"px;'><div class='dhx_map_event_time' style='width: "+u.xy.map_date_width+"px;' >"+u.templates.map_time(xe.start_date,xe.end_date,xe)+"</div>",ce+="<div "+wt+" class='dhx_event_icon icon_details'>&nbsp;</div>",ce+="<div class='line_description' style='width:"+(u.xy.map_description_width-u.xy.map_icon_width)+"px;'>"+u.templates.map_text(xe.start_date,xe.end_date,xe)+"</div></div>"}ce+="<div class='dhx_v_border' style="+(u.config.rtl?"'right: ":"'left: ")+(u.xy.map_date_width-2)+"px;'></div><div class='dhx_v_border_description'></div></div>",u._els.dhx_cal_data[0].scrollTop=0,u._els.dhx_cal_data[0].innerHTML=ce,u._els.dhx_cal_data[0].style.width=u.xy.map_date_width+u.xy.map_description_width+1+"px";var Xe=u._els.dhx_cal_data[0].firstChild.childNodes,ct=u._getNavDateElement();for(ct&&(ct.innerHTML=u.templates[u._mode+"_date"](u._min_date,u._max_date,u._mode)),u._rendered=[],_e=0;_e<Xe.length-2;_e++)u._rendered[_e]=Xe[_e]}function T(K){var ce=document.getElementById(K),_e=u._y-u.xy.nav_height;_e<0&&(_e=0);var xe=u._x-u.xy.map_date_width-u.xy.map_description_width-1;xe<0&&(xe=0),ce.style.height=_e+"px",ce.style.width=xe+"px",u.config.rtl?ce.style.marginRight=u.xy.map_date_width+u.xy.map_description_width+1+"px":ce.style.marginLeft=u.xy.map_date_width+u.xy.map_description_width+1+"px",ce.style.marginTop=u.xy.nav_height+2+"px"}u.render_data=function(K,ce){if("map"!=this._mode)return m.apply(this,arguments);w();for(var _e=u.get_visible_events(),xe=0;xe<_e.length;xe++)u.map._markers[_e[xe].id]||J(_e[xe],!1,!1)},u.map_view=function(K){u.map._initialization_count++;var ce,_e=u._els.dhx_gmap[0];if(u._els.dhx_cal_data[0].style.width=u.xy.map_date_width+u.xy.map_description_width+1+"px",u._min_date=u.config.map_start||u._currentDate(),u._max_date=u.config.map_end||u.date.add(u._currentDate(),1,"year"),u._table_view=!0,function(ke){if(ke){var qe=u.locale.labels;u._els.dhx_cal_header[0].innerHTML="<div class='dhx_map_line' style='width: "+(u.xy.map_date_width+u.xy.map_description_width+2)+"px;' ><div class='headline_date' style='width: "+u.xy.map_date_width+"px;'>"+qe.date+"</div><div class='headline_description' style='width: "+u.xy.map_description_width+"px;'>"+qe.description+"</div></div>",u._table_view=!0,u.set_sizes()}}(K),K){(function(){u._selected_event_id=null,u.map._infowindow.close();var ke=u.map._markers;for(var qe in ke)ke.hasOwnProperty(qe)&&(ke[qe].setMap(null),delete u.map._markers[qe],u.map._infowindows_content[qe]&&delete u.map._infowindows_content[qe])})(),w(),_e.style.display="block",T("dhx_gmap"),ce=u.map._obj.getCenter();for(var xe=u.get_visible_events(),Pe=0;Pe<xe.length;Pe++)u.map._markers[xe[Pe].id]||J(xe[Pe])}else _e.style.display="none";google.maps.event.trigger(u.map._obj,"resize"),0===u.map._initialization_count&&ce&&u.map._obj.setCenter(ce),u._selected_event_id&&j(u._selected_event_id)};var j=function(K){u.map._obj.setCenter(u.map._points[K]),u.callEvent("onClick",[K])},J=function(K,ce,_e){var xe=u.config.map_error_position;K.lat&&K.lng&&(xe=new google.maps.LatLng(K.lat,K.lng));var Pe=u.templates.marker_text(K.start_date,K.end_date,K);u._new_event||(u.map._infowindows_content[K.id]=Pe,u.map._markers[K.id]&&u.map._markers[K.id].setMap(null),u.map._markers[K.id]=new google.maps.Marker({position:xe,map:u.map._obj}),google.maps.event.addListener(u.map._markers[K.id],"click",function(){u.map._infowindow.setContent(u.map._infowindows_content[K.id]),u.map._infowindow.open(u.map._obj,u.map._markers[K.id]),u._selected_event_id=K.id,u.render_data()}),u.map._points[K.id]=xe,ce&&u.map._obj.setCenter(u.map._points[K.id]),_e&&u.callEvent("onClick",[K.id]))};u.attachEvent("onClick",function(K,ce){if("map"==this._mode){u._selected_event_id=K;for(var _e=0;_e<u._rendered.length;_e++)u._rendered[_e].className="dhx_map_line",u._rendered[_e].getAttribute(u.config.event_attribute)==K&&(u._rendered[_e].className+=" highlight");u.map._points[K]&&u.map._markers[K]&&(u.map._obj.setCenter(u.map._points[K]),google.maps.event.trigger(u.map._markers[K],"click"))}return!0});var M=function(K){K.event_location&&ee?ee.geocode({address:K.event_location,language:u.uid().toString()},function(ce,_e){var xe={};_e!=google.maps.GeocoderStatus.OK?(xe=u.callEvent("onLocationError",[K.id]))&&!0!==xe||(xe=u.config.map_error_position):xe=ce[0].geometry.location,K.lat=xe.lat(),K.lng=xe.lng(),u._selected_event_id=K.id,u._latLngUpdate=!0,u.callEvent("onEventChanged",[K.id,K]),J(K,!0,!0)}):J(K,!0,!0)},Z=function(K){K.event_location&&ee&&ee.geocode({address:K.event_location,language:u.uid().toString()},function(ce,_e){var xe={};_e!=google.maps.GeocoderStatus.OK?(xe=u.callEvent("onLocationError",[K.id]))&&!0!==xe||(xe=u.config.map_error_position):xe=ce[0].geometry.location,K.lat=xe.lat(),K.lng=xe.lng(),u._latLngUpdate=!0,u.callEvent("onEventChanged",[K.id,K])})};u.attachEvent("onEventChanged",function(K,ce){if(this._latLngUpdate)this._latLngUpdate=!1;else{var _e=u.getEvent(K);_e.start_date<u._min_date&&_e.end_date>u._min_date||_e.start_date<u._max_date&&_e.end_date>u._max_date||_e.start_date.valueOf()>=u._min_date&&_e.end_date.valueOf()<=u._max_date?(u.map._markers[K]&&u.map._markers[K].setMap(null),M(_e)):(u._selected_event_id=null,u.map._infowindow.close(),u.map._markers[K]&&u.map._markers[K].setMap(null))}return!0}),u.attachEvent("onEventIdChange",function(K,ce){var _e=u.getEvent(ce);return(_e.start_date<u._min_date&&_e.end_date>u._min_date||_e.start_date<u._max_date&&_e.end_date>u._max_date||_e.start_date.valueOf()>=u._min_date&&_e.end_date.valueOf()<=u._max_date)&&(u.map._markers[K]&&(u.map._markers[K].setMap(null),delete u.map._markers[K]),u.map._infowindows_content[K]&&delete u.map._infowindows_content[K],M(_e)),!0}),u.attachEvent("onEventAdded",function(K,ce){return u._dataprocessor||(ce.start_date<u._min_date&&ce.end_date>u._min_date||ce.start_date<u._max_date&&ce.end_date>u._max_date||ce.start_date.valueOf()>=u._min_date&&ce.end_date.valueOf()<=u._max_date)&&(u.map._markers[K]&&u.map._markers[K].setMap(null),M(ce)),!0}),u.attachEvent("onBeforeEventDelete",function(K,ce){return u.map._markers[K]&&u.map._markers[K].setMap(null),u._selected_event_id=null,u.map._infowindow.close(),!0}),u._event_resolve_delay=1500,u.attachEvent("onEventLoading",function(K){return u.config.map_resolve_event_location&&K.event_location&&!K.lat&&!K.lng&&(u._event_resolve_delay+=1500,ce=Z,_e=this,xe=[K],setTimeout(function(){if(u.$destroyed)return!0;var ke=ce.apply(_e,xe);return ce=_e=xe=null,ke},u._event_resolve_delay||1)),!0;var ce,_e,xe}),u.attachEvent("onEventCancel",function(K,ce){return ce&&(u.map._markers[K]&&u.map._markers[K].setMap(null),u.map._infowindow.close()),!0})})},minical:function(u){var ee=u._createDomEventScope();u.templates.calendar_month=u.date.date_to_str("%F %Y"),u.templates.calendar_scale_date=u.date.date_to_str("%D"),u.templates.calendar_date=u.date.date_to_str("%d"),u.config.minicalendar={mark_events:!0},u._synced_minicalendars=[],u.renderCalendar=function(y,N,C){var c=null,m=y.date||u._currentDate();if("string"==typeof m&&(m=this.templates.api_date(m)),N)c=this._render_calendar(N.parentNode,m,y,N),u.unmarkCalendar(c);else{var w=y.container,T=y.position;if("string"==typeof w&&(w=document.getElementById(w)),"string"==typeof T&&(T=document.getElementById(T)),T&&void 0===T.left&&void 0===T.right){var j=u.$domHelpers.getOffset(T);T={top:j.top+T.offsetHeight,left:j.left}}w||(w=u._get_def_cont(T)),(c=this._render_calendar(w,m,y)).$_eventAttached||(c.$_eventAttached=!0,ee.attach(c,"click",function(ke){var qe=ke.target||ke.srcElement,rt=u.$domHelpers;if(rt.closest(qe,".dhx_month_head")&&!rt.closest(qe,".dhx_after")&&!rt.closest(qe,".dhx_before")){var wt=rt.closest(qe,"[data-cell-date]").getAttribute("data-cell-date"),Xe=u.templates.parse_date(wt);u.unmarkCalendar(this),u.markCalendar(this,Xe,"dhx_calendar_click"),this._last_date=Xe,this.conf.handler&&this.conf.handler.call(u,Xe,this)}}.bind(c)))}if(u.config.minicalendar.mark_events)for(var J=u.date.month_start(m),M=u.date.add(J,1,"month"),Z=this.getEvents(J,M),K=this["filter_"+this._mode],ce={},_e=0;_e<Z.length;_e++){var xe=Z[_e];if(!K||K(xe.id,xe)){var Pe=xe.start_date;for(Pe.valueOf()<J.valueOf()&&(Pe=J),Pe=u.date.date_part(new Date(Pe.valueOf()));Pe<xe.end_date&&(ce[+Pe]||(ce[+Pe]=!0,this.markCalendar(c,Pe,"dhx_year_event")),!((Pe=this.date.add(Pe,1,"day")).valueOf()>=M.valueOf())););}}return this._markCalendarCurrentDate(c),c.conf=y,y.sync&&!C&&this._synced_minicalendars.push(c),c.conf._on_xle_handler||(c.conf._on_xle_handler=u.attachEvent("onXLE",function(){u.updateCalendar(c,c.conf.date)})),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&c.setAttribute("role","application"),c},u._get_def_cont=function(y){return this._def_count||(this._def_count=document.createElement("div"),this._def_count.className="dhx_minical_popup",u.event(this._def_count,"click",function(N){N.cancelBubble=!0}),document.body.appendChild(this._def_count)),y.left&&(this._def_count.style.left=y.left+"px"),y.right&&(this._def_count.style.right=y.right+"px"),y.top&&(this._def_count.style.top=y.top+"px"),y.bottom&&(this._def_count.style.bottom=y.bottom+"px"),this._def_count._created=new Date,this._def_count},u._locateCalendar=function(y,N){if("string"==typeof N&&(N=u.templates.api_date(N)),+N>+y._max_date||+N<+y._min_date)return null;for(var C=y.querySelector(".dhx_year_body").childNodes[0],c=0,m=new Date(y._min_date);+this.date.add(m,1,"week")<=+N;)m=this.date.add(m,1,"week"),c++;var w=u.config.start_on_monday,T=(N.getDay()||(w?7:0))-(w?1:0);return C.rows[c].cells[T].firstChild},u.markCalendar=function(y,N,C){var c=this._locateCalendar(y,N);c&&(c.className+=" "+C)},u.unmarkCalendar=function(y,N,C){if(C=C||"dhx_calendar_click",N=N||y._last_date){var c=this._locateCalendar(y,N);c&&(c.className=(c.className||"").replace(RegExp(C,"g")))}},u._week_template=function(y){for(var N=y||250,C=0,c=document.createElement("div"),m=this.date.week_start(u._currentDate()),w=0;w<7;w++)this._cols[w]=Math.floor(N/(7-w)),this._render_x_header(w,C,m,c),m=this.date.add(m,1,"day"),N-=this._cols[w],C+=this._cols[w];return c.lastChild.className+=" dhx_scale_bar_last",c},u.updateCalendar=function(y,N){y.conf.date=N,this.renderCalendar(y.conf,y,!0)},u._mini_cal_arrows=["&nbsp;","&nbsp;"],u._render_calendar=function(y,N,C,c){var m=u.templates,w=this._cols;this._cols=[];var T=this._mode;this._mode="calendar";var j=this._colsS;this._colsS={height:0};var J=new Date(this._min_date),M=new Date(this._max_date),Z=new Date(u._date),K=m.month_day,ce=this._ignores_detected;this._ignores_detected=0,m.month_day=m.calendar_date,N=this.date.month_start(N);var _e,xe=this._week_template(y.offsetWidth-1-this.config.minicalendar.padding);c?_e=c:(_e=document.createElement("div")).className="dhx_cal_container dhx_mini_calendar",_e.setAttribute("date",this._helpers.formatDate(N)),_e.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid"+(u.config.rtl?" dhx_grid_rtl'>":"'>")+"<div class='dhx_year_week'>"+(xe?xe.innerHTML:"")+"</div><div class='dhx_year_body'></div></div>";var Pe=_e.querySelector(".dhx_year_month"),ke=_e.querySelector(".dhx_year_week"),qe=_e.querySelector(".dhx_year_body");if(Pe.innerHTML=this.templates.calendar_month(N),C.navigation)for(var rt=function(gn,jn){var gi=u.date.add(gn._date,jn,"month");u.updateCalendar(gn,gi),u._date.getMonth()==gn._date.getMonth()&&u._date.getFullYear()==gn._date.getFullYear()&&u._markCalendarCurrentDate(gn)},wt=["dhx_cal_prev_button","dhx_cal_next_button"],Xe=["left:1px;top:2px;position:absolute;","left:auto; right:1px;top:2px;position:absolute;"],ct=[-1,1],Ze=function(gn){return function(){if(C.sync)for(var jn=u._synced_minicalendars,gi=0;gi<jn.length;gi++)rt(jn[gi],gn);else u.config.rtl&&(gn=-gn),rt(_e,gn)}},ht=[u.locale.labels.prev,u.locale.labels.next],nt=0;nt<2;nt++){var jt=document.createElement("div");jt.className=wt[nt],u._waiAria.headerButtonsAttributes(jt,ht[nt]),jt.style.cssText=Xe[nt],jt.innerHTML=this._mini_cal_arrows[nt],Pe.appendChild(jt),ee.attach(jt,"click",Ze(ct[nt]))}_e._date=new Date(N),_e.week_start=(N.getDay()-(this.config.start_on_monday?1:0)+7)%7;var Yt=_e._min_date=this.date.week_start(N);_e._max_date=this.date.add(_e._min_date,6,"week"),this._reset_month_scale(qe,N,Yt,6),c||y.appendChild(_e),ke.style.height=ke.childNodes[0].offsetHeight-1+"px";var Ht=u.uid();u._waiAria.minicalHeader(Pe,Ht),u._waiAria.minicalGrid(_e.querySelector(".dhx_year_grid"),Ht),u._waiAria.minicalRow(ke);for(var rn=ke.querySelectorAll(".dhx_scale_bar"),en=0;en<rn.length;en++)u._waiAria.minicalHeadCell(rn[en]);var sn=qe.querySelectorAll("td"),hn=new Date(Yt);for(en=0;en<sn.length;en++)u._waiAria.minicalDayCell(sn[en],new Date(hn)),hn=u.date.add(hn,1,"day");return u._waiAria.minicalHeader(Pe,Ht),this._cols=w,this._mode=T,this._colsS=j,this._min_date=J,this._max_date=M,u._date=Z,m.month_day=K,this._ignores_detected=ce,_e},u.destroyCalendar=function(y,N){!y&&this._def_count&&this._def_count.firstChild&&(N||(new Date).valueOf()-this._def_count._created.valueOf()>500)&&(y=this._def_count.firstChild),y&&(ee.detachAll(),y.innerHTML="",y.parentNode&&y.parentNode.removeChild(y),this._def_count&&(this._def_count.style.top="-1000px"),y.conf&&y.conf._on_xle_handler&&u.detachEvent(y.conf._on_xle_handler))},u.isCalendarVisible=function(){return!!(this._def_count&&parseInt(this._def_count.style.top,10)>0)&&this._def_count},u.attachEvent("onTemplatesReady",function(){u.event(document.body,"click",function(){u.destroyCalendar()})},{once:!0}),u.templates.calendar_time=u.date.date_to_str("%d-%m-%Y"),u.form_blocks.calendar_time={render:function(y){var N="<input class='dhx_readonly' type='text' readonly='true'>",C=u.config,c=this.date.date_part(u._currentDate()),m=1440,w=0;C.limit_time_select&&(w=60*C.first_hour,m=60*C.last_hour+1),c.setHours(w/60),y._time_values=[],N+=" <select class='dhx_lightbox_time_select'>";for(var T=w;T<m;T+=1*this.config.time_step)N+="<option value='"+T+"'>"+this.templates.time_picker(c)+"</option>",y._time_values.push(T),c=this.date.add(c,this.config.time_step,"minute");return"<div style='height:30px;padding-top:0; font-size:inherit;' class='dhx_section_time dhx_lightbox_minical'>"+(N+="</select>")+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+N+"</div>"},set_value:function(y,N,C,c){var m,w,T=y.getElementsByTagName("input"),j=y.getElementsByTagName("select"),J=function(Pe,ke,qe){u.event(Pe,"click",function(){u.destroyCalendar(null,!0),u.renderCalendar({position:Pe,date:new Date(this._date),navigation:!0,handler:function(rt){Pe.value=u.templates.calendar_time(rt),Pe._date=new Date(rt),u.destroyCalendar(),u.config.event_duration&&u.config.auto_end_date&&0===qe&&ce()}})})};if(u.config.full_day){if(!y._full_day){var M="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+u.locale.labels.full_day+"&nbsp;</label></input>";u.config.wide_form||(M=y.previousSibling.innerHTML+M),y.previousSibling.innerHTML=M,y._full_day=!0}var Z=y.previousSibling.getElementsByTagName("input")[0],K=0===u.date.time_part(C.start_date)&&0===u.date.time_part(C.end_date);Z.checked=K,j[0].disabled=Z.checked,j[1].disabled=Z.checked,Z.$_eventAttached||(Z.$_eventAttached=!0,u.event(Z,"click",function(){if(!0===Z.checked){var Pe={};u.form_blocks.calendar_time.get_value(y,Pe),m=u.date.date_part(Pe.start_date),(+(w=u.date.date_part(Pe.end_date))==+m||+w>=+m&&(0!==C.end_date.getHours()||0!==C.end_date.getMinutes()))&&(w=u.date.add(w,1,"day"))}var ke=m||C.start_date,qe=w||C.end_date;_e(T[0],ke),_e(T[1],qe),j[0].value=60*ke.getHours()+ke.getMinutes(),j[1].value=60*qe.getHours()+qe.getMinutes(),j[0].disabled=Z.checked,j[1].disabled=Z.checked}))}if(u.config.event_duration&&u.config.auto_end_date){var ce=function(){u.config.auto_end_date&&u.config.event_duration&&(m=u.date.add(T[0]._date,j[0].value,"minute"),w=new Date(m.getTime()+60*u.config.event_duration*1e3),T[1].value=u.templates.calendar_time(w),T[1]._date=u.date.date_part(new Date(w)),j[1].value=60*w.getHours()+w.getMinutes())};j[0].$_eventAttached||j[0].addEventListener("change",ce)}function _e(Pe,ke,qe){J(Pe,ke,qe),Pe.value=u.templates.calendar_time(ke),Pe._date=u.date.date_part(new Date(ke))}function xe(Pe){for(var ke=c._time_values,qe=60*Pe.getHours()+Pe.getMinutes(),rt=qe,wt=!1,Xe=0;Xe<ke.length;Xe++){var ct=ke[Xe];if(ct===qe){wt=!0;break}ct<qe&&(rt=ct)}return wt||rt?wt?qe:rt:-1}_e(T[0],C.start_date,0),_e(T[1],C.end_date,1),J=function(){},j[0].value=xe(C.start_date),j[1].value=xe(C.end_date)},get_value:function(y,N){var C=y.getElementsByTagName("input"),c=y.getElementsByTagName("select");return N.start_date=u.date.add(C[0]._date,c[0].value,"minute"),N.end_date=u.date.add(C[1]._date,c[1].value,"minute"),N.end_date<=N.start_date&&(N.end_date=u.date.add(N.start_date,u.config.time_step,"minute")),{start_date:new Date(N.start_date),end_date:new Date(N.end_date)}},focus:function(y){}},u.linkCalendar=function(y,N){var C=function(){var m=new Date(u._date.valueOf());return N&&(m=N(m)),m.setDate(1),u.updateCalendar(y,m),!0};u.attachEvent("onViewChange",C),u.attachEvent("onXLE",C),u.attachEvent("onEventAdded",C),u.attachEvent("onEventChanged",C),u.attachEvent("onEventDeleted",C),C()},u._markCalendarCurrentDate=function(y){var N=u.getState(),C=N.min_date,c=N.max_date,m=N.mode,w=u.date.month_start(new Date(y._date)),T=u.date.add(w,1,"month");if(!({month:!0,year:!0,agenda:!0,grid:!0}[m]||C.valueOf()<=w.valueOf()&&c.valueOf()>=T.valueOf()))for(var j=C;j.valueOf()<c.valueOf();)w.valueOf()<=j.valueOf()&&T>j&&u.markCalendar(y,j,"dhx_calendar_click"),j=u.date.add(j,1,"day")},u.attachEvent("onEventCancel",function(){u.destroyCalendar(null,!0)}),u.attachEvent("onDestroy",function(){u.destroyCalendar()})},monthheight:function(u){u.attachEvent("onTemplatesReady",function(){u.xy.scroll_width=0;var ee=u.render_view_data;u.render_view_data=function(){var N=this._els.dhx_cal_data[0];N.firstChild._h_fix=!0,ee.apply(u,arguments);var C=parseInt(N.style.height);N.style.height="1px",N.style.height=N.scrollHeight+"px",this._obj.style.height=this._obj.clientHeight+N.scrollHeight-C+"px"};var y=u._reset_month_scale;u._reset_month_scale=function(N,C,c,m){var w={clientHeight:100};y.apply(u,[w,C,c,m]),N.innerHTML=w.innerHTML}})},multisection:function(u){Qe("Multisection",u.assert)},multisource:function(u){var ee=u._load;u._load=function(y,N){if("object"==Xi(y=y||this._load_url))for(var C=(w=void 0,(w=function(){}).prototype=this._loaded,w),c=0;c<y.length;c++)this._loaded=new C,ee.call(this,y[c],N);else ee.apply(this,arguments);var w}},mvc:function(u){var ee,y={use_id:!1};function N(m){var w={};for(var T in m)0!==T.indexOf("_")&&(w[T]=m[T]);return y.use_id||delete w.id,w}function C(m){m._not_render=!1,m._render_wait&&m.render_view_data(),m._loading=!1,m.callEvent("onXLE",[])}function c(m){return y.use_id?m.id:m.cid}u.backbone=function(m,w){w&&(y=w),m.bind("change",function(J,M){var Z=c(J),K=u._events[Z]=J.toJSON();K.id=Z,u._init_event(K),clearTimeout(ee),ee=setTimeout(function(){if(u.$destroyed)return!0;u.updateView()},1)}),m.bind("remove",function(J,M){var Z=c(J);u._events[Z]&&u.deleteEvent(Z)});var T=[];function j(){if(u.$destroyed)return!0;T.length&&(u.parse(T,"json"),T=[])}m.bind("add",function(J,M){var Z=c(J);if(!u._events[Z]){var K=J.toJSON();K.id=Z,u._init_event(K),T.push(K),1==T.length&&setTimeout(j,1)}}),m.bind("request",function(J){var M;J instanceof Backbone.Collection&&((M=u)._loading=!0,M._not_render=!0,M.callEvent("onXLS",[]))}),m.bind("sync",function(J){J instanceof Backbone.Collection&&C(u)}),m.bind("error",function(J){J instanceof Backbone.Collection&&C(u)}),u.attachEvent("onEventCreated",function(J){var M=new m.model(u.getEvent(J));return u._events[J]=M.toJSON(),u._events[J].id=J,!0}),u.attachEvent("onEventAdded",function(J){if(!m.get(J)){var M=N(u.getEvent(J)),Z=new m.model(M),K=c(Z);K!=J&&this.changeEventId(J,K),m.add(Z),m.trigger("scheduler:add",Z)}return!0}),u.attachEvent("onEventChanged",function(J){var M=m.get(J),Z=N(u.getEvent(J));return M.set(Z),m.trigger("scheduler:change",M),!0}),u.attachEvent("onEventDeleted",function(J){var M=m.get(J);return M&&(m.trigger("scheduler:remove",M),m.remove(J)),!0})}},outerdrag:function(u){u.attachEvent("onTemplatesReady",function(){var ee,y=new dhtmlDragAndDropObject,N=y.stopDrag;function C(c,m,w,T){if(!u.checkEvent("onBeforeExternalDragIn")||u.callEvent("onBeforeExternalDragIn",[c,m,w,T,ee])){var j=u.attachEvent("onEventCreated",function(ce){u.callEvent("onExternalDragIn",[ce,c,ee])||(this._drag_mode=this._drag_id=null,this.deleteEvent(ce))}),J=u.getActionData(ee),M={start_date:new Date(J.date)};if(u.matrix&&u.matrix[u._mode]){var Z=u.matrix[u._mode];M[Z.y_property]=J.section;var K=u._locate_cell_timeline(ee);M.start_date=Z._trace_x[K.x],M.end_date=u.date.add(M.start_date,Z.x_step,Z.x_unit)}u._props&&u._props[u._mode]&&(M[u._props[u._mode].map_to]=J.section),u.addEventNow(M),u.detachEvent(j)}}y.stopDrag=function(c){return ee=c,N.apply(this,arguments)},y.addDragLanding(u._els.dhx_cal_data[0],{_drag:function(c,m,w,T){C(c,m,w,T)},_dragIn:function(c,m){return c},_dragOut:function(c){return this}}),dhtmlx.DragControl&&dhtmlx.DragControl.addDrop(u._els.dhx_cal_data[0],{onDrop:function(c,m,w,T){var j=dhtmlx.DragControl.getMaster(c);ee=T,C(c,j,m,T.target||T.srcElement)},onDragIn:function(c,m,w){return m}},!0)})},pdf:function(u){var ee,y,N=new RegExp("<[^>]*>","g"),C=new RegExp("<br[^>]*>","g");function c(Xe){return Xe.replace(C,"\n").replace(N,"")}function m(Xe,ct){Xe=parseFloat(Xe),ct=parseFloat(ct),isNaN(ct)||(Xe-=ct);var Ze=T(Xe);return Xe=Xe-Ze.width+Ze.cols*ee,isNaN(Xe)?"auto":100*Xe/ee}function w(Xe,ct,Ze){Xe=parseFloat(Xe),ct=parseFloat(ct),!isNaN(ct)&&Ze&&(Xe-=ct);var ht=T(Xe);return Xe=Xe-ht.width+ht.cols*ee,isNaN(Xe)?"auto":100*Xe/(ee-(isNaN(ct)?0:ct))}function T(Xe){for(var ct=0,Ze=u._els.dhx_cal_header[0].childNodes,ht=Ze[1]?Ze[1].childNodes:Ze[0].childNodes,nt=0;nt<ht.length;nt++){var Yt=parseFloat((ht[nt].style?ht[nt]:ht[nt].parentNode).style.width);if(!(Xe>Yt))break;Xe-=Yt+1,ct+=Yt+1}return{width:ct,cols:nt}}function j(Xe){return Xe=parseFloat(Xe),isNaN(Xe)?"auto":100*Xe/y}function J(Xe,ct){return(window.getComputedStyle?window.getComputedStyle(Xe,null)[ct]:Xe.currentStyle?Xe.currentStyle[ct]:null)||""}function M(Xe,ct){for(var Ze=parseInt(Xe.style.left,10),ht=0;ht<u._cols.length;ht++)if((Ze-=u._cols[ht])<0)return ht;return ct}function Z(Xe,ct){for(var Ze=parseInt(Xe.style.top,10),ht=0;ht<u._colsS.heights.length;ht++)if(u._colsS.heights[ht]>Ze)return ht;return ct}function K(Xe){return Xe?"<"+Xe+">":""}function ce(Xe){return Xe?"</"+Xe+">":""}function _e(Xe,ct,Ze,ht){var nt="<"+Xe+" profile='"+ct+"'";return Ze&&(nt+=" header='"+Ze+"'"),ht&&(nt+=" footer='"+ht+"'"),nt+">"}function xe(){var Xe="",ct=u._mode;if(u.matrix&&u.matrix[u._mode]&&(ct="cell"==u.matrix[u._mode].render?"matrix":"timeline"),Xe+="<scale mode='"+ct+"' today='"+u._els.dhx_cal_date[0].innerHTML+"'>","week_agenda"==u._mode)for(var Ze=u._els.dhx_cal_data[0].getElementsByTagName("DIV"),ht=0;ht<Ze.length;ht++)"dhx_wa_scale_bar"==Ze[ht].className&&(Xe+="<column>"+c(Ze[ht].innerHTML)+"</column>");else if("agenda"==u._mode||"map"==u._mode)Xe+="<column>"+c((Ze=u._els.dhx_cal_header[0].childNodes[0].childNodes)[0].innerHTML)+"</column><column>"+c(Ze[1].innerHTML)+"</column>";else if("year"==u._mode)for(Ze=u._els.dhx_cal_data[0].childNodes,ht=0;ht<Ze.length;ht++)Xe+="<month label='"+c(Ze[ht].querySelector(".dhx_year_month").innerHTML)+"'>",Xe+=ke(Ze[ht].querySelector(".dhx_year_week").childNodes),Xe+=Pe(Ze[ht].querySelector(".dhx_year_body")),Xe+="</month>";else{Xe+="<x>",Xe+=ke(Ze=u._els.dhx_cal_header[0].childNodes),Xe+="</x>";var nt=u._els.dhx_cal_data[0];if(u.matrix&&u.matrix[u._mode]){for(Xe+="<y>",ht=0;ht<nt.firstChild.rows.length;ht++)Xe+="<row><![CDATA["+c(nt.firstChild.rows[ht].cells[0].innerHTML)+"]]></row>";Xe+="</y>",y=nt.firstChild.rows[0].cells[0].offsetHeight}else if("TABLE"==nt.firstChild.tagName)Xe+=Pe(nt);else{for(nt=nt.childNodes[nt.childNodes.length-1];-1==nt.className.indexOf("dhx_scale_holder");)nt=nt.previousSibling;for(nt=nt.childNodes,Xe+="<y>",ht=0;ht<nt.length;ht++)Xe+="\n<row><![CDATA["+c(nt[ht].innerHTML)+"]]></row>";Xe+="</y>",y=nt[0].offsetHeight}}return Xe+"</scale>"}function Pe(Xe){for(var ct="",Ze=Xe.querySelectorAll("tr"),ht=0;ht<Ze.length;ht++){for(var nt=[],jt=Ze[ht].querySelectorAll("td"),Yt=0;Yt<jt.length;Yt++)nt.push(jt[Yt].querySelector(".dhx_month_head").innerHTML);ct+="\n<row height='"+jt[0].offsetHeight+"'><![CDATA["+c(nt.join("|"))+"]]></row>",y=jt[0].offsetHeight}return ct}function ke(Xe){var ct,Ze="";u.matrix&&u.matrix[u._mode]&&(u.matrix[u._mode].second_scale&&(ct=Xe[1].childNodes),Xe=Xe[0].childNodes);for(var ht=0;ht<Xe.length;ht++)Ze+="\n<column><![CDATA["+c(Xe[ht].innerHTML)+"]]></column>";if(ee=Xe[0].offsetWidth,ct){var nt=0,jt=Xe[0].offsetWidth,Yt=1;for(ht=0;ht<ct.length;ht++)Ze+="\n<column second_scale='"+Yt+"'><![CDATA["+c(ct[ht].innerHTML)+"]]></column>",(nt+=ct[ht].offsetWidth)>=jt&&(jt+=Xe[Yt]?Xe[Yt].offsetWidth:0,Yt++),ee=ct[0].offsetWidth}return Ze}function qe(Xe){var ct="",Ze=u._rendered,ht=u.matrix&&u.matrix[u._mode];if("agenda"==u._mode||"map"==u._mode)for(var nt=0;nt<Ze.length;nt++)ct+="<event><head><![CDATA["+c(Ze[nt].childNodes[0].innerHTML)+"]]></head><body><![CDATA["+c(Ze[nt].childNodes[2].innerHTML)+"]]></body></event>";else if("week_agenda"==u._mode)for(nt=0;nt<Ze.length;nt++)ct+="<event day='"+Ze[nt].parentNode.getAttribute("day")+"'><body>"+c(Ze[nt].innerHTML)+"</body></event>";else if("year"==u._mode)for(Ze=u.get_visible_events(),nt=0;nt<Ze.length;nt++){var jt=Ze[nt].start_date;for(jt.valueOf()<u._min_date.valueOf()&&(jt=u._min_date);jt<Ze[nt].end_date;){var Yt=jt.getMonth()+12*(jt.getFullYear()-u._min_date.getFullYear())-u.week_starts._month,Ht=u.week_starts[Yt]+jt.getDate()-1,rn=Xe?J(u._get_year_cell(jt),"color"):"",en=Xe?J(u._get_year_cell(jt),"backgroundColor"):"";if(ct+="<event day='"+Ht%7+"' week='"+Math.floor(Ht/7)+"' month='"+Yt+"' backgroundColor='"+en+"' color='"+rn+"'></event>",(jt=u.date.add(jt,1,"day")).valueOf()>=u._max_date.valueOf())break}}else if(ht&&"cell"==ht.render)for(Ze=u._els.dhx_cal_data[0].getElementsByTagName("TD"),nt=0;nt<Ze.length;nt++)rn=Xe?J(Ze[nt],"color"):"",ct+="\n<event><body backgroundColor='"+(en=Xe?J(Ze[nt],"backgroundColor"):"")+"' color='"+rn+"'><![CDATA["+c(Ze[nt].innerHTML)+"]]></body></event>";else for(nt=0;nt<Ze.length;nt++){var sn,hn;if(u.matrix&&u.matrix[u._mode])sn=m(Ze[nt].style.left),hn=m(Ze[nt].offsetWidth)-1;else{var gn=u.config.use_select_menu_space?0:26;sn=w(Ze[nt].style.left,gn,!0),hn=w(Ze[nt].style.width,gn)-1}if(!isNaN(1*hn)){var jn=j(Ze[nt].style.top),gi=j(Ze[nt].style.height),Ai=Ze[nt].className.split(" ")[0].replace("dhx_cal_","");if("dhx_tooltip_line"!==Ai){var Bi=u.getEvent(Ze[nt].getAttribute(u.config.event_attribute));if(Bi){Ht=Bi._sday;var ji=Bi._sweek,br=Bi._length||0;if("month"==u._mode)gi=parseInt(Ze[nt].offsetHeight,10),jn=parseInt(Ze[nt].style.top,10)-u.xy.month_head_height,Ht=M(Ze[nt],Ht),ji=Z(Ze[nt],ji);else if(u.matrix&&u.matrix[u._mode]){Ht=0,ji=Ze[nt].parentNode.parentNode.parentNode.rowIndex;var Ta=y;y=Ze[nt].parentNode.offsetHeight,jn=j(Ze[nt].style.top),jn-=.2*jn,y=Ta}else{if(Ze[nt].parentNode==u._els.dhx_cal_data[0])continue;var ka=u._els.dhx_cal_data[0].childNodes[0],No=parseFloat(-1!=ka.className.indexOf("dhx_scale_holder")?ka.style.left:0);sn+=m(Ze[nt].parentNode.style.left,No)}ct+="\n<event week='"+ji+"' day='"+Ht+"' type='"+Ai+"' x='"+sn+"' y='"+jn+"' width='"+hn+"' height='"+gi+"' len='"+br+"'>","event"==Ai?(ct+="<header><![CDATA["+c(Ze[nt].childNodes[1].innerHTML)+"]]></header>",rn=Xe?J(Ze[nt].childNodes[2],"color"):"",ct+="<body backgroundColor='"+(en=Xe?J(Ze[nt].childNodes[2],"backgroundColor"):"")+"' color='"+rn+"'><![CDATA["+c(Ze[nt].childNodes[2].innerHTML)+"]]></body>"):(rn=Xe?J(Ze[nt],"color"):"",ct+="<body backgroundColor='"+(en=Xe?J(Ze[nt],"backgroundColor"):"")+"' color='"+rn+"'><![CDATA["+c(Ze[nt].innerHTML)+"]]></body>"),ct+="</event>"}}}}return ct}function rt(Xe,ct,Ze,ht,nt,jt){var Yt=!1;"fullcolor"==ht&&(Yt=!0,ht="color"),ht=ht||"color";var Ht="";if(Xe){var rn=u._date,en=u._mode;ct=u.date[Ze+"_start"](ct),ct=u.date["get_"+Ze+"_end"]?u.date["get_"+Ze+"_end"](ct):u.date.add(ct,1,Ze),Ht=_e("pages",ht,nt,jt);for(var sn=new Date(Xe);+sn<+ct;sn=this.date.add(sn,1,Ze))this.setCurrentView(sn,Ze),Ht+=K("page")+xe().replace("\u2013","-")+qe(Yt)+ce("page");Ht+=ce("pages"),this.setCurrentView(rn,en)}else Ht=_e("data",ht,nt,jt)+xe().replace("\u2013","-")+qe(Yt)+ce("data");return Ht}function wt(Xe,ct,Ze,ht,nt,jt,Yt){var Ht,rn,en,sn;Ht="object"==kn(nt)?function(Ht){for(var rn="<data>",en=0;en<Ht.length;en++)rn+=Ht[en].source.getPDFData(Ht[en].start,Ht[en].end,Ht[en].view,Ht[en].mode,Ht[en].header,Ht[en].footer);return rn+"</data>"}(nt):rt.apply(this,[Xe,ct,Ze,nt,jt,Yt]),rn=ht,en=u.uid(),(sn=document.createElement("div")).style.display="none",document.body.appendChild(sn),sn.innerHTML='<form id="'+en+'" method="post" target="_blank" action="'+rn+'" accept-charset="utf-8" enctype="application/x-www-form-urlencoded"><input type="hidden" name="mycoolxmlbody"/> </form>',document.getElementById(en).firstChild.value=encodeURIComponent(Ht),document.getElementById(en).submit(),sn.parentNode.removeChild(sn)}u.getPDFData=rt,u.toPDF=function(Xe,ct,Ze,ht){return wt.apply(this,[null,null,null,Xe,ct,Ze,ht])},u.toPDFRange=function(Xe,ct,Ze,ht,nt,jt,Yt){return"string"==typeof Xe&&(Xe=u.templates.api_date(Xe),ct=u.templates.api_date(ct)),wt.apply(this,arguments)}},quick_info:function(u){u.config.icons_select=["icon_details","icon_delete"],u.config.details_on_create=!0,u.config.show_quick_info=!0,u.xy.menu_width=0,u.attachEvent("onClick",function(ee){if(u.config.show_quick_info)return u.showQuickInfo(ee),!0}),function(){for(var ee=["onEmptyClick","onViewChange","onLightbox","onBeforeEventDelete","onBeforeDrag"],y=function(){return u.hideQuickInfo(!0),!0},N=0;N<ee.length;N++)u.attachEvent(ee[N],y)}(),u.templates.quick_info_title=function(ee,y,N){return N.text.substr(0,50)},u.templates.quick_info_content=function(ee,y,N){return N.details||N.text},u.templates.quick_info_date=function(ee,y,N){return u.isOneDayEvent(N)&&u.config.rtl?u.templates.day_date(ee,y,N)+" "+u.templates.event_header(y,ee,N):u.isOneDayEvent(N)?u.templates.day_date(ee,y,N)+" "+u.templates.event_header(ee,y,N):u.config.rtl?u.templates.week_date(y,ee,N):u.templates.week_date(ee,y,N)},u.showQuickInfo=function(ee){if(ee!=this._quick_info_box_id&&(this.hideQuickInfo(!0),!1!==this.callEvent("onBeforeQuickInfo",[ee]))){var y=this._get_event_counter_part(ee);y&&(this._quick_info_box=this._init_quick_info(y),this._fill_quick_data(ee),this._show_quick_info(y),this.callEvent("onQuickInfo",[ee]))}},function(){function ee(y){y=y||"";var N,C=parseFloat(y),c=y.match(/m?s/);switch(c&&(c=c[0]),c){case"s":N=1e3*C;break;case"ms":N=C;break;default:N=0}return N}u.hideQuickInfo=function(y){var N=this._quick_info_box,C=this._quick_info_box_id;if(this._quick_info_box_id=0,N&&N.parentNode){var c=N.offsetWidth;if(u.config.quick_info_detached)return this.callEvent("onAfterQuickInfo",[C]),N.parentNode.removeChild(N);if("auto"==N.style.right?N.style.left=-c+"px":N.style.right=-c+"px",y)N.parentNode.removeChild(N);else{var m;window.getComputedStyle?m=window.getComputedStyle(N,null):N.currentStyle&&(m=N.currentStyle);var w=ee(m["transition-delay"])+ee(m["transition-duration"]);setTimeout(function(){N.parentNode&&N.parentNode.removeChild(N)},w)}this.callEvent("onAfterQuickInfo",[C])}}}(),u.event(window,"keydown",function(ee){27==ee.keyCode&&u.hideQuickInfo()}),u._show_quick_info=function(ee){var y=u._quick_info_box;u._obj.appendChild(y);var N=y.offsetWidth,C=y.offsetHeight;if(u.config.quick_info_detached){var c=ee.left-ee.dx*(N-ee.width);c+N>window.innerWidth&&(c=window.innerWidth-N),c=Math.max(0,c),y.style.left=c+"px",y.style.top=ee.top-(ee.dy?C:-ee.height)+"px"}else y.style.top=this.xy.scale_height+this.xy.nav_height+20+"px",1==ee.dx?(y.style.right="auto",y.style.left=-N+"px",setTimeout(function(){y.style.left="-10px"},1)):(y.style.left="auto",y.style.right=-N+"px",setTimeout(function(){y.style.right="-10px"},1)),y.className=y.className.replace(" dhx_qi_left","").replace(" dhx_qi_right","")+" dhx_qi_"+(1==ee.dx?"left":"right")},u.attachEvent("onTemplatesReady",function(){if(u.hideQuickInfo(),this._quick_info_box){var ee=this._quick_info_box;ee.parentNode&&ee.parentNode.removeChild(ee),this._quick_info_box=null}}),u._quick_info_onscroll_handler=function(ee){u.hideQuickInfo()},u._init_quick_info=function(){if(!this._quick_info_box){var ee=u.xy,y=this._quick_info_box=document.createElement("div");this._waiAria.quickInfoAttr(y),y.className="dhx_cal_quick_info",u.$testmode&&(y.className+=" dhx_no_animate"),u.config.rtl&&(y.className+=" dhx_quick_info_rtl");var N=this._waiAria.quickInfoHeaderAttrString(),C='<div class="dhx_cal_qi_title" style="height:'+ee.quick_info_title+'px" '+N+'><div class="dhx_cal_qi_tcontent"></div><div  class="dhx_cal_qi_tdate"></div></div><div class="dhx_cal_qi_content"></div>';C+='<div class="dhx_cal_qi_controls" style="height:'+ee.quick_info_buttons+'px">';for(var c=u.config.icons_select,m=0;m<c.length;m++)C+="<div "+(N=this._waiAria.quickInfoButtonAttrString(this.locale.labels[c[m]]))+' class="dhx_qi_big_icon '+c[m]+'" title="'+u.locale.labels[c[m]]+"\"><div class='dhx_menu_icon "+c[m]+"'></div><div>"+u.locale.labels[c[m]]+"</div></div>";y.innerHTML=C+="</div>",u.event(y,"click",function(w){u._qi_button_click(w.target||w.srcElement)}),u.config.quick_info_detached&&(u._detachDomEvent(u._els.dhx_cal_data[0],"scroll",u._quick_info_onscroll_handler),u.event(u._els.dhx_cal_data[0],"scroll",u._quick_info_onscroll_handler))}return this._quick_info_box},u._qi_button_click=function(ee){if(ee&&ee!=u._quick_info_box){var N=u._getClassName(ee);if(-1!=N.indexOf("_icon")){var C=u._quick_info_box_id;u._click.buttons[N.split(" ")[1].replace("icon_","")](C)}else u._qi_button_click(ee.parentNode)}},u._get_event_counter_part=function(ee){for(var y=u.getRenderedEvent(ee),N=0,C=0,c=y;c&&c!=u._obj;)N+=c.offsetLeft,C+=c.offsetTop-c.scrollTop,c=c.offsetParent;return c?{left:N,top:C,dx:N+y.offsetWidth/2>u._x/2?1:0,dy:C+y.offsetHeight/2>u._y/2?1:0,width:y.offsetWidth,height:y.offsetHeight}:0},u._fill_quick_data=function(ee){var y=u.getEvent(ee),N=u._quick_info_box;u._quick_info_box_id=ee;var C={content:u.templates.quick_info_title(y.start_date,y.end_date,y),date:u.templates.quick_info_date(y.start_date,y.end_date,y)},c=N.firstChild.firstChild;c.innerHTML=C.content,c.nextSibling.innerHTML=C.date,u._waiAria.quickInfoHeader(N,[C.content,C.date].join(" ")),N.firstChild.nextSibling.innerHTML=u.templates.quick_info_content(y.start_date,y.end_date,y)}},readonly:function(u){u.attachEvent("onTemplatesReady",function(){var ee;u.form_blocks.recurring&&(ee=u.form_blocks.recurring.set_value);var y=u.config.buttons_left.slice(),N=u.config.buttons_right.slice();function C(T,j,J,M){for(var Z=j.getElementsByTagName(T),K=J.getElementsByTagName(T),ce=K.length-1;ce>=0;ce--)if(J=K[ce],M){var _e=document.createElement("span");_e.className="dhx_text_disabled",_e.innerHTML=M(Z[ce]),J.parentNode.insertBefore(_e,J),J.parentNode.removeChild(J)}else J.disabled=!0,j.checked&&(J.checked=!0)}u.attachEvent("onBeforeLightbox",function(T){this.config.readonly_form||this.getEvent(T).readonly?this.config.readonly_active=!0:(this.config.readonly_active=!1,u.config.buttons_left=y.slice(),u.config.buttons_right=N.slice(),u.form_blocks.recurring&&(u.form_blocks.recurring.set_value=ee));var j=this.config.lightbox.sections;if(this.config.readonly_active){for(var J=0;J<j.length;J++)"recurring"==j[J].type&&this.config.readonly_active&&u.form_blocks.recurring&&(u.form_blocks.recurring.set_value=function(ke,qe,rt){var wt=u.$domHelpers.closest(ke,".dhx_wrap_section");wt.querySelector(".dhx_cal_lsection").display="none",wt.querySelector(".dhx_form_repeat").display="none",wt.style.display="none",u.setLightboxSize()});var M=["dhx_delete_btn","dhx_save_btn"],Z=[u.config.buttons_left,u.config.buttons_right];for(J=0;J<M.length;J++)for(var K=M[J],ce=0;ce<Z.length;ce++){for(var _e=Z[ce],xe=-1,Pe=0;Pe<_e.length;Pe++)if(_e[Pe]==K){xe=Pe;break}-1!=xe&&_e.splice(xe,1)}}return this.resetLightbox(),!0});var c=u._fill_lightbox;u._fill_lightbox=function(){var T=this.getLightbox();this.config.readonly_active&&(T.style.visibility="hidden",T.style.display="block");var j=c.apply(this,arguments);if(this.config.readonly_active&&(T.style.visibility="",T.style.display="none"),this.config.readonly_active){var J=this.getLightbox(),M=this._lightbox_r=J.cloneNode(!0);M.id=u.uid(),M.className+=" dhx_cal_light_readonly",C("textarea",J,M,function(Z){return Z.value}),C("input",J,M,!1),C("select",J,M,function(Z){return Z.options.length?Z.options[Math.max(Z.selectedIndex||0,0)].text:""}),J.parentNode.insertBefore(M,J),m.call(this,M),u._lightbox&&u._lightbox.parentNode.removeChild(u._lightbox),this._lightbox=M,u.config.drag_lightbox&&u.event(M.firstChild,"mousedown",u._ready_to_dnd),u._init_lightbox_events(),this.setLightboxSize()}return j};var m=u.showCover;u.showCover=function(){this.config.readonly_active||m.apply(this,arguments)};var w=u.hide_lightbox;u.hide_lightbox=function(){return this._lightbox_r&&(this._lightbox_r.parentNode.removeChild(this._lightbox_r),this._lightbox_r=this._lightbox=null),w.apply(this,arguments)}})},recurring:function(u){function ee(){var C=u.formSection("recurring");if(C||(C=y("recurring")),!C)throw new Error(["Can't locate the Recurring form section.","Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox ",'and that the recurring control has name "recurring":',"","scheduler.config.lightbox.sections = [",'\t{name:"recurring", ... }',"];"].join("\n"));return C}function y(C){for(var c=0;c<u.config.lightbox.sections.length;c++){var m=u.config.lightbox.sections[c];if(m.type===C)return u.formSection(m.name)}return null}function N(C){return new Date(C.getFullYear(),C.getMonth(),C.getDate(),C.getHours(),C.getMinutes(),C.getSeconds(),0)}var C;u.config.occurrence_timestamp_in_utc=!1,u.config.recurring_workdays=[1,2,3,4,5],u.form_blocks.recurring={_get_node:function(C){return"string"==typeof C&&(C=document.getElementById(C)),"none"==C.style.display&&(C.style.display=""),C},_outer_html:function(C){return C.outerHTML||(c=C,(w=document.createElement("div")).appendChild(c.cloneNode(!0)),m=w.innerHTML,w=null,m);var c,m,w},render:function(C){if(C.form){var c=u.form_blocks.recurring,m=c._get_node(C.form),w=c._outer_html(m);return m.style.display="none",w}var T=u.locale.labels;return'<div class="dhx_form_repeat"> <form> <div class="dhx_repeat_left"> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="day" />'+T.repeat_radio_day+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="week"/>'+T.repeat_radio_week+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="month" checked />'+T.repeat_radio_month+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="year" />'+T.repeat_radio_year+'</label> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_center"> <div style="display:none;" id="dhx_repeat_day"> <label><input class="dhx_repeat_radio" type="radio" name="day_type" value="d"/>'+T.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="day_count" value="1" />'+T.repeat_text_day_count+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="day_type" checked value="w"/>'+T.repeat_radio_day_type2+'</label> </div> <div style="display:none;" id="dhx_repeat_week"><label>'+T.repeat_week+'<input class="dhx_repeat_text" type="text" name="week_count" value="1" /></label><span>'+T.repeat_text_week_count+'</span><br /> <table class="dhx_repeat_days"> <tr> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="1" />'+T.day_for_recurring[1]+'</label><br /> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="4" />'+T.day_for_recurring[4]+'</label> </td> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="2" />'+T.day_for_recurring[2]+'</label><br /> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="5" />'+T.day_for_recurring[5]+'</label> </td> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="3" />'+T.day_for_recurring[3]+'</label><br /> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="6" />'+T.day_for_recurring[6]+'</label> </td> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="0" />'+T.day_for_recurring[0]+'</label><br /><br /> </td> </tr> </table> </div> <div id="dhx_repeat_month"> <label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" value="d"/>'+T.repeat_radio_month_type+'</label><label><input class="dhx_repeat_text" type="text" name="month_day" value="1" />'+T.repeat_text_month_day+'</label><label><input class="dhx_repeat_text" type="text" name="month_count" value="1" />'+T.repeat_text_month_count+'</label><br /> <label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" checked value="w"/>'+T.repeat_radio_month_start+'</label><input class="dhx_repeat_text" type="text" name="month_week2" value="1" /><label><select name="month_day2">\t<option value="1" selected >'+u.locale.date.day_full[1]+'<option value="2">'+u.locale.date.day_full[2]+'<option value="3">'+u.locale.date.day_full[3]+'<option value="4">'+u.locale.date.day_full[4]+'<option value="5">'+u.locale.date.day_full[5]+'<option value="6">'+u.locale.date.day_full[6]+'<option value="0">'+u.locale.date.day_full[0]+"</select>"+T.repeat_text_month_count2_before+'</label><label><input class="dhx_repeat_text" type="text" name="month_count2" value="1" />'+T.repeat_text_month_count2_after+'</label><br /> </div> <div style="display:none;" id="dhx_repeat_year"> <label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" value="d"/>'+T.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="year_day" value="1" />'+T.repeat_text_year_day+'</label><label><select name="year_month"><option value="0" selected >'+T.month_for_recurring[0]+'<option value="1">'+T.month_for_recurring[1]+'<option value="2">'+T.month_for_recurring[2]+'<option value="3">'+T.month_for_recurring[3]+'<option value="4">'+T.month_for_recurring[4]+'<option value="5">'+T.month_for_recurring[5]+'<option value="6">'+T.month_for_recurring[6]+'<option value="7">'+T.month_for_recurring[7]+'<option value="8">'+T.month_for_recurring[8]+'<option value="9">'+T.month_for_recurring[9]+'<option value="10">'+T.month_for_recurring[10]+'<option value="11">'+T.month_for_recurring[11]+"</select>"+T.select_year_month+'</label><br /> <label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" checked value="w"/>'+T.repeat_year_label+'</label><input class="dhx_repeat_text" type="text" name="year_week2" value="1" /><select name="year_day2"><option value="1" selected >'+u.locale.date.day_full[1]+'<option value="2">'+u.locale.date.day_full[2]+'<option value="3">'+u.locale.date.day_full[3]+'<option value="4">'+u.locale.date.day_full[4]+'<option value="5">'+u.locale.date.day_full[5]+'<option value="6">'+u.locale.date.day_full[6]+'<option value="7">'+u.locale.date.day_full[0]+"</select>"+T.select_year_day2+'<select name="year_month2"><option value="0" selected >'+T.month_for_recurring[0]+'<option value="1">'+T.month_for_recurring[1]+'<option value="2">'+T.month_for_recurring[2]+'<option value="3">'+T.month_for_recurring[3]+'<option value="4">'+T.month_for_recurring[4]+'<option value="5">'+T.month_for_recurring[5]+'<option value="6">'+T.month_for_recurring[6]+'<option value="7">'+T.month_for_recurring[7]+'<option value="8">'+T.month_for_recurring[8]+'<option value="9">'+T.month_for_recurring[9]+'<option value="10">'+T.month_for_recurring[10]+'<option value="11">'+T.month_for_recurring[11]+'</select><br /> </div> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_right"> <label><input class="dhx_repeat_radio" type="radio" name="end" checked/>'+T.repeat_radio_end+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="end" />'+T.repeat_radio_end2+'</label><input class="dhx_repeat_text" type="text" name="occurences_count" value="1" />'+T.repeat_text_occurences_count+'<br /> <label><input class="dhx_repeat_radio" type="radio" name="end" />'+T.repeat_radio_end3+'</label><input class="dhx_repeat_date" type="text" name="date_of_end" value="'+u.config.repeat_date_of_end+'" /><br /> </div> </form> </div> <div style="clear:both"> </div>'},_ds:{},_get_form_node:function(C,c,m){var w=C[c];if(!w)return null;if(w.nodeName)return w;if(w.length)for(var T=0;T<w.length;T++)if(w[T].value==m)return w[T]},_get_node_value:function(C,c,m){var w=C[c];if(!w)return"";if(w.length){if(m){for(var T=[],j=0;j<w.length;j++)w[j].checked&&T.push(w[j].value);return T}for(j=0;j<w.length;j++)if(w[j].checked)return w[j].value}return w.value?m?[w.value]:w.value:void 0},_get_node_numeric_value:function(C,c){return 1*u.form_blocks.recurring._get_node_value(C,c)||0},_set_node_value:function(C,c,m){var w=C[c];if(w)if(w.name==c)w.value=m;else if(w.length)for(var T="object"==xn(m),j=0;j<w.length;j++)(T||w[j].value==m)&&(w[j].checked=T?!!m[w[j].value]:!!m)},_init_set_value:function(C,c,m){var w=u.form_blocks.recurring,T=w._get_node_value,j=w._set_node_value;u.form_blocks.recurring._ds={start:m.start_date,end:m._end_date};var J=u.date.str_to_date(u.config.repeat_date,!1,!0),Z=u.date.date_to_str(u.config.repeat_date),K=C.getElementsByTagName("FORM")[0],ce={};function _e(Ze){for(var ht=0;ht<Ze.length;ht++){var nt=Ze[ht];nt.name&&(ce[nt.name]?ce[nt.name].nodeType?ce[nt.name]=[ce[nt.name],nt]:ce[nt.name].push(nt):ce[nt.name]=nt)}}if(_e(K.getElementsByTagName("INPUT")),_e(K.getElementsByTagName("SELECT")),!u.config.repeat_date_of_end){var xe=u.date.date_to_str(u.config.repeat_date);u.config.repeat_date_of_end=xe(u.date.add(u._currentDate(),30,"day"))}j(ce,"date_of_end",u.config.repeat_date_of_end);var Pe=function(Ze){return document.getElementById(Ze)||{style:{}}};function ke(){Pe("dhx_repeat_day").style.display="none",Pe("dhx_repeat_week").style.display="none",Pe("dhx_repeat_month").style.display="none",Pe("dhx_repeat_year").style.display="none",Pe("dhx_repeat_"+this.value).style.display="block",u.setLightboxSize()}function qe(Ze,ht){var nt=Ze.end;if(nt.length)if(nt[0].value&&"on"!=nt[0].value)for(var jt=0;jt<nt.length;jt++)nt[jt].value==ht&&(nt[jt].checked=!0);else{var Yt=0;switch(ht){case"no":Yt=0;break;case"date_of_end":Yt=2;break;default:Yt=1}nt[Yt].checked=!0}else nt.value=ht}u.form_blocks.recurring._get_repeat_code=function(Ze){var ht=[T(ce,"repeat")];for(rt[ht[0]](ht,Ze);ht.length<5;)ht.push("");var nt="",jt=function(Yt){var Ht=Yt.end;if(Ht.length){for(var rn=0;rn<Ht.length;rn++)if(Ht[rn].checked)return Ht[rn].value&&"on"!=Ht[rn].value?Ht[rn].value:rn?2==rn?"date_of_end":"occurences_count":"no"}else if(Ht.value)return Ht.value;return"no"}(ce);return"no"==jt?(Ze.end=new Date(9999,1,1),nt="no"):"date_of_end"==jt?Ze.end=function(Ze){var ht=J(Ze);return u.config.include_end_by&&(ht=u.date.add(ht,1,"day")),ht}(T(ce,"date_of_end")):(u.transpose_type(ht.join("_")),nt=Math.max(1,T(ce,"occurences_count")),Ze.end=u.date["add_"+ht.join("_")](new Date(Ze.start),nt+0,{start_date:Ze.start})||Ze.start),ht.join("_")+"#"+nt};var rt={month:function(Ze,ht){var nt=u.form_blocks.recurring._get_node_value,jt=u.form_blocks.recurring._get_node_numeric_value;"d"==nt(ce,"month_type")?(Ze.push(Math.max(1,jt(ce,"month_count"))),ht.start.setDate(nt(ce,"month_day"))):(Ze.push(Math.max(1,jt(ce,"month_count2"))),Ze.push(nt(ce,"month_day2")),Ze.push(Math.max(1,jt(ce,"month_week2"))),u.config.repeat_precise||ht.start.setDate(1)),ht._start=!0},week:function(Ze,ht){var nt=u.form_blocks.recurring._get_node_value;Ze.push(Math.max(1,(0,u.form_blocks.recurring._get_node_numeric_value)(ce,"week_count"))),Ze.push(""),Ze.push("");for(var Yt=[],Ht=nt(ce,"week_day",!0),rn=ht.start.getDay(),en=!1,sn=0;sn<Ht.length;sn++)Yt.push(Ht[sn]),en=en||Ht[sn]==rn;Yt.length||(Yt.push(rn),en=!0),Yt.sort(),u.config.repeat_precise?en||(u.transpose_day_week(ht.start,Yt,1,7),ht._start=!0):(ht.start=u.date.week_start(ht.start),ht._start=!0),Ze.push(Yt.join(","))},day:function(Ze){var nt=u.form_blocks.recurring._get_node_numeric_value;"d"==(0,u.form_blocks.recurring._get_node_value)(ce,"day_type")?Ze.push(Math.max(1,nt(ce,"day_count"))):(Ze.push("week"),Ze.push(1),Ze.push(""),Ze.push(""),Ze.push(u.config.recurring_workdays.join(",")),Ze.splice(0,1))},year:function(Ze,ht){var nt=u.form_blocks.recurring._get_node_value;"d"==nt(ce,"year_type")?(Ze.push("1"),ht.start.setMonth(0),ht.start.setDate(nt(ce,"year_day")),ht.start.setMonth(nt(ce,"year_month"))):(Ze.push("1"),Ze.push(nt(ce,"year_day2")),Ze.push(nt(ce,"year_week2")),ht.start.setDate(1),ht.start.setMonth(nt(ce,"year_month2"))),ht._start=!0}},wt={week:function(Ze,ht){var nt=u.form_blocks.recurring._set_node_value;nt(ce,"week_count",Ze[1]);for(var jt=Ze[4].split(","),Yt={},Ht=0;Ht<jt.length;Ht++)Yt[jt[Ht]]=!0;nt(ce,"week_day",Yt)},month:function(Ze,ht){var nt=u.form_blocks.recurring._set_node_value;""===Ze[2]?(nt(ce,"month_type","d"),nt(ce,"month_count",Ze[1]),nt(ce,"month_day",ht.start.getDate())):(nt(ce,"month_type","w"),nt(ce,"month_count2",Ze[1]),nt(ce,"month_week2",Ze[3]),nt(ce,"month_day2",Ze[2]))},day:function(Ze,ht){var nt=u.form_blocks.recurring._set_node_value;nt(ce,"day_type","d"),nt(ce,"day_count",Ze[1])},year:function(Ze,ht){var nt=u.form_blocks.recurring._set_node_value;""===Ze[2]?(nt(ce,"year_type","d"),nt(ce,"year_day",ht.start.getDate()),nt(ce,"year_month",ht.start.getMonth())):(nt(ce,"year_type","w"),nt(ce,"year_week2",Ze[3]),nt(ce,"year_day2",Ze[2]),nt(ce,"year_month2",ht.start.getMonth()))}};u.form_blocks.recurring._set_repeat_code=function(Ze,ht){var nt=u.form_blocks.recurring._set_node_value,jt=Ze.split("#");switch(Ze=jt[0].split("_"),wt[Ze[0]](Ze,ht),jt[1]){case"no":qe(ce,"no");break;case"":qe(ce,"date_of_end");var Yt=ht.end;u.config.include_end_by&&(Yt=u.date.add(Yt,-1,"day")),nt(ce,"date_of_end",Z(Yt));break;default:qe(ce,"occurences_count"),nt(ce,"occurences_count",jt[1])}nt(ce,"repeat",Ze[0]);var Ht=u.form_blocks.recurring._get_form_node(ce,"repeat",Ze[0]);"SELECT"==Ht.nodeName?(Ht.dispatchEvent(new Event("change")),Ht.dispatchEvent(new MouseEvent("click"))):Ht.dispatchEvent(new MouseEvent("click"))};for(var Xe=0;Xe<K.elements.length;Xe++){var ct=K.elements[Xe];"repeat"===ct.name&&("SELECT"!=ct.nodeName||ct.$_eventAttached?ct.$_eventAttached||(ct.$_eventAttached=!0,ct.addEventListener("click",ke)):(ct.$_eventAttached=!0,ct.addEventListener("change",ke)))}u._lightbox._rec_init_done=!0},set_value:function(C,c,m){var w=u.form_blocks.recurring;u._lightbox._rec_init_done||w._init_set_value(C,c,m),C.open=!m.rec_type,C.blocked=this._is_modified_occurence(m);var T=w._ds;T.start=m.start_date,T.end=m._end_date,w._toggle_block(),c&&w._set_repeat_code(c,T)},get_value:function(C,c){if(C.open){var m=u.form_blocks.recurring._ds,w={};(function(){var T=u.formSection("time");if(T||(T=y("time")),T||(T=y("calendar_time")),!T)throw new Error(["Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.","You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. ",'In the latter case, make sure the control is named "time":',"","scheduler.config.lightbox.sections = [",'{name:"time", height:72, type:"YOU CONTROL", map_to:"auto" }];'].join("\n"));return T})().getValue(w),m.start=w.start_date,c.rec_type=u.form_blocks.recurring._get_repeat_code(m),m._start?(c.start_date=new Date(m.start),c._start_date=new Date(m.start),m._start=!1):c._start_date=null,c._end_date=m.end,c.rec_pattern=c.rec_type.split("#")[0]}else c.rec_type=c.rec_pattern="",c._end_date=c.end_date;return c.rec_type},_get_button:function(){return ee().header.firstChild.firstChild},_get_form:function(){return ee().node},open:function(){var C=u.form_blocks.recurring;C._get_form().open||C._toggle_block()},close:function(){var C=u.form_blocks.recurring;C._get_form().open&&C._toggle_block()},_toggle_block:function(){var C=u.form_blocks.recurring,c=C._get_form(),m=C._get_button();c.open||c.blocked?(c.style.height="0px",m&&(m.style.backgroundPosition="-5px 20px",m.nextSibling.innerHTML=u.locale.labels.button_recurring)):(c.style.height="auto",m&&(m.style.backgroundPosition="-5px 0px",m.nextSibling.innerHTML=u.locale.labels.button_recurring_open)),c.open=!c.open,u.setLightboxSize()},focus:function(C){},button_click:function(C,c,m){u.form_blocks.recurring._get_form().blocked||u.form_blocks.recurring._toggle_block()}},u._rec_markers={},u._rec_markers_pull={},u._add_rec_marker=function(C,c){C._pid_time=c,this._rec_markers[C.id]=C,this._rec_markers_pull[C.event_pid]||(this._rec_markers_pull[C.event_pid]={}),this._rec_markers_pull[C.event_pid][c]=C},u._get_rec_marker=function(C,c){var m=this._rec_markers_pull[c];return m?m[C]:null},u._get_rec_markers=function(C){return this._rec_markers_pull[C]||[]},u._rec_temp=[],C=u.addEvent,u.addEvent=function(c,m,w,T,j){var J=C.apply(this,arguments);if(J&&u.getEvent(J)){var M=u.getEvent(J);M.start_date&&(M.start_date=N(M.start_date)),M.end_date&&(M.end_date=N(M.end_date)),this._is_modified_occurence(M)&&u._add_rec_marker(M,1e3*M.event_length),M.rec_type&&(M.rec_pattern=M.rec_type.split("#")[0])}return J},u.attachEvent("onEventIdChange",function(C,c){if(!this._ignore_call){this._ignore_call=!0,u._rec_markers[C]&&(u._rec_markers[c]=u._rec_markers[C],delete u._rec_markers[C]),u._rec_markers_pull[C]&&(u._rec_markers_pull[c]=u._rec_markers_pull[C],delete u._rec_markers_pull[C]);for(var m=0;m<this._rec_temp.length;m++)(w=this._rec_temp[m]).event_pid==C&&(w.event_pid=c,this.changeEventId(w.id,c+"#"+w.id.split("#")[1]));for(var m in this._rec_markers){var w;(w=this._rec_markers[m]).event_pid==C&&(w.event_pid=c,w._pid_changed=!0)}var T=u._rec_markers[c];T&&T._pid_changed&&(delete T._pid_changed,setTimeout(function(){if(u.$destroyed)return!0;u.callEvent("onEventChanged",[c,u.getEvent(c)])},1)),delete this._ignore_call}}),u.attachEvent("onConfirmedBeforeEventDelete",function(C){var c=this.getEvent(C);if(this._is_virtual_event(C)||this._is_modified_occurence(c)&&c.rec_type&&"none"!=c.rec_type){C=C.split("#");var m=this.uid(),w=C[1]?C[1]:Math.round(c._pid_time/1e3),T=this._copy_event(c);T.id=m,T.event_pid=c.event_pid||C[0];var j=w;T.event_length=j,T.rec_type=T.rec_pattern="none",this.addEvent(T),this._add_rec_marker(T,1e3*j)}else{c.rec_type&&this._lightbox_id&&this._roll_back_dates(c);var J=this._get_rec_markers(C);for(var M in J)J.hasOwnProperty(M)&&this.getEvent(C=J[M].id)&&this.deleteEvent(C,!0)}return!0}),u.attachEvent("onEventDeleted",function(C,c){!this._is_virtual_event(C)&&this._is_modified_occurence(c)&&(u._events[C]||(c.rec_type=c.rec_pattern="none",this.setEvent(C,c)))}),u.attachEvent("onEventChanged",function(C,c){if(this._loading)return!0;var m=this.getEvent(C);if(this._is_virtual_event(C)){C=C.split("#");var w=this.uid();this._not_render=!0;var T=this._copy_event(c);T.id=w,T.event_pid=C[0];var j=C[1];T.event_length=j,T.rec_type=T.rec_pattern="",this._add_rec_marker(T,1e3*j),this.addEvent(T),this._not_render=!1}else{m.start_date&&(m.start_date=N(m.start_date)),m.end_date&&(m.end_date=N(m.end_date)),m.rec_type&&this._lightbox_id&&this._roll_back_dates(m);var J=this._get_rec_markers(C);for(var M in J)J.hasOwnProperty(M)&&(delete this._rec_markers[J[M].id],this.deleteEvent(J[M].id,!0));delete this._rec_markers_pull[C];for(var Z=!1,K=0;K<this._rendered.length;K++)this._rendered[K].getAttribute(this.config.event_attribute)==C&&(Z=!0);Z||(this._select_id=null)}return!0}),u.attachEvent("onEventAdded",function(C){if(!this._loading){var c=this.getEvent(C);c.rec_type&&!c.event_length&&this._roll_back_dates(c)}return!0}),u.attachEvent("onEventSave",function(C,c,m){return this.getEvent(C).rec_type||!c.rec_type||this._is_virtual_event(C)||(this._select_id=null),!0}),u.attachEvent("onEventCreated",function(C){var c=this.getEvent(C);return c.rec_type||(c.rec_type=c.rec_pattern=c.event_length=c.event_pid=""),!0}),u.attachEvent("onEventCancel",function(C){var c=this.getEvent(C);c.rec_type&&(this._roll_back_dates(c),this.render_view_data())}),u._roll_back_dates=function(C){C.start_date&&(C.start_date=N(C.start_date)),C.end_date&&(C.end_date=N(C.end_date)),C.event_length=Math.round((C.end_date.valueOf()-C.start_date.valueOf())/1e3),C.end_date=C._end_date,C._start_date&&(C.start_date.setMonth(0),C.start_date.setDate(C._start_date.getDate()),C.start_date.setMonth(C._start_date.getMonth()),C.start_date.setFullYear(C._start_date.getFullYear()))},u._is_virtual_event=function(C){return-1!=C.toString().indexOf("#")},u._is_modified_occurence=function(C){return C.event_pid&&"0"!=C.event_pid},u.showLightbox_rec=u.showLightbox,u.showLightbox=function(C){var c=this.locale,m=u.config.lightbox_recurring,w=this.getEvent(C),T=w.event_pid,j=this._is_virtual_event(C);j&&(T=C.split("#")[0]);var J=function(Z){var K=u.getEvent(Z);return K._end_date=K.end_date,K.end_date=new Date(K.start_date.valueOf()+1e3*K.event_length),u.showLightbox_rec(Z)};if((T||1*T==0)&&w.rec_type)return J(C);if(!T||"0"===T||!c.labels.confirm_recurring||"instance"==m||"series"==m&&!j)return this.showLightbox_rec(C);if("ask"==m){var M=this;u.modalbox({text:c.labels.confirm_recurring,title:c.labels.title_confirm_recurring,width:"500px",position:"middle",buttons:[c.labels.button_edit_series,c.labels.button_edit_occurrence,c.labels.icon_cancel],callback:function(Z){switch(+Z){case 0:return J(T);case 1:return M.showLightbox_rec(C);case 2:return}}})}else J(T)},u.get_visible_events_rec=u.get_visible_events,u.get_visible_events=function(C){for(var c=0;c<this._rec_temp.length;c++)delete this._events[this._rec_temp[c].id];this._rec_temp=[];var m=this.get_visible_events_rec(C),w=[];for(c=0;c<m.length;c++)m[c].rec_type?"none"!=m[c].rec_pattern&&this.repeat_date(m[c],w):w.push(m[c]);return w},function(){var C=u.isOneDayEvent;u.isOneDayEvent=function(m){return!!m.rec_type||C.call(this,m)};var c=u.updateEvent;u.updateEvent=function(m){var w=u.getEvent(m);w&&w.rec_type&&(w.rec_pattern=(w.rec_type||"").split("#")[0]),w&&w.rec_type&&!this._is_virtual_event(m)?u.update_view():c.call(this,m)}}(),u.transponse_size={day:1,week:7,month:1,year:12},u.date.day_week=function(C,c,m){C.setDate(1);var w=u.date.month_start(new Date(C)),T=1*c+(m=7*(m-1))-C.getDay()+1;C.setDate(T<=m?T+7:T);var j=u.date.month_start(new Date(C));return w.valueOf()===j.valueOf()},u.transpose_day_week=function(C,c,m,w,T){for(var j=(C.getDay()||(u.config.start_on_monday?7:0))-m,J=0;J<c.length;J++)if(c[J]>j)return C.setDate(C.getDate()+1*c[J]-j-(w?m:T));this.transpose_day_week(C,c,m+w,null,m)},u.transpose_type=function(C){var c="transpose_"+C;if(!this.date[c]){var m=C.split("_"),w="add_"+C,T=this.transponse_size[m[0]]*m[1];if("day"==m[0]||"week"==m[0]){var j=null;if(m[4]&&(j=m[4].split(","),u.config.start_on_monday)){for(var J=0;J<j.length;J++)j[J]=1*j[J]||7;j.sort()}this.date[c]=function(M,Z){var K=Math.floor((Z.valueOf()-M.valueOf())/(864e5*T));return K>0&&M.setDate(M.getDate()+K*T),j&&u.transpose_day_week(M,j,1,T),M},this.date[w]=function(M,Z){var K=new Date(M.valueOf());if(j)for(var ce=0;ce<Z;ce++)u.transpose_day_week(K,j,0,T);else K.setDate(K.getDate()+Z*T);return K}}else"month"!=m[0]&&"year"!=m[0]||(this.date[c]=function(M,Z,K){var ce=Math.ceil((12*Z.getFullYear()+1*Z.getMonth()+1-(12*M.getFullYear()+1*M.getMonth()+1))/T-1);return ce>=0&&(M.setDate(1),M.setMonth(M.getMonth()+ce*T)),u.date[w](M,0,K)},this.date[w]=function(M,Z,K,ce){if(ce?ce++:ce=1,ce>12)return null;var _e=new Date(M.valueOf());_e.setDate(1),_e.setMonth(_e.getMonth()+Z*T);var xe=_e.getMonth(),Pe=_e.getFullYear();_e.setDate(K.start_date.getDate()),m[3]&&u.date.day_week(_e,m[2],m[3]);var ke=u.config.recurring_overflow_instances;return _e.getMonth()!=xe&&"none"!=ke&&(_e="lastDay"===ke?new Date(Pe,xe+1,0,_e.getHours(),_e.getMinutes(),_e.getSeconds(),_e.getMilliseconds()):u.date[w](new Date(Pe,xe+1,0),Z||1,K,ce)),_e})}},u.repeat_date=function(C,c,m,w,T,j){w=w||this._min_date,T=T||this._max_date;var J=j||-1,M=new Date(C.start_date.valueOf()),Z=M.getHours(),K=0;for(!C.rec_pattern&&C.rec_type&&(C.rec_pattern=C.rec_type.split("#")[0]),this.transpose_type(C.rec_pattern),M=u.date["transpose_"+C.rec_pattern](M,w,C);M&&(M<C.start_date||u._fix_daylight_saving_date(M,w,C,M,new Date(M.valueOf()+1e3*C.event_length)).valueOf()<=w.valueOf()||M.valueOf()+1e3*C.event_length<=w.valueOf());)M=this.date["add_"+C.rec_pattern](M,1,C);for(;M&&M<T&&M<C.end_date&&(J<0||K<J);){M.setHours(Z);var ce=u.config.occurrence_timestamp_in_utc?Date.UTC(M.getFullYear(),M.getMonth(),M.getDate(),M.getHours(),M.getMinutes(),M.getSeconds()):M.valueOf(),_e=this._get_rec_marker(ce,C.id);if(_e)m&&("none"!=_e.rec_type&&K++,c.push(_e));else{var xe=new Date(M.valueOf()+1e3*C.event_length),Pe=this._copy_event(C);if(Pe.text=C.text,Pe.start_date=M,Pe.event_pid=C.id,Pe.id=C.id+"#"+Math.round(ce/1e3),Pe.end_date=xe,Pe.end_date=u._fix_daylight_saving_date(Pe.start_date,Pe.end_date,C,M,Pe.end_date),Pe._timed=this.isOneDayEvent(Pe),!Pe._timed&&!this._table_view&&!this.config.multi_day)return;c.push(Pe),m||(this._events[Pe.id]=Pe,this._rec_temp.push(Pe)),K++}M=this.date["add_"+C.rec_pattern](M,1,C)}},u._fix_daylight_saving_date=function(C,c,m,w,T){var j=C.getTimezoneOffset()-c.getTimezoneOffset();return j?j>0?new Date(w.valueOf()+1e3*m.event_length-60*j*1e3):new Date(c.valueOf()-60*j*1e3):new Date(T.valueOf())},u.getRecDates=function(C,c){var m="object"==xn(C)?C:u.getEvent(C),w=[];if(!m.rec_type)return[{start_date:m.start_date,end_date:m.end_date}];if("none"==m.rec_type)return[];u.repeat_date(m,w,!0,m.start_date,m.end_date,c=c||100);for(var T=[],j=0;j<w.length;j++)"none"!=w[j].rec_type&&T.push({start_date:w[j].start_date,end_date:w[j].end_date});return T},u.getEvents=function(C,c){var m=[];for(var w in this._events){var T=this._events[w];if(T&&T.start_date<c&&T.end_date>C)if(T.rec_pattern){if("none"==T.rec_pattern)continue;var j=[];this.repeat_date(T,j,!0,C,c);for(var J=0;J<j.length;J++)!j[J].rec_pattern&&j[J].start_date<c&&j[J].end_date>C&&!this._rec_markers[j[J].id]&&m.push(j[J])}else this._is_virtual_event(T.id)||m.push(T)}return m},u.config.repeat_date="%m.%d.%Y",u.config.lightbox.sections=[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"recurring",type:"recurring",map_to:"rec_type",button:"recurring"},{name:"time",height:72,type:"time",map_to:"auto"}],u._copy_dummy=function(C){var c=new Date(this.start_date),m=new Date(this.end_date);this.start_date=c,this.end_date=m,this.event_length=this.event_pid=this.rec_pattern=this.rec_type=null},u.config.include_end_by=!1,u.config.lightbox_recurring="ask",u.attachEvent("onClearAll",function(){u._rec_markers={},u._rec_markers_pull={},u._rec_temp=[]})},serialize:function(u){var ee=ot()(u);u.data_attributes=function(){var y=[],N=u._helpers.formatDate,C=ee();for(var c in C){var m=C[c];for(var w in m)"_"!=w.substr(0,1)&&y.push([w,"start_date"==w||"end_date"==w?N:null]);break}return y},u.toXML=function(y){var N=[],C=this.data_attributes(),c=ee();for(var m in c){var w=c[m];N.push("<event>");for(var T=0;T<C.length;T++)N.push("<"+C[T][0]+"><![CDATA["+(C[T][1]?C[T][1](w[C[T][0]]):w[C[T][0]])+"]]></"+C[T][0]+">");N.push("</event>")}return(y||"")+"<data>"+N.join("\n")+"</data>"},u._serialize_json_value=function(y){return null===y||"boolean"==typeof y?y=""+y:(y||0===y||(y=""),y='"'+y.toString().replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),y},u.toJSON=function(){return JSON.stringify(this.serialize())},u.toICal=function(y){var N=u.date.date_to_str("%Y%m%dT%H%i%s"),C=u.date.date_to_str("%Y%m%d"),c=[],m=ee();for(var w in m){var T=m[w];c.push("BEGIN:VEVENT"),T._timed&&(T.start_date.getHours()||T.start_date.getMinutes())?c.push("DTSTART:"+N(T.start_date)):c.push("DTSTART:"+C(T.start_date)),T._timed&&(T.end_date.getHours()||T.end_date.getMinutes())?c.push("DTEND:"+N(T.end_date)):c.push("DTEND:"+C(T.end_date)),c.push("SUMMARY:"+T.text),c.push("END:VEVENT")}return"BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//dhtmlXScheduler//NONSGML v2.2//EN\nDESCRIPTION:"+(y||"")+"\n"+c.join("\n")+"\nEND:VCALENDAR"}},timeline:function(u){Qe("Timeline",u.assert)},tooltip:function(u){var ee=u._createDomEventScope(),y={};u.ext.tooltip=u.dhtmlXTooltip=u.tooltip=y,y.config={className:"dhtmlXTooltip scheduler_tooltip tooltip",timeout_to_display:50,timeout_to_hide:50,delta_x:15,delta_y:-20},y.tooltip=document.createElement("div"),y.tooltip.className=y.config.className,u._waiAria.tooltipAttr(y.tooltip),y.show=function(N,C){if(!this._mobile||u.config.touch_tooltip){var c=y,m=this.tooltip,w=m.style;c.tooltip.className=c.config.className;var T=this.position(N);if(!this.isTooltip(N.target||N.srcElement)){var J=T.x+(c.config.delta_x||0),M=T.y-(c.config.delta_y||0);w.visibility="hidden",w.right="",w.bottom="",w.left="0",w.top="0",u.config.rtl&&(m.className+=" dhtmlXTooltip_rtl"),this.tooltip.innerHTML=C,document.body.appendChild(this.tooltip);var K=this.tooltip.offsetHeight;if(document.documentElement.clientWidth-J-this.tooltip.offsetWidth<0?(w.left="",w.right=document.documentElement.clientWidth-J+2*(c.config.delta_x||0)+"px"):w.left=J<0?T.x+Math.abs(c.config.delta_x||0)+"px":J+"px",document.documentElement.clientHeight-M-K<0){var ce=document.documentElement.clientHeight-M-2*(c.config.delta_y||0);ce+K>document.documentElement.clientHeight?(M-=Math.abs(document.documentElement.clientHeight-M-K),M=Math.max(M,0),w.top=M+"px"):(w.bottom=ce+"px",w.top="")}else w.top=M<0?T.y+Math.abs(c.config.delta_y||0)+"px":M+"px";u._waiAria.tooltipVisibleAttr(this.tooltip),w.visibility="visible",ee.attach(this.tooltip,"mouseleave",function(_e){for(var xe=u.dhtmlXTooltip,Pe=_e.relatedTarget;Pe!=u._obj&&Pe;)Pe=Pe.parentNode;Pe!=u._obj&&xe.delay(xe.hide,xe,[],xe.config.timeout_to_hide)}),u.callEvent("onTooltipDisplayed",[this.tooltip,this.tooltip.event_id])}}},y._clearTimeout=function(){this.tooltip._timeout_id&&clearTimeout(this.tooltip._timeout_id)},y.hide=function(){if(this.tooltip.parentNode){u._waiAria.tooltipHiddenAttr(this.tooltip);var N=this.tooltip.event_id;this.tooltip.event_id=null,ee.detachAll(),this.tooltip.parentNode.removeChild(this.tooltip),u.callEvent("onAfterTooltip",[N])}this._clearTimeout()},y.delay=function(N,C,c,m){this._clearTimeout(),this.tooltip._timeout_id=setTimeout(function(){if(u.$destroyed)return!0;var w=N.apply(C,c);return N=C=c=null,w},m||this.config.timeout_to_display)},y.isTooltip=function(N){for(var C=!1;N&&!C;)C=N.className==this.tooltip.className,N=N.parentNode;return C},y.position=function(N){return{x:N.clientX,y:N.clientY}},u.attachEvent("onMouseMove",function(N,C){var c=C.target||C.srcElement,m=y,w=m.isTooltip(c),T=m.isTooltipTarget&&m.isTooltipTarget(c);if(N&&u.getState().editor_id!=N||w||T){var j,J;if(N||m.tooltip.event_id){var M=u.getEvent(N)||u.getEvent(m.tooltip.event_id);if(!M)return;if(m.tooltip.event_id=M.id,!(j=u.templates.tooltip_text(M.start_date,M.end_date,M)))return m.hide()}if(T&&(j=""),u.$env.isIE)for(var Z in J={pageX:void 0,pageY:void 0,clientX:void 0,clientY:void 0,target:void 0,srcElement:void 0})J[Z]=C[Z];if(!u.callEvent("onBeforeTooltip",[N])||!j)return;m.delay(m.show,m,[J||C,j])}else m.delay(m.hide,m,[],m.config.timeout_to_hide)}),u.attachEvent("onBeforeDrag",function(){return y.hide(),!0}),u.attachEvent("onEventDeleted",function(){return y.hide(),!0}),u.attachEvent("onDestroy",function(){y.hide()})},treetimeline:function(u){Qe("Tree Timeline",u.assert)},units:function(u){Qe("Units",u.assert)},url:function(u){u._get_url_nav=function(){for(var ee={},y=(document.location.hash||"").replace("#","").split(","),N=0;N<y.length;N++){var C=y[N].split("=");2==C.length&&(ee[C[0]]=C[1])}return ee},u.attachEvent("onTemplatesReady",function(){var ee=!0,y=u.date.str_to_date("%Y-%m-%d"),N=u.date.date_to_str("%Y-%m-%d"),C=u._get_url_nav().event||null;function c(m){if(u.$destroyed)return!0;C=m,u.getEvent(m)&&u.showEvent(m)}u.attachEvent("onAfterEventDisplay",function(m){return C=null,!0}),u.attachEvent("onBeforeViewChange",function(m,w,T,j){if(ee){ee=!1;var J=u._get_url_nav();if(J.event)try{if(u.getEvent(J.event))return setTimeout(function(){c(J.event)}),!1;var M=u.attachEvent("onXLE",function(){setTimeout(function(){c(J.event)}),u.detachEvent(M)})}catch{}if(J.date||J.mode){try{this.setCurrentView(J.date?y(J.date):null,J.mode||null)}catch{this.setCurrentView(J.date?y(J.date):null,T)}return!1}}var Z=["date="+N(j||w),"mode="+(T||m)];C&&Z.push("event="+C);var K="#"+Z.join(",");return document.location.hash=K,!0})})},week_agenda:function(u){Qe("Week Agenda",u.assert)},wp:function(u){u.attachEvent("onLightBox",function(){if(this._cover)try{this._cover.style.height=this.expanded?"100%":(document.body.parentNode||document.body).scrollHeight+"px"}catch{}}),u.form_blocks.select.set_value=function(ee,y,N){void 0!==y&&""!==y||(y=(ee.firstChild.options[0]||{}).value),ee.firstChild.value=y||""}},year_view:function(u){u.config.year_x=4,u.config.year_y=3,u.xy.year_top=0,u.templates.year_date=function(T){return u.date.date_to_str(u.locale.labels.year_tab+" %Y")(T)},u.templates.year_month=u.date.date_to_str("%F"),u.templates.year_scale_date=u.date.date_to_str("%D"),u.templates.year_tooltip=function(T,j,J){return J.text};var ee=function(){return"year"==u._mode},y=function(T){var j=u.$domHelpers.closest(T,"[data-cell-date]");return j&&j.hasAttribute("data-cell-date")?u.templates.parse_date(j.getAttribute("data-cell-date")):null};u.dblclick_dhx_month_head=function(T){if(ee()){var j=T.target;if(u.$domHelpers.closest(j,".dhx_before")||u.$domHelpers.closest(j,".dhx_after"))return!1;var J=y(j);if(J){var M=J,Z=this.date.add(M,1,"day");!this.config.readonly&&this.config.dblclick_create&&this.addEventNow(M.valueOf(),Z.valueOf(),T)}}};var N=u.changeEventId;u.changeEventId=function(){N.apply(this,arguments),ee()&&this.year_view(!0)};var C=u.render_data;u.render_data=function(T){if(!ee())return C.apply(this,arguments);for(var j=0;j<T.length;j++)this._year_render_event(T[j])};var c=u.clear_view;u.clear_view=function(){if(!ee())return c.apply(this,arguments);var T=u._year_marked_cells,j=null;for(var J in T)T.hasOwnProperty(J)&&((j=T[J]).className="dhx_month_head",j.removeAttribute("date"),j.removeAttribute("data-year-date"));u._year_marked_cells={}},u._hideToolTip=function(){this._tooltip&&(this._tooltip.style.display="none",this._tooltip.date=new Date(9999,1,1))},u._showToolTip=function(T,j,J,M){if(this._tooltip){if(this._tooltip.date.valueOf()==T.valueOf())return;this._tooltip.innerHTML=""}else{var Z=this._tooltip=document.createElement("div");Z.className="dhx_year_tooltip",this.config.rtl&&(Z.className+=" dhx_tooltip_rtl"),document.body.appendChild(Z),Z.addEventListener("click",u._click.dhx_cal_data)}for(var K=this.getEvents(T,this.date.add(T,1,"day")),ce="",_e=0;_e<K.length;_e++){var xe=K[_e];if(this.filter_event(xe.id,xe)){var Pe=xe.color?"background:"+xe.color+";":"",ke=xe.textColor?"color:"+xe.textColor+";":"";ce+="<div class='dhx_tooltip_line' style='"+Pe+ke+"' event_id='"+K[_e].id+"' "+this.config.event_attribute+"='"+K[_e].id+"'>",ce+="<div class='dhx_tooltip_date' style='"+Pe+ke+"'>"+(K[_e]._timed?this.templates.event_date(K[_e].start_date):"")+"</div>",ce+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",ce+=this.templates.year_tooltip(K[_e].start_date,K[_e].end_date,K[_e])+"</div>"}}this._tooltip.style.display="",this._tooltip.style.top="0px",this._tooltip.style.left=document.body.offsetWidth-j.left-this._tooltip.offsetWidth<0?j.left-this._tooltip.offsetWidth+"px":j.left+M.offsetWidth+"px",this._tooltip.date=T,this._tooltip.innerHTML=ce,this._tooltip.style.top=document.body.offsetHeight-j.top-this._tooltip.offsetHeight<0?j.top-this._tooltip.offsetHeight+M.offsetHeight+"px":j.top+"px"},u._year_view_tooltip_handler=function(T){if(ee()){var j=T.target||T.srcElement;"a"==j.tagName.toLowerCase()&&(j=j.parentNode),-1!=u._getClassName(j).indexOf("dhx_year_event")?u._showToolTip(u.templates.parse_date(j.getAttribute("data-year-date")),u.$domHelpers.getOffset(j),T,j):u._hideToolTip()}},u._init_year_tooltip=function(){u._detachDomEvent(u._els.dhx_cal_data[0],"mouseover",u._year_view_tooltip_handler),u.event(u._els.dhx_cal_data[0],"mouseover",u._year_view_tooltip_handler)},u._get_year_cell=function(T){for(var j=u.templates.format_date(T),J=this.$root.querySelectorAll('.dhx_cal_data [data-cell-date="'.concat(j,'"] .dhx_month_head')),M=0;M<J.length;M++)if(!u.$domHelpers.closest(J[M],".dhx_after, .dhx_before"))return J[M];return null},u._year_marked_cells={},u._mark_year_date=function(T,j){var J=u.templates.format_date(T),M=this._get_year_cell(T);if(M){var Z=this.templates.event_class(j.start_date,j.end_date,j);u._year_marked_cells[J]||(M.classList.add("dhx_year_event"),M.setAttribute("data-year-date",J),M.setAttribute("date",J),u._year_marked_cells[J]=M),M.className+=Z?" "+Z:""}},u._unmark_year_date=function(T){var j=this._get_year_cell(T);j&&(j.className="dhx_month_head")},u._year_render_event=function(T){var j=T.start_date;for(j=j.valueOf()<this._min_date.valueOf()?this._min_date:this.date.date_part(new Date(j));j<T.end_date;)if(this._mark_year_date(j,T),(j=this.date.add(j,1,"day")).valueOf()>=this._max_date.valueOf())return},u.year_view=function(T){var j;if(T&&(j=u.xy.scale_height,u.xy.scale_height=-1),u._els.dhx_cal_header[0].style.display=T?"none":"",u.set_sizes(),T&&(u.xy.scale_height=j),u._table_view=T,!this._load_mode||!this._load())if(T){if(u._init_year_tooltip(),u._reset_year_scale(),u._load_mode&&u._load())return void(u._render_wait=!0);u.render_view_data()}else u._hideToolTip()},u._reset_year_scale=function(){this._cols=[],this._colsS={};var T=[],j=this._els.dhx_cal_data[0],J=this.config;j.scrollTop=0,j.innerHTML="";var M=Math.floor(parseInt(j.style.width)/J.year_x),Z=Math.floor((parseInt(j.style.height)-u.xy.year_top)/J.year_y);Z<190&&(Z=190,M=Math.floor((parseInt(j.style.width)-u.xy.scroll_width)/J.year_x));var K=M-11,ce=0,_e=document.createElement("div"),xe=this.date.week_start(u._currentDate());this._process_ignores(xe,7,"day",1);for(var Pe=7-(this._ignores_detected||0),ke=0,qe=0;qe<7;qe++)this._ignores&&this._ignores[qe]||(this._cols[qe]=Math.floor(K/(Pe-ke)),this._render_x_header(qe,ce,xe,_e),K-=this._cols[qe],ce+=this._cols[qe],ke++),xe=this.date.add(xe,1,"day");for(_e.lastChild.className+=" dhx_scale_bar_last",qe=0;qe<_e.childNodes.length;qe++)this._waiAria.yearHeadCell(_e.childNodes[qe]);var rt=this.date[this._mode+"_start"](this.date.copy(this._date)),wt=rt,Xe=null;for(qe=0;qe<J.year_y;qe++)for(var ct=0;ct<J.year_x;ct++){(Xe=document.createElement("div")).className="dhx_year_box",Xe.style.cssText="position:absolute;",Xe.setAttribute("date",this._helpers.formatDate(rt)),Xe.setAttribute("data-month-date",this._helpers.formatDate(rt)),Xe.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid'><div class='dhx_year_week'>"+_e.innerHTML+"</div><div class='dhx_year_body'></div></div>";var Ze=Xe.querySelector(".dhx_year_month"),ht=Xe.querySelector(".dhx_year_grid"),nt=Xe.querySelector(".dhx_year_week"),jt=Xe.querySelector(".dhx_year_body"),Yt=u.uid();this._waiAria.yearHeader(Ze,Yt),this._waiAria.yearGrid(ht,Yt),Ze.innerHTML=this.templates.year_month(rt);var Ht=this.date.week_start(rt);this._reset_month_scale(jt,rt,Ht,6);for(var rn=jt.querySelectorAll("td"),en=0;en<rn.length;en++)this._waiAria.yearDayCell(rn[en]);j.appendChild(Xe),nt.style.height=nt.childNodes[0].offsetHeight+"px";var sn=Math.round((Z-190)/2);Xe.style.marginTop=sn+"px",this.set_xy(Xe,M-10,Z-sn-10,M*ct+5,Z*qe+5+u.xy.year_top),T[qe*J.year_x+ct]=(rt.getDay()-(this.config.start_on_monday?1:0)+7)%7,rt=this.date.add(rt,1,"month")}var hn=this._getNavDateElement();hn&&(hn.innerHTML=this.templates[this._mode+"_date"](wt,rt,this._mode)),this.week_starts=T,T._month=wt.getMonth(),this._min_date=wt,this._max_date=rt};var m=u.getActionData;u.getActionData=function(T){return ee()?{date:y(T.target),section:null}:m.apply(u,arguments)};var w=u._locate_event;u._locate_event=function(T){var j=w.apply(u,arguments);if(!j){var J=y(T);if(!J)return null;var M=u.getEvents(J,u.date.add(J,1,"day"));if(!M.length)return null;j=M[0].id}return j},u.attachEvent("onDestroy",function(){u._hideToolTip()})}}),Wn=$n.getSchedulerInstance(),ti={plugin:Wn.bind($n.plugin,$n)};window.scheduler=Wn,window.Scheduler=ti,re.default=Wn}])}),
/**
* @license
* Video.js 7.20.3 <http://videojs.com/>
* Copyright Brightcove, Inc. <https://www.brightcove.com/>
* Available under Apache License Version 2.0
* <https://github.com/videojs/video.js/blob/main/LICENSE>
*
* Includes vtt.js <https://github.com/mozilla/vtt.js>
* Available under Apache License Version 2.0
* <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
*/
function(z,re){"object"==typeof exports&&typeof module<"u"?module.exports=re():"function"==typeof define&&define.amd?define(re):(z=typeof globalThis<"u"?globalThis:z||self).videojs=re()}(this,function(){"use strict";for(var z,q={},O=function(i,l){return q[i]=q[i]||[],l&&(q[i]=q[i].concat(l)),q[i]},I=function(i,l){return!((l=O(i).indexOf(l))<=-1||(q[i]=q[i].slice(),q[i].splice(l,1),0))},R={prefixed:!0},V=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],F=V[0],W=0;W<V.length;W++)if(V[W][1]in document){z=V[W];break}if(z){for(var A=0;A<z.length;A++)R[F[A]]=z[A];R.prefixed=z[0]!==F[0]}var P=[],S=function i(l){function o(){for(var s=arguments.length,h=new Array(s),_=0;_<s;_++)h[_]=arguments[_];a("log",t,h)}var t="info",a=function(i,l){return function(o,_,a){var s,h=l.levels[_];_=new RegExp("^("+h+")$"),"log"!==o&&a.unshift(o.toUpperCase()+":"),a.unshift(i+":"),P&&(P.push([].concat(a)),P.splice(0,0<(s=P.length-1e3)?s:0)),!window.console||(s=(s=window.console[o])||"debug"!==o?s:window.console.info||window.console.log)&&h&&_.test(o)&&s[Array.isArray(a)?"apply":"call"](window.console,a)}}(l,o);return o.createLogger=function(s){return i(l+": "+s)},o.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},o.level=function(s){if("string"==typeof s){if(!o.levels.hasOwnProperty(s))throw new Error('"'+s+'" in not a valid log level');t=s}return t},(o.history=function(){return P?[].concat(P):[]}).filter=function(s){return(P||[]).filter(function(h){return new RegExp(".*"+s+".*").test(h[0])})},o.history.clear=function(){P&&(P.length=0)},o.history.disable=function(){null!==P&&(P.length=0,P=null)},o.history.enable=function(){null===P&&(P=[])},o.error=function(){for(var s=arguments.length,h=new Array(s),_=0;_<s;_++)h[_]=arguments[_];return a("error",t,h)},o.warn=function(){for(var s=arguments.length,h=new Array(s),_=0;_<s;_++)h[_]=arguments[_];return a("warn",t,h)},o.debug=function(){for(var s=arguments.length,h=new Array(s),_=0;_<s;_++)h[_]=arguments[_];return a("debug",t,h)},o}("VIDEOJS"),E=S.createLogger,Zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x(i,l){return i(l={exports:{}},l.exports),l.exports}var H=x(function(i){function l(){return i.exports=l=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var a,s=arguments[t];for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},l.apply(this,arguments)}i.exports=l}),B=Object.prototype.toString,ae=function(i){return G(i)?Object.keys(i):[]};function he(i,l){ae(i).forEach(function(o){return l(i[o],o)})}function de(i){for(var l=arguments.length,o=new Array(1<l?l-1:0),t=1;t<l;t++)o[t-1]=arguments[t];return Object.assign?H.apply(void 0,[i].concat(o)):(o.forEach(function(a){a&&he(a,function(s,h){i[h]=s})}),i)}function G(i){return!!i&&"object"==typeof i}function U(i){return G(i)&&"[object Object]"===B.call(i)&&i.constructor===Object}function te(i,l){if(!i||!l||"function"!=typeof window.getComputedStyle)return"";var o;try{o=window.getComputedStyle(i)}catch{return""}return o?o.getPropertyValue(l)||o[l]:""}var ne=window.navigator&&window.navigator.userAgent||"",vi=(Cn=/AppleWebKit\/([\d.]+)/i.exec(ne))?parseFloat(Cn.pop()):null,di=/iPod/i.test(ne),Vn=(ri=ne.match(/OS (\d+)_/i))&&ri[1]?ri[1]:null,oe=/Android/i.test(ne),fe=function(){var i=ne.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!i)return null;var l=i[1]&&parseFloat(i[1]),o=i[2]&&parseFloat(i[2]);return l&&o?parseFloat(i[1]+"."+i[2]):l||null}(),Y=oe&&fe<5&&vi<537,le=/Firefox/i.test(ne),X=/Edg/i.test(ne),$=!X&&(/Chrome/i.test(ne)||/CriOS/i.test(ne)),we=(Ji=ne.match(/(Chrome|CriOS)\/(\d+)/))&&Ji[2]?parseFloat(Ji[2]):null,ue=Jn=!(Jn=(Jn=/MSIE\s(\d+)\.\d/.exec(ne))&&parseFloat(Jn[1]))&&/Trident\/7.0/i.test(ne)&&/rv:11.0/.test(ne)?11:Jn,Mi=/Safari/i.test(ne)&&!$&&!oe&&!X,ve=/Windows/i.test(ne),Ae=Boolean(Le()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),zn=/iPad/i.test(ne)||Mi&&Ae&&!/iPhone/i.test(ne),je=/iPhone/i.test(ne)&&!zn,Ye=je||zn||di,ft=(Mi||Ye)&&!$,ii=Object.freeze({__proto__:null,IS_IPOD:di,IOS_VERSION:Vn,IS_ANDROID:oe,ANDROID_VERSION:fe,IS_NATIVE_ANDROID:Y,IS_FIREFOX:le,IS_EDGE:X,IS_CHROME:$,CHROME_VERSION:we,IE_VERSION:ue,IS_SAFARI:Mi,IS_WINDOWS:ve,TOUCH_ENABLED:Ae,IS_IPAD:zn,IS_IPHONE:je,IS_IOS:Ye,IS_ANY_SAFARI:ft});function Rt(i){return"string"==typeof i&&Boolean(i.trim())}function Ee(i){if(0<=i.indexOf(" "))throw new Error("class has illegal whitespace characters")}function Le(){return document===window.document}function ot(i){return G(i)&&1===i.nodeType}function yt(){try{return window.parent!==window.self}catch{return!0}}function pt(i){return function(l,o){return Rt(l)?(o=ot(o=Rt(o)?document.querySelector(o):o)?o:document)[i]&&o[i](l):document[i](null)}}function Ve(i,l,o,t){void 0===i&&(i="div"),void 0===l&&(l={}),void 0===o&&(o={});var a=document.createElement(i);return Object.getOwnPropertyNames(l).forEach(function(s){var h=l[s];-1!==s.indexOf("aria-")||"role"===s||"type"===s?(S.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+s+" to "+h+"."),a.setAttribute(s,h)):"textContent"===s?et(a,h):a[s]===h&&"tabIndex"!==s||(a[s]=h)}),Object.getOwnPropertyNames(o).forEach(function(s){a.setAttribute(s,o[s])}),t&&Ft(a,t),a}function et(i,l){return typeof i.textContent>"u"?i.innerText=l:i.textContent=l,i}function We(i,l){l.firstChild?l.insertBefore(i,l.firstChild):l.appendChild(i)}function bt(i,l){return Ee(l),i.classList?i.classList.contains(l):new RegExp("(^|\\s)"+l+"($|\\s)").test(i.className)}function xt(i,l){return i.classList?i.classList.add(l):bt(i,l)||(i.className=(i.className+" "+l).trim()),i}function Me(i,l){return i?(i.classList?i.classList.remove(l):(Ee(l),i.className=i.className.split(/\s+/).filter(function(o){return o!==l}).join(" ")),i):(S.warn("removeClass was called with an element that doesn't exist"),null)}function Oe(i,l,o){var t=bt(i,l);if((o="boolean"!=typeof(o="function"==typeof o?o(i,l):o)?!t:o)!==t)return(o?xt:Me)(i,l),i}function Fe(i,l){Object.getOwnPropertyNames(l).forEach(function(o){var t=l[o];null===t||typeof t>"u"||!1===t?i.removeAttribute(o):i.setAttribute(o,!0===t?"":t)})}function Ge(i){var l={};if(i&&i.attributes&&0<i.attributes.length)for(var t=i.attributes,a=t.length-1;0<=a;a--){var s=t[a].name,h=t[a].value;"boolean"!=typeof i[s]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+",")||(h=null!==h),l[s]=h}return l}function kt(i,l){return i.getAttribute(l)}function Ut(i,l,o){i.setAttribute(l,o)}function Lt(i,l){i.removeAttribute(l)}function st(){document.body.focus(),document.onselectstart=function(){return!1}}function Vt(){document.onselectstart=function(){return!0}}function Qt(i){if(i&&i.getBoundingClientRect&&i.parentNode){var l=i.getBoundingClientRect(),o={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==l[t]&&(o[t]=l[t])}),o.height||(o.height=parseFloat(te(i,"height"))),o.width||(o.width=parseFloat(te(i,"width"))),o}}function Xt(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};for(var l=i.offsetWidth,o=i.offsetHeight,t=0,a=0;i.offsetParent&&i!==document[R.fullscreenElement];)t+=i.offsetLeft,a+=i.offsetTop,i=i.offsetParent;return{left:t,top:a,width:l,height:o}}function Wt(ie,l){var o={x:0,y:0};if(Ye)for(var t=ie;t&&"html"!==t.nodeName.toLowerCase();){var a,s=te(t,"transform");/^matrix/.test(s)?(a=s.slice(7,-1).split(/,\s/).map(Number),o.x+=a[4],o.y+=a[5]):/^matrix3d/.test(s)&&(s=s.slice(9,-1).split(/,\s/).map(Number),o.x+=s[12],o.y+=s[13]),t=t.parentNode}var h={},be=Xt(l.target),_=Xt(ie),D=_.width;return ie=l.offsetY-(_.top-be.top),be=l.offsetX-(_.left-be.left),l.changedTouches&&(be=l.changedTouches[0].pageX-_.left,ie=l.changedTouches[0].pageY+_.top,Ye&&(be-=o.x,ie-=o.y)),h.y=1-Math.max(0,Math.min(1,ie/_.height)),h.x=Math.max(0,Math.min(1,be/D)),h}function Nt(i){return G(i)&&3===i.nodeType}function Bt(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function ln(i){return"function"==typeof i&&(i=i()),(Array.isArray(i)?i:[i]).map(function(l){return ot(l="function"==typeof l?l():l)||Nt(l)?l:"string"==typeof l&&/\S/.test(l)?document.createTextNode(l):void 0}).filter(function(l){return l})}function Ft(i,l){return ln(l).forEach(function(o){return i.appendChild(o)}),i}function nn(i,l){return Ft(Bt(i),l)}function Et(i){return void 0===i.button&&void 0===i.buttons||0===i.button&&void 0===i.buttons||"mouseup"===i.type&&0===i.button&&0===i.buttons||0===i.button&&1===i.buttons}var Mt,Tn=pt("querySelector"),Un=pt("querySelectorAll"),Dn=Object.freeze({__proto__:null,isReal:Le,isEl:ot,isInFrame:yt,createEl:Ve,textContent:et,prependTo:We,hasClass:bt,addClass:xt,removeClass:Me,toggleClass:Oe,setAttributes:Fe,getAttributes:Ge,getAttribute:kt,setAttribute:Ut,removeAttribute:Lt,blockTextSelection:st,unblockTextSelection:Vt,getBoundingClientRect:Qt,findPosition:Xt,getPointerPosition:Wt,isTextNode:Nt,emptyEl:Bt,normalizeContent:ln,appendContent:Ft,insertContent:nn,isSingleLeftClick:Et,$:Tn,$$:Un}),dt=!1,He=function(){if(!1!==Mt.options.autoSetup){var i=Array.prototype.slice.call(document.getElementsByTagName("video")),l=Array.prototype.slice.call(document.getElementsByTagName("audio")),o=Array.prototype.slice.call(document.getElementsByTagName("video-js")),t=i.concat(l,o);if(t&&0<t.length)for(var a=0,s=t.length;a<s;a++){var h=t[a];if(!h||!h.getAttribute){mt(1);break}void 0===h.player&&null!==h.getAttribute("data-setup")&&Mt(h)}else dt||mt(1)}};function mt(i,l){Le()&&(l&&(Mt=l),window.setTimeout(He,i))}function Ce(){dt=!0,window.removeEventListener("load",Ce)}function at(i){var l=document.createElement("style");return l.className=i,l}function St(i,l){i.styleSheet?i.styleSheet.cssText=l:i.textContent=l}Le()&&("complete"===document.readyState?Ce():window.addEventListener("load",Ce));var Je=3;window.WeakMap||(fi=function(){function i(){this.vdata="vdata"+Math.floor(window.performance&&window.performance.now()||Date.now()),this.data={}}var l=i.prototype;return l.set=function(o,t){var a=o[this.vdata]||Je++;return o[this.vdata]||(o[this.vdata]=a),this.data[a]=t,this},l.get=function(o){var t=o[this.vdata];if(t)return this.data[t];S("We have no data for this element",o)},l.has=function(o){return o[this.vdata]in this.data},l.delete=function(o){var t=o[this.vdata];t&&(delete this.data[t],delete o[this.vdata])},i}());var lt,De=new(window.WeakMap?WeakMap:fi);function It(i,l){var o;De.has(i)&&(0===(o=De.get(i)).handlers[l].length&&(delete o.handlers[l],i.removeEventListener?i.removeEventListener(l,o.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+l,o.dispatcher)),Object.getOwnPropertyNames(o.handlers).length<=0&&(delete o.handlers,delete o.dispatcher,delete o.disabled),0===Object.getOwnPropertyNames(o).length&&De.delete(i))}function qt(i,l,o,t){o.forEach(function(a){i(l,a,t)})}function ge(i){if(i.fixed_)return i;function l(){return!0}function o(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){var t,a,s,h=i||window.event;for(t in i={},h)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&h.preventDefault||(i[t]=h[t]));i.target||(i.target=i.srcElement||document),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){h.preventDefault&&h.preventDefault(),i.returnValue=!1,h.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){h.stopPropagation&&h.stopPropagation(),i.cancelBubble=!0,h.cancelBubble=!0,i.isPropagationStopped=l},i.isPropagationStopped=o,i.stopImmediatePropagation=function(){h.stopImmediatePropagation&&h.stopImmediatePropagation(),i.isImmediatePropagationStopped=l,i.stopPropagation()},i.isImmediatePropagationStopped=o,null!=i.clientX&&(a=document.documentElement,s=document.body,i.pageX=i.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),i.pageY=i.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)),i.which=i.charCode||i.keyCode,null!=i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i.fixed_=!0,i}var Ct=["touchstart","touchmove"];function Be(i,l,o){if(Array.isArray(l))return qt(Be,i,l,o);De.has(i)||De.set(i,{});var t=De.get(i);t.handlers||(t.handlers={}),t.handlers[l]||(t.handlers[l]=[]),o.guid||(o.guid=Je++),t.handlers[l].push(o),t.dispatcher||(t.disabled=!1,t.dispatcher=function(a,s){if(!t.disabled){a=ge(a);var h=t.handlers[a.type];if(h)for(var _=h.slice(0),D=0,Q=_.length;D<Q&&!a.isImmediatePropagationStopped();D++)try{_[D].call(i,a,s)}catch(ie){S.error(ie)}}}),1===t.handlers[l].length&&(i.addEventListener?(o=!1,function(){if("boolean"!=typeof lt){lt=!1;try{var i=Object.defineProperty({},"passive",{get:function(){lt=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{}}return lt}()&&-1<Ct.indexOf(l)&&(o={passive:!0}),i.addEventListener(l,t.dispatcher,o)):i.attachEvent&&i.attachEvent("on"+l,t.dispatcher))}function Qe(i,l,o){if(De.has(i)){var t=De.get(i);if(t.handlers){if(Array.isArray(l))return qt(Qe,i,l,o);var a=function(D,Q){t.handlers[Q]=[],It(D,Q)};if(void 0!==l){var s=t.handlers[l];if(s)if(o){if(o.guid)for(var h=0;h<s.length;h++)s[h].guid===o.guid&&s.splice(h--,1);It(i,l)}else a(i,l)}else for(var _ in t.handlers)Object.prototype.hasOwnProperty.call(t.handlers||{},_)&&a(i,_)}}}function Tt(i,l,o){var t=De.has(i)?De.get(i):{},a=i.parentNode||i.ownerDocument;return"string"==typeof l?l={type:l,target:i}:l.target||(l.target=i),l=ge(l),t.dispatcher&&t.dispatcher.call(i,l,o),a&&!l.isPropagationStopped()&&!0===l.bubbles?Tt.call(null,a,l,o):!a&&!l.defaultPrevented&&l.target&&l.target[l.type]&&(De.has(l.target)||De.set(l.target,{}),a=De.get(l.target),l.target[l.type]&&(a.disabled=!0,"function"==typeof l.target[l.type]&&l.target[l.type](),a.disabled=!1)),!l.defaultPrevented}function dn(i,l,o){if(Array.isArray(l))return qt(dn,i,l,o);function t(){Qe(i,l,t),o.apply(this,arguments)}t.guid=o.guid=o.guid||Je++,Be(i,l,t)}function Jt(i,l,o){function t(){Qe(i,l,t),o.apply(this,arguments)}t.guid=o.guid=o.guid||Je++,Be(i,l,t)}function zt(i,l,o){return l.guid||(l.guid=Je++),(i=l.bind(i)).guid=o?o+"_"+l.guid:l.guid,i}function yn(i,l){var o=window.performance.now();return function(){var t=window.performance.now();l<=t-o&&(i.apply(void 0,arguments),o=t)}}function kn(){}var xn,$n=Object.freeze({__proto__:null,fixEvent:ge,on:Be,off:Qe,trigger:Tt,one:dn,any:Jt});function Wn(i){return"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_||(i.constructor&&i.constructor.name?i.constructor.name:typeof i)}function ti(i){return"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length}function u(i,l,o){if(!i||!i.nodeName&&!c(i))throw new Error("Invalid target for "+Wn(l)+"#"+o+"; must be a DOM node or evented object.")}function ee(i,l,o){if(!ti(i))throw new Error("Invalid event type for "+Wn(l)+"#"+o+"; must be a non-empty string or array.")}function y(i,l,o){if("function"!=typeof i)throw new Error("Invalid listener for "+Wn(l)+"#"+o+"; must be a function.")}function N(i,h,o){var t,a,s=h.length<3||h[0]===i||h[0]===i.eventBusEl_;return h=s?(t=i.eventBusEl_,3<=h.length&&h.shift(),a=h[0],h[1]):(t=h[0],a=h[1],h[2]),u(t,i,o),ee(a,i,o),y(h,i,o),{isTargetingSelf:s,target:t,type:a,listener:h=zt(i,h)}}function C(i,l,o,t){u(i,i,l),i.nodeName?$n[l](i,o,t):i[l](o,t)}kn.prototype.allowedEvents_={},kn.prototype.addEventListener=kn.prototype.on=function(i,l){var o=this.addEventListener;this.addEventListener=function(){},Be(this,i,l),this.addEventListener=o},kn.prototype.removeEventListener=kn.prototype.off=function(i,l){Qe(this,i,l)},kn.prototype.one=function(i,l){var o=this.addEventListener;this.addEventListener=function(){},dn(this,i,l),this.addEventListener=o},kn.prototype.any=function(i,l){var o=this.addEventListener;this.addEventListener=function(){},Jt(this,i,l),this.addEventListener=o},kn.prototype.dispatchEvent=kn.prototype.trigger=function(i){var l=i.type||i;i=ge(i="string"==typeof i?{type:l}:i),this.allowedEvents_[l]&&this["on"+l]&&this["on"+l](i),Tt(this,i)},kn.prototype.queueTrigger=function(i){var l=this,o=i.type||i,t=(xn=xn||new Map).get(this);t||xn.set(this,t=new Map);var a=t.get(o);t.delete(o),window.clearTimeout(a),a=window.setTimeout(function(){0===t.size&&(t=null,xn.delete(l)),l.trigger(i)},0),t.set(o,a)};var c=function(i){return i instanceof kn||!!i.eventBusEl_&&["on","one","off","trigger"].every(function(l){return"function"==typeof i[l]})},m={on:function(){for(var i=this,l=arguments.length,o=new Array(l),t=0;t<l;t++)o[t]=arguments[t];var a,s=N(this,o,"on"),h=s.isTargetingSelf,_=s.target,D=s.type,Q=s.listener;C(_,"on",D,Q),h||((a=function(){return i.off(_,D,Q)}).guid=Q.guid,(h=function(){return i.off("dispose",a)}).guid=Q.guid,C(this,"on","dispose",a),C(_,"on","dispose",h))},one:function(){for(var i=this,l=arguments.length,o=new Array(l),t=0;t<l;t++)o[t]=arguments[t];var a=N(this,o,"one"),s=a.isTargetingSelf,h=a.target,_=a.type,D=a.listener;s?C(h,"one",_,D):((s=function Q(){i.off(h,_,Q);for(var ie=arguments.length,be=new Array(ie),Se=0;Se<ie;Se++)be[Se]=arguments[Se];D.apply(null,be)}).guid=D.guid,C(h,"one",_,s))},any:function(){for(var i=this,l=arguments.length,o=new Array(l),t=0;t<l;t++)o[t]=arguments[t];var a=N(this,o,"any"),s=a.isTargetingSelf,h=a.target,_=a.type,D=a.listener;s?C(h,"any",_,D):((s=function Q(){i.off(h,_,Q);for(var ie=arguments.length,be=new Array(ie),Se=0;Se<ie;Se++)be[Se]=arguments[Se];D.apply(null,be)}).guid=D.guid,C(h,"any",_,s))},off:function(i,l,o){!i||ti(i)?Qe(this.eventBusEl_,i,l):(u(i,this,"off"),ee(l,this,"off"),y(o,this,"off"),o=zt(this,o),this.off("dispose",o),i.nodeName?(Qe(i,l,o),Qe(i,"dispose",o)):c(i)&&(i.off(l,o),i.off("dispose",o)))},trigger:function(i,l){u(this.eventBusEl_,this,"trigger");var o=i&&"string"!=typeof i?i.type:i;if(!ti(o)){if(o="Invalid event type for "+Wn(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.",!i)throw new Error(o);(this.log||S).error(o)}return Tt(this.eventBusEl_,i,l)}};function w(i,l){if(l=(l=void 0===l?{}:l).eventBusKey){if(!i[l].nodeName)throw new Error('The eventBusKey "'+l+'" does not refer to an element.');i.eventBusEl_=i[l]}else i.eventBusEl_=Ve("span",{className:"vjs-event-bus"});return de(i,m),i.eventedCallbacks&&i.eventedCallbacks.forEach(function(o){o()}),i.on("dispose",function(){i.off(),[i,i.el_,i.eventBusEl_].forEach(function(o){o&&De.has(o)&&De.delete(o)}),window.setTimeout(function(){i.eventBusEl_=null},0)}),i}var T={state:{},setState:function(i){var l,o=this;return he(i="function"==typeof i?i():i,function(t,a){o.state[a]!==t&&((l=l||{})[a]={from:o.state[a],to:t}),o.state[a]=t}),l&&c(this)&&this.trigger({changes:l,type:"statechanged"}),l}};function j(i,l){return de(i,T),i.state=de({},i.state,l),"function"==typeof i.handleStateChanged&&c(i)&&i.on("statechanged",i.handleStateChanged),i}function J(i){return"string"!=typeof i?i:i.replace(/./,function(l){return l.toLowerCase()})}function M(i){return"string"!=typeof i?i:i.replace(/./,function(l){return l.toUpperCase()})}function Z(){for(var i={},l=arguments.length,o=new Array(l),t=0;t<l;t++)o[t]=arguments[t];return o.forEach(function(a){a&&he(a,function(s,h){U(s)?(U(i[h])||(i[h]={}),i[h]=Z(i[h],s)):i[h]=s})}),i}var K=window.Map||function(){function i(){this.map_={}}var l=i.prototype;return l.has=function(o){return o in this.map_},l.delete=function(o){var t=this.has(o);return delete this.map_[o],t},l.set=function(o,t){return this.map_[o]=t,this},l.forEach=function(o,t){for(var a in this.map_)o.call(t,this.map_[a],a,this)},i}(),ce=window.Set||function(){function i(){this.set_={}}var l=i.prototype;return l.has=function(o){return o in this.set_},l.delete=function(o){var t=this.has(o);return delete this.set_[o],t},l.add=function(o){return this.set_[o]=1,this},l.forEach=function(o,t){for(var a in this.set_)o.call(t,a,a,this)},i}(),_e=x(function(i,l){function o(ie){if(!ie||"object"!=typeof ie||(Q=ie.which||ie.keyCode||ie.charCode)&&(ie=Q),"number"==typeof ie)return _[ie];var Q=String(ie);return(ie=t[Q.toLowerCase()])||((ie=a[Q.toLowerCase()])?ie:1===Q.length?Q.charCodeAt(0):void 0)}o.isEventKey=function(D,Q){if(D&&"object"==typeof D){var ie=D.which||D.keyCode||D.charCode;if(null==ie)return!1;if("string"==typeof Q){if((D=t[Q.toLowerCase()])||(D=a[Q.toLowerCase()]))return D===ie}else if("number"==typeof Q)return Q===ie;return!1}};for(var t=(l=i.exports=o).code=l.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=l.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},s=97;s<123;s++)t[String.fromCharCode(s)]=s-32;for(s=48;s<58;s++)t[s-48]=s;for(s=1;s<13;s++)t["f"+s]=s+111;for(s=0;s<10;s++)t["numpad "+s]=s+96;var h,_=l.names=l.title={};for(s in t)_[t[s]]=s;for(h in a)t[h]=a[h]}),xe=function(){function i(o,t,a){var s=this;this.player_=!o&&this.play?o=this:o,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Z({},this.options_),t=this.options_=Z(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(o=o&&o.id&&o.id()||"no_player",this.id_=o+"_component_"+Je++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(function(h){return s.addClass(h)}),!1!==t.evented&&(w(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),j(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ce,this.setIntervalIds_=new ce,this.rafIds_=new ce,this.namedRafs_=new K,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(a),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var l=i.prototype;return l.dispose=function(o){if(void 0===o&&(o={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(o.restoreEl?this.el_.parentNode.replaceChild(o.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},l.isDisposed=function(){return Boolean(this.isDisposed_)},l.player=function(){return this.player_},l.options=function(o){return o&&(this.options_=Z(this.options_,o)),this.options_},l.el=function(){return this.el_},l.createEl=function(o,t,a){return Ve(o,t,a)},l.localize=function(o,t,D){void 0===D&&(D=o);var _=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),h=s&&s[_];return _=_&&_.split("-")[0],_=s&&s[_],h&&h[o]?D=h[o]:_&&_[o]&&(D=_[o]),t?D.replace(/\{(\d+)\}/g,function(Q,ie){return typeof(ie=t[ie-1])>"u"?Q:ie}):D},l.handleLanguagechange=function(){},l.contentEl=function(){return this.contentEl_||this.el_},l.id=function(){return this.id_},l.name=function(){return this.name_},l.children=function(){return this.children_},l.getChildById=function(o){return this.childIndex_[o]},l.getChild=function(o){if(o)return this.childNameIndex_[o]},l.getDescendant=function(){for(var o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];t=t.reduce(function(D,Q){return D.concat(Q)},[]);for(var s=this,h=0;h<t.length;h++)if(!(s=s.getChild(t[h]))||!s.getChild)return;return s},l.addChild=function(o,t,a){if(void 0===t&&(t={}),void 0===a&&(a=this.children_.length),"string"==typeof o){var s=M(o),h=t.componentClass||s;t.name=s;var _=i.getComponent(h);if(!_)throw new Error("Component "+h+" does not exist");if("function"!=typeof _)return null;_=new _(this.player_||this,t)}else _=o;return _.parentComponent_&&_.parentComponent_.removeChild(_),this.children_.splice(a,0,_),_.parentComponent_=this,"function"==typeof _.id&&(this.childIndex_[_.id()]=_),(s=s||_.name&&M(_.name()))&&(this.childNameIndex_[s]=_,this.childNameIndex_[J(s)]=_),"function"==typeof _.el&&_.el()&&(s=null,this.children_[a+1]&&(this.children_[a+1].el_?s=this.children_[a+1].el_:ot(this.children_[a+1])&&(s=this.children_[a+1])),this.contentEl().insertBefore(_.el(),s)),_},l.removeChild=function(o){if((o="string"==typeof o?this.getChild(o):o)&&this.children_){for(var t,a=!1,s=this.children_.length-1;0<=s;s--)if(this.children_[s]===o){a=!0,this.children_.splice(s,1);break}a&&(o.parentComponent_=null,this.childIndex_[o.id()]=null,this.childNameIndex_[M(o.name())]=null,this.childNameIndex_[J(o.name())]=null,(t=o.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(o.el()))}},l.initChildren=function(){var o,t,a,s=this,h=this.options_.children;h&&(o=this.options_,t=i.getComponent("Tech"),(a=Array.isArray(h)?h:Object.keys(h)).concat(Object.keys(this.options_).filter(function(_){return!a.some(function(D){return"string"==typeof D?_===D:_===D.name})})).map(function(Q){var D;return Q="string"==typeof Q?h[D=Q]||s.options_[D]||{}:(D=Q.name,Q),{name:D,opts:Q}}).filter(function(_){return(_=i.getComponent(_.opts.componentClass||M(_.name)))&&!t.isTech(_)}).forEach(function(Q){var D=Q.name;Q=Q.opts,!1!==(Q=void 0!==o[D]?o[D]:Q)&&((Q=!0===Q?{}:Q).playerOptions=s.options_.playerOptions,(Q=s.addChild(D,Q))&&(s[D]=Q))}))},l.buildCSSClass=function(){return""},l.ready=function(o,t){if(void 0===t&&(t=!1),o)return this.isReady_?void(t?o.call(this):this.setTimeout(o,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(o))},l.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var o=this.readyQueue_;this.readyQueue_=[],o&&0<o.length&&o.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},l.$=function(o,t){return Tn(o,t||this.contentEl())},l.$$=function(o,t){return Un(o,t||this.contentEl())},l.hasClass=function(o){return bt(this.el_,o)},l.addClass=function(o){xt(this.el_,o)},l.removeClass=function(o){Me(this.el_,o)},l.toggleClass=function(o,t){Oe(this.el_,o,t)},l.show=function(){this.removeClass("vjs-hidden")},l.hide=function(){this.addClass("vjs-hidden")},l.lockShowing=function(){this.addClass("vjs-lock-showing")},l.unlockShowing=function(){this.removeClass("vjs-lock-showing")},l.getAttribute=function(o){return kt(this.el_,o)},l.setAttribute=function(o,t){Ut(this.el_,o,t)},l.removeAttribute=function(o){Lt(this.el_,o)},l.width=function(o,t){return this.dimension("width",o,t)},l.height=function(o,t){return this.dimension("height",o,t)},l.dimensions=function(o,t){this.width(o,!0),this.height(t)},l.dimension=function(o,t,a){return void 0!==t?(this.el_.style[o]=-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(a||this.trigger("componentresize"))):this.el_?(a=(t=this.el_.style[o]).indexOf("px"),parseInt(-1!==a?t.slice(0,a):this.el_["offset"+M(o)],10)):0},l.currentDimension=function(o){var t=0;if("width"!==o&&"height"!==o)throw new Error("currentDimension only accepts width or height value");return t=te(this.el_,o),0!==(t=parseFloat(t))&&!isNaN(t)||(o="offset"+M(o),t=this.el_[o]),t},l.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},l.currentWidth=function(){return this.currentDimension("width")},l.currentHeight=function(){return this.currentDimension("height")},l.focus=function(){this.el_.focus()},l.blur=function(){this.el_.blur()},l.handleKeyDown=function(o){this.player_&&(_e.isEventKey(o,"Tab")||o.stopPropagation(),this.player_.handleKeyDown(o))},l.handleKeyPress=function(o){this.handleKeyDown(o)},l.emitTapEvents=function(){var o,t=0,a=null;function s(){o=!1}this.on("touchstart",function(h){1===h.touches.length&&(a={pageX:h.touches[0].pageX,pageY:h.touches[0].pageY},t=window.performance.now(),o=!0)}),this.on("touchmove",function(h){var _;1<h.touches.length?o=!1:a&&(_=h.touches[0].pageX-a.pageX,h=h.touches[0].pageY-a.pageY,10<Math.sqrt(_*_+h*h)&&(o=!1))}),this.on("touchleave",s),this.on("touchcancel",s),this.on("touchend",function(h){!(a=null)===o&&window.performance.now()-t<200&&(h.preventDefault(),this.trigger("tap"))})},l.enableTouchActivity=function(){var o,t,a;this.player()&&this.player().reportUserActivity&&(o=zt(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){o(),this.clearInterval(t),t=this.setInterval(o,250)}),a=function(s){o(),this.clearInterval(t)},this.on("touchmove",o),this.on("touchend",a),this.on("touchcancel",a))},l.setTimeout=function(o,t){var a,s=this;return o=zt(this,o),this.clearTimersOnDispose_(),a=window.setTimeout(function(){s.setTimeoutIds_.has(a)&&s.setTimeoutIds_.delete(a),o()},t),this.setTimeoutIds_.add(a),a},l.clearTimeout=function(o){return this.setTimeoutIds_.has(o)&&(this.setTimeoutIds_.delete(o),window.clearTimeout(o)),o},l.setInterval=function(o,t){return o=zt(this,o),this.clearTimersOnDispose_(),t=window.setInterval(o,t),this.setIntervalIds_.add(t),t},l.clearInterval=function(o){return this.setIntervalIds_.has(o)&&(this.setIntervalIds_.delete(o),window.clearInterval(o)),o},l.requestAnimationFrame=function(o){var t,a=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),o=zt(this,o),t=window.requestAnimationFrame(function(){a.rafIds_.has(t)&&a.rafIds_.delete(t),o()}),this.rafIds_.add(t),t):this.setTimeout(o,1e3/60)},l.requestNamedAnimationFrame=function(o,t){var a=this;if(!this.namedRafs_.has(o)){this.clearTimersOnDispose_(),t=zt(this,t);var s=this.requestAnimationFrame(function(){t(),a.namedRafs_.has(o)&&a.namedRafs_.delete(o)});return this.namedRafs_.set(o,s),o}},l.cancelNamedAnimationFrame=function(o){this.namedRafs_.has(o)&&(this.cancelAnimationFrame(this.namedRafs_.get(o)),this.namedRafs_.delete(o))},l.cancelAnimationFrame=function(o){return this.supportsRaf_?(this.rafIds_.has(o)&&(this.rafIds_.delete(o),window.cancelAnimationFrame(o)),o):this.clearTimeout(o)},l.clearTimersOnDispose_=function(){var o=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var s=t[1];o[t[0]].forEach(function(h,_){return o[s](_)})}),o.clearingTimersOnDispose_=!1}))},i.registerComponent=function(o,t){if("string"!=typeof o||!o)throw new Error('Illegal component name, "'+o+'"; must be a non-empty string.');var a=(s=i.getComponent("Tech"))&&s.isTech(t),s=i===t||i.prototype.isPrototypeOf(t.prototype);if(a||!s){var h=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+o+'"; '+h+".")}if(o=M(o),i.components_||(i.components_={}),h=i.getComponent("Player"),"Player"===o&&h&&h.players){var _=h.players;if(h=Object.keys(_),_&&0<h.length&&h.map(function(Q){return _[Q]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return i.components_[o]=t,i.components_[J(o)]=t},i.getComponent=function(o){if(o&&i.components_)return i.components_[o]},i}();xe.prototype.supportsRaf_="function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame,xe.registerComponent("Component",xe);var Pe=function(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i},ke=function(i,l){i.prototype=Object.create(l.prototype),(i.prototype.constructor=i).__proto__=l};function qe(i,l,o,t){return function(a,s,h){if("number"!=typeof s||s<0||h<s)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+s+") is non-numeric or out of bounds (0-"+h+").")}(i,t,o.length-1),o[t][l]}function rt(i){var l=void 0===i||0===i.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:i.length,start:qe.bind(null,"start",0,i),end:qe.bind(null,"end",1,i)};return window.Symbol&&window.Symbol.iterator&&(l[window.Symbol.iterator]=function(){return(i||[]).values()}),l}function wt(i,l){return Array.isArray(i)?rt(i):void 0===i||void 0===l?rt():rt([[i,l]])}function Xe(i,l){var o,t,a=0;if(!l)return 0;i&&i.length||(i=wt(0,0));for(var s=0;s<i.length;s++)o=i.start(s),a+=(t=l<(t=i.end(s))?l:t)-o;return a/l}function ct(i){if(i instanceof ct)return i;"number"==typeof i?this.code=i:"string"==typeof i?this.message=i:G(i)&&("number"==typeof i.code&&(this.code=i.code),de(this,i)),this.message||(this.message=ct.defaultMessages[this.code]||"")}ct.prototype.code=0,ct.prototype.message="",ct.prototype.status=null,ct.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ct.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ze=0;Ze<ct.errorTypes.length;Ze++)ct[ct.errorTypes[Ze]]=Ze,ct.prototype[ct.errorTypes[Ze]]=Ze;function nt(i){return null!=i&&"function"==typeof i.then}function jt(i){nt(i)&&i.then(null,function(l){})}function Yt(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(l,o,t){return i[o]&&(l[o]=i[o]),l},{cues:i.cues&&Array.prototype.map.call(i.cues,function(l){return{startTime:l.startTime,endTime:l.endTime,text:l.text,id:l.id}})})}var en="vjs-modal-dialog",sn=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.close_=function(h){return s.close(h)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=Ve("div",{className:en+"-content"},{role:"document"}),s.descEl_=Ve("p",{className:en+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),et(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},o.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},o.buildCSSClass=function(){return en+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},o.label=function(){return this.localize(this.options_.label||"Modal Window")},o.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},o.open=function(){var t;this.opened_||(t=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},o.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},o.close=function(){var t;this.opened_&&(t=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},o.closeable=function(t){var a,s;return"boolean"==typeof t&&(a=this.closeable_=!!t,s=this.getChild("closeButton"),a&&!s&&(t=this.contentEl_,this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=t,this.on(s,"close",this.close_)),!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())),this.closeable_},o.fill=function(){this.fillWith(this.content())},o.fillWith=function(t){var a=this.contentEl(),s=a.parentNode,h=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),nn(a,t),this.trigger("modalfill"),h?s.insertBefore(a,h):s.appendChild(a),(a=this.getChild("closeButton"))&&s.appendChild(a.el_)},o.empty=function(){this.trigger("beforemodalempty"),Bt(this.contentEl()),this.trigger("modalempty")},o.content=function(t){return typeof t<"u"&&(this.content_=t),this.content_},o.conditionalFocus_=function(){var t=document.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,!a.contains(t)&&a!==t||(this.previouslyActiveEl_=t,this.focus())},o.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},o.handleKeyDown=function(t){if(t.stopPropagation(),_e.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(_e.isEventKey(t,"Tab")){for(var a,s=this.focusableEls_(),h=this.el_.querySelector(":focus"),_=0;_<s.length;_++)if(h===s[_]){a=_;break}document.activeElement===this.el_&&(a=0),t.shiftKey&&0===a?(s[s.length-1].focus(),t.preventDefault()):t.shiftKey||a!==s.length-1||(s[0].focus(),t.preventDefault())}},o.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(a){return(a instanceof window.HTMLAnchorElement||a instanceof window.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof window.HTMLInputElement||a instanceof window.HTMLSelectElement||a instanceof window.HTMLTextAreaElement||a instanceof window.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof window.HTMLIFrameElement||a instanceof window.HTMLObjectElement||a instanceof window.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})},l}(xe);sn.prototype.options_={pauseOnOpen:!0,temporary:!0},xe.registerComponent("ModalDialog",sn);var hn,gn=function(i){function l(t){var a;void 0===t&&(t=[]),(a=i.call(this)||this).tracks_=[],Object.defineProperty(Pe(a),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<t.length;s++)a.addTrack(t[s]);return a}ke(l,i);var o=l.prototype;return o.addTrack=function(t){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){a.trigger({track:t,type:"labelchange",target:a})},c(t)&&t.addEventListener("labelchange",t.labelchange_)},o.removeTrack=function(t){for(var a,s=0,h=this.length;s<h;s++)if(this[s]===t){(a=this[s]).off&&a.off(),this.tracks_.splice(s,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})},o.getTrackById=function(t){for(var a=null,s=0,h=this.length;s<h;s++){var _=this[s];if(_.id===t){a=_;break}}return a},l}(kn);for(hn in gn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},gn.prototype.allowedEvents_)gn.prototype["on"+hn]=null;function jn(i,l){for(var o=0;o<i.length;o++)Object.keys(i[o]).length&&l.id!==i[o].id&&(i[o].enabled=!1)}function gi(i,l){for(var o=0;o<i.length;o++)Object.keys(i[o]).length&&l.id!==i[o].id&&(i[o].selected=!1)}function Ai(i){var l=["protocol","hostname","port","pathname","search","hash","host"],o=document.createElement("a");o.href=i;for(var t={},a=0;a<l.length;a++)t[l[a]]=o[l[a]];return"http:"===t.protocol&&(t.host=t.host.replace(/:80$/,"")),"https:"===t.protocol&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=window.location.protocol),t.host||(t.host=window.location.host),t}function Bi(i){var l;return i.match(/^https?:\/\//)||((l=document.createElement("a")).href=i,i=l.href),i}function ji(i){return"string"==typeof i&&(i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i))?i.pop().toLowerCase():""}function br(i,l){return void 0===l&&(l=window.location),(":"===(i=Ai(i)).protocol?l:i).protocol+i.host!==l.protocol+l.host}var ki=function(i){function l(t){for(var a,s=(t=void 0===t?[]:t).length-1;0<=s;s--)if(t[s].enabled){jn(t,t[s]);break}return(a=i.call(this,t)||this).changing_=!1,a}ke(l,i);var o=l.prototype;return o.addTrack=function(t){var a=this;t.enabled&&jn(this,t),i.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){a.changing_||(a.changing_=!0,jn(a,t),a.changing_=!1,a.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},o.removeTrack=function(t){i.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},l}(gn),Di=function(i){function l(t){for(var a,s=(t=void 0===t?[]:t).length-1;0<=s;s--)if(t[s].selected){gi(t,t[s]);break}return(a=i.call(this,t)||this).changing_=!1,Object.defineProperty(Pe(a),"selectedIndex",{get:function(){for(var h=0;h<this.length;h++)if(this[h].selected)return h;return-1},set:function(){}}),a}ke(l,i);var o=l.prototype;return o.addTrack=function(t){var a=this;t.selected&&gi(this,t),i.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){a.changing_||(a.changing_=!0,gi(a,t),a.changing_=!1,a.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},o.removeTrack=function(t){i.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},l}(gn),Cn=function(i){function l(){return i.apply(this,arguments)||this}ke(l,i);var o=l.prototype;return o.addTrack=function(t){var a=this;i.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},o.removeTrack=function(t){i.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},l}(gn),ri=function(){function i(o){void 0===o&&(o=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,a=o.length;t<a;t++)this.addTrackElement_(o[t])}var l=i.prototype;return l.addTrackElement_=function(o){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(o)&&this.trackElements_.push(o)},l.getTrackElementByTrack_=function(o){for(var t,a=0,s=this.trackElements_.length;a<s;a++)if(o===this.trackElements_[a].track){t=this.trackElements_[a];break}return t},l.removeTrackElement_=function(o){for(var t=0,a=this.trackElements_.length;t<a;t++)if(o===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},i}(),Ta=function(){function i(o){i.prototype.setCues_.call(this,o),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var l=i.prototype;return l.setCues_=function(o){var t=this.length||0,a=0,s=o.length;function h(_){""+_ in this||Object.defineProperty(this,""+_,{get:function(){return this.cues_[_]}})}if(this.cues_=o,this.length_=o.length,t<s)for(a=t;a<s;a++)h.call(this,a)},l.getCueById=function(o){for(var t=null,a=0,s=this.length;a<s;a++){var h=this[a];if(h.id===o){t=h;break}}return t},i}(),ka={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},No={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},bc={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},dl={disabled:"disabled",hidden:"hidden",showing:"showing"},Ji=(vi=function(i){function l(o){void 0===o&&(o={});var t,a=i.call(this)||this,s={id:o.id||"vjs_track_"+Je++,kind:o.kind||"",language:o.language||""},h=o.label||"";for(t in s)!function(_){Object.defineProperty(Pe(a),_,{get:function(){return s[_]},set:function(){}})}(t);return Object.defineProperty(Pe(a),"label",{get:function(){return h},set:function(_){_!==h&&(h=_,this.trigger("labelchange"))}}),a}return ke(l,i),l}(kn),Object.freeze({__proto__:null,parseUrl:Ai,getAbsoluteURL:Bi,getFileExtension:ji,isCrossOrigin:br})),Fi=Jn=typeof window<"u"?window:typeof Zn<"u"?Zn:typeof self<"u"?self:{},xc=Object.prototype.toString;Gi.httpHandler=function(i,l){return void 0===l&&(l=!1),function(o,t,a){if(o)i(o);else if(400<=t.statusCode&&t.statusCode<=599){if(o=a,l)if(Fi.TextDecoder){void 0===(s=t.headers&&t.headers["content-type"])&&(s=""),t=s.toLowerCase().split(";").reduce(function(h,D){D=(Q=D.split("="))[0];var Q=Q[1];return"charset"===D.trim()?Q.trim():h},"utf-8");try{o=new TextDecoder(t).decode(a)}catch{}}else o=String.fromCharCode.apply(null,new Uint8Array(a));i({cause:o})}else i(null,a);var s}};
/**
     * @license
     * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
     * Copyright (c) 2014 David Bjrklund
     * Available under the MIT license
     * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
     */
var Ao=Gi;function cl(i,l,o){var t=i;return function(i){if(!i)return!1;var l=xc.call(i);return"[object Function]"===l||"function"==typeof i&&"[object RegExp]"!==l||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}(l)?(o=l,"string"==typeof i&&(t={uri:i})):t=H({},l,{uri:i}),t.callback=o,t}function Gi(i,l,o){return hl(l=cl(i,l,o))}function hl(i){if(typeof i.callback>"u")throw new Error("callback argument missing");var l=!1,o=function(Re,it,_t){l||(l=!0,i.callback(Re,it,_t))};function t(){var Re=void 0;if(Re=Q.response||Q.responseText||function(it){try{if("document"===it.responseType)return it.responseXML;if(""===it.responseType&&(!it.responseXML||"parsererror"!==it.responseXML.documentElement.nodeName))return it.responseXML}catch{}return null}(Q),Ue)try{Re=JSON.parse(Re)}catch{}return Re}function a(Re){return clearTimeout(D),(Re=Re instanceof Error?Re:new Error(""+(Re||"Unknown XMLHttpRequest Error"))).statusCode=0,o(Re,Ke)}function s(){if(!_){clearTimeout(D);var Re=i.useXDR&&void 0===Q.status?200:1223===Q.status?204:Q.status,it=Ke,_t=null;return 0!==Re?(it={body:t(),statusCode:Re,method:be,headers:{},url:ie,rawRequest:Q},Q.getAllResponseHeaders&&(it.headers=function(i){var l={};return i&&i.trim().split("\n").forEach(function(o){var a=o.indexOf(":"),t=o.slice(0,a).trim().toLowerCase();a=o.slice(a+1).trim(),typeof l[t]>"u"?l[t]=a:Array.isArray(l[t])?l[t].push(a):l[t]=[l[t],a]}),l}(Q.getAllResponseHeaders()))):_t=new Error("Internal XMLHttpRequest Error"),o(_t,it,it.body)}}var h,_,D,Q=i.xhr||null,ie=(Q=Q||new(i.cors||i.useXDR?Gi.XDomainRequest:Gi.XMLHttpRequest)).url=i.uri||i.url,be=Q.method=i.method||"GET",Se=i.body||i.data,Ie=Q.headers=i.headers||{},Te=!!i.sync,Ue=!1,Ke={body:void 0,headers:{},statusCode:0,method:be,url:ie,rawRequest:Q};if("json"in i&&!1!==i.json&&(Ue=!0,Ie.accept||Ie.Accept||(Ie.Accept="application/json"),"GET"!==be&&"HEAD"!==be&&(Ie["content-type"]||Ie["Content-Type"]||(Ie["Content-Type"]="application/json"),Se=JSON.stringify(!0===i.json?Se:i.json))),Q.onreadystatechange=function(){4===Q.readyState&&setTimeout(s,0)},Q.onload=s,Q.onerror=a,Q.onprogress=function(){},Q.onabort=function(){_=!0},Q.ontimeout=a,Q.open(be,ie,!Te,i.username,i.password),Te||(Q.withCredentials=!!i.withCredentials),!Te&&0<i.timeout&&(D=setTimeout(function(){var Re;_||(_=!0,Q.abort("timeout"),(Re=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",a(Re))},i.timeout)),Q.setRequestHeader)for(h in Ie)Ie.hasOwnProperty(h)&&Q.setRequestHeader(h,Ie[h]);else if(i.headers&&!function(Re){for(var it in Re)if(Re.hasOwnProperty(it))return;return 1}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(Q.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(Q),Q.send(Se||null),Q}function fl(i,l){var o=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),t=[];o.oncue=function(a){l.addCue(a)},o.onparsingerror=function(a){t.push(a)},o.onflush=function(){l.trigger({type:"loadeddata",target:l})},o.parse(i),0<t.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+l.src),t.forEach(function(a){return S.error(a)}),window.console&&window.console.groupEnd&&window.console.groupEnd()),o.flush()}function pl(i,l){var o={uri:i};(i=br(i))&&(o.cors=i),(i="use-credentials"===l.tech_.crossOrigin())&&(o.withCredentials=i),Ao(o,zt(this,function(t,a,s){return t?S.error(t,a):(l.loaded_=!0,void("function"!=typeof window.WebVTT?l.tech_&&l.tech_.any(["vttjsloaded","vttjserror"],function(h){return"vttjserror"!==h.type?fl(s,l):void S.error("vttjs failed to load, stopping trying to process "+l.src)}):fl(s,l)))}))}di=Gi,Gi.XMLHttpRequest=Fi.XMLHttpRequest||function(){},Gi.XDomainRequest="withCredentials"in new Gi.XMLHttpRequest?Gi.XMLHttpRequest:Fi.XDomainRequest,function(i,l){for(var o=0;o<i.length;o++)l(i[o])}(["get","put","post","patch","head","delete"],function(i){Gi["delete"===i?"del":i]=function(l,o,t){return(o=cl(l,o,t)).method=i.toUpperCase(),hl(o)}}),Ao.default=di;var Gr=function(i){function l(s){var a;if(!(s=void 0===s?{}:s).tech)throw new Error("A tech was not provided.");s=Z(s,{kind:bc[s.kind]||"subtitles",language:s.language||s.srclang||""});var h=dl[s.mode]||"disabled",_=s.default;"metadata"!==s.kind&&"chapters"!==s.kind||(h="hidden"),(a=i.call(this,s)||this).tech_=s.tech,a.cues_=[],a.activeCues_=[],a.preload_=!1!==a.tech_.preloadTextTracks;var D=new Ta(a.cues_),Q=new Ta(a.activeCues_),ie=!1;return a.timeupdateHandler=zt(Pe(a),function(be){void 0===be&&(be={}),this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,ie&&(this.trigger("cuechange"),ie=!1)),"timeupdate"!==be.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),a.tech_.one("dispose",function(){a.stopTracking()}),"disabled"!==h&&a.startTracking(),Object.defineProperties(Pe(a),{default:{get:function(){return _},set:function(){}},mode:{get:function(){return h},set:function(be){dl[be]&&h!==be&&(h=be,this.preload_||"disabled"===h||0!==this.cues.length||pl(this.src,this),this.stopTracking(),"disabled"!==h&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?D:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return Q;for(var be=this.tech_.currentTime(),Se=[],Ie=0,Te=this.cues.length;Ie<Te;Ie++){var Ue=this.cues[Ie];(Ue.startTime<=be&&Ue.endTime>=be||Ue.startTime===Ue.endTime&&Ue.startTime<=be&&Ue.startTime+.5>=be)&&Se.push(Ue)}if(ie=!1,Se.length!==this.activeCues_.length)ie=!0;else for(var Ke=0;Ke<Se.length;Ke++)-1===this.activeCues_.indexOf(Se[Ke])&&(ie=!0);return this.activeCues_=Se,Q.setCues_(this.activeCues_),Q},set:function(){}}}),s.src?(a.src=s.src,a.preload_||(a.loaded_=!0),(a.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&pl(a.src,Pe(a))):a.loaded_=!0,a}ke(l,i);var o=l.prototype;return o.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},o.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},o.addCue=function(t){var a=t;if(window.vttjs&&!(t instanceof window.vttjs.VTTCue)){for(var s in a=new window.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)s in a||(a[s]=t[s]);a.id=t.id,a.originalCue_=t}for(var h=this.tech_.textTracks(),_=0;_<h.length;_++)h[_]!==this&&h[_].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},o.removeCue=function(t){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===t||s.originalCue_&&s.originalCue_===t){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},l}(vi);Gr.prototype.allowedEvents_={cuechange:"cuechange"},Vn=function(i){function l(a){var t=Z(a=void 0===a?{}:a,{kind:No[a.kind]||""}),s=(a=i.call(this,t)||this,!1);return Object.defineProperty(Pe(a),"enabled",{get:function(){return s},set:function(h){"boolean"==typeof h&&h!==s&&(s=h,this.trigger("enabledchange"))}}),t.enabled&&(a.enabled=t.enabled),a.loaded_=!0,a}return ke(l,i),l}(vi),Mi=function(i){function l(a){var t=Z(a=void 0===a?{}:a,{kind:ka[a.kind]||""}),s=(a=i.call(this,t)||this,!1);return Object.defineProperty(Pe(a),"selected",{get:function(){return s},set:function(h){"boolean"==typeof h&&h!==s&&(s=h,this.trigger("selectedchange"))}}),t.selected&&(a.selected=t.selected),a}return ke(l,i),l}(vi),(zn=function(i){function l(o){var t;void 0===o&&(o={});var a=i.call(this)||this,s=new Gr(o);return a.kind=s.kind,a.src=s.src,a.srclang=s.language,a.label=s.label,a.default=s.default,Object.defineProperties(Pe(a),{readyState:{get:function(){return t}},track:{get:function(){return s}}}),t=0,s.addEventListener("loadeddata",function(){t=2,a.trigger({type:"load",target:Pe(a)})}),a}return ke(l,i),l}(kn)).prototype.allowedEvents_={load:"load"},zn.NONE=0,zn.LOADING=1,zn.LOADED=2,zn.ERROR=3;var Ui={audio:{ListClass:ki,TrackClass:Vn,capitalName:"Audio"},video:{ListClass:Di,TrackClass:Mi,capitalName:"Video"},text:{ListClass:Cn,TrackClass:Gr,capitalName:"Text"}};Object.keys(Ui).forEach(function(i){Ui[i].getterName=i+"Tracks",Ui[i].privateName=i+"Tracks_"});var wr={remoteText:{ListClass:Cn,TrackClass:Gr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ri,TrackClass:zn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Si=H({},Ui,wr);wr.names=Object.keys(wr),Ui.names=Object.keys(Ui),Si.names=[].concat(wr.names).concat(Ui.names);var fi=typeof Zn<"u"?Zn:typeof window<"u"?window:{},Jn=li=typeof document<"u"?document:(li=fi["__GLOBAL_DOCUMENT_CACHE@4"])||(fi["__GLOBAL_DOCUMENT_CACHE@4"]={}),Do=Object.create||function(i){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return ml.prototype=i,new ml};function ml(){}function Hi(i,l){this.name="ParsingError",this.code=i.code,this.message=l||i.message}function Oo(i){function l(o,t,a,s){return 3600*(0|o)+60*(0|t)+(0|a)+(0|s)/1e3}return(i=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/))?i[3]?l(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?l(i[1],i[2],0,i[4]):l(0,i[1],i[2],i[4]):null}function Kr(){this.values=Do(null)}function Yr(i,l,o,t){var a,s,h=t?i.split(t):[i];for(a in h)"string"==typeof h[a]&&2===(s=h[a].split(o)).length&&l(s[0].trim(),s[1].trim())}function Tc(i,l,o){var t=i;function a(){var h=Oo(i);if(null===h)throw new Hi(Hi.Errors.BadTimeStamp,"Malformed timestamp: "+t);return i=i.replace(/^[^\sa-zA-Z-]+/,""),h}function s(){i=i.replace(/^\s+/,"")}if(s(),l.startTime=a(),s(),"--\x3e"!==i.substr(0,3))throw new Hi(Hi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+t);i=i.substr(3),s(),l.endTime=a(),s(),function(h,_){var D=new Kr;Yr(h,function(Q,ie){switch(Q){case"region":for(var be=o.length-1;0<=be;be--)if(o[be].id===ie){D.set(Q,o[be].region);break}break;case"vertical":D.alt(Q,ie,["rl","lr"]);break;case"line":var Se=ie.split(","),Ie=Se[0];D.integer(Q,Ie),D.percent(Q,Ie)&&D.set("snapToLines",!1),D.alt(Q,Ie,["auto"]),2===Se.length&&D.alt("lineAlign",Se[1],["start","center","end"]);break;case"position":Se=ie.split(","),D.percent(Q,Se[0]),2===Se.length&&D.alt("positionAlign",Se[1],["start","center","end"]);break;case"size":D.percent(Q,ie);break;case"align":D.alt(Q,ie,["start","center","end","left","right"])}},/:/,/\s/),_.region=D.get("region",null),_.vertical=D.get("vertical","");try{_.line=D.get("line","auto")}catch{}_.lineAlign=D.get("lineAlign","start"),_.snapToLines=D.get("snapToLines",!0),_.size=D.get("size",100);try{_.align=D.get("align","center")}catch{_.align=D.get("align","middle")}try{_.position=D.get("position","auto")}catch{_.position=D.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},_.align)}_.positionAlign=D.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},_.align)}(i,l)}((Hi.prototype=Do(Error.prototype)).constructor=Hi).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Kr.prototype={set:function(i,l){this.get(i)||""===l||(this.values[i]=l)},get:function(i,l,o){return o?this.has(i)?this.values[i]:l[o]:this.has(i)?this.values[i]:l},has:function(i){return i in this.values},alt:function(i,l,o){for(var t=0;t<o.length;++t)if(l===o[t]){this.set(i,l);break}},integer:function(i,l){/^-?\d+$/.test(l)&&this.set(i,parseInt(l,10))},percent:function(i,l){return!!(l.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(l=parseFloat(l))&&l<=100)&&(this.set(i,l),!0)}};var Io=Jn.createElement&&Jn.createElement("textarea"),kc={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_l={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Ec={v:"title",lang:"lang"},gl={rt:"ruby"};function vl(i,l){for(var o,t,a,s,h,D,Q,ie,be,Se=i.document.createElement("div"),Ie=Se,Te=[];null!==(o=function(){if(!l)return null;var Ue=l.match(/^([^<]*)(<[^>]*>?)?/);return l=l.substr((Ue=Ue[1]||Ue[2]).length),Ue}());)"<"!==o[0]?Ie.appendChild(i.document.createTextNode((Io.innerHTML=o,h=Io.textContent,Io.textContent="",h))):"/"!==o[1]?(s=Oo(o.substr(1,o.length-2)))?(t=i.document.createProcessingInstruction("timestamp",s),Ie.appendChild(t)):(a=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(ie=a[3],be=void 0,(t=(be=kc[Q=a[1]])?(be=i.document.createElement(be),(Q=Ec[Q])&&ie&&(be[Q]=ie.trim()),be):null)&&(gl[(D=t).localName]&&gl[D.localName]!==Ie.localName||(a[2]&&((s=a[2].split(".")).forEach(function(Re){var Ke=/^bg_/.test(Re);Re=Ke?Re.slice(3):Re,_l.hasOwnProperty(Re)&&(t.style[Ke?"background-color":"color"]=Re=_l[Re])}),t.className=s.join(" ")),Te.push(a[1]),Ie.appendChild(t),Ie=t))):Te.length&&Te[Te.length-1]===o.substr(2).replace(">","")&&(Te.pop(),Ie=Ie.parentNode);return Se}var yl=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Cc(i){var l=[],o="";if(!i||!i.childNodes)return"ltr";function t(s,h){for(var _=h.childNodes.length-1;0<=_;_--)s.push(h.childNodes[_])}for(t(l,i);o=function s(h){if(!h||!h.length)return null;var _=h.pop(),D=_.textContent||_.innerText;if(D){var Q=D.match(/^.*(\n|\r)/);return Q?Q[h.length=0]:D}return"ruby"===_.tagName?s(h):_.childNodes?(t(h,_),s(h)):void 0}(l);)for(var a=0;a<o.length;a++)if(function(s){for(var h=0;h<yl.length;h++){var _=yl[h];if(s>=_[0]&&s<=_[1])return 1}}(o.charCodeAt(a)))return"rtl";return"ltr"}function Ea(){}function Po(i,l,o){Ea.call(this),this.cue=l,this.cueDiv=vl(i,l.text);var t={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===l.vertical?"horizontal-tb":"lr"===l.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(t,this.cueDiv),this.div=i.document.createElement("div"),t={direction:Cc(this.cueDiv),writingMode:""===l.vertical?"horizontal-tb":"lr"===l.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===l.align?"center":l.align,font:o.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(t),this.div.appendChild(this.cueDiv);var a=0;switch(l.positionAlign){case"start":a=l.position;break;case"center":a=l.position-l.size/2;break;case"end":a=l.position-l.size}this.applyStyles(""===l.vertical?{left:this.formatStyle(a,"%"),width:this.formatStyle(l.size,"%")}:{top:this.formatStyle(a,"%"),height:this.formatStyle(l.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}function Ti(i){var l,o,t,a;i.div&&(l=i.div.offsetHeight,o=i.div.offsetWidth,t=i.div.offsetTop,a=(a=i.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects(),i=i.div.getBoundingClientRect(),a=a?Math.max(a[0]&&a[0].height||0,i.height/a.length):0),this.left=i.left,this.right=i.right,this.top=i.top||t,this.height=i.height||l,this.bottom=i.bottom||t+(i.height||l),this.width=i.width||o,this.lineHeight=void 0!==a?a:i.lineHeight}function Nc(i,l,o,t){var a,s=new Ti(l),h=l.cue,_=function(Te){if("number"==typeof Te.line&&(Te.snapToLines||0<=Te.line&&Te.line<=100))return Te.line;if(!Te.track||!Te.track.textTrackList||!Te.track.textTrackList.mediaElement)return-1;for(var Ue=Te.track,Ke=Ue.textTrackList,Re=0,it=0;it<Ke.length&&Ke[it]!==Ue;it++)"showing"===Ke[it].mode&&Re++;return-1*++Re}(h),D=[];if(h.snapToLines){switch(h.vertical){case"":D=["+y","-y"],a="height";break;case"rl":D=["+x","-x"],a="width";break;case"lr":D=["-x","+x"],a="width"}var Q=s.lineHeight,ie=Q*Math.round(_),be=o[a]+Q,Se=D[0];Math.abs(ie)>be&&(ie=ie<0?-1:1,ie*=Math.ceil(be/Q)*Q),_<0&&(ie+=""===h.vertical?o.height:o.width,D=D.reverse()),s.move(Se,ie)}else{var Ie=s.lineHeight/o.height*100;switch(h.lineAlign){case"center":_-=Ie/2;break;case"end":_-=Ie}switch(h.vertical){case"":l.applyStyles({top:l.formatStyle(_,"%")});break;case"rl":l.applyStyles({left:l.formatStyle(_,"%")});break;case"lr":l.applyStyles({right:l.formatStyle(_,"%")})}D=["+y","-x","+x","-y"],s=new Ti(l)}s=function(Te,Ue){for(var Ke,Re=new Ti(Te),it=1,_t=0;_t<Ue.length;_t++){for(;Te.overlapsOppositeAxis(o,Ue[_t])||Te.within(o)&&Te.overlapsAny(t);)Te.move(Ue[_t]);if(Te.within(o))return Te;var gt=Te.intersectPercentage(o);gt<it&&(Ke=new Ti(Te),it=gt),Te=new Ti(Re)}return Ke||Re}(s,D),l.move(s.toCSSCompatValues(o))}function Jr(){}Ea.prototype.applyStyles=function(i,l){for(var o in l=l||this.div,i)i.hasOwnProperty(o)&&(l.style[o]=i[o])},Ea.prototype.formatStyle=function(i,l){return 0===i?0:i+l},(Po.prototype=Do(Ea.prototype)).constructor=Po,Ti.prototype.move=function(i,l){switch(l=void 0!==l?l:this.lineHeight,i){case"+x":this.left+=l,this.right+=l;break;case"-x":this.left-=l,this.right-=l;break;case"+y":this.top+=l,this.bottom+=l;break;case"-y":this.top-=l,this.bottom-=l}},Ti.prototype.overlaps=function(i){return this.left<i.right&&this.right>i.left&&this.top<i.bottom&&this.bottom>i.top},Ti.prototype.overlapsAny=function(i){for(var l=0;l<i.length;l++)if(this.overlaps(i[l]))return!0;return!1},Ti.prototype.within=function(i){return this.top>=i.top&&this.bottom<=i.bottom&&this.left>=i.left&&this.right<=i.right},Ti.prototype.overlapsOppositeAxis=function(i,l){switch(l){case"+x":return this.left<i.left;case"-x":return this.right>i.right;case"+y":return this.top<i.top;case"-y":return this.bottom>i.bottom}},Ti.prototype.intersectPercentage=function(i){return Math.max(0,Math.min(this.right,i.right)-Math.max(this.left,i.left))*Math.max(0,Math.min(this.bottom,i.bottom)-Math.max(this.top,i.top))/(this.height*this.width)},Ti.prototype.toCSSCompatValues=function(i){return{top:this.top-i.top,bottom:i.bottom-this.bottom,left:this.left-i.left,right:i.right-this.right,height:this.height,width:this.width}},Ti.getSimpleBoxPosition=function(i){var l=i.div?i.div.offsetHeight:i.tagName?i.offsetHeight:0,o=i.div?i.div.offsetWidth:i.tagName?i.offsetWidth:0,t=i.div?i.div.offsetTop:i.tagName?i.offsetTop:0;return{left:(i=i.div?i.div.getBoundingClientRect():i.tagName?i.getBoundingClientRect():i).left,right:i.right,top:i.top||t,height:i.height||l,bottom:i.bottom||t+(i.height||l),width:i.width||o}},Jr.StringDecoder=function(){return{decode:function(i){if(!i)return"";if("string"!=typeof i)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))}}},Jr.convertCueToDOMTree=function(i,l){return i&&l?vl(i,l):null},Jr.processCues=function(i,l,o){if(!i||!l||!o)return null;for(;o.firstChild;)o.removeChild(o.firstChild);var t=i.document.createElement("div");if(t.style.position="absolute",t.style.left="0",t.style.right="0",t.style.top="0",t.style.bottom="0",t.style.margin="1.5%",o.appendChild(t),function(D){for(var Q=0;Q<D.length;Q++)if(D[Q].hasBeenReset||!D[Q].displayState)return 1}(l)){var a=[],s=Ti.getSimpleBoxPosition(t),h={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var D,Q,ie=0;ie<l.length;ie++)D=new Po(i,Q=l[ie],h),t.appendChild(D.div),Nc(0,D,s,a),Q.displayState=D.div,a.push(Ti.getSimpleBoxPosition(D))}()}else for(var _=0;_<l.length;_++)t.appendChild(l[_].displayState)},(Jr.Parser=function(i,l,o){o||(o=l,l={}),l=l||{},this.window=i,this.vttjs=l,this.state="INITIAL",this.buffer="",this.decoder=o||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(i){if(!(i instanceof Hi))throw i;this.onparsingerror&&this.onparsingerror(i)},parse:function(i){var D,l=this;function o(){for(var D=l.buffer,Q=0;Q<D.length&&"\r"!==D[Q]&&"\n"!==D[Q];)++Q;var ie=D.substr(0,Q);return"\r"===D[Q]&&++Q,"\n"===D[Q]&&++Q,l.buffer=D.substr(Q),ie}i&&(l.buffer+=l.decoder.decode(i,{stream:!0}));try{if("INITIAL"===l.state){if(!/\r\n|\n/.test(l.buffer))return this;var a,s=(a=o()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Hi(Hi.Errors.BadSignature);l.state="HEADER"}for(var h=!1;l.buffer;){if(!/\r\n|\n/.test(l.buffer))return this;switch(h?h=!1:a=o(),l.state){case"HEADER":/:/.test(a)?(D=a).match(/X-TIMESTAMP-MAP/)?Yr(D,function(Q,ie){var be;"X-TIMESTAMP-MAP"===Q&&(be=new Kr,Yr(ie,function(Se,Ie){switch(Se){case"MPEGT":be.integer(Se+"S",Ie);break;case"LOCA":be.set(Se+"L",Oo(Ie))}},/[^\d]:/,/,/),l.ontimestampmap&&l.ontimestampmap({MPEGTS:be.get("MPEGTS"),LOCAL:be.get("LOCAL")}))},/=/):Yr(D,function(Q,ie){var be;"Region"===Q&&(be=new Kr,Yr(ie,function(Se,Ie){switch(Se){case"id":be.set(Se,Ie);break;case"width":be.percent(Se,Ie);break;case"lines":be.integer(Se,Ie);break;case"regionanchor":case"viewportanchor":var Te=Ie.split(",");if(2!==Te.length)break;var Ue=new Kr;if(Ue.percent("x",Te[0]),Ue.percent("y",Te[1]),!Ue.has("x")||!Ue.has("y"))break;be.set(Se+"X",Ue.get("x")),be.set(Se+"Y",Ue.get("y"));break;case"scroll":be.alt(Se,Ie,["up"])}},/=/,/\s/),be.has("id")&&((ie=new(l.vttjs.VTTRegion||l.window.VTTRegion)).width=be.get("width",100),ie.lines=be.get("lines",3),ie.regionAnchorX=be.get("regionanchorX",0),ie.regionAnchorY=be.get("regionanchorY",100),ie.viewportAnchorX=be.get("viewportanchorX",0),ie.viewportAnchorY=be.get("viewportanchorY",100),ie.scroll=be.get("scroll",""),l.onregion&&l.onregion(ie),l.regionList.push({id:be.get("id"),region:ie})))},/:/):a||(l.state="ID");continue;case"NOTE":a||(l.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){l.state="NOTE";break}if(!a)continue;l.cue=new(l.vttjs.VTTCue||l.window.VTTCue)(0,0,"");try{l.cue.align="center"}catch{l.cue.align="middle"}if(l.state="CUE",-1===a.indexOf("--\x3e")){l.cue.id=a;continue}case"CUE":try{Tc(a,l.cue,l.regionList)}catch(D){l.reportOrThrowError(D),l.cue=null,l.state="BADCUE";continue}l.state="CUETEXT";continue;case"CUETEXT":var _=-1!==a.indexOf("--\x3e");if(!a||_&&(h=!0)){l.oncue&&l.oncue(l.cue),l.cue=null,l.state="ID";continue}l.cue.text&&(l.cue.text+="\n"),l.cue.text+=a.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":a||(l.state="ID");continue}}}catch(D){l.reportOrThrowError(D),"CUETEXT"===l.state&&l.cue&&l.oncue&&l.oncue(l.cue),l.cue=null,l.state="INITIAL"===l.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var i=this;try{if(i.buffer+=i.decoder.decode(),!i.cue&&"HEADER"!==i.state||(i.buffer+="\n\n",i.parse()),"INITIAL"===i.state)throw new Hi(Hi.Errors.BadSignature)}catch(l){i.reportOrThrowError(l)}return i.onflush&&i.onflush(),this}};var Ac=Jr,Dc={"":1,lr:1,rl:1},Oc={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Mo(i){return"string"==typeof i&&!!Oc[i.toLowerCase()]&&i.toLowerCase()}function bl(i,l,o){this.hasBeenReset=!1;var t="",a=!1,s=i,h=l,_=o,D=null,Q="",ie=!0,be="auto",Se="start",Ie="auto",Te="auto",Ue=100,Ke="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return t},set:function(Re){t=""+Re}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(Re){a=!!Re}},startTime:{enumerable:!0,get:function(){return s},set:function(Re){if("number"!=typeof Re)throw new TypeError("Start time must be set to a number.");s=Re,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(Re){if("number"!=typeof Re)throw new TypeError("End time must be set to a number.");h=Re,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return _},set:function(Re){_=""+Re,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return D},set:function(Re){D=Re,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Q},set:function(Re){if(!1===(Re="string"==typeof Re&&!!Dc[Re.toLowerCase()]&&Re.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Q=Re,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return ie},set:function(Re){ie=!!Re,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return be},set:function(Re){if("number"!=typeof Re&&"auto"!==Re)throw new SyntaxError("Line: an invalid number or illegal string was specified.");be=Re,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Se},set:function(Re){(Re=Mo(Re))&&(Se=Re,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return Ie},set:function(Re){if(Re<0||100<Re)throw new Error("Position must be between 0 and 100.");Ie=Re,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Te},set:function(Re){(Re=Mo(Re))&&(Te=Re,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return Ue},set:function(Re){if(Re<0||100<Re)throw new Error("Size must be between 0 and 100.");Ue=Re,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ke},set:function(Re){if(!(Re=Mo(Re)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ke=Re,this.hasBeenReset=!0}}}),this.displayState=void 0}bl.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ic=bl,Pc={"":!0,up:!0};function Zr(i){return"number"==typeof i&&0<=i&&i<=100}function Mc(){var i=100,l=3,o=0,t=100,a=0,s=100,h="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(_){if(!Zr(_))throw new Error("Width must be between 0 and 100.");i=_}},lines:{enumerable:!0,get:function(){return l},set:function(_){if("number"!=typeof _)throw new TypeError("Lines must be set to a number.");l=_}},regionAnchorY:{enumerable:!0,get:function(){return t},set:function(_){if(!Zr(_))throw new Error("RegionAnchorX must be between 0 and 100.");t=_}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(_){if(!Zr(_))throw new Error("RegionAnchorY must be between 0 and 100.");o=_}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(_){if(!Zr(_))throw new Error("ViewportAnchorY must be between 0 and 100.");s=_}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(_){if(!Zr(_))throw new Error("ViewportAnchorX must be between 0 and 100.");a=_}},scroll:{enumerable:!0,get:function(){return h},set:function(_){!1===(_="string"==typeof _&&!!Pc[_.toLowerCase()]&&_.toLowerCase())||(h=_)}}})}var Qr=x(function(i){i=i.exports={WebVTT:Ac,VTTCue:Ic,VTTRegion:Mc},Fi.vttjs=i,Fi.WebVTT=i.WebVTT;var l=i.VTTCue,o=i.VTTRegion,t=Fi.VTTCue,a=Fi.VTTRegion;i.shim=function(){Fi.VTTCue=l,Fi.VTTRegion=o},i.restore=function(){Fi.VTTCue=t,Fi.VTTRegion=a},Fi.VTTCue||i.shim()}),Hn=function(i){function l(t,a){var s;return void 0===a&&(a=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(s=i.call(this,null,t,a)||this).onDurationChange_=function(h){return s.onDurationChange(h)},s.trackProgress_=function(h){return s.trackProgress(h)},s.trackCurrentTime_=function(h){return s.trackCurrentTime(h)},s.stopTrackingCurrentTime_=function(h){return s.stopTrackingCurrentTime(h)},s.disposeSourceHandler_=function(h){return s.disposeSourceHandler(h)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Si.names.forEach(function(h){h=Si[h],t&&t[h.getterName]&&(s[h.privateName]=t[h.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===t["native"+h+"Tracks"]&&(s["featuresNative"+h+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?s.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=!1!==t.preloadTextTracks,s.autoRemoteTextTracks_=new Si.text.ListClass,s.initTrackListeners(),t.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}ke(l,i);var o=l.prototype;return o.triggerSourceset=function(t){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},o.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},o.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},o.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(zt(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),1===(this.bufferedPercent_=a)&&this.stopTrackingProgress()}),500)},o.onDurationChange=function(t){this.duration_=this.duration()},o.buffered=function(){return wt(0,0)},o.bufferedPercent=function(){return Xe(this.buffered(),this.duration_)},o.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},o.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},o.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},o.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},o.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},o.dispose=function(){this.clearTracks(Ui.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},o.clearTracks=function(t){var a=this;(t=[].concat(t)).forEach(function(s){for(var h=a[s+"Tracks"]()||[],_=h.length;_--;){var D=h[_];"text"===s&&a.removeRemoteTextTrack(D),h.removeTrack(D)}})},o.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],a=t.length;a--;)this.removeRemoteTextTrack(t[a])},o.reset=function(){},o.crossOrigin=function(){},o.setCrossOrigin=function(){},o.error=function(t){return void 0!==t&&(this.error_=new ct(t),this.trigger("error")),this.error_},o.played=function(){return this.hasStarted_?wt(0,0):wt()},o.play=function(){},o.setScrubbing=function(){},o.scrubbing=function(){},o.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},o.initTrackListeners=function(){var t=this;Ui.names.forEach(function(a){function s(){t.trigger(a+"trackchange")}var _=t[Ui[a].getterName]();_.addEventListener("removetrack",s),_.addEventListener("addtrack",s),t.on("dispose",function(){_.removeEventListener("removetrack",s),_.removeEventListener("addtrack",s)})})},o.addWebVttScript_=function(){var t,a=this;window.WebVTT||(document.body.contains(this.el())?!this.options_["vtt.js"]&&U(Qr)&&0<Object.keys(Qr).length?this.trigger("vttjsloaded"):((t=document.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){a.trigger("vttjsloaded")},t.onerror=function(){a.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(t)):this.ready(this.addWebVttScript_))},o.emulateTextTracks=function(){function t(ie){return h.addTrack(ie.track)}function a(ie){return h.removeTrack(ie.track)}var s=this,h=this.textTracks(),_=this.remoteTextTracks();function D(){return s.trigger("texttrackchange")}function Q(){D();for(var ie=0;ie<h.length;ie++){var be=h[ie];be.removeEventListener("cuechange",D),"showing"===be.mode&&be.addEventListener("cuechange",D)}}_.on("addtrack",t),_.on("removetrack",a),this.addWebVttScript_(),Q(),h.addEventListener("change",Q),h.addEventListener("addtrack",Q),h.addEventListener("removetrack",Q),this.on("dispose",function(){_.off("addtrack",t),_.off("removetrack",a),h.removeEventListener("change",Q),h.removeEventListener("addtrack",Q),h.removeEventListener("removetrack",Q);for(var ie=0;ie<h.length;ie++)h[ie].removeEventListener("cuechange",D)})},o.addTextTrack=function(t,a,s){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(h,_,D,Q,ie){void 0===ie&&(ie={});var be=h.textTracks();return ie.kind=_,D&&(ie.label=D),Q&&(ie.language=Q),ie.tech=h,ie=new Si.text.TrackClass(ie),be.addTrack(ie),ie}(this,t,a,s)},o.createRemoteTextTrack=function(t){return t=Z(t,{tech:this}),new wr.remoteTextEl.TrackClass(t)},o.addRemoteTextTrack=function(t,a){var s=this,h=this.createRemoteTextTrack(t=void 0===t?{}:t);return!0!==a&&!1!==a&&(S.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(h),this.remoteTextTracks().addTrack(h.track),!0!==a&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(h.track)}),h},o.removeRemoteTextTrack=function(t){var a=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},o.getVideoPlaybackQuality=function(){return{}},o.requestPictureInPicture=function(){var t=this.options_.Promise||window.Promise;if(t)return t.reject()},o.disablePictureInPicture=function(){return!0},o.setDisablePictureInPicture=function(){},o.requestVideoFrameCallback=function(t){var a=this,s=Je++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),t())})):this.requestNamedAnimationFrame(s,t),s},o.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},o.setPoster=function(){},o.playsinline=function(){},o.setPlaysinline=function(){},o.overrideNativeAudioTracks=function(){},o.overrideNativeVideoTracks=function(){},o.canPlayType=function(){return""},l.canPlayType=function(){return""},l.canPlaySource=function(t,a){return l.canPlayType(t.type)},l.isTech=function(t){return t.prototype instanceof l||t instanceof l||t===l},l.registerTech=function(t,a){if(l.techs_||(l.techs_={}),!l.isTech(a))throw new Error("Tech "+t+" must be a Tech");if(!l.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!l.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=M(t),l.techs_[t]=a,l.techs_[J(t)]=a,"Tech"!==t&&l.defaultTechOrder_.push(t),a},l.getTech=function(t){if(t)return l.techs_&&l.techs_[t]?l.techs_[t]:(t=M(t),window&&window.videojs&&window.videojs[t]?(S.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[t]):void 0)},l}(xe);Si.names.forEach(function(i){var l=Si[i];Hn.prototype[l.getterName]=function(){return this[l.privateName]=this[l.privateName]||new l.ListClass,this[l.privateName]}}),Hn.prototype.featuresVolumeControl=!0,Hn.prototype.featuresMuteControl=!0,Hn.prototype.featuresFullscreenResize=!1,Hn.prototype.featuresPlaybackRate=!1,Hn.prototype.featuresProgressEvents=!1,Hn.prototype.featuresSourceset=!1,Hn.prototype.featuresTimeupdateEvents=!1,Hn.prototype.featuresNativeTextTracks=!1,Hn.prototype.featuresVideoFrameCallback=!1,Hn.withSourceHandlers=function(i){i.registerSourceHandler=function(l,o){var t=(t=i.sourceHandlers)||(i.sourceHandlers=[]);void 0===o&&(o=t.length),t.splice(o,0,l)},i.canPlayType=function(l){for(var o,t=i.sourceHandlers||[],a=0;a<t.length;a++)if(o=t[a].canPlayType(l))return o;return""},i.selectSourceHandler=function(l,o){for(var t=i.sourceHandlers||[],a=0;a<t.length;a++)if(t[a].canHandleSource(l,o))return t[a];return null},i.canPlaySource=function(l,o){var t=i.selectSourceHandler(l,o);return t?t.canHandleSource(l,o):""},["seekable","seeking","duration"].forEach(function(l){var o=this[l];"function"==typeof o&&(this[l]=function(){return this.sourceHandler_&&this.sourceHandler_[l]?this.sourceHandler_[l].apply(this.sourceHandler_,arguments):o.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(l){var o=i.selectSourceHandler(l,this.options_);o||(i.nativeSourceHandler?o=i.nativeSourceHandler:S.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),o!==i.nativeSourceHandler&&(this.currentSource_=l),this.sourceHandler_=o.handleSource(l,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},xe.registerComponent("Tech",Hn),Hn.registerTech("Tech",Hn),Hn.defaultTechOrder_=[];var cr={},Ro={},Ca={};function wl(i,l,o,a){void 0===a&&(a=null);var s="call"+M(o);return s=i.reduce(Lo(s),a),function(h,_,D,Q){for(var ie=h.length-1;0<=ie;ie--){var be=h[ie];be[_]&&be[_](Q,D)}}(i,o,s=(a=s===Ca)?null:l[o](s),a),s}var Lc={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Fc={setCurrentTime:1,setMuted:1,setVolume:1},xl={play:1,pause:1};function Lo(i){return function(l,o){return l===Ca?Ca:o[i]?o[i](l):l}}function Na(i){return i=ji(i=void 0===i?"":i),Bc[i.toLowerCase()]||""}function Sl(i){var l;return Array.isArray(i)?(l=[],i.forEach(function(o){o=Sl(o),Array.isArray(o)?l=l.concat(o):G(o)&&l.push(o)}),l):"string"==typeof i&&i.trim()?[Tl({src:i})]:G(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[Tl(i)]:[]}var Bc={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Tl(i){var l;return i.type||(l=Na(i.src))&&(i.type=l),i}di=function(i){function l(o,t,h){var s=Z({createEl:!1},t);if(h=i.call(this,o,s,h)||this,t.playerOptions.sources&&0!==t.playerOptions.sources.length)o.src(t.playerOptions.sources);else for(var _=0,D=t.playerOptions.techOrder;_<D.length;_++){var Q=M(D[_]),ie=Hn.getTech(Q);if((ie=Q?ie:xe.getComponent(Q))&&ie.isSupported()){o.loadTech_(Q);break}}return h}return ke(l,i),l}(xe),xe.registerComponent("MediaLoader",di),vi=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(h){return s.handleMouseOver(h)},s.handleMouseOut_=function(h){return s.handleMouseOut(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.emitTapEvents(),s.enable(),s}ke(l,i);var o=l.prototype;return o.createEl=function(t,a,s){return void 0===t&&(t="div"),void 0===a&&(a={}),void 0===s&&(s={}),a=de({className:this.buildCSSClass(),tabIndex:0},a),"button"===t&&S.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),s=de({role:"button"},s),this.tabIndex_=a.tabIndex,(s=Ve(t,a,s)).appendChild(Ve("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s},o.dispose=function(){this.controlTextEl_=null,i.prototype.dispose.call(this)},o.createControlTextEl=function(t){return this.controlTextEl_=Ve("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},o.controlText=function(t,a){if(void 0===a&&(a=this.el()),void 0===t)return this.controlText_||"Need Text";var s=this.localize(t);this.controlText_=t,et(this.controlTextEl_,s),this.nonIconControl||this.player_.options_.noUITitleAttributes||a.setAttribute("title",s)},o.buildCSSClass=function(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},o.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},o.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},o.handleLanguagechange=function(){this.controlText(this.controlText_)},o.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},o.handleKeyDown=function(t){_e.isEventKey(t,"Space")||_e.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,t)},l}(xe),xe.registerComponent("ClickableComponent",vi),xe.registerComponent("PosterImage",function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.update(),s.update_=function(h){return s.update(h)},t.on("posterchange",s.update_),s}ke(l,i);var o=l.prototype;return o.dispose=function(){this.player().off("posterchange",this.update_),i.prototype.dispose.call(this)},o.createEl=function(){return Ve("div",{className:"vjs-poster",tabIndex:-1})},o.update=function(t){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},o.setSrc=function(t){this.el_.style.backgroundImage=t?'url("'+t+'")':""},o.handleClick=function(t){var a;this.player_.controls()&&(a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(ue||X)&&a||this.player_.tech(!0).focus(),this.player_.paused()?jt(this.player_.play()):this.player_.pause())},l}(vi));var Aa="#222",jc={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Fo(i,l){var o;if(4===i.length)o=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else{if(7!==i.length)throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");o=i.slice(1)}return"rgba("+parseInt(o.slice(0,2),16)+","+parseInt(o.slice(2,4),16)+","+parseInt(o.slice(4,6),16)+","+l+")"}function Uo(i,l,o){try{i.style[l]=o}catch{return}}xe.registerComponent("TextTrackDisplay",function(i){function l(t,a,s){function h(D){return _.updateDisplay(D)}var _=i.call(this,t,a,s)||this;return t.on("loadstart",function(D){return _.toggleDisplay(D)}),t.on("texttrackchange",h),t.on("loadedmetadata",function(D){return _.preselectTrack(D)}),t.ready(zt(Pe(_),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",h),t.on("playerresize",h),window.addEventListener("orientationchange",h),t.on("dispose",function(){return window.removeEventListener("orientationchange",h)});for(var D=this.options_.playerOptions.tracks||[],Q=0;Q<D.length;Q++)this.player_.addRemoteTextTrack(D[Q],!0);this.preselectTrack()}})),_}ke(l,i);var o=l.prototype;return o.preselectTrack=function(){for(var t,a,s,h={captions:1,subtitles:1},_=this.player_.textTracks(),D=this.player_.cache_.selectedLanguage,Q=0;Q<_.length;Q++){var ie=_[Q];D&&D.enabled&&D.language&&D.language===ie.language&&ie.kind in h?s=ie.kind!==D.kind&&s||ie:D&&!D.enabled?a=t=s=null:ie.default&&("descriptions"!==ie.kind||t?ie.kind in h&&!a&&(a=ie):t=ie)}s?s.mode="showing":a?a.mode="showing":t&&(t.mode="showing")},o.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},o.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},o.updateDisplay=function(){var t=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],h=0;h<t.length;++h){var _=t[h];"showing"===_.mode&&s.push(_)}this.updateForTrack(s)}else{for(var D=null,Q=null,ie=t.length;ie--;){var be=t[ie];"showing"===be.mode&&("descriptions"===be.kind?D=be:Q=be)}Q?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(Q)):D&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(D))}},o.updateDisplayState=function(t){for(var a=this.player_.textTrackSettings.getValues(),s=t.activeCues,h=s.length;h--;){var _,D=s[h];D&&(_=D.displayState,a.color&&(_.firstChild.style.color=a.color),a.textOpacity&&Uo(_.firstChild,"color",Fo(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(_.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&Uo(_.firstChild,"backgroundColor",Fo(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?Uo(_,"backgroundColor",Fo(a.windowColor,a.windowOpacity)):_.style.backgroundColor=a.windowColor),a.edgeStyle&&("dropshadow"===a.edgeStyle?_.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Aa:"raised"===a.edgeStyle?_.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Aa:"depressed"===a.edgeStyle?_.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Aa:"uniform"===a.edgeStyle&&(_.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Aa)),a.fontPercent&&1!==a.fontPercent&&(D=window.parseFloat(_.style.fontSize),_.style.fontSize=D*a.fontPercent+"px",_.style.height="auto",_.style.top="auto"),a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?_.firstChild.style.fontVariant="small-caps":_.firstChild.style.fontFamily=jc[a.fontFamily]))}},o.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof window.WebVTT&&!t.every(function(Se){return!Se.activeCues})){for(var a=[],s=0;s<t.length;++s)for(var h=t[s],_=0;_<h.activeCues.length;++_)a.push(h.activeCues[_]);window.WebVTT.processCues(window,a,this.el_);for(var D=0;D<t.length;++D){for(var Q=t[D],ie=0;ie<Q.activeCues.length;++ie){var be=Q.activeCues[ie].displayState;xt(be,"vjs-text-track-cue"),xt(be,"vjs-text-track-cue-"+(Q.language||D)),Q.language&&Ut(be,"lang",Q.language)}this.player_.textTrackSettings&&this.updateDisplayState(Q)}}},l}(xe)),xe.registerComponent("LoadingSpinner",function(i){function l(){return i.apply(this,arguments)||this}return ke(l,i),l.prototype.createEl=function(){var o=this.player_.isAudio(),t=this.localize(o?"Audio Player":"Video Player");return o=Ve("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),(t=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})).appendChild(o),t},l}(xe));var zi=function(i){function l(){return i.apply(this,arguments)||this}ke(l,i);var o=l.prototype;return o.createEl=function(t,a,s){return void 0===a&&(a={}),void 0===s&&(s={}),(s=Ve("button",a=de({className:this.buildCSSClass()},a),s=de({type:"button"},s))).appendChild(Ve("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s},o.addChild=function(t,a){return void 0===a&&(a={}),S.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),xe.prototype.addChild.call(this,t,a)},o.enable=function(){i.prototype.enable.call(this),this.el_.removeAttribute("disabled")},o.disable=function(){i.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},o.handleKeyDown=function(t){_e.isEventKey(t,"Space")||_e.isEventKey(t,"Enter")?t.stopPropagation():i.prototype.handleKeyDown.call(this,t)},l}(vi);function kl(i,h){i=i<0?0:i;var o=Math.floor(i%60),t=Math.floor(i/60%60),a=Math.floor(i/3600),s=Math.floor(h/60%60);return h=Math.floor(h/3600),(a=0<(a=isNaN(i)||i===1/0?t=o="-":a)||0<h?a+":":"")+(t=((a||10<=s)&&t<10?"0"+t:t)+":")+(o<10?"0"+o:o)}xe.registerComponent("Button",zi),(ki=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.mouseused_=!1,s.on("mousedown",function(h){return s.handleMouseDown(h)}),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-big-play-button"},o.handleClick=function(t){var a=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return jt(a),void(!this.player_.tech(!0)||(ue||X)&&s||this.player_.tech(!0).focus())}var h=(s=this.player_.getChild("controlBar"))&&s.getChild("playToggle");h?(s=function(){return h.focus()},nt(a)?a.then(s,function(){}):this.setTimeout(s,1)):this.player_.tech(!0).focus()},o.handleKeyDown=function(t){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,t)},o.handleMouseDown=function(t){this.mouseused_=!0},l}(zi)).prototype.controlText_="Play Video",xe.registerComponent("BigPlayButton",ki),xe.registerComponent("CloseButton",function(i){function l(t,a){return(t=i.call(this,t,a)||this).controlText(a&&a.controlText||t.localize("Close")),t}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},o.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},o.handleKeyDown=function(t){_e.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,t)},l}(zi)),(Di=function(i){function l(t,a){var s=i.call(this,t,a=void 0===a?{}:a)||this;return a.replay=void 0===a.replay||a.replay,s.on(t,"play",function(h){return s.handlePlay(h)}),s.on(t,"pause",function(h){return s.handlePause(h)}),a.replay&&s.on(t,"ended",function(h){return s.handleEnded(h)}),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},o.handleClick=function(t){this.player_.paused()?jt(this.player_.play()):this.player_.pause()},o.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},o.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},o.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},o.handleEnded=function(t){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},l}(zi)).prototype.controlText_="Play",xe.registerComponent("PlayToggle",Di);var Bo=kl;function xr(i,l){return Bo(i,l=void 0===l?i:l)}function Da(i,l,o){return i=Number(i),Math.min(o,Math.max(l,isNaN(i)?l:i))}function jo(i,l){return Da(i/l*100,0,100).toFixed(2)+"%"}(Cn=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.on(t,["timeupdate","ended"],function(h){return s.updateContent(h)}),s.updateTextNode_(),s}ke(l,i);var o=l.prototype;return o.createEl=function(){var t=this.buildCSSClass(),a=i.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),s=Ve("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=Ve("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},o.dispose=function(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},o.updateTextNode_=function(t){var a=this;t=xr(t=void 0===t?0:t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){var s;a.contentEl_&&((s=a.textNode_)&&a.contentEl_.firstChild!==s&&(s=null,S.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=document.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_)))}))},o.updateContent=function(t){},l}(xe)).prototype.labelText_="Time",Cn.prototype.controlText_="Time",xe.registerComponent("TimeDisplay",Cn),ri=function(i){function l(){return i.apply(this,arguments)||this}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-current-time"},o.updateContent=function(t){var a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)},l}(Cn),ri.prototype.labelText_="Current Time",ri.prototype.controlText_="Current Time",xe.registerComponent("CurrentTimeDisplay",ri),(zn=function(i){function l(t,h){var s=i.call(this,t,h)||this;return h=function(_){return s.updateContent(_)},s.on(t,"durationchange",h),s.on(t,"loadstart",h),s.on(t,"loadedmetadata",h),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-duration"},o.updateContent=function(t){var a=this.player_.duration();this.updateTextNode_(a)},l}(Cn)).prototype.labelText_="Duration",zn.prototype.controlText_="Duration",xe.registerComponent("DurationDisplay",zn),xe.registerComponent("TimeDivider",function(i){function l(){return i.apply(this,arguments)||this}return ke(l,i),l.prototype.createEl=function(){var o=i.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=i.prototype.createEl.call(this,"div"),a=i.prototype.createEl.call(this,"span",{textContent:"/"});return t.appendChild(a),o.appendChild(t),o},l}(xe)),(Zn=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.on(t,"durationchange",function(h){return s.updateContent(h)}),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-remaining-time"},o.createEl=function(){var t=i.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Ve("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},o.updateContent=function(t){var a;"number"==typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))},l}(Cn)).prototype.labelText_="Remaining Time",Zn.prototype.controlText_="Remaining Time",xe.registerComponent("RemainingTimeDisplay",Zn),xe.registerComponent("LiveDisplay",function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.updateShowing(),s.on(s.player(),"durationchange",function(h){return s.updateShowing(h)}),s}ke(l,i);var o=l.prototype;return o.createEl=function(){var t=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ve("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ve("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},o.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},o.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},l}(xe)),(fi=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(h){return s.updateLiveEdgeStatus(h)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}ke(l,i);var o=l.prototype;return o.createEl=function(){var t=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Ve("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},o.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},o.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},o.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,i.prototype.dispose.call(this)},l}(zi)).prototype.controlText_="Seek to live, currently playing live",xe.registerComponent("SeekToLive",fi),li=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.handleMouseDown_=function(h){return s.handleMouseDown(h)},s.handleMouseUp_=function(h){return s.handleMouseUp(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleMouseMove_=function(h){return s.handleMouseMove(h)},s.update_=function(h){return s.update(h)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}ke(l,i);var o=l.prototype;return o.enabled=function(){return this.enabled_},o.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},o.disable=function(){var t;this.enabled()&&(t=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},o.createEl=function(t,a,s){return void 0===s&&(s={}),(a=void 0===a?{}:a).className=a.className+" vjs-slider",a=de({tabIndex:0},a),s=de({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),i.prototype.createEl.call(this,t,a,s)},o.handleMouseDown=function(t){var a=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||$||t.preventDefault(),st(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},o.handleMouseMove=function(t){},o.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;Vt(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},o.update=function(){var t=this;if(this.el_&&this.bar){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=t.vertical()?"height":"width";t.bar.el().style[s]=(100*a).toFixed(2)+"%"})),a}},o.getProgress=function(){return Number(Da(this.getPercent(),0,1).toFixed(4))},o.calculateDistance=function(t){return t=Wt(this.el_,t),this.vertical()?t.y:t.x},o.handleKeyDown=function(t){_e.isEventKey(t,"Left")||_e.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):_e.isEventKey(t,"Right")||_e.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,t)},o.handleClick=function(t){t.stopPropagation(),t.preventDefault()},o.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},l}(xe),xe.registerComponent("Slider",li),xe.registerComponent("LoadProgressBar",function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.partEls_=[],s.on(t,"progress",function(h){return s.update(h)}),s}ke(l,i);var o=l.prototype;return o.createEl=function(){var t=i.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=Ve("span",{className:"vjs-control-text"}),s=Ve("span",{textContent:this.localize("Loaded")}),h=document.createTextNode(": ");return this.percentageEl_=Ve("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(a),a.appendChild(s),a.appendChild(h),a.appendChild(this.percentageEl_),t},o.dispose=function(){this.partEls_=null,this.percentageEl_=null,i.prototype.dispose.call(this)},o.update=function(t){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var D=a.player_.liveTracker,s=a.player_.buffered(),h=(D=D&&D.isLive()?D.seekableEnd():a.player_.duration(),a.player_.bufferedEnd()),_=a.partEls_;D=jo(h,D),a.percent_!==D&&(a.el_.style.width=D,et(a.percentageEl_,D),a.percent_=D);for(var Q=0;Q<s.length;Q++){var ie=s.start(Q),be=s.end(Q),Se=_[Q];Se||(Se=a.el_.appendChild(Ve()),_[Q]=Se),Se.dataset.start===ie&&Se.dataset.end===be||(Se.dataset.start=ie,Se.dataset.end=be,Se.style.left=jo(ie,h),Se.style.width=jo(be-ie,h))}for(var Ie=_.length;Ie>s.length;Ie--)a.el_.removeChild(_[Ie-1]);_.length=s.length})},l}(xe)),xe.registerComponent("TimeTooltip",function(i){function l(t,a){return(a=i.call(this,t,a)||this).update=yn(zt(Pe(a),a.update),30),a}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},o.update=function(t,a,s){var h=Xt(this.el_),_=Qt(this.player_.el()),D=t.width*a;_&&h&&(a=t.left-_.left+D,_=t.width-D+(_.right-t.right),a<(t=h.width/2)?t+=t-a:_<t&&(t=_),t<0?t=0:t>h.width&&(t=h.width),t=Math.round(t),this.el_.style.right="-"+t+"px",this.write(s))},o.write=function(t){et(this.el_,t)},o.updateTime=function(t,a,s,h){var _=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var D,Q,ie=_.player_.duration();ie=_.player_.liveTracker&&_.player_.liveTracker.isLive()?((Q=(D=_.player_.liveTracker.liveWindow())-a*D)<1?"":"-")+xr(Q,D):xr(s,ie),_.update(t,a,ie),h&&h()})},l}(xe)),(Jn=function(i){function l(t,a){return(a=i.call(this,t,a)||this).update=yn(zt(Pe(a),a.update),30),a}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},o.update=function(t,a){var s,h=this.getChild("timeTooltip");h&&(s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),h.updateTime(t,a,s))},l}(xe)).prototype.options_={children:[]},Ye||oe||Jn.prototype.options_.children.push("timeTooltip"),xe.registerComponent("PlayProgressBar",Jn),(di=function(i){function l(t,a){return(a=i.call(this,t,a)||this).update=yn(zt(Pe(a),a.update),30),a}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},o.update=function(t,a){var s=this,h=a*this.player_.duration();this.getChild("timeTooltip").updateTime(t,a,h,function(){s.el_.style.left=t.width*a+"px"})},l}(xe)).prototype.options_={children:["timeTooltip"]},xe.registerComponent("MouseTimeDisplay",di),(ki=function(i){function l(t,a){return(a=i.call(this,t,a)||this).setEventHandlers_(),a}ke(l,i);var o=l.prototype;return o.setEventHandlers_=function(){var t=this;this.update_=zt(this,this.update),this.update=yn(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return t.enableInterval_(a)},this.disableIntervalHandler_=function(a){return t.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.on(document,"visibilitychange",this.toggleVisibility_)},o.toggleVisibility_=function(t){"hidden"===document.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},o.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},o.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},o.update=function(t){var a=this;if("hidden"!==document.visibilityState){var s=i.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var h=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),_=a.player_.liveTracker,D=a.player_.duration();_&&_.isLive()&&(D=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(100*s).toFixed(2)),a.percent_=s),a.currentTime_===h&&a.duration_===D||(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[xr(h,D),xr(D,D)],"{1} of {2}")),a.currentTime_=h,a.duration_=D),a.bar&&a.bar.update(Qt(a.el()),a.getProgress())}),s}},o.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},o.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},o.getPercent=function(){var t,a=this.getCurrentTime_(),s=this.player_.liveTracker;return s&&s.isLive()?(t=(a-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(t=1)):t=a/this.player_.duration(),t},o.handleMouseDown=function(t){Et(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,t))},o.handleMouseMove=function(t,a){if(void 0===a&&(a=!1),Et(t)){a||this.player_.scrubbing()||this.player_.scrubbing(!0);var s=this.calculateDistance(t),h=this.player_.liveTracker;if(h&&h.isLive()){if(.99<=s)return void h.seekToLiveEdge();var _;if(a=h.seekableStart(),(_=(_=(t=h.liveCurrentTime())<=(_=a+s*h.liveWindow())?t:_)<=a?a+.1:_)===1/0)return}else(_=s*this.player_.duration())===this.player_.duration()&&(_-=.1);this.userSeek_(_)}},o.enable=function(){i.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},o.disable=function(){i.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},o.handleMouseUp=function(t){i.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?jt(this.player_.play()):this.update_()},o.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},o.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},o.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},o.handleKeyDown=function(t){var a,s=this.player_.liveTracker;_e.isEventKey(t,"Space")||_e.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.handleAction(t)):_e.isEventKey(t,"Home")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(0)):_e.isEventKey(t,"End")?(t.preventDefault(),t.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(_e(t))?(t.preventDefault(),t.stopPropagation(),a=10*(_e.codes[_e(t)]-_e.codes[0])/100,s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)):_e.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):_e.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):i.prototype.handleKeyDown.call(this,t)},o.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),i.prototype.dispose.call(this)},l}(li)).prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ye||oe||ki.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),xe.registerComponent("SeekBar",ki),(Di=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.handleMouseMove=yn(zt(Pe(s),s.handleMouseMove),30),s.throttledHandleMouseSeek=yn(zt(Pe(s),s.handleMouseSeek),30),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.handleMouseDownHandler_=function(h){return s.handleMouseDown(h)},s.enable(),s}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},o.handleMouseMove=function(t){var a,s,h,_,D=this.getChild("seekBar");D&&(a=D.getChild("playProgressBar"),s=D.getChild("mouseTimeDisplay"),(a||s)&&(_=Xt(h=D.el()),t=Da(t=Wt(h,t).x,0,1),s&&s.update(_,t),a&&a.update(_,D.getProgress())))},o.handleMouseSeek=function(t){var a=this.getChild("seekBar");a&&a.handleMouseMove(t)},o.enabled=function(){return this.enabled_},o.disable=function(){var t;this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing()&&(t=this.getChild("seekBar"),this.player_.scrubbing(!1),t.videoWasPlaying&&jt(this.player_.play())))},o.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},o.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},o.handleMouseDown=function(t){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(t),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},o.handleMouseUp=function(t){var a=this.getChild("seekBar");a&&a.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},l}(xe)).prototype.options_={children:["seekBar"]},xe.registerComponent("ProgressControl",Di),(ri=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.on(t,["enterpictureinpicture","leavepictureinpicture"],function(h){return s.handlePictureInPictureChange(h)}),s.on(t,["disablepictureinpicturechanged","loadedmetadata"],function(h){return s.handlePictureInPictureEnabledChange(h)}),s.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},o.handlePictureInPictureEnabledChange=function(){document.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},o.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},o.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},l}(zi)).prototype.controlText_="Picture-in-Picture",xe.registerComponent("PictureInPictureToggle",ri),(zn=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.on(t,"fullscreenchange",function(h){return s.handleFullscreenChange(h)}),!1===document[t.fsApi_.fullscreenEnabled]&&s.disable(),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},o.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},o.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},l}(zi)).prototype.controlText_="Fullscreen",xe.registerComponent("FullscreenToggle",zn),xe.registerComponent("VolumeLevel",function(i){function l(){return i.apply(this,arguments)||this}return ke(l,i),l.prototype.createEl=function(){var o=i.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return o.appendChild(i.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),o},l}(xe)),xe.registerComponent("VolumeLevelTooltip",function(i){function l(t,a){return(a=i.call(this,t,a)||this).update=yn(zt(Pe(a),a.update),30),a}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},o.update=function(t,a,s,h){if(!s){var _=Qt(this.el_),D=Qt(this.player_.el());if(!D||!_)return;a=t.left-D.left+(s=t.width*a),D=t.width-s+(D.right-t.right),a<(t=_.width/2)?t+=t-a:D<t&&(t=D),t<0?t=0:t>_.width&&(t=_.width),this.el_.style.right="-"+t+"px"}this.write(h+"%")},o.write=function(t){et(this.el_,t)},o.updateVolume=function(t,a,s,h,_){var D=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){D.update(t,a,s,h.toFixed(0)),_&&_()})},l}(xe)),(Cn=function(i){function l(t,a){return(a=i.call(this,t,a)||this).update=yn(zt(Pe(a),a.update),30),a}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},o.update=function(t,a,s){var h=this,_=100*a;this.getChild("volumeLevelTooltip").updateVolume(t,a,s,_,function(){s?h.el_.style.bottom=t.height*a+"px":h.el_.style.left=t.width*a+"px"})},l}(xe)).prototype.options_={children:["volumeLevelTooltip"]},xe.registerComponent("MouseVolumeLevelDisplay",Cn),(Zn=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.on("slideractive",function(h){return s.updateLastVolume_(h)}),s.on(t,"volumechange",function(h){return s.updateARIAAttributes(h)}),t.ready(function(){return s.updateARIAAttributes()}),s}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},o.handleMouseDown=function(t){Et(t)&&i.prototype.handleMouseDown.call(this,t)},o.handleMouseMove=function(t){var a,s,h,_=this.getChild("mouseVolumeLevelDisplay");_&&(a=Qt(h=this.el()),s=this.vertical(),h=Wt(h,t),h=Da(h=s?h.y:h.x,0,1),_.update(a,h,s)),Et(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},o.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},o.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},o.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},o.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},o.updateARIAAttributes=function(t){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},o.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},o.updateLastVolume_=function(){var t=this,a=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(a)})},l}(li)).prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ye||oe||Zn.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Zn.prototype.playerEvent="volumechange",xe.registerComponent("VolumeBar",Zn),(fi=function(i){function l(t,a){var s,h,_;return(a=void 0===a?{}:a).vertical=a.vertical||!1,typeof a.volumeBar<"u"&&!U(a.volumeBar)||(a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=a.vertical),s=i.call(this,t,a)||this,h=Pe(s),(_=t).tech_&&!_.tech_.featuresVolumeControl&&h.addClass("vjs-hidden"),h.on(_,"loadstart",function(){_.tech_.featuresVolumeControl?h.removeClass("vjs-hidden"):h.addClass("vjs-hidden")}),s.throttledHandleMouseMove=yn(zt(Pe(s),s.handleMouseMove),30),s.handleMouseUpHandler_=function(D){return s.handleMouseUp(D)},s.on("mousedown",function(D){return s.handleMouseDown(D)}),s.on("touchstart",function(D){return s.handleMouseDown(D)}),s.on("mousemove",function(D){return s.handleMouseMove(D)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}ke(l,i);var o=l.prototype;return o.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},o.handleMouseDown=function(t){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},o.handleMouseUp=function(t){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},o.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},l}(xe)).prototype.options_={children:["volumeBar"]},xe.registerComponent("VolumeControl",fi),(Jn=function(i){function l(t,a){var s,h,_=i.call(this,t,a)||this;return s=Pe(_),(h=t).tech_&&!h.tech_.featuresMuteControl&&s.addClass("vjs-hidden"),s.on(h,"loadstart",function(){h.tech_.featuresMuteControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")}),_.on(t,["loadstart","volumechange"],function(D){return _.update(D)}),_}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},o.handleClick=function(t){var a=this.player_.volume(),s=this.player_.lastVolume_();0===a?(this.player_.volume(s<.1?.1:s),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},o.update=function(t){this.updateIcon_(),this.updateControlText_()},o.updateIcon_=function(){var t=this.player_.volume(),a=3;Ye&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?a=0:t<.33?a=1:t<.67&&(a=2);for(var s=0;s<4;s++)Me(this.el_,"vjs-vol-"+s);xt(this.el_,"vjs-vol-"+a)},o.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},l}(zi)).prototype.controlText_="Mute",xe.registerComponent("MuteToggle",Jn),(di=function(i){function l(t,a){var s;return a.inline=!(typeof(a=void 0===a?{}:a).inline<"u")||a.inline,typeof a.volumeControl<"u"&&!U(a.volumeControl)||(a.volumeControl=a.volumeControl||{},a.volumeControl.vertical=!a.inline),(s=i.call(this,t,a)||this).handleKeyPressHandler_=function(h){return s.handleKeyPress(h)},s.on(t,["loadstart"],function(h){return s.volumePanelState_(h)}),s.on(s.muteToggle,"keyup",function(h){return s.handleKeyPress(h)}),s.on(s.volumeControl,"keyup",function(h){return s.handleVolumeControlKeyUp(h)}),s.on("keydown",function(h){return s.handleKeyPress(h)}),s.on("mouseover",function(h){return s.handleMouseOver(h)}),s.on("mouseout",function(h){return s.handleMouseOut(h)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}ke(l,i);var o=l.prototype;return o.sliderActive_=function(){this.addClass("vjs-slider-active")},o.sliderInactive_=function(){this.removeClass("vjs-slider-active")},o.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},o.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},o.dispose=function(){this.handleMouseOut(),i.prototype.dispose.call(this)},o.handleVolumeControlKeyUp=function(t){_e.isEventKey(t,"Esc")&&this.muteToggle.focus()},o.handleMouseOver=function(t){this.addClass("vjs-hover"),Be(document,"keyup",this.handleKeyPressHandler_)},o.handleMouseOut=function(t){this.removeClass("vjs-hover"),Qe(document,"keyup",this.handleKeyPressHandler_)},o.handleKeyPress=function(t){_e.isEventKey(t,"Esc")&&this.handleMouseOut()},l}(xe)).prototype.options_={children:["muteToggle","volumeControl"]},xe.registerComponent("VolumePanel",di);var El=function(i){function l(t,a){var s=i.call(this,t,a)||this;return a&&(s.menuButton_=a.menuButton),s.focusedChild_=-1,s.on("keydown",function(h){return s.handleKeyDown(h)}),s.boundHandleBlur_=function(h){return s.handleBlur(h)},s.boundHandleTapClick_=function(h){return s.handleTapClick(h)},s}ke(l,i);var o=l.prototype;return o.addEventListenerForItem=function(t){t instanceof xe&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},o.removeEventListenerForItem=function(t){t instanceof xe&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},o.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),i.prototype.removeChild.call(this,t)},o.addItem=function(t){(t=this.addChild(t))&&this.addEventListenerForItem(t)},o.createEl=function(){var t=this.options_.contentElType||"ul";return this.contentEl_=Ve(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),(t=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"})).appendChild(this.contentEl_),Be(t,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),t},o.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},o.handleBlur=function(t){var a=t.relatedTarget||document.activeElement;this.children().some(function(s){return s.el()===a})||(t=this.menuButton_)&&t.buttonPressed_&&a!==t.el().firstChild&&t.unpressButton()},o.handleTapClick=function(t){var a;this.menuButton_&&(this.menuButton_.unpressButton(),a=this.children(),!Array.isArray(a)||(a=a.filter(function(s){return s.el()===t.target})[0])&&"CaptionSettingsMenuItem"!==a.name()&&this.menuButton_.focus())},o.handleKeyDown=function(t){_e.isEventKey(t,"Left")||_e.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(_e.isEventKey(t,"Right")||_e.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},o.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},o.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},o.focus=function(t){void 0===t&&(t=0);var a=this.children().slice();a.length&&a[0].hasClass("vjs-menu-title")&&a.shift(),0<a.length&&(t<0?t=0:t>=a.length&&(t=a.length-1),a[this.focusedChild_=t].el_.focus())},l}(xe);xe.registerComponent("Menu",El),ki=function(i){function l(t,a){var s;return(s=i.call(this,t,a=void 0===a?{}:a)||this).menuButton_=new zi(t,a),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true"),a=zi.prototype.buildCSSClass(),s.menuButton_.el_.className=s.buildCSSClass()+" "+a,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0,a=function(h){return s.handleClick(h)},s.handleMenuKeyUp_=function(h){return s.handleMenuKeyUp(h)},s.on(s.menuButton_,"tap",a),s.on(s.menuButton_,"click",a),s.on(s.menuButton_,"keydown",function(h){return s.handleKeyDown(h)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),Be(document,"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(h){return s.handleMouseLeave(h)}),s.on("keydown",function(h){return s.handleSubmenuKeyDown(h)}),s}ke(l,i);var o=l.prototype;return o.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},o.createMenu=function(){var t,a=new El(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(t=Ve("li",{className:"vjs-menu-title",textContent:M(this.options_.title),tabIndex:-1}),t=new xe(this.player_,{el:t}),a.addItem(t)),this.items=this.createItems(),this.items)for(var s=0;s<this.items.length;s++)a.addItem(this.items[s]);return a},o.createItems=function(){},o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},o.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+zi.prototype.buildCSSClass()+" "+i.prototype.buildCSSClass.call(this)},o.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+i.prototype.buildCSSClass.call(this)},o.controlText=function(t,a){return void 0===a&&(a=this.menuButton_.el()),this.menuButton_.controlText(t,a)},o.dispose=function(){this.handleMouseLeave(),i.prototype.dispose.call(this)},o.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},o.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Qe(document,"keyup",this.handleMenuKeyUp_)},o.focus=function(){this.menuButton_.focus()},o.blur=function(){this.menuButton_.blur()},o.handleKeyDown=function(t){_e.isEventKey(t,"Esc")||_e.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),_e.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(_e.isEventKey(t,"Up")||_e.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},o.handleMenuKeyUp=function(t){(_e.isEventKey(t,"Esc")||_e.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},o.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},o.handleSubmenuKeyDown=function(t){(_e.isEventKey(t,"Esc")||_e.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),_e.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},o.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ye&&yt()||this.menu.focus())},o.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},o.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},o.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},l}(xe),xe.registerComponent("MenuButton",ki),Di=function(i){function l(o,s){var a=s.tracks;if((s=i.call(this,o,s)||this).items.length<=1&&s.hide(),!a)return Pe(s);var h=zt(Pe(s),s.update);return a.addEventListener("removetrack",h),a.addEventListener("addtrack",h),a.addEventListener("labelchange",h),s.player_.on("ready",h),s.player_.on("dispose",function(){a.removeEventListener("removetrack",h),a.removeEventListener("addtrack",h),a.removeEventListener("labelchange",h)}),s}return ke(l,i),l}(ki),xe.registerComponent("TrackButton",Di);var Hc=["Tab","Esc","Up","Down","Right","Left"];ri=function(i){function l(t,a){return(t=i.call(this,t,a)||this).selectable=a.selectable,t.isSelected_=a.selected||!1,t.multiSelectable=a.multiSelectable,t.selected(t.isSelected_),t.el_.setAttribute("role",t.selectable?t.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),t}ke(l,i);var o=l.prototype;return o.createEl=function(t,a,s){return this.nonIconControl=!0,(s=i.prototype.createEl.call(this,"li",de({className:"vjs-menu-item",tabIndex:-1},a),s)).replaceChild(Ve("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),s.querySelector(".vjs-icon-placeholder")),s},o.handleKeyDown=function(t){Hc.some(function(a){return _e.isEventKey(t,a)})||i.prototype.handleKeyDown.call(this,t)},o.handleClick=function(t){this.selected(!0)},o.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},l}(vi),xe.registerComponent("MenuItem",ri);var ea=function(i){function l(t,a){var s,ie,h=a.track,_=t.textTracks();function D(){for(var be=arguments.length,Se=new Array(be),Ie=0;Ie<be;Ie++)Se[Ie]=arguments[Ie];s.handleTracksChange.apply(Pe(s),Se)}function Q(){for(var be=arguments.length,Se=new Array(be),Ie=0;Ie<be;Ie++)Se[Ie]=arguments[Ie];s.handleSelectedLanguageChange.apply(Pe(s),Se)}return a.label=h.label||h.language||"Unknown",a.selected="showing"===h.mode,(s=i.call(this,t,a)||this).track=h,s.kinds=(a.kinds||[a.kind||s.track.kind]).filter(Boolean),t.on(["loadstart","texttrackchange"],D),_.addEventListener("change",D),_.addEventListener("selectedlanguagechange",Q),s.on("dispose",function(){t.off(["loadstart","texttrackchange"],D),_.removeEventListener("change",D),_.removeEventListener("selectedlanguagechange",Q)}),void 0===_.onchange&&s.on(["tap","click"],function(){if("object"!=typeof window.Event)try{ie=new window.Event("change")}catch{}ie||(ie=document.createEvent("Event")).initEvent("change",!0,!0),_.dispatchEvent(ie)}),s.handleTracksChange(),s}ke(l,i);var o=l.prototype;return o.handleClick=function(t){var a=this.track,s=this.player_.textTracks();if(i.prototype.handleClick.call(this,t),s)for(var h=0;h<s.length;h++){var _=s[h];-1!==this.kinds.indexOf(_.kind)&&(_===a?"showing"!==_.mode&&(_.mode="showing"):"disabled"!==_.mode&&(_.mode="disabled"))}},o.handleTracksChange=function(t){var a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)},o.handleSelectedLanguageChange=function(t){var a;"showing"===this.track.mode&&((a=this.player_.cache_.selectedLanguage)&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))},o.dispose=function(){this.track=null,i.prototype.dispose.call(this)},l}(ri);xe.registerComponent("TextTrackMenuItem",ea);var Cl=function(i){function l(t,a){return a.track={player:t,kind:a.kind,kinds:a.kinds,default:!1,mode:"disabled"},a.kinds||(a.kinds=[a.kind]),a.track.label=a.label?a.label:a.kinds.join(" and ")+" off",a.selectable=!0,a.multiSelectable=!1,i.call(this,t,a)||this}ke(l,i);var o=l.prototype;return o.handleTracksChange=function(t){for(var a=this.player().textTracks(),s=!0,h=0,_=a.length;h<_;h++){var D=a[h];if(-1<this.options_.kinds.indexOf(D.kind)&&"showing"===D.mode){s=!1;break}}s!==this.isSelected_&&this.selected(s)},o.handleSelectedLanguageChange=function(t){for(var a=this.player().textTracks(),s=!0,h=0,_=a.length;h<_;h++){var D=a[h];if(-1<["captions","descriptions","subtitles"].indexOf(D.kind)&&"showing"===D.mode){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},l}(ea);xe.registerComponent("OffTextTrackMenuItem",Cl),zn=function(i){function l(o,t){return(t=void 0===t?{}:t).tracks=o.textTracks(),i.call(this,o,t)||this}return ke(l,i),l.prototype.createItems=function(o,t){var a;void 0===t&&(t=ea),this.label_&&(a=this.label_+" off"),(o=void 0===o?[]:o).push(new Cl(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var h=0;h<s.length;h++){var _,D=s[h];-1<this.kinds_.indexOf(D.kind)&&((_=new t(this.player_,{track:D,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass("vjs-"+D.kind+"-menu-item"),o.push(_))}return o},l}(Di),xe.registerComponent("TextTrackButton",zn);var Nl=function(i){function l(o,t){var a=t.track,s=t.cue,h=o.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=s.text,t.selected=s.startTime<=h&&h<s.endTime,(t=i.call(this,o,t)||this).track=a,t.cue=s,t}return ke(l,i),l.prototype.handleClick=function(o){i.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},l}(ri);xe.registerComponent("ChaptersTrackMenuItem",Nl),(Cn=function(i){function l(t,a,s){var h=i.call(this,t,a,s)||this;return h.selectCurrentItem_=function(){h.items.forEach(function(_){_.selected(h.track_.activeCues[0]===_.cue)})},h}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},o.update=function(t){t&&t.track&&"chapters"!==t.track.kind||((t=this.findChaptersTrack())!==this.track_?(this.setTrack(t),i.prototype.update.call(this)):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&i.prototype.update.call(this))},o.setTrack=function(t){var a;this.track_!==t&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null),this.track_=t,this.track_&&(this.track_.mode="hidden",(t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)))},o.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],a=t.length-1;0<=a;a--){var s=t[a];if(s.kind===this.kind_)return s}},o.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(M(this.kind_))},o.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},o.createItems=function(){var t=[];if(!this.track_)return t;var a=this.track_.cues;if(!a)return t;for(var s=0,h=a.length;s<h;s++){var _=new Nl(this.player_,{track:this.track_,cue:_=a[s]});t.push(_)}return t},l}(zn)).prototype.kind_="chapters",Cn.prototype.controlText_="Chapters",xe.registerComponent("ChaptersButton",Cn),(li=function(i){function l(t,a,h){h=i.call(this,t,a,h)||this;var _=t.textTracks(),D=zt(Pe(h),h.handleTracksChange);return _.addEventListener("change",D),h.on("dispose",function(){_.removeEventListener("change",D)}),h}ke(l,i);var o=l.prototype;return o.handleTracksChange=function(t){for(var a=this.player().textTracks(),s=!1,h=0,_=a.length;h<_;h++){var D=a[h];if(D.kind!==this.kind_&&"showing"===D.mode){s=!0;break}}s?this.disable():this.enable()},o.buildCSSClass=function(){return"vjs-descriptions-button "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+i.prototype.buildWrapperCSSClass.call(this)},l}(zn)).prototype.kind_="descriptions",li.prototype.controlText_="Descriptions",xe.registerComponent("DescriptionsButton",li),(Zn=function(i){function l(t,a,s){return i.call(this,t,a,s)||this}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},l}(zn)).prototype.kind_="subtitles",Zn.prototype.controlText_="Subtitles",xe.registerComponent("SubtitlesButton",Zn);var Ho=function(i){function l(o,t){return t.track={player:o,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(o=i.call(this,o,t)||this).addClass("vjs-texttrack-settings"),o.controlText(", opens "+t.kind+" settings dialog"),o}return ke(l,i),l.prototype.handleClick=function(o){this.player().getChild("textTrackSettings").open()},l}(ea);xe.registerComponent("CaptionSettingsMenuItem",Ho),(fi=function(i){function l(t,a,s){return i.call(this,t,a,s)||this}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ho(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,t)},l}(zn)).prototype.kind_="captions",fi.prototype.controlText_="Captions",xe.registerComponent("CaptionsButton",fi);var Al=function(i){function l(){return i.apply(this,arguments)||this}return ke(l,i),l.prototype.createEl=function(o,t,a){return a=(t=i.prototype.createEl.call(this,o,t,a)).querySelector(".vjs-menu-item-text"),"captions"===this.options_.track.kind&&(a.appendChild(Ve("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Ve("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),t},l}(ea);xe.registerComponent("SubsCapsMenuItem",Al),(Jn=function(i){function l(t,a){return(a=i.call(this,t,a=void 0===a?{}:a)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)&&(a.label_="captions"),a.menuButton_.controlText(M(a.label_)),a}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ho(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,t,Al)},l}(zn)).prototype.kinds_=["captions","subtitles"],Jn.prototype.controlText_="Subtitles",xe.registerComponent("SubsCapsButton",Jn);var Dl=function(i){function l(t,a){var s,h=a.track,_=t.audioTracks();function D(){for(var Q=arguments.length,ie=new Array(Q),be=0;be<Q;be++)ie[be]=arguments[be];s.handleTracksChange.apply(Pe(s),ie)}return a.label=h.label||h.language||"Unknown",a.selected=h.enabled,(s=i.call(this,t,a)||this).track=h,s.addClass("vjs-"+h.kind+"-menu-item"),_.addEventListener("change",D),s.on("dispose",function(){_.removeEventListener("change",D)}),s}ke(l,i);var o=l.prototype;return o.createEl=function(t,a,s){return s=(a=i.prototype.createEl.call(this,t,a,s)).querySelector(".vjs-menu-item-text"),"main-desc"===this.options_.track.kind&&(s.appendChild(Ve("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ve("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),a},o.handleClick=function(t){if(i.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var h=a[s];h!==this.track&&(h.enabled=h===this.track)}},o.handleTracksChange=function(t){this.selected(this.track.enabled)},l}(ri);xe.registerComponent("AudioTrackMenuItem",Dl),(di=function(i){function l(t,a){return(a=void 0===a?{}:a).tracks=t.audioTracks(),i.call(this,t,a)||this}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++)t.push(new Dl(this.player_,{track:a[s],selectable:!0,multiSelectable:!1}));return t},l}(Di)).prototype.controlText_="Audio Track",xe.registerComponent("AudioTrackButton",di);var zo=function(i){function l(t,a){var s,h=a.rate,_=parseFloat(h,10);return a.label=h,a.selected=_===t.playbackRate(),a.selectable=!0,a.multiSelectable=!1,(s=i.call(this,t,a)||this).label=h,s.rate=_,s.on(t,"ratechange",function(D){return s.update(D)}),s}ke(l,i);var o=l.prototype;return o.handleClick=function(t){i.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},o.update=function(t){this.selected(this.player().playbackRate()===this.rate)},l}(ri);zo.prototype.contentElType="button",xe.registerComponent("PlaybackRateMenuItem",zo),(vi=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(t,"loadstart",function(h){return s.updateVisibility(h)}),s.on(t,"ratechange",function(h){return s.updateLabel(h)}),s.on(t,"playbackrateschange",function(h){return s.handlePlaybackRateschange(h)}),s}ke(l,i);var o=l.prototype;return o.createEl=function(){var t=i.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ve("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},o.dispose=function(){this.labelEl_=null,i.prototype.dispose.call(this)},o.buildCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(){for(var t=this.playbackRates(),a=[],s=t.length-1;0<=s;s--)a.push(new zo(this.player(),{rate:t[s]+"x"}));return a},o.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},o.handleClick=function(t){var s=this.player().playbackRate(),a=this.playbackRates();s=(a.indexOf(s)+1)%a.length,this.player().playbackRate(a[s])},o.handlePlaybackRateschange=function(t){this.update()},o.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},o.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},o.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},o.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},l}(ki)).prototype.controlText_="Playback Rate",xe.registerComponent("PlaybackRateMenuButton",vi),Cn=function(i){function l(){return i.apply(this,arguments)||this}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-spacer "+i.prototype.buildCSSClass.call(this)},o.createEl=function(t,a,s){return void 0===t&&(t="div"),void 0===s&&(s={}),(a=void 0===a?{}:a).className||(a.className=this.buildCSSClass()),i.prototype.createEl.call(this,t,a,s)},l}(xe),xe.registerComponent("Spacer",Cn),xe.registerComponent("CustomControlSpacer",function(i){function l(){return i.apply(this,arguments)||this}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-custom-control-spacer "+i.prototype.buildCSSClass.call(this)},o.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},l}(Cn)),li=function(i){function l(){return i.apply(this,arguments)||this}return ke(l,i),l.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},l}(xe),li.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in document&&li.prototype.options_.children.splice(li.prototype.options_.children.length-1,0,"pictureInPictureToggle"),xe.registerComponent("ControlBar",li),(Zn=function(i){function l(t,a){var s=i.call(this,t,a)||this;return s.on(t,"error",function(h){return s.open(h)}),s}ke(l,i);var o=l.prototype;return o.buildCSSClass=function(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},o.content=function(){var t=this.player().error();return t?this.localize(t.message):""},l}(sn)).prototype.options_=H({},sn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),xe.registerComponent("ErrorDisplay",Zn);var li,Vo="vjs-text-track-settings",hr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[fi=["#000","Black"],ki=["#FFF","White"],ri=["#F00","Red"],Di=["#0F0","Green"],zn=["#00F","Blue"],vi=["#FF0","Yellow"],di=["#F0F","Magenta"],Jn=["#0FF","Cyan"]]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Cn=["1","Opaque"],li=["0.5","Semi-Transparent"],Zn=["0","Transparent"]]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ki,fi,ri,Di,zn,vi,di,Jn]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(i){return"1.00"===i?null:Number(i)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Cn,li]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Zn,li,Cn]}};function Ol(i,l){if((i=l?l(i):i)&&"none"!==i)return i}hr.windowColor.options=hr.backgroundColor.options,xe.registerComponent("TextTrackSettings",function(i){function l(t,a){var s;return a.temporary=!1,(s=i.call(this,t,a)||this).updateDisplay=s.updateDisplay.bind(Pe(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=Ve("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),void 0===a.persistTextTrackSettings&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),he(hr,function(h){s.on(s.$(h.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}ke(l,i);var o=l.prototype;return o.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},o.createElSelect_=function(_,a,s){var h=this;void 0===a&&(a=""),void 0===s&&(s="label");var D=(_=hr[_]).id.replace("%s",this.id_),Q=[a,D].join(" ").trim();return["<"+s+' id="'+D+'" class="'+("label"===s?"vjs-label":"")+'">',this.localize(_.label),"</"+s+">",'<select aria-labelledby="'+Q+'">'].concat(_.options.map(function(ie){var be=D+"-"+ie[1].replace(/\W+/g,"");return['<option id="'+be+'" value="'+ie[0]+'" ','aria-labelledby="'+Q+" "+be+'">',h.localize(ie[1]),"</option>"].join("")})).concat("</select>").join("")},o.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},o.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},o.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},o.createElColors_=function(){return Ve("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},o.createElFont_=function(){return Ve("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},o.createElControls_=function(){var t=this.localize("restore all settings to the default values");return Ve("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},o.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},o.label=function(){return this.localize("Caption Settings Dialog")},o.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},o.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},o.getValues=function(){var t,a,s,h=this;return a=function(_,be,Q){var ie;return void 0!==(be=Ol((ie=h.$(be.selector)).options[ie.options.selectedIndex].value,be=be.parser))&&(_[Q]=be),_},void 0===(s={})&&(s=0),ae(t=hr).reduce(function(_,D){return a(_,t[D],D)},s)},o.setValues=function(t){var a=this;he(hr,function(s,h){!function(_,D,Q){if(D)for(var ie=0;ie<_.options.length;ie++)if(Ol(_.options[ie].value,Q)===D){_.selectedIndex=ie;break}}(a.$(s.selector),t[h],s.parser)})},o.setDefaults=function(){var t=this;he(hr,function(a){var s=a.hasOwnProperty("default")?a.default:0;t.$(a.selector).selectedIndex=s})},o.restoreSettings=function(){var t;try{t=JSON.parse(window.localStorage.getItem(Vo))}catch(a){S.warn(a)}t&&this.setValues(t)},o.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?window.localStorage.setItem(Vo,JSON.stringify(t)):window.localStorage.removeItem(Vo)}catch(a){S.warn(a)}}},o.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},o.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=(a=this.player_.controlBar)&&a.subsCapsButton,a=a&&a.captionsButton;t?t.focus():a&&a.focus()},l}(sn)),xe.registerComponent("ResizeManager",function(i){function l(t,a){var s,h=a.ResizeObserver||window.ResizeObserver,_=Z({createEl:!(h=null!==a.ResizeObserver&&h),reportTouchActivity:!1},a);return(s=i.call(this,t,_)||this).ResizeObserver=a.ResizeObserver||window.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=function Xi(i,l,o,t){var a;function s(){var h=this,_=arguments,D=function(){D=a=null,o||i.apply(h,_)};!a&&o&&i.apply(h,_),t.clearTimeout(a),a=t.setTimeout(D,l)}return void 0===t&&(t=window),s.cancel=function(){t.clearTimeout(a),a=null},s}(function(){s.resizeHandler()},100,!1,Pe(s)),h?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(t.el())):(s.loadListener_=function(){var D,Q;s.el_&&s.el_.contentWindow&&(D=s.debouncedHandler_,Q=s.unloadListener_=function(){Qe(this,"resize",D),Qe(this,"unload",Q),Q=null},Be(s.el_.contentWindow,"unload",Q),Be(s.el_.contentWindow,"resize",D))},s.one("load",s.loadListener_)),s}ke(l,i);var o=l.prototype;return o.createEl=function(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},o.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},o.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,i.prototype.dispose.call(this)},l}(xe));var zc={trackingThreshold:20,liveTolerance:15};function Wo(i){if((t=i.el()).hasAttribute("src"))return i.triggerSourceset(t.src),1;var l=i.$$("source"),o=[],t="";if(l.length){for(var a=0;a<l.length;a++){var s=l[a].src;s&&-1===o.indexOf(s)&&o.push(s)}return!!o.length&&(1===o.length&&(t=o[0]),i.triggerSourceset(t),!0)}}function Il(i,l){for(var o={},t=0;t<i.length&&!((o=Object.getOwnPropertyDescriptor(i[t],l))&&o.set&&o.get);t++);return o.enumerable=!0,o.configurable=!0,o}function Pl(i){var l,o,t,a=i.el();a.resetSourceWatch_||(l={},o=Il([i.el(),window.HTMLMediaElement.prototype,window.Element.prototype,Wc],"innerHTML"),t=function(s){return function(){for(var h=arguments.length,_=new Array(h),D=0;D<h;D++)_[D]=arguments[D];var Q=s.apply(a,_);return Wo(i),Q}},["append","appendChild","insertAdjacentHTML"].forEach(function(s){a[s]&&(l[s]=a[s],a[s]=t(l[s]))}),Object.defineProperty(a,"innerHTML",Z(o,{set:t(o.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(l).forEach(function(s){a[s]=l[s]}),Object.defineProperty(a,"innerHTML",o)},i.one("sourceset",a.resetSourceWatch_))}function qo(i,l,o,t){function a(h){return Object.defineProperty(i,l,{value:h,enumerable:!0,writable:!0})}var s={configurable:!0,enumerable:!0,get:function(){var h=o();return a(h),h}};return(t=void 0===t||t)&&(s.set=a),Object.defineProperty(i,l,s)}xe.registerComponent("LiveTracker",function(i){function l(t,s){s=Z(zc,s,{createEl:!1});var h=i.call(this,t,s)||this;return h.handleVisibilityChange_=function(_){return h.handleVisibilityChange(_)},h.trackLiveHandler_=function(){return h.trackLive_()},h.handlePlay_=function(_){return h.handlePlay(_)},h.handleFirstTimeupdate_=function(_){return h.handleFirstTimeupdate(_)},h.handleSeeked_=function(_){return h.handleSeeked(_)},h.seekToLiveEdge_=function(_){return h.seekToLiveEdge(_)},h.reset_(),h.on(h.player_,"durationchange",function(_){return h.handleDurationchange(_)}),h.on(h.player_,"canplay",function(){return h.toggleTracking()}),ue&&"hidden"in document&&"visibilityState"in document&&h.on(document,"visibilitychange",h.handleVisibilityChange_),h}ke(l,i);var o=l.prototype;return o.handleVisibilityChange=function(){this.player_.duration()===1/0&&(document.hidden?this.stopTracking():this.startTracking())},o.trackLive_=function(){var t,a=this.player_.seekable();a&&a.length&&(t=Number(window.performance.now().toFixed(4)),a=-1===this.lastTime_?0:(t-this.lastTime_)/1e3,this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+a,t=this.liveCurrentTime(),a=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(t-a)>this.options_.liveTolerance,(a=!(!this.timeupdateSeen_||t===1/0)&&a)!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange")))},o.handleDurationchange=function(){this.toggleTracking()},o.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},o.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},o.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},o.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<t,this.nextSeekedFromUser_=!1,this.trackLive_()},o.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},o.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},o.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},o.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},o.seekableEnd=function(){for(var t=this.player_.seekable(),a=[],s=t?t.length:0;s--;)a.push(t.end(s));return a.length?a.sort()[a.length-1]:1/0},o.seekableStart=function(){for(var t=this.player_.seekable(),a=[],s=t?t.length:0;s--;)a.push(t.start(s));return a.length?a.sort()[0]:0},o.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},o.isLive=function(){return this.isTracking()},o.atLiveEdge=function(){return!this.behindLiveEdge()},o.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},o.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},o.behindLiveEdge=function(){return this.behindLiveEdge_},o.isTracking=function(){return"number"==typeof this.trackingInterval_},o.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},o.dispose=function(){this.off(document,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),i.prototype.dispose.call(this)},l}(xe));var Oa,Wc=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var l=document.createElement(this.nodeName.toLowerCase());l.innerHTML=i;for(var o=document.createDocumentFragment();l.childNodes.length;)o.appendChild(l.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,o),this.innerHTML}}),qc=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Bi(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(i){return window.Element.prototype.setAttribute.call(this,"src",i),i}}),Zt=function(i){function l(t,h){var s=i.call(this,t,h)||this,_=(h=t.source,!1);if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&"VIDEO"===s.el_.tagName,h&&(s.el_.currentSrc!==h.src||t.tag&&3===t.tag.initNetworkState_)?s.setSource(h):s.handleLateInit_(s.el_),t.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var D=s.el_.childNodes,Q=D.length,ie=[];Q--;){var be=D[Q];"track"===be.nodeName.toLowerCase()&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(be),s.remoteTextTracks().addTrack(be.track),s.textTracks().addTrack(be.track),_||s.el_.hasAttribute("crossorigin")||!br(be.src)||(_=!0)):ie.push(be))}for(var Se=0;Se<ie.length;Se++)s.el_.removeChild(ie[Se])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&_&&S.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),s.restoreMetadataTracksInIOSNativePlayer_(),(Ae||je||Y)&&!0===t.nativeControlsForTouch&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}ke(l,i);var o=l.prototype;return o.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),l.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},o.setupSourcesetHandling_=function(){!function Vc(i){var l,o,t,a;i.featuresSourceset&&((l=i.el()).resetSourceset_||(o=Il([i.el(),window.HTMLMediaElement.prototype,qc],"src"),t=l.setAttribute,a=l.load,Object.defineProperty(l,"src",Z(o,{set:function(s){return s=o.set.call(l,s),i.triggerSourceset(l.src),s}})),l.setAttribute=function(s,h){return h=t.call(l,s,h),/src/i.test(s)&&i.triggerSourceset(l.src),h},l.load=function(){var s=a.call(l);return Wo(i)||(i.triggerSourceset(""),Pl(i)),s},l.currentSrc?i.triggerSourceset(l.currentSrc):Wo(i)||Pl(i),l.resetSourceset_=function(){l.resetSourceset_=null,l.load=a,l.setAttribute=t,Object.defineProperty(l,"src",o),l.resetSourceWatch_&&l.resetSourceWatch_()}))}(this)},o.restoreMetadataTracksInIOSNativePlayer_=function(){function t(){a=[];for(var _=0;_<s.length;_++){var D=s[_];"metadata"===D.kind&&a.push({track:D,storedMode:D.mode})}}var a,s=this.textTracks();function h(){for(var _=0;_<a.length;_++){var D=a[_];"disabled"===D.track.mode&&D.track.mode!==D.storedMode&&(D.track.mode=D.storedMode)}s.removeEventListener("change",h)}t(),s.addEventListener("change",t),this.on("dispose",function(){return s.removeEventListener("change",t)}),this.on("webkitbeginfullscreen",function(){s.removeEventListener("change",t),s.removeEventListener("change",h),s.addEventListener("change",h)}),this.on("webkitendfullscreen",function(){s.removeEventListener("change",t),s.addEventListener("change",t),s.removeEventListener("change",h)})},o.overrideNative_=function(t,a){var s,h=this;a===this["featuresNative"+t+"Tracks"]&&(this[(s=t.toLowerCase())+"TracksListeners_"]&&Object.keys(this[s+"TracksListeners_"]).forEach(function(_){h.el()[s+"Tracks"].removeEventListener(_,h[s+"TracksListeners_"][_])}),this["featuresNative"+t+"Tracks"]=!a,this[s+"TracksListeners_"]=null,this.proxyNativeTracksForType_(s))},o.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},o.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},o.proxyNativeTracksForType_=function(t){var a,s,h=this,_=Ui[t],D=this.el()[_.getterName],Q=this[_.getterName]();this["featuresNative"+_.capitalName+"Tracks"]&&D&&D.addEventListener&&(s=function(){for(var ie=[],be=0;be<Q.length;be++){for(var Se=!1,Ie=0;Ie<D.length;Ie++)if(D[Ie]===Q[be]){Se=!0;break}Se||ie.push(Q[be])}for(;ie.length;)Q.removeTrack(ie.shift())},this[_.getterName+"Listeners_"]=a={change:function(ie){var be={type:"change",target:Q,currentTarget:Q,srcElement:Q};Q.trigger(be),"text"===t&&h[wr.remoteText.getterName]().trigger(be)},addtrack:function(ie){Q.addTrack(ie.track)},removetrack:function(ie){Q.removeTrack(ie.track)}},Object.keys(a).forEach(function(ie){var be=a[ie];D.addEventListener(ie,be),h.on("dispose",function(Se){return D.removeEventListener(ie,be)})}),this.on("loadstart",s),this.on("dispose",function(ie){return h.off("loadstart",s)}))},o.proxyNativeTracks_=function(){var t=this;Ui.names.forEach(function(a){t.proxyNativeTracksForType_(a)})},o.createEl=function(){var t,a=this.options_.tag;a&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(a?(t=a.cloneNode(!0),a.parentNode&&a.parentNode.insertBefore(t,a),l.disposeMediaElement(a),a=t):(a=document.createElement("video"),t=Z({},this.options_.tag&&Ge(this.options_.tag)),Ae&&!0===this.options_.nativeControlsForTouch||delete t.controls,Fe(a,de(t,{id:this.options_.techId,class:"vjs-tech"}))),a.playerId=this.options_.playerId),typeof this.options_.preload<"u"&&Ut(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);for(var s=["loop","muted","playsinline","autoplay"],h=0;h<s.length;h++){var _=s[h],D=this.options_[_];typeof D<"u"&&(D?Ut(a,_,_):Lt(a,_),a[_]=D)}return a},o.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var a=!1,s=function(){a=!0};this.on("loadstart",s);var h=function(){a||this.trigger("loadstart")};return this.on("loadedmetadata",h),void this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",h),a||this.trigger("loadstart")})}var _=["loadstart"];_.push("loadedmetadata"),2<=t.readyState&&_.push("loadeddata"),3<=t.readyState&&_.push("canplay"),4<=t.readyState&&_.push("canplaythrough"),this.ready(function(){_.forEach(function(D){this.trigger(D)},this)})}},o.setScrubbing=function(t){this.isScrubbing_=t},o.scrubbing=function(){return this.isScrubbing_},o.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&ft?this.el_.fastSeek(t):this.el_.currentTime=t}catch(a){S(a,"Video is not ready. (Video.js)")}},o.duration=function(){var t=this;return this.el_.duration===1/0&&oe&&$&&0===this.el_.currentTime?(this.on("timeupdate",function a(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",a))}),NaN):this.el_.duration||NaN},o.width=function(){return this.el_.offsetWidth},o.height=function(){return this.el_.offsetHeight},o.proxyWebkitFullscreen_=function(){var t,a,s=this;"webkitDisplayingFullscreen"in this.el_&&(t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},this.on("webkitbeginfullscreen",a=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))}),this.on("dispose",function(){s.off("webkitbeginfullscreen",a),s.off("webkitendfullscreen",t)}))},o.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=window.navigator&&window.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},o.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)jt(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},o.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},o.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},o.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):i.prototype.requestVideoFrameCallback.call(this,t)},o.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):i.prototype.cancelVideoFrameCallback.call(this,t)},o.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},o.reset=function(){l.resetMediaElement(this.el_)},o.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},o.setControls=function(t){this.el_.controls=!!t},o.addTextTrack=function(t,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,a,s):i.prototype.addTextTrack.call(this,t,a,s)},o.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,t);var a=document.createElement("track");return t.kind&&(a.kind=t.kind),t.label&&(a.label=t.label),(t.language||t.srclang)&&(a.srclang=t.language||t.srclang),t.default&&(a.default=t.default),t.id&&(a.id=t.id),t.src&&(a.src=t.src),a},o.addRemoteTextTrack=function(t,a){return a=i.prototype.addRemoteTextTrack.call(this,t,a),this.featuresNativeTextTracks&&this.el().appendChild(a),a},o.removeRemoteTextTrack=function(t){if(i.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)t!==a[s]&&t!==a[s].track||this.el().removeChild(a[s])},o.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&"function"==typeof window.performance.now?t.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.navigationStart&&(t.creationTime=window.Date.now()-window.performance.timing.navigationStart),t},l}(Hn);qo(Zt,"TEST_VID",function(){if(Le()){var i=document.createElement("video"),l=document.createElement("track");return l.kind="captions",l.srclang="en",l.label="English",i.appendChild(l),i}}),Zt.isSupported=function(){try{Zt.TEST_VID.volume=.5}catch{return!1}return!(!Zt.TEST_VID||!Zt.TEST_VID.canPlayType)},Zt.canPlayType=function(i){return Zt.TEST_VID.canPlayType(i)},Zt.canPlaySource=function(i,l){return Zt.canPlayType(i.type)},Zt.canControlVolume=function(){try{var i=Zt.TEST_VID.volume;Zt.TEST_VID.volume=i/2+.1;var l=i!==Zt.TEST_VID.volume;return l&&Ye?(window.setTimeout(function(){Zt&&Zt.prototype&&(Zt.prototype.featuresVolumeControl=i!==Zt.TEST_VID.volume)}),!1):l}catch{return!1}},Zt.canMuteVolume=function(){try{var i=Zt.TEST_VID.muted;return Zt.TEST_VID.muted=!i,Zt.TEST_VID.muted?Ut(Zt.TEST_VID,"muted","muted"):Lt(Zt.TEST_VID,"muted"),i!==Zt.TEST_VID.muted}catch{return!1}},Zt.canControlPlaybackRate=function(){if(oe&&$&&we<58)return!1;try{var i=Zt.TEST_VID.playbackRate;return Zt.TEST_VID.playbackRate=i/2+.1,i!==Zt.TEST_VID.playbackRate}catch{return!1}},Zt.canOverrideAttributes=function(){try{var i=function(){};Object.defineProperty(document.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(document.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:i,set:i})}catch{return!1}return!0},Zt.supportsNativeTextTracks=function(){return ft||Ye&&$},Zt.supportsNativeVideoTracks=function(){return!(!Zt.TEST_VID||!Zt.TEST_VID.videoTracks)},Zt.supportsNativeAudioTracks=function(){return!(!Zt.TEST_VID||!Zt.TEST_VID.audioTracks)},Zt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(i){var o=i[1];qo(Zt.prototype,i[0],function(){return Zt[o]()},!0)}),Zt.prototype.featuresVolumeControl=Zt.canControlVolume(),Zt.prototype.movingMediaElementInDOM=!Ye,Zt.prototype.featuresFullscreenResize=!0,Zt.prototype.featuresProgressEvents=!0,Zt.prototype.featuresTimeupdateEvents=!0,Zt.prototype.featuresVideoFrameCallback=!(!Zt.TEST_VID||!Zt.TEST_VID.requestVideoFrameCallback),Zt.patchCanPlayType=function(){4<=fe&&!le&&!$&&(Oa=Zt.TEST_VID&&Zt.TEST_VID.constructor.prototype.canPlayType,Zt.TEST_VID.constructor.prototype.canPlayType=function(i){return i&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(i)?"maybe":Oa.call(this,i)})},Zt.unpatchCanPlayType=function(){var i=Zt.TEST_VID.constructor.prototype.canPlayType;return Oa&&(Zt.TEST_VID.constructor.prototype.canPlayType=Oa),i},Zt.patchCanPlayType(),Zt.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch{}}()}},Zt.resetMediaElement=function(i){if(i){for(var l=i.querySelectorAll("source"),o=l.length;o--;)i.removeChild(l[o]);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){Zt.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){Zt.prototype["set"+M(i)]=function(l){(this.el_[i]=l)?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){Zt.prototype[i]=function(){return this.el_[i]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){Zt.prototype["set"+M(i)]=function(l){this.el_[i]=l}}),["pause","load","play"].forEach(function(i){Zt.prototype[i]=function(){return this.el_[i]()}}),Hn.withSourceHandlers(Zt),Zt.nativeSourceHandler={},Zt.nativeSourceHandler.canPlayType=function(i){try{return Zt.TEST_VID.canPlayType(i)}catch{return""}},Zt.nativeSourceHandler.canHandleSource=function(i,l){return i.type?Zt.nativeSourceHandler.canPlayType(i.type):i.src?(i=ji(i.src),Zt.nativeSourceHandler.canPlayType("video/"+i)):""},Zt.nativeSourceHandler.handleSource=function(i,l,o){l.setSrc(i.src)},Zt.nativeSourceHandler.dispose=function(){},Zt.registerSourceHandler(Zt.nativeSourceHandler),Hn.registerTech("Html5",Zt);var Ml=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],$o={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Xo=["tiny","xsmall","small","medium","large","xlarge","huge"],Ia={};Xo.forEach(function(i){var l="x"===i.charAt(0)?"x-"+i.substring(1):i;Ia[i]="vjs-layout-"+l});var $c={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ai=function(i){function l(t,a,s){var h,_;if(t.id=t.id||a.id||"vjs_video_"+Je++,(a=de(l.getTagSettings(t),a)).initChildren=!1,a.createEl=!1,a.evented=!1,a.reportTouchActivity=!1,!a.language)if("function"==typeof t.closest){var D=t.closest("[lang]");D&&D.getAttribute&&(a.language=D.getAttribute("lang"))}else for(var Q=t;Q&&1===Q.nodeType;){if(Ge(Q).hasOwnProperty("lang")){a.language=Q.getAttribute("lang");break}Q=Q.parentNode}if((h=i.call(this,null,a,s)||this).boundDocumentFullscreenChange_=function(ie){return h.documentFullscreenChange_(ie)},h.boundFullWindowOnEscKey_=function(ie){return h.fullWindowOnEscKey(ie)},h.boundUpdateStyleEl_=function(ie){return h.updateStyleEl_(ie)},h.boundApplyInitTime_=function(ie){return h.applyInitTime_(ie)},h.boundUpdateCurrentBreakpoint_=function(ie){return h.updateCurrentBreakpoint_(ie)},h.boundHandleTechClick_=function(ie){return h.handleTechClick_(ie)},h.boundHandleTechDoubleClick_=function(ie){return h.handleTechDoubleClick_(ie)},h.boundHandleTechTouchStart_=function(ie){return h.handleTechTouchStart_(ie)},h.boundHandleTechTouchMove_=function(ie){return h.handleTechTouchMove_(ie)},h.boundHandleTechTouchEnd_=function(ie){return h.handleTechTouchEnd_(ie)},h.boundHandleTechTap_=function(ie){return h.handleTechTap_(ie)},h.isFullscreen_=!1,h.log=E(h.id_),h.fsApi_=R,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,h.audioOnlyMode_=!1,h.audioPosterMode_=!1,h.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");return h.tag=t,h.tagAttributes=t&&Ge(t),h.language(h.options_.language),a.languages?(_={},Object.getOwnPropertyNames(a.languages).forEach(function(ie){_[ie.toLowerCase()]=a.languages[ie]}),h.languages_=_):h.languages_=l.prototype.options_.languages,h.resetCache_(),h.poster_=a.poster||"",h.controls_=!!a.controls,t.controls=!1,t.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],t.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),a.plugins&&Object.keys(a.plugins).forEach(function(ie){if("function"!=typeof h[ie])throw new Error('plugin "'+ie+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),w(Pe(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(Be(document,h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_),s=Z(h.options_),a.plugins&&Object.keys(a.plugins).forEach(function(ie){h[ie](a.plugins[ie])}),a.debug&&h.debug(!0),h.options_.playerOptions=s,h.middleware_=[],h.playbackRates(a.playbackRates),h.initChildren(),h.isAudio("audio"===t.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),Ae&&h.addClass("vjs-touch-enabled"),Ye||h.addClass("vjs-workinghover"),l.players[h.id_]=Pe(h),t="7.20.3".split(".")[0],h.addClass("vjs-v"+t),h.userActive(!0),h.reportUserActivity(),h.one("play",function(ie){return h.listenForUserActivity_(ie)}),h.on("stageclick",function(ie){return h.handleStageClick_(ie)}),h.on("keydown",function(ie){return h.handleKeyDown(ie)}),h.on("languagechange",function(ie){return h.handleLanguagechange(ie)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h.on("ready",function(){h.audioPosterMode(h.options_.audioPosterMode),h.audioOnlyMode(h.options_.audioOnlyMode)}),h}ke(l,i);var o=l.prototype;return o.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Qe(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Qe(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),l.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Ro[this.id()]=null,Si.names.forEach(function(a){(a=t[(a=Si[a]).getterName]())&&a.off&&a.off()}),i.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},o.createEl=function(){var t,a=this.tag,s=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player"),h="video-js"===this.tag.tagName.toLowerCase();s?t=this.el_=a.parentNode:h||(t=this.el_=i.prototype.createEl.call(this,"div"));var _,D,Q=Ge(a);if(h){for(t=this.el_=a,a=this.tag=document.createElement("video");t.children.length;)a.appendChild(t.firstChild);bt(t,"video-js")||xt(t,"video-js"),t.appendChild(a),s=this.playerElIngest_=t,Object.keys(t).forEach(function(Ie){try{a[Ie]=t[Ie]}catch{}})}a.setAttribute("tabindex","-1"),Q.tabindex="-1",(ue||$&&ve)&&(a.setAttribute("role","application"),Q.role="application"),a.removeAttribute("width"),a.removeAttribute("height"),"width"in Q&&delete Q.width,"height"in Q&&delete Q.height,Object.getOwnPropertyNames(Q).forEach(function(Ie){h&&"class"===Ie||t.setAttribute(Ie,Q[Ie]),h&&a.setAttribute(Ie,Q[Ie])}),a.playerId=a.id,a.id+="_html5_api",a.className="vjs-tech",(a.player=t.player=this).addClass("vjs-paused"),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=at("vjs-styles-dimensions"),_=Tn(".vjs-styles-defaults"),(D=Tn("head")).insertBefore(this.styleEl_,_?_.nextSibling:D.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var ie=a.getElementsByTagName("a"),be=0;be<ie.length;be++){var Se=ie.item(be);xt(Se,"vjs-hidden"),Se.setAttribute("hidden","hidden")}return a.initNetworkState_=a.networkState,a.parentNode&&!s&&a.parentNode.insertBefore(t,a),We(a,t),this.children_.unshift(a),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t},o.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):S.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},o.width=function(t){return this.dimension("width",t)},o.height=function(t){return this.dimension("height",t)},o.dimension=function(t,a){var s=t+"_";if(void 0===a)return this[s]||0;if(""===a||"auto"===a)return this[s]=void 0,void this.updateStyleEl_();var h=parseFloat(a);isNaN(h)?S.error('Improper value "'+a+'" supplied for for '+t):(this[s]=h,this.updateStyleEl_())},o.fluid=function(t){var a,s=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,c(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),a=function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)},c(t=this)?a():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(a))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},o.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},o.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},o.updateStyleEl_=function(){var t,a,s,h;!0!==window.VIDEOJS_NO_DYNAMIC_STYLE?(h=(s=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/s[0],t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/h:this.videoWidth()||300,a=void 0!==this.height_?this.height_:t*h,s=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(s),St(this.styleEl_,"\n      ."+s+" {\n        width: "+t+"px;\n        height: "+a+"px;\n      }\n\n      ."+s+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*h+"%;\n      }\n    ")):(a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,(h=this.tech_&&this.tech_.el())&&(0<=a&&(h.width=a),0<=s&&(h.height=s)))},o.loadTech_=function(t,a){var s=this;this.tech_&&this.unloadTech_();var h=M(t),_=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==h&&this.tag&&(Hn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=h,this.isReady_=!1;var D=this.autoplay(),Q={source:a,autoplay:D=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&D,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+_+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};if(Si.names.forEach(function(ie){Q[(ie=Si[ie]).getterName]=s[ie.privateName]}),de(Q,this.options_[h]),de(Q,this.options_[_]),de(Q,this.options_[t.toLowerCase()]),this.tag&&(Q.tag=this.tag),a&&a.src===this.cache_.src&&0<this.cache_.currentTime&&(Q.startTime=this.cache_.currentTime),!(t=Hn.getTech(t)))throw new Error("No Tech named '"+h+"' exists! '"+h+"' should be registered using videojs.registerTech()'");this.tech_=new t(Q),this.tech_.ready(zt(this,this.handleTechReady_),!0),function(i,l){i.forEach(function(o){var t=l.addRemoteTextTrack(o).track;!o.src&&o.cues&&o.cues.forEach(function(a){return t.addCue(a)})}),l.textTracks()}(this.textTracksJson_||[],this.tech_),Ml.forEach(function(ie){s.on(s.tech_,ie,function(be){return s["handleTech"+M(ie)+"_"](be)})}),Object.keys($o).forEach(function(ie){s.on(s.tech_,ie,function(be){0===s.tech_.playbackRate()&&s.tech_.seeking()?s.queuedCallbacks_.push({callback:s["handleTech"+$o[ie]+"_"].bind(s),event:be}):s["handleTech"+$o[ie]+"_"](be)})}),this.on(this.tech_,"loadstart",function(ie){return s.handleTechLoadStart_(ie)}),this.on(this.tech_,"sourceset",function(ie){return s.handleTechSourceset_(ie)}),this.on(this.tech_,"waiting",function(ie){return s.handleTechWaiting_(ie)}),this.on(this.tech_,"ended",function(ie){return s.handleTechEnded_(ie)}),this.on(this.tech_,"seeking",function(ie){return s.handleTechSeeking_(ie)}),this.on(this.tech_,"play",function(ie){return s.handleTechPlay_(ie)}),this.on(this.tech_,"firstplay",function(ie){return s.handleTechFirstPlay_(ie)}),this.on(this.tech_,"pause",function(ie){return s.handleTechPause_(ie)}),this.on(this.tech_,"durationchange",function(ie){return s.handleTechDurationChange_(ie)}),this.on(this.tech_,"fullscreenchange",function(ie,be){return s.handleTechFullscreenChange_(ie,be)}),this.on(this.tech_,"fullscreenerror",function(ie,be){return s.handleTechFullscreenError_(ie,be)}),this.on(this.tech_,"enterpictureinpicture",function(ie){return s.handleTechEnterPictureInPicture_(ie)}),this.on(this.tech_,"leavepictureinpicture",function(ie){return s.handleTechLeavePictureInPicture_(ie)}),this.on(this.tech_,"error",function(ie){return s.handleTechError_(ie)}),this.on(this.tech_,"posterchange",function(ie){return s.handleTechPosterChange_(ie)}),this.on(this.tech_,"textdata",function(ie){return s.handleTechTextData_(ie)}),this.on(this.tech_,"ratechange",function(ie){return s.handleTechRateChange_(ie)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===h&&this.tag||We(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},o.unloadTech_=function(){var t=this;Si.names.forEach(function(a){t[(a=Si[a]).privateName]=t[a.getterName]()}),this.textTracksJson_=function(i){var l=i.$$("track"),o=Array.prototype.map.call(l,function(t){return t.track});return Array.prototype.map.call(l,function(t){var a=Yt(t.track);return t.src&&(a.src=t.src),a}).concat(Array.prototype.filter.call(i.textTracks(),function(t){return-1===o.indexOf(t)}).map(Yt))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},o.tech=function(t){return void 0===t&&S.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},o.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},o.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},o.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},o.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},o.manualAutoplay_=function(t){var a=this;if(this.tech_&&"string"==typeof t){var s,h=function(){var _=a.muted();function D(){a.muted(_)}a.muted(!0),a.playTerminatedQueue_.push(D);var Q=a.play();if(nt(Q))return Q.catch(function(ie){throw D(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(ie||""))})};if("any"!==t||this.muted()?s="muted"!==t||this.muted()?this.play():h():nt(s=this.play())&&(s=s.catch(h)),nt(s))return s.then(function(){a.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:t})})}},o.updateSourceCaches_=function(t){var a=t=void 0===t?"":t,s="";"string"!=typeof a&&(a=t.src,s=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=function(be,Se){if(!Se)return"";if(be.cache_.source.src===Se&&be.cache_.source.type)return be.cache_.source.type;var Ie=be.cache_.sources.filter(function(Re){return Re.src===Se});if(Ie.length)return Ie[0].type;for(var Te=be.$$("source"),Ue=0;Ue<Te.length;Ue++){var Ke=Te[Ue];if(Ke.type&&Ke.src&&Ke.src===Se)return Ke.type}return Na(Se)}(this,a)),this.cache_.source=Z({},t,{src:a,type:s}),s=this.cache_.sources.filter(function(Se){return Se.src&&Se.src===a});for(var h=[],_=this.$$("source"),D=[],Q=0;Q<_.length;Q++){var ie=Ge(_[Q]);h.push(ie),ie.src&&ie.src===a&&D.push(ie.src)}D.length&&!s.length?this.cache_.sources=h:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},o.handleTechSourceset_=function(t){var a,s,h,_=this;this.changingSrc_||(a=function(D){return _.updateSourceCaches_(D)},s=this.currentSource().src,h=t.src,s&&!/^blob:/.test(s)&&/^blob:/.test(h)&&(this.lastSource_&&(this.lastSource_.tech===h||this.lastSource_.player===s)||(a=function(){})),a(h),t.src||this.tech_.any(["sourceset","loadstart"],function(D){"sourceset"!==D.type&&(D=_.techGet("currentSrc"),_.lastSource_.tech=D,_.updateSourceCaches_(D))})),this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},o.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},o.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},o.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},o.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime();this.on("timeupdate",function s(){a!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",s))})},o.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},o.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},o.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},o.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},o.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},o.handleTechFirstPlay_=function(){this.options_.starttime&&(S.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},o.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},o.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},o.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},o.handleTechClick_=function(t){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?jt(this.play()):this.pause()))},o.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},o.handleTechTap_=function(){this.userActive(!this.userActive())},o.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},o.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},o.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},o.handleStageClick_=function(){this.reportUserActivity()},o.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},o.documentFullscreenChange_=function(t){var a=t.target.player;a&&a!==this||(t=this.el(),!(a=document[this.fsApi_.fullscreenElement]===t)&&t.matches?a=t.matches(":"+this.fsApi_.fullscreen):!a&&t.msMatchesSelector&&(a=t.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(a))},o.handleTechFullscreenChange_=function(t,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},o.handleTechFullscreenError_=function(t,a){this.trigger("fullscreenerror",a)},o.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},o.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},o.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},o.handleTechError_=function(){var t=this.tech_.error();this.error(t)},o.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},o.getCache=function(){return this.cache_},o.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},o.techCall_=function(t,a){this.ready(function(){if(t in Fc)return _=a,(h=this.tech_)[h=t](this.middleware_.reduce(Lo(h),_));if(t in xl)return wl(this.middleware_,this.tech_,t,a);var h,_;try{this.tech_&&this.tech_[t](a)}catch(D){throw S(D),D}},!0)},o.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Lc)return s=this.tech_,this.middleware_.reduceRight(Lo(h=t),s[h]());if(t in xl)return wl(this.middleware_,this.tech_,t);var s,h;try{return this.tech_[t]()}catch(_){throw void 0===this.tech_[t]?(S("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",_),_):"TypeError"===_.name?(S("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",_),this.tech_.isReady_=!1,_):(S(_),_)}}},o.play=function(){var t=this,a=this.options_.Promise||window.Promise;return a?new a(function(s){t.play_(s)}):this.play_()},o.play_=function(t){var a=this;if(this.playCallbacks_.push(t=void 0===t?jt:t),t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=function(s){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(t||!ft&&!Ye||this.load());null===(t=this.techGet_("play"))?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(t)},o.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(a){a()})},o.runPlayCallbacks_=function(t){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(t)})},o.pause=function(){this.techCall_("pause")},o.paused=function(){return!1!==this.techGet_("paused")},o.played=function(){return this.techGet_("played")||wt(0,0)},o.scrubbing=function(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},o.currentTime=function(t){return typeof t<"u"?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},o.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},o.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=(t=parseFloat(t))<0?1/0:t)!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},o.remainingTime=function(){return this.duration()-this.currentTime()},o.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},o.buffered=function(){var t;return(t=this.techGet_("buffered"))&&t.length?t:wt(0,0)},o.bufferedPercent=function(){return Xe(this.buffered(),this.duration())},o.bufferedEnd=function(){var a=this.buffered(),t=this.duration();return t<(a=a.end(a.length-1))?t:a},o.volume=function(t){var a;return void 0!==t?(a=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=a,this.techCall_("setVolume",a),void(0<a&&this.lastVolume_(a))):(a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a)},o.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},o.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},o.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},o.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},o.isFullscreen=function(t){if(void 0===t)return this.isFullscreen_;var a=this.isFullscreen_;this.isFullscreen_=Boolean(t),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},o.requestFullscreen=function(t){var a=this.options_.Promise||window.Promise;if(a){var s=this;return new a(function(h,_){function D(){s.off("fullscreenerror",ie),s.off("fullscreenchange",Q)}function Q(){D(),h()}function ie(Se,Ie){D(),_(Ie)}s.one("fullscreenchange",Q),s.one("fullscreenerror",ie);var be=s.requestFullscreenHelper_(t);be&&(be.then(D,D),be.then(h,_))})}return this.requestFullscreenHelper_()},o.requestFullscreenHelper_=function(t){var a=this;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(s=t)),this.fsApi_.requestFullscreen){var s=this.el_[this.fsApi_.requestFullscreen](s);return s&&s.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),s}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},o.exitFullscreen=function(){var t=this.options_.Promise||window.Promise;if(t){var a=this;return new t(function(s,h){function _(){a.off("fullscreenerror",Q),a.off("fullscreenchange",D)}function D(){_(),s()}function Q(be,Se){_(),h(Se)}a.one("fullscreenchange",D),a.one("fullscreenerror",Q);var ie=a.exitFullscreenHelper_();ie&&(ie.then(_,_),ie.then(s,h))})}return this.exitFullscreenHelper_()},o.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var a=document[this.fsApi_.exitFullscreen]();return a&&jt(a.then(function(){return t.isFullscreen(!1)})),a}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},o.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,Be(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",xt(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},o.fullWindowOnEscKey=function(t){_e.isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},o.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Qe(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,Me(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},o.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},o.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},o.requestPictureInPicture=function(){if("pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},o.exitPictureInPicture=function(){if("pictureInPictureEnabled"in document)return document.exitPictureInPicture()},o.handleKeyDown=function(t){var s,h,a=this.options_.userActions;a&&a.hotkeys&&(h=(s=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),s.isContentEditable||("input"===h?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(s.type):-1!==["textarea"].indexOf(h))||("function"==typeof a.hotkeys?a.hotkeys.call(this,t):this.handleHotkeys(t)))},o.handleHotkeys=function(t){var a=(h=this.options_.userActions?this.options_.userActions.hotkeys:{}).fullscreenKey,s=void 0===(s=h.muteKey)?function(_){return _e.isEventKey(_,"m")}:s,h=void 0===(h=h.playPauseKey)?function(_){return _e.isEventKey(_,"k")||_e.isEventKey(_,"Space")}:h;(void 0===a?function(_){return _e.isEventKey(_,"f")}:a).call(this,t)?(t.preventDefault(),t.stopPropagation(),a=xe.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&a.prototype.handleClick.call(this,t)):s.call(this,t)?(t.preventDefault(),t.stopPropagation(),xe.getComponent("MuteToggle").prototype.handleClick.call(this,t)):h.call(this,t)&&(t.preventDefault(),t.stopPropagation(),xe.getComponent("PlayToggle").prototype.handleClick.call(this,t))},o.canPlayType=function(t){for(var a,s=0,h=this.options_.techOrder;s<h.length;s++){var _=h[s],D=Hn.getTech(_);if(D=D||xe.getComponent(_)){if(D.isSupported()&&(a=D.canPlayType(t)))return a}else S.error('The "'+_+'" tech is undefined. Skipped browser support check for that tech.')}return""},o.selectSource=function(t){function a(Q,ie,be){var Se;return Q.some(function(Ie){return ie.some(function(Te){if(Se=be(Ie,Te))return!0})}),Se}var s,h=this,_=this.options_.techOrder.map(function(Q){return[Q,Hn.getTech(Q)]}).filter(function(be){var ie=be[0];return(be=be[1])?be.isSupported():(S.error('The "'+ie+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),D=function(Q,ie){var be=Q[0];if(Q[1].canPlaySource(ie,h.options_[be.toLowerCase()]))return{source:ie,tech:be}};return(D=this.options_.sourceOrder?a(t,_,(s=D,function(Q,ie){return s(ie,Q)})):a(_,t,D))||!1},o.handleSrc_=function(t,a){var s=this;if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var h,_,D=Sl(t);D.length?(this.changingSrc_=!0,a||(this.cache_.sources=D),this.updateSourceCaches_(D[0]),function Rc(i,l,o){i.setTimeout(function(){return function t(a,be,h,_,D,Q){void 0===a&&(a={}),void 0===be&&(be=[]),void 0===D&&(D=[]),void 0===Q&&(Q=!1);var ie=be,Se=(be=ie[0],ie.slice(1));if("string"==typeof be)t(a,cr[be],h,_,D,Q);else if(be){var Ie=function Uc(i,l){var o=Ro[i.id()],t=null;if(null==o)return t=l(i),Ro[i.id()]=[[l,t]],t;for(var a=0;a<o.length;a++){var s=(h=o[a])[0],h=h[1];s===l&&(t=h)}return null===t&&(t=l(i),o.push([l,t])),t}(_,be);if(!Ie.setSource)return D.push(Ie),t(a,Se,h,_,D,Q);Ie.setSource(de({},a),function(Te,Ue){return Te?t(a,Se,h,_,D,Q):(D.push(Ie),void t(Ue,a.type===Ue.type?Se:cr[Ue.type],h,_,D,Q))})}else Se.length?t(a,Se,h,_,D,Q):Q?h(a,D):t(a,cr["*"],h,_,D,!0)}(l,cr[l.type],o,i)},1)}(this,D[0],function(Q,ie){var be;return s.middleware_=ie,a||(s.cache_.sources=D),s.updateSourceCaches_(Q),s.src_(Q)?1<D.length?s.handleSrc_(D.slice(1)):(s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void s.triggerReady()):(be=s.tech_,void ie.forEach(function(Se){return Se.setTech&&Se.setTech(be)}))}),this.options_.retryOnError&&1<D.length&&(_=function(){s.off("error",h)},this.one("error",h=function(){s.error(null),s.handleSrc_(D.slice(1),!0)}),this.one("playing",_),this.resetRetryOnError_=function(){s.off("error",h),s.off("playing",_)})):this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},o.src=function(t){return this.handleSrc_(t,!1)},o.src_=function(t){var s,h=this,_=this.selectSource([t]);return!_||(s=this.techName_,M(_.tech)!==M(s)?(this.changingSrc_=!0,this.loadTech_(_.tech,_.source),this.tech_.ready(function(){h.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1)},o.load=function(){this.techCall_("load")},o.reset=function(){var t=this,a=this.options_.Promise||window.Promise;this.paused()||!a?this.doReset_():jt(this.play().then(function(){return t.doReset_()}))},o.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),c(this)&&this.trigger("playerreset")},o.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},o.resetProgressBar_=function(){this.currentTime(0);var t=(a=this.controlBar||{}).durationDisplay,a=a.remainingTimeDisplay;t&&t.updateContent(),a&&a.updateContent()},o.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},o.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},o.currentSources=function(){var t=this.currentSource(),a=[];return 0!==Object.keys(t).length&&a.push(t),this.cache_.sources||a},o.currentSource=function(){return this.cache_.source||{}},o.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},o.currentType=function(){return this.currentSource()&&this.currentSource().type||""},o.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},o.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var a;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),a=!1):this.options_.autoplay=!!t,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},o.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},o.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},o.poster=function(t){if(void 0===t)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},o.handleTechPosterChange_=function(){var t;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(t=this.tech_.poster()||"")!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))},o.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},o.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},o.error=function(t){var a=this;if(void 0===t)return this.error_||null;if(O("beforeerror").forEach(function(h){G(h=h(a,t))&&!Array.isArray(h)||"string"==typeof h||"number"==typeof h||null===h?t=h:a.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code){var s=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),void this.one("loadstart",function(){this.off(["click","touchstart"],s)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ct(t),this.addClass("vjs-error"),S.error("(CODE:"+this.error_.code+" "+ct.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),O("error").forEach(function(h){return h(a,a.error_)})},o.reportUserActivity=function(t){this.userActivity_=!0},o.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},o.listenForUserActivity_=function(){var t,a,s,_,h=zt(this,this.reportUserActivity),D=function(Q){h(),this.clearInterval(t)};this.on("mousedown",function(){h(),this.clearInterval(t),t=this.setInterval(h,250)}),this.on("mousemove",function(Q){Q.screenX===a&&Q.screenY===s||(a=Q.screenX,s=Q.screenY,h())}),this.on("mouseup",D),this.on("mouseleave",D),!(D=this.getChild("controlBar"))||Ye||oe||(D.on("mouseenter",function(Q){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),D.on("mouseleave",function(Q){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",h),this.on("keyup",h),this.setInterval(function(){var Q;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(_),(Q=this.options_.inactivityTimeout)<=0||(_=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},Q)))},250)},o.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},o.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},o.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},o.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),h=s&&s.currentHeight();a.forEach(function(_){_!==s&&_.el_&&!_.hasClass("vjs-hidden")&&(_.hide(),t.audioOnlyCache_.hiddenChildren.push(_))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(h),this.trigger("audioonlymodechange")},o.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(t){return t.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},o.audioOnlyMode=function(t){var a=this;if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var s=this.options_.Promise||window.Promise;if(s){if(t){var h=[];return this.isInPictureInPicture()&&h.push(this.exitPictureInPicture()),this.isFullscreen()&&h.push(this.exitFullscreen()),this.audioPosterMode()&&h.push(this.audioPosterMode(!1)),s.all(h).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},o.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},o.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},o.audioPosterMode=function(t){var a=this;if("boolean"!=typeof t||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var s=this.options_.Promise||window.Promise;return s?t?(this.audioOnlyMode()?this.audioOnlyMode(!1):s.resolve()).then(function(){a.enablePosterModeUI_()}):s.resolve().then(function(){a.disablePosterModeUI_()}):t?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},o.addTextTrack=function(t,a,s){if(this.tech_)return this.tech_.addTextTrack(t,a,s)},o.addRemoteTextTrack=function(t,a){if(this.tech_)return this.tech_.addRemoteTextTrack(t,a)},o.removeRemoteTextTrack=function(t){var a=(a=(t=void 0===t?{}:t).track)||t;if(this.tech_)return this.tech_.removeRemoteTextTrack(a)},o.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},o.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},o.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},o.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),c(this)&&this.trigger("languagechange"))},o.languages=function(){return Z(l.prototype.options_.languages,this.languages_)},o.toJSON=function(){var t=Z(this.options_),a=t.tracks;t.tracks=[];for(var s=0;s<a.length;s++){var h=a[s];(h=Z(h)).player=void 0,t.tracks[s]=h}return t},o.createModal=function(t,a){var s=this;(a=a||{}).content=t||"";var h=new sn(this,a);return this.addChild(h),h.on("dispose",function(){s.removeChild(h)}),h.open(),h},o.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<Xo.length;s++){var h=Xo[s];if(a<=this.breakpoints_[h]){if(t===h)return;t&&this.removeClass(Ia[t]),this.addClass(Ia[h]),this.breakpoint_=h;break}}},o.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},o.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=de({},$c,t),this.updateCurrentBreakpoint_()),de(this.breakpoints_)},o.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},o.currentBreakpoint=function(){return this.breakpoint_},o.currentBreakpointClass=function(){return Ia[this.breakpoint_]||""},o.loadMedia=function(t,a){var s,h,_,D=this;t&&"object"==typeof t&&(this.reset(),this.cache_.media=Z(t),s=(_=this.cache_.media).artwork,h=_.poster,t=_.src,_=_.textTracks,!s&&h&&(this.cache_.media.artwork=[{src:h,type:Na(h)}]),t&&this.src(t),h&&this.poster(h),Array.isArray(_)&&_.forEach(function(Q){return D.addRemoteTextTrack(Q,!1)}),this.ready(a))},o.getMedia=function(){if(this.cache_.media)return Z(this.cache_.media);var t=this.poster(),a={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(s){return{kind:s.kind,label:s.label,language:s.language,src:s.src}})};return t&&(a.poster=t,a.artwork=[{src:a.poster,type:Na(a.poster)}]),a},l.getTagSettings=function(t){var a,s={sources:[],tracks:[]},h=Ge(t),_=h["data-setup"];if(bt(t,"vjs-fill")&&(h.fill=!0),bt(t,"vjs-fluid")&&(h.fluid=!0),null!==_&&(_=(a=function(i,l){var o,t=null;try{o=JSON.parse(i,void 0)}catch(a){t=a}return[t,o]}(_||"{}"))[0],a=a[1],_&&S.error(_),de(h,a)),de(s,h),t.hasChildNodes())for(var D=t.childNodes,Q=0,ie=D.length;Q<ie;Q++){var be=D[Q],Se=be.nodeName.toLowerCase();"source"===Se?s.sources.push(Ge(be)):"track"===Se&&s.tracks.push(Ge(be))}return s},o.flexNotSupported_=function(){var t=document.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},o.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},o.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every(function(a){return"number"==typeof a})&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},l}(xe);Si.names.forEach(function(i){var l=Si[i];ai.prototype[l.getterName]=function(){return this.tech_?this.tech_[l.getterName]():(this[l.privateName]=this[l.privateName]||new l.ListClass,this[l.privateName])}}),ai.prototype.crossorigin=ai.prototype.crossOrigin,ai.players={},Cn=window.navigator,ai.prototype.options_={techOrder:Hn.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Cn&&(Cn.languages&&Cn.languages[0]||Cn.userLanguage||Cn.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(i){ai.prototype[i]=function(){return this.techGet_(i)}}),Ml.forEach(function(i){ai.prototype["handleTech"+M(i)+"_"]=function(){return this.trigger(i)}}),xe.registerComponent("Player",ai);var Rl=x(function(i){function l(o,t){return i.exports=l=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},l(o,t)}i.exports=l});function Pa(i){return Tr.hasOwnProperty(i)}function Ma(i){return Pa(i)?Tr[i]:void 0}function Ra(i,l,o){i.trigger(o=(o?"before":"")+"pluginsetup",l),i.trigger(o+":"+l.name,l)}function Ll(i,l){return l.prototype.name=i,function(){Ra(this,{name:i,plugin:l,instance:null},!0);for(var o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];var s=Kc(l,[this].concat(t));return this[i]=function(){return s},Ra(this,s.getEventHash()),s}}var Gc=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}},Kc=x(function(i){function l(o,t,a){return i.exports=l=Gc()?Reflect.construct:function(s,h,_){var D=[null];return D.push.apply(D,h),D=new(Function.bind.apply(s,D)),_&&Rl(D,_.prototype),D},l.apply(null,arguments)}i.exports=l}),La="plugin",Sr="activePlugins_",Tr={},Fl=function(i,l){i[Sr]=i[Sr]||{},i[Sr][l]=!0},Ki=function(){function i(o){if(this.constructor===i)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=o,this.log||(this.log=this.player.log.createLogger(this.name)),w(this),delete this.trigger,j(this,this.constructor.defaultState),Fl(o,this.name),this.dispose=this.dispose.bind(this),o.on("dispose",this.dispose)}var l=i.prototype;return l.version=function(){return this.constructor.VERSION},l.getEventHash=function(o){return(o=void 0===o?{}:o).name=this.name,o.plugin=this.constructor,o.instance=this,o},l.trigger=function(o,t){return Tt(this.eventBusEl_,o,this.getEventHash(t=void 0===t?{}:t))},l.handleStateChanged=function(o){},l.dispose=function(){var o=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Sr][o]=!1,this.player=this.state=null,t[o]=Ll(o,Tr[o])},i.isBasic=function(o){return"function"==typeof(o="string"==typeof o?Ma(o):o)&&!i.prototype.isPrototypeOf(o.prototype)},i.registerPlugin=function(o,t){if("string"!=typeof o)throw new Error('Illegal plugin name, "'+o+'", must be a string, was '+typeof o+".");if(Pa(o))S.warn('A plugin named "'+o+'" already exists. You may want to avoid re-registering plugins!');else if(ai.prototype.hasOwnProperty(o))throw new Error('Illegal plugin name, "'+o+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+o+'", must be a function, was '+typeof t+".");return Tr[o]=t,o!==La&&(ai.prototype[o]=i.isBasic(t)?function Xc(i,l){function o(){Ra(this,{name:i,plugin:l,instance:null},!0);var t=l.apply(this,arguments);return Fl(this,i),Ra(this,{name:i,plugin:l,instance:t}),t}return Object.keys(l).forEach(function(t){o[t]=l[t]}),o}(o,t):Ll(o,t)),t},i.deregisterPlugin=function(o){if(o===La)throw new Error("Cannot de-register base plugin.");Pa(o)&&(delete Tr[o],delete ai.prototype[o])},i.getPlugins=function(o){var t;return(o=void 0===o?Object.keys(Tr):o).forEach(function(a){var s=Ma(a);s&&((t=t||{})[a]=s)}),t},i.getPluginVersion=function(o){return(o=Ma(o))&&o.VERSION||""},i}();Ki.getPlugin=Ma,Ki.BASE_PLUGIN_NAME=La,Ki.registerPlugin(La,Ki),ai.prototype.usingPlugin=function(i){return!!this[Sr]&&!0===this[Sr][i]},ai.prototype.hasPlugin=function(i){return!!Pa(i)};var Ul=function(i){return 0===i.indexOf("#")?i.slice(1):i};function ut(i,l,o){if(a=ut.getPlayer(i))return l&&S.warn('Player "'+i+'" is already initialised. Options will not be applied.'),o&&a.ready(o),a;var t="string"==typeof i?Tn("#"+Ul(i)):i;if(!ot(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");t.ownerDocument.defaultView&&t.ownerDocument.body.contains(t)||S.warn("The element supplied is not included in the DOM"),!0===(l=l||{}).restoreEl&&(l.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0)),O("beforesetup").forEach(function(s){G(s=s(t,Z(l)))&&!Array.isArray(s)?l=Z(l,s):S.error("please return an object in beforesetup hooks")});var a=new(xe.getComponent("Player"))(t,l,o);return O("setup").forEach(function(s){return s(a)}),a}ut.hooks_=q,ut.hooks=O,ut.hook=function(i,l){O(i,l)},ut.hookOnce=function(i,l){O(i,[].concat(l).map(function(o){return function t(){return I(i,t),o.apply(void 0,arguments)}}))},ut.removeHook=I,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&Le()&&((Ci=Tn(".vjs-styles-defaults"))||(Ci=at("vjs-styles-defaults"),(Cn=Tn("head"))&&Cn.insertBefore(Ci,Cn.firstChild),St(Ci,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    "))),mt(1,ut),ut.VERSION="7.20.3",ut.options=ai.prototype.options_,ut.getPlayers=function(){return ai.players},ut.getPlayer=function(i){var l=ai.players;if("string"==typeof i){var o=Ul(i),t=l[o];if(t)return t;o=Tn("#"+o)}else o=i;if(ot(o)&&(i=o.player,o=o.playerId,i||l[o]))return i||l[o]},ut.getAllPlayers=function(){return Object.keys(ai.players).map(function(i){return ai.players[i]}).filter(Boolean)},ut.players=ai.players,ut.getComponent=xe.getComponent,ut.registerComponent=function(i,l){Hn.isTech(l)&&S.warn("The "+i+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),xe.registerComponent.call(xe,i,l)},ut.getTech=Hn.getTech,ut.registerTech=Hn.registerTech,ut.use=function(i,l){cr[i]=cr[i]||[],cr[i].push(l)},Object.defineProperty(ut,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ut.middleware,"TERMINATOR",{value:Ca,writeable:!1,enumerable:!0}),ut.browser=ii,ut.TOUCH_ENABLED=Ae,ut.extend=function(i,l){var o,t=function(){i.apply(this,arguments)},a={};for(o in"object"==typeof(l=void 0===l?{}:l)?(l.constructor!==Object.prototype.constructor&&(t=l.constructor),a=l):"function"==typeof l&&(t=l),function(i,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(l&&l.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),l&&Rl(i,l)}(t,i),i&&(t.super_=i),a)a.hasOwnProperty(o)&&(t.prototype[o]=a[o]);return t},ut.mergeOptions=Z,ut.bind=zt,ut.registerPlugin=Ki.registerPlugin,ut.deregisterPlugin=Ki.deregisterPlugin,ut.plugin=function(i,l){return S.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ki.registerPlugin(i,l)},ut.getPlugins=Ki.getPlugins,ut.getPlugin=Ki.getPlugin,ut.getPluginVersion=Ki.getPluginVersion,ut.addLanguage=function(i,l){var o;return i=(""+i).toLowerCase(),(ut.options.languages=Z(ut.options.languages,((o={})[i]=l,o)))[i]},ut.log=S,ut.createLogger=E,ut.createTimeRange=ut.createTimeRanges=wt,ut.formatTime=xr,ut.setFormatTime=function(i){Bo=i},ut.resetFormatTime=function(){Bo=kl},ut.parseUrl=Ai,ut.isCrossOrigin=br,ut.EventTarget=kn,ut.on=Be,ut.one=dn,ut.off=Qe,ut.trigger=Tt,ut.xhr=Ao,ut.TextTrack=Gr,ut.AudioTrack=Vn,ut.VideoTrack=Mi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(i){ut[i]=function(){return S.warn("videojs."+i+"() is deprecated; use videojs.dom."+i+"() instead"),Dn[i].apply(null,arguments)}}),ut.computedStyle=te,ut.dom=Dn,ut.url=Ji,ut.defineLazyProperty=qo,ut.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Fa=x(function(i,l){var o,t,a,s,h;o=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,t=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i.exports=h={buildAbsoluteURL:function(Se,D,Q){if(Q=Q||{},Se=Se.trim(),!(D=D.trim())){if(!Q.alwaysNormalize)return Se;var ie=h.parseURL(Se);if(!ie)throw new Error("Error trying to parse base URL.");return ie.path=h.normalizePath(ie.path),h.buildURLFromParts(ie)}if(!(ie=h.parseURL(D)))throw new Error("Error trying to parse relative URL.");if(ie.scheme)return Q.alwaysNormalize?(ie.path=h.normalizePath(ie.path),h.buildURLFromParts(ie)):D;if(!(D=h.parseURL(Se)))throw new Error("Error trying to parse base URL.");var be;return!D.netLoc&&D.path&&"/"!==D.path[0]&&(be=t.exec(D.path),D.netLoc=be[1],D.path=be[2]),D.netLoc&&!D.path&&(D.path="/"),Se={scheme:D.scheme,netLoc:ie.netLoc,path:null,params:ie.params,query:ie.query,fragment:ie.fragment},ie.netLoc||(Se.netLoc=D.netLoc,"/"!==ie.path[0]&&(ie.path?(be=(be=D.path).substring(0,be.lastIndexOf("/")+1)+ie.path,Se.path=h.normalizePath(be)):(Se.path=D.path,ie.params||(Se.params=D.params,ie.query||(Se.query=D.query))))),null===Se.path&&(Se.path=Q.alwaysNormalize?h.normalizePath(ie.path):ie.path),h.buildURLFromParts(Se)},parseURL:function(_){return(_=o.exec(_))?{scheme:_[1]||"",netLoc:_[2]||"",path:_[3]||"",params:_[4]||"",query:_[5]||"",fragment:_[6]||""}:null},normalizePath:function(_){for(_=_.split("").reverse().join("").replace(a,"");_.length!==(_=_.replace(s,"")).length;);return _.split("").reverse().join("")},buildURLFromParts:function(_){return _.scheme+_.netLoc+_.path+_.params+_.query+_.fragment}}}),Bl="http://example.com",Ci=function(){function i(){this.listeners={}}var l=i.prototype;return l.on=function(o,t){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(t)},l.off=function(o,t){return!!this.listeners[o]&&(t=this.listeners[o].indexOf(t),this.listeners[o]=this.listeners[o].slice(0),this.listeners[o].splice(t,1),-1<t)},l.trigger=function(o){var t=this.listeners[o];if(t)if(2===arguments.length)for(var a=t.length,s=0;s<a;++s)t[s].call(this,arguments[1]);else for(var h=Array.prototype.slice.call(arguments,1),_=t.length,D=0;D<_;++D)t[D].apply(this,h)},l.dispose=function(){this.listeners={}},l.pipe=function(o){this.on("data",function(t){o.push(t)})},i}();function Go(o){var l=/([0-9.]*)?@?([0-9.]*)?/.exec(o||"");return o={},l[1]&&(o.length=parseInt(l[1],10)),l[2]&&(o.offset=parseInt(l[2],10)),o}function Vi(i){for(var l,o=i.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),t={},a=o.length;a--;)""!==o[a]&&((l=/([^=]*)=(.*)/.exec(o[a]).slice(1))[0]=l[0].replace(/^\s+|\s+$/g,""),l[1]=l[1].replace(/^\s+|\s+$/g,""),l[1]=l[1].replace(/^['"](.*)['"]$/g,"$1"),t[l[0]]=l[1]);return t}function kr(i){var l={};return Object.keys(i).forEach(function(o){l[o.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})]=i[o]}),l}function Ko(i){var l,o,t,a,s=i.serverControl,h=i.targetDuration,_=i.partTargetDuration;s&&(l="#EXT-X-SERVER-CONTROL",o="holdBack",t="partHoldBack",a=h&&3*h,i=_&&2*_,h&&!s.hasOwnProperty(o)&&(s[o]=a,this.trigger("info",{message:l+" defaulting HOLD-BACK to targetDuration * 3 ("+a+")."})),a&&s[o]<a&&(this.trigger("warn",{message:l+" clamping HOLD-BACK ("+s[o]+") to targetDuration * 3 ("+a+")"}),s[o]=a),_&&!s.hasOwnProperty(t)&&(s[t]=3*_,this.trigger("info",{message:l+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+s[t]+")."})),_&&s[t]<i&&(this.trigger("warn",{message:l+" clamping PART-HOLD-BACK ("+s[t]+") to partTargetDuration * 2 ("+i+")."}),s[t]=i))}function jl(i){return i&&i.replace(/avc1\.(\d+)\.(\d+)/i,function(l,o,t){return"avc1."+("00"+Number(o).toString(16)).slice(-2)+"00"+("00"+Number(t).toString(16)).slice(-2)})}function Yi(l){l=(l=void 0===l?"":l).split(",");var o=[];return l.forEach(function(t){var a;t=t.trim(),ih.forEach(function(s){var h,_=fr[s].exec(t.toLowerCase());!_||_.length<=1||(a=s,h=t.substring(0,_[1].length),_=t.replace(h,""),o.push({type:h,details:_,mediaType:s}))}),a||o.push({type:t,details:"",mediaType:"unknown"})}),o}function Hl(i){return fr.audio.test((i=void 0===i?"":i).trim().toLowerCase())}function ta(i){if(i&&"string"==typeof i){var l=i.toLowerCase().split(",").map(function(a){return jl(a.trim())}),o="video";1===l.length&&Hl(l[0])?o="audio":1===l.length&&fr.text.test((t=void 0===(t=l[0])?"":t).trim().toLowerCase())&&(o="application");var t="mp4";return l.every(function(a){return fr.mp4.test(a)})?t="mp4":l.every(function(a){return fr.webm.test(a)})?t="webm":l.every(function(a){return fr.ogg.test(a)})&&(t="ogg"),o+"/"+t+';codecs="'+i+'"'}}function Ua(i){return void 0===i&&(i=""),window.MediaSource&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported(ta(i))||!1}function Yo(i){return(i=void 0===i?"":i).toLowerCase().split(",").every(function(l){l=l.trim();for(var o=0;o<ql.length;o++)if(fr["muxer"+ql[o]].test(l))return!0;return!1})}function zl(i){return rh.test(i)?"hls":ah.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null}function Vl(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer}function fn(i){return i instanceof Uint8Array?i:(Array.isArray(i)||oh(i)||i instanceof ArrayBuffer||(i="number"!=typeof i||"number"==typeof i&&i!=i?0:[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))}function Wl(i,l){if("string"!=typeof(i="string"!=typeof i&&i&&"function"==typeof i.toString?i.toString():i))return new Uint8Array;l||(i=unescape(encodeURIComponent(i)));for(var o=new Uint8Array(i.length),t=0;t<i.length;t++)o[t]=i.charCodeAt(t);return o}function Gn(i,l,o){var t=void 0===o?{}:o,a=void 0===(o=t.offset)?0:o,s=void 0===(t=t.mask)?[]:t;return i=fn(i),t=(l=fn(l)).every||Array.prototype.every,l.length&&i.length-a>=l.length&&t.call(l,function(h,_){return h===(s[_]?s[_]&i[a+_]:i[a+_])})}function Jo(i,l){if(/^[a-z]+:/i.test(l))return l;/^data:/.test(i)&&(i=window.location&&window.location.href||"");var o="function"==typeof window.URL,t=/^\/\//.test(i),a=!window.location&&!/\/\//i.test(i);return o?i=new window.URL(i,window.location||Xl):/\/\//i.test(i)||(i=Fa.buildAbsoluteURL(window.location&&window.location.href||"",i)),o?(o=new URL(l,i),a?o.href.slice(Xl.length):t?o.href.slice(o.protocol.length):o.href):Fa.buildAbsoluteURL(i,l)
/*! @name m3u8-parser @version 4.7.1 @license Apache-2.0 */}var Qc=function(i){function l(){var o=i.call(this)||this;return o.buffer="",o}return ke(l,i),l.prototype.push=function(o){var t;for(this.buffer+=o,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},l}(Ci),eh=String.fromCharCode(9),th=function(i){function l(){var t=i.call(this)||this;return t.customParsers=[],t.tagMappers=[],t}ke(l,i);var o=l.prototype;return o.push=function(t){var a,s,h=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(function(_,D){return(D=D(t))===t?_:_.concat([D])},[t]).forEach(function(_){for(var D,Q,ie=0;ie<h.customParsers.length;ie++)if(h.customParsers[ie].call(h,_))return;if(0===_.indexOf("#EXT"))if(_=_.replace("\r",""),a=/^#EXTM3U/.exec(_))h.trigger("data",{type:"tag",tagType:"m3u"});else{if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(_))return s={type:"tag",tagType:"inf"},a[1]&&(s.duration=parseFloat(a[1])),a[2]&&(s.title=a[2]),void h.trigger("data",s);if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(_))return s={type:"tag",tagType:"targetduration"},a[1]&&(s.duration=parseInt(a[1],10)),void h.trigger("data",s);if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(_))return s={type:"tag",tagType:"version"},a[1]&&(s.version=parseInt(a[1],10)),void h.trigger("data",s);if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(_))return s={type:"tag",tagType:"media-sequence"},a[1]&&(s.number=parseInt(a[1],10)),void h.trigger("data",s);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(_))return s={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(s.number=parseInt(a[1],10)),void h.trigger("data",s);if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(_))return s={type:"tag",tagType:"playlist-type"},a[1]&&(s.playlistType=a[1]),void h.trigger("data",s);if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(_))return s=H(Go(a[1]),{type:"tag",tagType:"byterange"}),void h.trigger("data",s);if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(_))return s={type:"tag",tagType:"allow-cache"},a[1]&&(s.allowed=!/NO/.test(a[1])),void h.trigger("data",s);if(a=/^#EXT-X-MAP:?(.*)$/.exec(_))return s={type:"tag",tagType:"map"},a[1]&&((D=Vi(a[1])).URI&&(s.uri=D.URI),D.BYTERANGE&&(s.byterange=Go(D.BYTERANGE))),void h.trigger("data",s);if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(_))return s={type:"tag",tagType:"stream-inf"},a[1]&&(s.attributes=Vi(a[1]),s.attributes.RESOLUTION&&(Q={},(D=s.attributes.RESOLUTION.split("x"))[0]&&(Q.width=parseInt(D[0],10)),D[1]&&(Q.height=parseInt(D[1],10)),s.attributes.RESOLUTION=Q),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))),void h.trigger("data",s);if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(_))return s={type:"tag",tagType:"media"},a[1]&&(s.attributes=Vi(a[1])),void h.trigger("data",s);if(a=/^#EXT-X-ENDLIST/.exec(_))h.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(a=/^#EXT-X-DISCONTINUITY/.exec(_)))return(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(_))?(s={type:"tag",tagType:"program-date-time"},a[1]&&(s.dateTimeString=a[1],s.dateTimeObject=new Date(a[1])),void h.trigger("data",s)):(a=/^#EXT-X-KEY:?(.*)$/.exec(_))?(s={type:"tag",tagType:"key"},a[1]&&(s.attributes=Vi(a[1]),s.attributes.IV&&("0x"===s.attributes.IV.substring(0,2).toLowerCase()&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),void h.trigger("data",s)):(a=/^#EXT-X-START:?(.*)$/.exec(_))?(s={type:"tag",tagType:"start"},a[1]&&(s.attributes=Vi(a[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),void h.trigger("data",s)):(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(_))?((s={type:"tag",tagType:"cue-out-cont"}).data=a[1]?a[1]:"",void h.trigger("data",s)):(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(_))?((s={type:"tag",tagType:"cue-out"}).data=a[1]?a[1]:"",void h.trigger("data",s)):(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(_))?((s={type:"tag",tagType:"cue-in"}).data=a[1]?a[1]:"",void h.trigger("data",s)):(a=/^#EXT-X-SKIP:(.*)$/.exec(_))&&a[1]?((s={type:"tag",tagType:"skip"}).attributes=Vi(a[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(eh)),void h.trigger("data",s)):(a=/^#EXT-X-PART:(.*)$/.exec(_))&&a[1]?((s={type:"tag",tagType:"part"}).attributes=Vi(a[1]),["DURATION"].forEach(function(be){s.attributes.hasOwnProperty(be)&&(s.attributes[be]=parseFloat(s.attributes[be]))}),["INDEPENDENT","GAP"].forEach(function(be){s.attributes.hasOwnProperty(be)&&(s.attributes[be]=/YES/.test(s.attributes[be]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=Go(s.attributes.BYTERANGE)),void h.trigger("data",s)):(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(_))&&a[1]?((s={type:"tag",tagType:"server-control"}).attributes=Vi(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(be){s.attributes.hasOwnProperty(be)&&(s.attributes[be]=parseFloat(s.attributes[be]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(be){s.attributes.hasOwnProperty(be)&&(s.attributes[be]=/YES/.test(s.attributes[be]))}),void h.trigger("data",s)):(a=/^#EXT-X-PART-INF:(.*)$/.exec(_))&&a[1]?((s={type:"tag",tagType:"part-inf"}).attributes=Vi(a[1]),["PART-TARGET"].forEach(function(be){s.attributes.hasOwnProperty(be)&&(s.attributes[be]=parseFloat(s.attributes[be]))}),void h.trigger("data",s)):(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(_))&&a[1]?((s={type:"tag",tagType:"preload-hint"}).attributes=Vi(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(be){var Se;s.attributes.hasOwnProperty(be)&&(s.attributes[be]=parseInt(s.attributes[be],10),Se="BYTERANGE-LENGTH"===be?"length":"offset",s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[Se]=s.attributes[be],delete s.attributes[be])}),void h.trigger("data",s)):(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(_))&&a[1]?((s={type:"tag",tagType:"rendition-report"}).attributes=Vi(a[1]),["LAST-MSN","LAST-PART"].forEach(function(be){s.attributes.hasOwnProperty(be)&&(s.attributes[be]=parseInt(s.attributes[be],10))}),void h.trigger("data",s)):void h.trigger("data",{type:"tag",data:_.slice(4)});h.trigger("data",{type:"tag",tagType:"discontinuity"})}}else h.trigger("data",{type:"comment",text:_.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))},o.addParser=function(t){var a=this,s=t.expression,h=t.customType,_=t.dataParser,D=t.segment;"function"!=typeof _&&(_=function(Q){return Q}),this.customParsers.push(function(Q){if(s.exec(Q))return a.trigger("data",{type:"custom",data:_(Q),customType:h,segment:D}),!0})},o.addTagMapper=function(t){var a=t.expression,s=t.map;this.tagMappers.push(function(h){return a.test(h)?s(h):h})},l}(Ci),nh=function(i){function l(){var t=i.call(this)||this;t.lineStream=new Qc,t.parseStream=new th,t.lineStream.pipe(t.parseStream);var a,s,h=Pe(t),_=[],D={},Q=!1,ie={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},be=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var Se=0,Ie=0;return t.on("end",function(){D.uri||!D.parts&&!D.preloadHints||(!D.map&&a&&(D.map=a),!D.key&&s&&(D.key=s),D.timeline||"number"!=typeof be||(D.timeline=be),t.manifest.preloadSegment=D)}),t.parseStream.on("data",function(Te){var Ue,Ke;({tag:function(){({version:function(){Te.version&&(this.manifest.version=Te.version)},"allow-cache":function(){this.manifest.allowCache=Te.allowed,"allowed"in Te||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var Re={};"length"in Te&&((D.byterange=Re).length=Te.length,"offset"in Te||(Te.offset=Se)),"offset"in Te&&((D.byterange=Re).offset=Te.offset),Se=Re.offset+Re.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<Te.duration&&(D.duration=Te.duration),0===Te.duration&&(D.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=_},key:function(){if(Te.attributes)if("NONE"!==Te.attributes.METHOD)if(Te.attributes.URI){if("com.apple.streamingkeydelivery"===Te.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:Te.attributes});if("com.microsoft.playready"===Te.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:Te.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===Te.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(Te.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===Te.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==Te.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):Te.attributes.KEYID&&"0x"===Te.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:Te.attributes.KEYFORMAT,keyId:Te.attributes.KEYID.substring(2)},pssh:function(Re){for(var it=function(i){return window.atob?window.atob(i):Buffer.from(i,"base64").toString("binary")}(Re),_t=new Uint8Array(it.length),gt=0;gt<it.length;gt++)_t[gt]=it.charCodeAt(gt);return _t}(Te.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));Te.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:Te.attributes.METHOD||"AES-128",uri:Te.attributes.URI},typeof Te.attributes.IV<"u"&&(s.iv=Te.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(Te.number)?this.manifest.mediaSequence=Te.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+Te.number})},"discontinuity-sequence":function(){isFinite(Te.number)?(this.manifest.discontinuitySequence=Te.number,be=Te.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+Te.number})},"playlist-type":function(){/VOD|EVENT/.test(Te.playlistType)?this.manifest.playlistType=Te.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+Te.playlist})},map:function(){a={},Te.uri&&(a.uri=Te.uri),Te.byterange&&(a.byterange=Te.byterange),s&&(a.key=s)},"stream-inf":function(){this.manifest.playlists=_,this.manifest.mediaGroups=this.manifest.mediaGroups||ie,Te.attributes?(D.attributes||(D.attributes={}),H(D.attributes,Te.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var Re;this.manifest.mediaGroups=this.manifest.mediaGroups||ie,Te.attributes&&Te.attributes.TYPE&&Te.attributes["GROUP-ID"]&&Te.attributes.NAME?((Re=this.manifest.mediaGroups[Te.attributes.TYPE])[Te.attributes["GROUP-ID"]]=Re[Te.attributes["GROUP-ID"]]||{},Ue=Re[Te.attributes["GROUP-ID"]],Ke.autoselect=!!(Ke={default:/yes/i.test(Te.attributes.DEFAULT)}).default||/yes/i.test(Te.attributes.AUTOSELECT),Te.attributes.LANGUAGE&&(Ke.language=Te.attributes.LANGUAGE),Te.attributes.URI&&(Ke.uri=Te.attributes.URI),Te.attributes["INSTREAM-ID"]&&(Ke.instreamId=Te.attributes["INSTREAM-ID"]),Te.attributes.CHARACTERISTICS&&(Ke.characteristics=Te.attributes.CHARACTERISTICS),Te.attributes.FORCED&&(Ke.forced=/yes/i.test(Te.attributes.FORCED)),Ue[Te.attributes.NAME]=Ke):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){be+=1,D.discontinuity=!0,this.manifest.discontinuityStarts.push(_.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=Te.dateTimeString,this.manifest.dateTimeObject=Te.dateTimeObject),D.dateTimeString=Te.dateTimeString,D.dateTimeObject=Te.dateTimeObject},targetduration:function(){!isFinite(Te.duration)||Te.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+Te.duration}):(this.manifest.targetDuration=Te.duration,Ko.call(this,this.manifest))},start:function(){Te.attributes&&!isNaN(Te.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:Te.attributes["TIME-OFFSET"],precise:Te.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){D.cueOut=Te.data},"cue-out-cont":function(){D.cueOutCont=Te.data},"cue-in":function(){D.cueIn=Te.data},skip:function(){this.manifest.skip=kr(Te.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",Te.attributes,["SKIPPED-SEGMENTS"])},part:function(){var Re=this;Q=!0;var it=this.manifest.segments.length,_t=kr(Te.attributes);D.parts=D.parts||[],D.parts.push(_t),_t.byterange&&(_t.byterange.hasOwnProperty("offset")||(_t.byterange.offset=Ie),Ie=_t.byterange.offset+_t.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(D.parts.length-1)+" for segment #"+it,Te.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(Dt,$t){Dt.hasOwnProperty("lastPart")||Re.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+$t+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var Re=this.manifest.serverControl=kr(Te.attributes);Re.hasOwnProperty("canBlockReload")||(Re.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Ko.call(this,this.manifest),Re.canSkipDateranges&&!Re.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var Re=this.manifest.segments.length,it=kr(Te.attributes),_t=it.type&&"PART"===it.type;D.preloadHints=D.preloadHints||[],D.preloadHints.push(it),it.byterange&&(it.byterange.hasOwnProperty("offset")||(it.byterange.offset=_t?Ie:0,_t&&(Ie=it.byterange.offset+it.byterange.length)));var gt=D.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+gt+" for segment #"+Re,Te.attributes,["TYPE","URI"]),it.type)for(var Dt=0;Dt<D.preloadHints.length-1;Dt++){var $t=D.preloadHints[Dt];$t.type&&$t.type===it.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+gt+" for segment #"+Re+" has the same TYPE "+it.type+" as preload hint #"+Dt})}},"rendition-report":function(){var it=kr(Te.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(it);var Re=this.manifest.renditionReports.length-1;it=["LAST-MSN","URI"],Q&&it.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+Re,Te.attributes,it)},"part-inf":function(){this.manifest.partInf=kr(Te.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",Te.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Ko.call(this,this.manifest)}}[Te.tagType]||function(){}).call(h)},uri:function(){D.uri=Te.uri,_.push(D),!this.manifest.targetDuration||"duration"in D||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),D.duration=this.manifest.targetDuration),s&&(D.key=s),D.timeline=be,a&&(D.map=a),Ie=0,D={}},comment:function(){},custom:function(){Te.segment?(D.custom=D.custom||{},D.custom[Te.customType]=Te.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[Te.customType]=Te.data)}})[Te.type].call(h)}),t}ke(l,i);var o=l.prototype;return o.warnOnMissingAttributes_=function(t,a,s){var h=[];s.forEach(function(_){a.hasOwnProperty(_)||h.push(_)}),h.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+h.join(", ")})},o.push=function(t){this.lineStream.push(t)},o.end=function(){this.lineStream.push("\n"),this.trigger("end")},o.addParser=function(t){this.parseStream.addParser(t)},o.addTagMapper=function(t){this.parseStream.addTagMapper(t)},l}(Ci),fr={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},ih=["video","audio","text"],ql=["Video","Audio","Text"],$l="mp4a.40.2",rh=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ah=/^application\/dash\+xml/i,oh=Vl,pi=window.BigInt||Number,Zo=[pi("0x1"),pi("0x100"),pi("0x10000"),pi("0x1000000"),pi("0x100000000"),pi("0x10000000000"),pi("0x1000000000000"),pi("0x100000000000000"),pi("0x10000000000000000")],Xl="http://example.com";function Qo(i,l){return(l=void 0===l?Object:l)&&"function"==typeof l.freeze?l.freeze(i):i}var Gl=Qo({HTML:"text/html",isHTML:function(i){return i===Gl.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Kl=Qo({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===Kl.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),Ba={freeze:Qo,MIME_TYPE:Gl,NAMESPACE:Kl},na=Ba.NAMESPACE;function lh(i){return""!==i}function uh(i,l){return i.hasOwnProperty(l)||(i[l]=!0),i}function Yl(i){return i?(i=i?i.split(/[\t\n\f\r ]+/).filter(lh):[],Object.keys(i.reduce(uh,{}))):[]}function ia(i,l){for(var o in i)l[o]=i[o]}function Oi(i,l){var o,t=i.prototype;t instanceof l||((o=function(){}).prototype=l.prototype,ia(t,o=new o),i.prototype=t=o),t.constructor!=i&&(t.constructor=i)}var iu,Wi=(ii={}).ELEMENT_NODE=1,Er=ii.ATTRIBUTE_NODE=2,ja=ii.TEXT_NODE=3,Jl=ii.CDATA_SECTION_NODE=4,Zl=ii.ENTITY_REFERENCE_NODE=5,Ql=(ii.ENTITY_NODE=6,ii.PROCESSING_INSTRUCTION_NODE=7),eu=ii.COMMENT_NODE=8,tu=ii.DOCUMENT_NODE=9,nu=ii.DOCUMENT_TYPE_NODE=10,Qi=ii.DOCUMENT_FRAGMENT_NODE=11,ci=(ii.NOTATION_NODE=12,Vn={},{});function pr(i,l){var o;return l instanceof Error?o=l:(o=this,Error.call(this,ci[i]),this.message=ci[i],Error.captureStackTrace&&Error.captureStackTrace(this,pr)),o.code=i,l&&(this.message=this.message+": "+l),o}function er(){}function Cr(i,l){this._node=i,this._refresh=l,es(this)}function es(i){var l,o=i._node._inc||i._node.ownerDocument._inc;i._inc!=o&&(l=i._refresh(i._node),gu(i,"length",l.length),ia(l,i),i._inc=o)}function Ha(){}function ru(i,l){for(var o=i.length;o--;)if(i[o]===l)return o}function au(i,l,o,t){t?l[ru(l,t)]=o:l[l.length++]=o,!i||(l=(o.ownerElement=i).ownerDocument)&&(t&&uu(l,i,t),l&&l._inc++,o.namespaceURI===na.XMLNS&&(i._nsMap[o.prefix?o.localName:""]=o.value))}function ou(i,l,o){var t=ru(l,o);if(!(0<=t))throw pr(8,new Error(i.tagName+"@"+o));for(var a,s=l.length-1;t<s;)l[t]=l[++t];l.length=s,!i||(a=i.ownerDocument)&&(uu(a,i,o),o.ownerElement=null)}function su(){}function yi(){}function lu(i){return("<"==i?"&lt;":">"==i&&"&gt;")||"&"==i&&"&amp;"||'"'==i&&"&quot;"||"&#"+i.charCodeAt()+";"}function ra(i,l){if(l(i))return 1;if(i=i.firstChild)do{if(ra(i,l))return 1}while(i=i.nextSibling)}function aa(){}function uu(i,l,o){i&&i._inc++,o.namespaceURI===na.XMLNS&&delete l._nsMap[o.prefix?o.localName:""]}function ts(i,l,o){if(i&&i._inc){i._inc++;var t=l.childNodes;if(o)t[t.length++]=o;else{for(var a=l.firstChild,s=0;a;)a=(t[s++]=a).nextSibling;t.length=s}}}function du(i,l){var o=l.previousSibling,t=l.nextSibling;return o?o.nextSibling=t:i.firstChild=t,t?t.previousSibling=o:i.lastChild=o,ts(i.ownerDocument,i),l}function cu(i,l,o){var t=l.parentNode;if(t&&t.removeChild(l),l.nodeType===Qi){var a=l.firstChild;if(null==a)return l;var s=l.lastChild}else a=s=l;for(a.previousSibling=t=o?o.previousSibling:i.lastChild,s.nextSibling=o,t?t.nextSibling=a:i.firstChild=a,null==o?i.lastChild=s:o.previousSibling=s;a.parentNode=i,a!==s&&(a=a.nextSibling););return ts(i.ownerDocument||i,i),l.nodeType==Qi&&(l.firstChild=l.lastChild=null),l}function Nr(){this._nsMap={}}function za(){}function oa(){}function ns(){}function is(){}function rs(){}function Va(){}function hu(){}function fu(){}function as(){}function Wa(){}function os(){}function pu(){}function mu(i,l){var o,t=[],a=9==this.nodeType&&this.documentElement||this,s=a.prefix,h=a.namespaceURI;return Ar(this,t,i,l,o=h&&null==s&&null==(s=a.lookupPrefix(h))?[{namespace:h,prefix:null}]:o),t.join("")}function _u(i,l,o){var t=i.prefix||"",a=i.namespaceURI;if(a&&("xml"!==t||a!==na.XML)&&a!==na.XMLNS){for(var s=o.length;s--;){var h=o[s];if(h.prefix===t)return h.namespace!==a}return 1}}function ss(i,l,o){i.push(" ",l,'="',o.replace(/[<&"]/g,lu),'"')}function Ar(i,l,o,t,a){if(a=a||[],t){if(!(i=t(i)))return;if("string"==typeof i)return void l.push(i)}switch(i.nodeType){case Wi:var Ue,Ke,Re,s=i.attributes,h=s.length,_=i.firstChild,D=i.tagName,Q=D;if(!(o=na.isHTML(i.namespaceURI)||o)&&!i.prefix&&i.namespaceURI){for(var ie,be=0;be<s.length;be++)if("xmlns"===s.item(be).name){ie=s.item(be).value;break}if(!ie)for(var Se=a.length-1;0<=Se;Se--)if(""===(Ie=a[Se]).prefix&&Ie.namespace===i.namespaceURI){ie=Ie.namespace;break}var Ie;if(ie!==i.namespaceURI)for(Se=a.length-1;0<=Se;Se--)if((Ie=a[Se]).namespace===i.namespaceURI){Ie.prefix&&(Q=Ie.prefix+":"+D);break}}l.push("<",Q);for(var Te=0;Te<h;Te++)"xmlns"==(Ue=s.item(Te)).prefix?a.push({prefix:Ue.localName,namespace:Ue.value}):"xmlns"==Ue.nodeName&&a.push({prefix:"",namespace:Ue.value});for(Te=0;Te<h;Te++)_u(Ue=s.item(Te),0,a)&&(ss(l,(Ke=Ue.prefix||"")?"xmlns:"+Ke:"xmlns",Re=Ue.namespaceURI),a.push({prefix:Ke,namespace:Re})),Ar(Ue,l,o,t,a);if(D===Q&&_u(i,0,a)&&(ss(l,(Ke=i.prefix||"")?"xmlns:"+Ke:"xmlns",Re=i.namespaceURI),a.push({prefix:Ke,namespace:Re})),_||o&&!/^(?:meta|link|img|br|hr|input)$/i.test(D)){if(l.push(">"),o&&/^script$/i.test(D))for(;_;)_.data?l.push(_.data):Ar(_,l,o,t,a.slice()),_=_.nextSibling;else for(;_;)Ar(_,l,o,t,a.slice()),_=_.nextSibling;l.push("</",Q,">")}else l.push("/>");return;case tu:case Qi:for(_=i.firstChild;_;)Ar(_,l,o,t,a.slice()),_=_.nextSibling;return;case Er:return ss(l,i.name,i.value),0;case ja:return l.push(i.data.replace(/[<&]/g,lu).replace(/]]>/g,"]]&gt;"));case Jl:return l.push("<![CDATA[",i.data,"]]>");case eu:return l.push("\x3c!--",i.data,"--\x3e");case nu:var it=i.publicId,_t=i.systemId;return l.push("<!DOCTYPE ",i.name),void(it?(l.push(" PUBLIC ",it),_t&&"."!=_t&&l.push(" ",_t),l.push(">")):_t&&"."!=_t?l.push(" SYSTEM ",_t,">"):((_t=i.internalSubset)&&l.push(" [",_t,"]"),l.push(">")));case Ql:return l.push("<?",i.target," ",i.data,"?>");case Zl:return l.push("&",i.nodeName,";");default:l.push("??",i.nodeName)}}function gu(i,l,o){i[l]=o}Vn.INDEX_SIZE_ERR=(ci[1]="Index size error",1),Vn.DOMSTRING_SIZE_ERR=(ci[2]="DOMString size error",2),Vn.HIERARCHY_REQUEST_ERR=(ci[3]="Hierarchy request error",3),Vn.WRONG_DOCUMENT_ERR=(ci[4]="Wrong document",4),Vn.INVALID_CHARACTER_ERR=(ci[5]="Invalid character",5),Vn.NO_DATA_ALLOWED_ERR=(ci[6]="No data allowed",6),Vn.NO_MODIFICATION_ALLOWED_ERR=(ci[7]="No modification allowed",7),Vn.NOT_FOUND_ERR=(ci[8]="Not found",8),Vn.NOT_SUPPORTED_ERR=(ci[9]="Not supported",9),Vn.INUSE_ATTRIBUTE_ERR=(ci[10]="Attribute in use",10),Vn.INVALID_STATE_ERR=(ci[11]="Invalid state",11),Vn.SYNTAX_ERR=(ci[12]="Syntax error",12),Vn.INVALID_MODIFICATION_ERR=(ci[13]="Invalid modification",13),Vn.NAMESPACE_ERR=(ci[14]="Invalid namespace",14),Vn.INVALID_ACCESS_ERR=(ci[15]="Invalid access",15),pr.prototype=Error.prototype,ia(Vn,pr),er.prototype={length:0,item:function(i){return this[i]||null},toString:function(i,l){for(var o=[],t=0;t<this.length;t++)Ar(this[t],o,i,l);return o.join("")}},Cr.prototype.item=function(i){return es(this),this[i]},Oi(Cr,er),Ha.prototype={length:0,item:er.prototype.item,getNamedItem:function(i){for(var l=this.length;l--;){var o=this[l];if(o.nodeName==i)return o}},setNamedItem:function(i){var l=i.ownerElement;if(l&&l!=this._ownerElement)throw new pr(10);return l=this.getNamedItem(i.nodeName),au(this._ownerElement,this,i,l),l},setNamedItemNS:function(i){var l=i.ownerElement;if(l&&l!=this._ownerElement)throw new pr(10);return l=this.getNamedItemNS(i.namespaceURI,i.localName),au(this._ownerElement,this,i,l),l},removeNamedItem:function(i){return i=this.getNamedItem(i),ou(this._ownerElement,this,i),i},removeNamedItemNS:function(i,l){return l=this.getNamedItemNS(i,l),ou(this._ownerElement,this,l),l},getNamedItemNS:function(i,l){for(var o=this.length;o--;){var t=this[o];if(t.localName==l&&t.namespaceURI==i)return t}return null}},su.prototype={hasFeature:function(i,l){return!0},createDocument:function(i,l,o){var t=new aa;return t.implementation=this,t.childNodes=new er,t.doctype=o||null,o&&t.appendChild(o),l&&(l=t.createElementNS(i,l),t.appendChild(l)),t},createDocumentType:function(i,l,o){var t=new Va;return t.name=i,t.nodeName=i,t.publicId=l||"",t.systemId=o||"",t}},yi.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,l){return cu(this,i,l)},replaceChild:function(i,l){this.insertBefore(i,l),l&&this.removeChild(l)},removeChild:function(i){return du(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(i){return function l(o,t,a){var s=new t.constructor;for(var h in t){var _=t[h];"object"!=typeof _&&_!=s[h]&&(s[h]=_)}switch(t.childNodes&&(s.childNodes=new er),s.ownerDocument=o,s.nodeType){case Wi:var D=t.attributes,Q=s.attributes=new Ha,ie=D.length;Q._ownerElement=s;for(var be=0;be<ie;be++)s.setAttributeNode(l(o,D.item(be),!0));break;case Er:a=!0}if(a)for(var Se=t.firstChild;Se;)s.appendChild(l(o,Se,a)),Se=Se.nextSibling;return s}(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var l=i.nextSibling;l&&l.nodeType==ja&&i.nodeType==ja?(this.removeChild(l),i.appendData(l.data)):(i.normalize(),i=l)}},isSupported:function(i,l){return this.ownerDocument.implementation.hasFeature(i,l)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(i){for(var l=this;l;){var o=l._nsMap;if(o)for(var t in o)if(o[t]==i)return t;l=l.nodeType==Er?l.ownerDocument:l.parentNode}return null},lookupNamespaceURI:function(i){for(var l=this;l;){var o=l._nsMap;if(o&&i in o)return o[i];l=l.nodeType==Er?l.ownerDocument:l.parentNode}return null},isDefaultNamespace:function(i){return null==this.lookupPrefix(i)}},ia(ii,yi),ia(ii,yi.prototype),aa.prototype={nodeName:"#document",nodeType:tu,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,l){if(i.nodeType!=Qi)return null==this.documentElement&&i.nodeType==Wi&&(this.documentElement=i),cu(this,i,l),i.ownerDocument=this,i;for(var o=i.firstChild;o;){var t=o.nextSibling;this.insertBefore(o,l),o=t}return i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),du(this,i)},importNode:function(i,l){return function o(t,a,s){var h;switch(a.nodeType){case Wi:(h=a.cloneNode(!1)).ownerDocument=t;case Qi:break;case Er:s=!0}if((h=h||a.cloneNode(!1)).ownerDocument=t,h.parentNode=null,s)for(var _=a.firstChild;_;)h.appendChild(o(t,_,s)),_=_.nextSibling;return h}(this,i,l)},getElementById:function(i){var l=null;return ra(this.documentElement,function(o){if(o.nodeType==Wi&&o.getAttribute("id")==i)return l=o,!0}),l},getElementsByClassName:function(i){var l=Yl(i);return new Cr(this,function(o){var t=[];return 0<l.length&&ra(o.documentElement,function(a){var s,h,_;a===o||a.nodeType!==Wi||(s=a.getAttribute("class"))&&((h=i===s)||(s=Yl(s),h=l.every((_=s,function(D){return _&&-1!==_.indexOf(D)}))),h&&t.push(a))}),t})},createElement:function(i){var l=new Nr;return l.ownerDocument=this,l.nodeName=i,l.tagName=i,l.localName=i,l.childNodes=new er,(l.attributes=new Ha)._ownerElement=l},createDocumentFragment:function(){var i=new Wa;return i.ownerDocument=this,i.childNodes=new er,i},createTextNode:function(i){var l=new ns;return l.ownerDocument=this,l.appendData(i),l},createComment:function(i){var l=new is;return l.ownerDocument=this,l.appendData(i),l},createCDATASection:function(i){var l=new rs;return l.ownerDocument=this,l.appendData(i),l},createProcessingInstruction:function(i,l){var o=new os;return o.ownerDocument=this,o.tagName=o.target=i,o.nodeValue=o.data=l,o},createAttribute:function(i){var l=new za;return l.ownerDocument=this,l.name=i,l.nodeName=i,l.localName=i,l.specified=!0,l},createEntityReference:function(i){var l=new as;return l.ownerDocument=this,l.nodeName=i,l},createElementNS:function(i,l){var o=new Nr,t=l.split(":"),a=o.attributes=new Ha;return o.childNodes=new er,o.ownerDocument=this,o.nodeName=l,o.tagName=l,o.namespaceURI=i,2==t.length?(o.prefix=t[0],o.localName=t[1]):o.localName=l,a._ownerElement=o},createAttributeNS:function(i,l){var o=new za,t=l.split(":");return o.ownerDocument=this,o.nodeName=l,o.name=l,o.namespaceURI=i,o.specified=!0,2==t.length?(o.prefix=t[0],o.localName=t[1]):o.localName=l,o}},Oi(aa,yi),aa.prototype.getElementsByTagName=(Nr.prototype={nodeType:Wi,hasAttribute:function(i){return null!=this.getAttributeNode(i)},getAttribute:function(i){return(i=this.getAttributeNode(i))&&i.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,l){(i=this.ownerDocument.createAttribute(i)).value=i.nodeValue=""+l,this.setAttributeNode(i)},removeAttribute:function(i){(i=this.getAttributeNode(i))&&this.removeAttributeNode(i)},appendChild:function(i){return i.nodeType===Qi?this.insertBefore(i,null):function(l,o){var t=o.parentNode;t&&(a=l.lastChild,t.removeChild(o),a=l.lastChild);var a=l.lastChild;return o.parentNode=l,o.previousSibling=a,o.nextSibling=null,a?a.nextSibling=o:l.firstChild=o,l.lastChild=o,ts(l.ownerDocument,l,o),o}(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,l){(l=this.getAttributeNodeNS(i,l))&&this.removeAttributeNode(l)},hasAttributeNS:function(i,l){return null!=this.getAttributeNodeNS(i,l)},getAttributeNS:function(i,l){return(l=this.getAttributeNodeNS(i,l))&&l.value||""},setAttributeNS:function(i,l,o){(l=this.ownerDocument.createAttributeNS(i,l)).value=l.nodeValue=""+o,this.setAttributeNode(l)},getAttributeNodeNS:function(i,l){return this.attributes.getNamedItemNS(i,l)},getElementsByTagName:function(i){return new Cr(this,function(l){var o=[];return ra(l,function(t){t===l||t.nodeType!=Wi||"*"!==i&&t.tagName!=i||o.push(t)}),o})},getElementsByTagNameNS:function(i,l){return new Cr(this,function(o){var t=[];return ra(o,function(a){a===o||a.nodeType!==Wi||"*"!==i&&a.namespaceURI!==i||"*"!==l&&a.localName!=l||t.push(a)}),t})}}).getElementsByTagName,aa.prototype.getElementsByTagNameNS=Nr.prototype.getElementsByTagNameNS,Oi(Nr,yi),za.prototype.nodeType=Er,Oi(za,yi),oa.prototype={data:"",substringData:function(i,l){return this.data.substring(i,i+l)},appendData:function(i){this.nodeValue=this.data=i=this.data+i,this.length=i.length},insertData:function(i,l){this.replaceData(i,0,l)},appendChild:function(i){throw new Error(ci[3])},deleteData:function(i,l){this.replaceData(i,l,"")},replaceData:function(i,a,o){var t=this.data.substring(0,i);a=this.data.substring(i+a),this.nodeValue=this.data=o=t+o+a,this.length=o.length}},Oi(oa,yi),ns.prototype={nodeName:"#text",nodeType:ja,splitText:function(i){var l=(o=this.data).substring(i),o=o.substring(0,i);return this.data=this.nodeValue=o,this.length=o.length,l=this.ownerDocument.createTextNode(l),this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling),l}},Oi(ns,oa),is.prototype={nodeName:"#comment",nodeType:eu},Oi(is,oa),rs.prototype={nodeName:"#cdata-section",nodeType:Jl},Oi(rs,oa),Va.prototype.nodeType=nu,Oi(Va,yi),hu.prototype.nodeType=12,Oi(hu,yi),fu.prototype.nodeType=6,Oi(fu,yi),as.prototype.nodeType=Zl,Oi(as,yi),Wa.prototype.nodeName="#document-fragment",Wa.prototype.nodeType=Qi,Oi(Wa,yi),os.prototype.nodeType=Ql,Oi(os,yi),pu.prototype.serializeToString=function(i,l,o){return mu.call(i,l,o)},yi.prototype.toString=mu;try{Object.defineProperty&&(iu=function i(l){switch(l.nodeType){case Wi:case Qi:var o=[];for(l=l.firstChild;l;)7!==l.nodeType&&8!==l.nodeType&&o.push(i(l)),l=l.nextSibling;return o.join("");default:return l.nodeValue}},Object.defineProperty(Cr.prototype,"length",{get:function(){return es(this),this.$$length}}),Object.defineProperty(yi.prototype,"textContent",{get:function(){return iu(this)},set:function(i){switch(this.nodeType){case Wi:case Qi:for(;this.firstChild;)this.removeChild(this.firstChild);(i||String(i))&&this.appendChild(this.ownerDocument.createTextNode(i));break;default:this.data=i,this.value=i,this.nodeValue=i}}}),gu=function(i,l,o){i["$$"+l]=o})}catch{}Mi={DocumentType:Va,DOMException:pr,DOMImplementation:su,Element:Nr,Node:yi,NodeList:er,XMLSerializer:pu};var sa=x(function(i,l){var o=Ba.freeze;l.XML_ENTITIES=o({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),l.HTML_ENTITIES=o({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),l.entityMap=l.HTML_ENTITIES}),la=Ba.NAMESPACE,vu=(Ji=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ci=new RegExp("[\\-\\.0-9"+Ji.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),new RegExp("^"+Ji.source+Ci.source+"*(?::"+Ji.source+Ci.source+"*)?$"));function ha(i,l){this.message=i,this.locator=l,Error.captureStackTrace&&Error.captureStackTrace(this,ha)}function yu(){}function bu(i,l){return l.lineNumber=i.lineNumber,l.columnNumber=i.columnNumber,l}function wu(i,l,o){for(var t=i.tagName,a=null,s=i.length;s--;){var h=i[s],_=h.value,D=0<(ie=(D=h.qName).indexOf(":"))?(Q=h.prefix=D.slice(0,ie),be=D.slice(ie+1),"xmlns"===Q&&be):(Q=null,"xmlns"===(be=D)&&"");h.localName=be,!1!==D&&(null==a&&(a={},xu(o,o={})),o[D]=a[D]=_,h.uri=la.XMLNS,l.startPrefixMapping(D,_))}var Q;for(s=i.length;s--;)(Q=(h=i[s]).prefix)&&("xml"===Q&&(h.uri=la.XML),"xmlns"!==Q&&(h.uri=o[Q||""]));var ie,be=0<(ie=t.indexOf(":"))?(Q=i.prefix=t.slice(0,ie),i.localName=t.slice(ie+1)):(Q=null,i.localName=t),Se=i.uri=o[Q||""];if(l.startElement(Se,be,t,i),!i.closed)return i.currentNSMap=o,i.localNSMap=a,1;if(l.endElement(Se,be,t),a)for(Q in a)l.endPrefixMapping(Q)}function xu(i,l){for(var o in i)l[o]=i[o]}function Su(){this.attributeNames={}}(ha.prototype=new Error).name=ha.name,yu.prototype={parse:function(i,l,o){var t=this.domBuilder;t.startDocument(),xu(l,l={}),function(a,s,h,_,D){function Q(on){var Kt=on.slice(1,-1);return Kt in h?h[Kt]:"#"===Kt.charAt(0)?65535<(Kt=parseInt(Kt.substr(1).replace("x","0x")))?(Kt-=65536,String.fromCharCode(55296+(Kt>>10),56320+(1023&Kt))):String.fromCharCode(Kt):(D.error("entity not found:"+on),on)}function ie(on){var Kt;it<on&&(Kt=a.substring(it,on).replace(/&#?\w+;/g,Q),Ue&&be(it),_.characters(Kt,0,on-it),it=on)}function be(on,Kt){for(;Ie<=on&&(Kt=Te.exec(a));)Ie=(Se=Kt.index)+Kt[0].length,Ue.lineNumber++;Ue.columnNumber=on-Se+1}for(var Se=0,Ie=0,Te=/.*(?:\r\n?|\n)|.*$/g,Ue=_.locator,Ke=[{currentNSMap:s}],Re={},it=0;;){try{var _t,gt,Dt=a.indexOf("<",it);if(Dt<0)return a.substr(it).match(/^\s*$/)||(gt=(_t=_.doc).createTextNode(a.substr(it)),_t.appendChild(gt),_.currentElement=gt);switch(it<Dt&&ie(Dt),a.charAt(Dt+1)){case"/":var bn=a.indexOf(">",Dt+3),$t=a.substring(Dt+2,bn).replace(/[ \t\n\r]+$/g,""),Gt=Ke.pop();bn<0?($t=a.substring(Dt+2).replace(/[\s<].*/,""),D.error("end tag name: "+$t+" is not complete:"+Gt.tagName),bn=Dt+1+$t.length):$t.match(/\s</)&&($t=$t.replace(/[\s<].*/,""),D.error("end tag name: "+$t+" maybe not complete"),bn=Dt+1+$t.length);var un=Gt.localNSMap,an=Gt.tagName==$t;if(an||Gt.tagName&&Gt.tagName.toLowerCase()==$t.toLowerCase()){if(_.endElement(Gt.uri,Gt.localName,$t),un)for(var mn in un)_.endPrefixMapping(mn);an||D.fatalError("end tag name: "+$t+" is not match the current start tagName:"+Gt.tagName)}else Ke.push(Gt);bn++;break;case"?":Ue&&be(Dt),On=_,void 0,bn=(wn=(on=a).indexOf("?>",Kt=Dt))&&(Kt=on.substring(Kt,wn).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(On.processingInstruction(Kt[1],Kt[2]),wn+2):-1;break;case"!":Ue&&be(Dt),bn=function(on,Kt,On,wn){if("-"===on.charAt(Kt+2)){if("-"!==on.charAt(Kt+3))return-1;var Kn=on.indexOf("--\x3e",Kt+4);return Kt<Kn?(On.comment(on,Kt+4,Kn-Kt-4),Kn+3):(wn.error("Unclosed comment"),-1)}if("CDATA["==on.substr(Kt+3,6))return Kn=on.indexOf("]]>",Kt+9),On.startCDATA(),On.characters(on,Kt+9,Kn-Kt-9),On.endCDATA(),Kn+3;var Xn=function(oi,pn){var Rn,Li=[],Yn=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Yn.lastIndex=pn,Yn.exec(oi);Rn=Yn.exec(oi);)if(Li.push(Rn),Rn[1])return Li}(on,Kt);return 1<(wn=Xn.length)&&/!doctype/i.test(Xn[0][0])?(Kn=Xn[1][0],on=!1,Kt=!1,3<wn&&(/^public$/i.test(Xn[2][0])?(on=Xn[3][0],Kt=4<wn&&Xn[4][0]):/^system$/i.test(Xn[2][0])&&(Kt=Xn[3][0])),wn=Xn[wn-1],On.startDTD(Kn,on,Kt),On.endDTD(),wn.index+wn[0].length):-1}(a,Dt,_,D);break;default:Ue&&be(Dt);var cn=new Su,Pn=Ke[Ke.length-1].currentNSMap,Ln=(bn=function(on,Kt,On,wn,Kn,Xn){function ir(zr,js,Hs){On.attributeNames.hasOwnProperty(zr)&&Xn.fatalError("Attribute "+zr+" redefined"),On.addValue(zr,js,Hs)}for(var oi,pn=++Kt,Rn=0;;){var Li=on.charAt(pn);switch(Li){case"=":if(1===Rn)oi=on.slice(Kt,pn),Rn=3;else{if(2!==Rn)throw new Error("attribute equal must after attrName");Rn=3}break;case"'":case'"':if(3===Rn||1===Rn){if(1===Rn&&(Xn.warning('attribute value must after "="'),oi=on.slice(Kt,pn)),!(0<(pn=on.indexOf(Li,Kt=pn+1))))throw new Error("attribute value no end '"+Li+"' match");ir(oi,Yn=on.slice(Kt,pn).replace(/&#?\w+;/g,Kn),Kt-1),Rn=5}else{if(4!=Rn)throw new Error('attribute value must after "="');ir(oi,Yn=on.slice(Kt,pn).replace(/&#?\w+;/g,Kn),Kt),Xn.warning('attribute "'+oi+'" missed start quot('+Li+")!!"),Kt=pn+1,Rn=5}break;case"/":switch(Rn){case 0:On.setTagName(on.slice(Kt,pn));case 5:case 6:case 7:Rn=7,On.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Xn.error("unexpected end of input"),0==Rn&&On.setTagName(on.slice(Kt,pn)),pn;case">":switch(Rn){case 0:On.setTagName(on.slice(Kt,pn));case 5:case 6:case 7:break;case 4:case 1:"/"===(Yn=on.slice(Kt,pn)).slice(-1)&&(On.closed=!0,Yn=Yn.slice(0,-1));case 2:2===Rn&&(Yn=oi),4==Rn?(Xn.warning('attribute "'+Yn+'" missed quot(")!'),ir(oi,Yn.replace(/&#?\w+;/g,Kn),Kt)):(la.isHTML(wn[""])&&Yn.match(/^(?:disabled|checked|selected)$/i)||Xn.warning('attribute "'+Yn+'" missed value!! "'+Yn+'" instead!!'),ir(Yn,Yn,Kt));break;case 3:throw new Error("attribute value missed!!")}return pn;case"\x80":Li=" ";default:if(Li<=" ")switch(Rn){case 0:On.setTagName(on.slice(Kt,pn)),Rn=6;break;case 1:oi=on.slice(Kt,pn),Rn=2;break;case 4:var Yn=on.slice(Kt,pn).replace(/&#?\w+;/g,Kn);Xn.warning('attribute "'+Yn+'" missed quot(")!!'),ir(oi,Yn,Kt);case 5:Rn=6}else switch(Rn){case 2:la.isHTML(wn[""])&&oi.match(/^(?:disabled|checked|selected)$/i)||Xn.warning('attribute "'+oi+'" missed value!! "'+oi+'" instead2!!'),ir(oi,oi,Kt),Kt=pn,Rn=1;break;case 5:Xn.warning('attribute space is required"'+oi+'"!!');case 6:Rn=1,Kt=pn;break;case 3:Rn=4,Kt=pn;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}pn++}}(a,Dt,cn,Pn,Q,D),cn.length);if(!cn.closed&&function(on,Kt,On,wn){var Kn=wn[On];return null==Kn&&((Kn=on.lastIndexOf("</"+On+">"))<Kt&&(Kn=on.lastIndexOf("</"+On)),wn[On]=Kn),Kn<Kt}(a,bn,cn.tagName,Re)&&(cn.closed=!0,h.nbsp||D.warning("unclosed xml attribute")),Ue&&Ln){for(var Mn=bu(Ue,{}),Nn=0;Nn<Ln;Nn++){var Ni=cn[Nn];be(Ni.offset),Ni.locator=bu(Ue,{})}_.locator=Mn,wu(cn,_,Pn)&&Ke.push(cn),_.locator=Ue}else wu(cn,_,Pn)&&Ke.push(cn);la.isHTML(cn.uri)&&!cn.closed?bn=function(on,Kt,On,wn,Kn){if(/^(?:script|textarea)$/i.test(On)){var Xn=on.indexOf("</"+On+">",Kt);if(on=on.substring(Kt+1,Xn),/[&<]/.test(on))return/^script$/i.test(On)||(on=on.replace(/&#?\w+;/g,wn)),Kn.characters(on,0,on.length),Xn}return Kt+1}(a,bn,cn.tagName,Q,_):bn++}}catch(on){if(on instanceof ha)throw on;D.error("element parse error: "+on),bn=-1}it<bn?it=bn:ie(Math.max(Dt,it)+1)}var on,Kt,On,wn}(i,l,o,t,this.errorHandler),t.endDocument()}},Su.prototype={setTagName:function(i){if(!vu.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,l,o){if(!vu.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:l,offset:o}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};var dh=Mi.DOMImplementation,Tu=Ba.NAMESPACE,ch=(Vn={XMLReader:yu,ParseError:ha}).ParseError,hh=Vn.XMLReader;function ku(i){this.options=i||{locator:{}}}function fa(){this.cdata=!1}function Pr(i,l){l.lineNumber=i.lineNumber,l.columnNumber=i.columnNumber}function Eu(i,l,o){return"string"==typeof i?i.substr(l,o):i.length>=l+o||l?new java.lang.String(i,l,o)+"":i}function $a(i,l){(i.currentElement||i.doc).appendChild(l)}function Cu(i){return!!i&&"object"==typeof i}function bi(){for(var i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return l.reduce(function(t,a){return"object"!=typeof a||Object.keys(a).forEach(function(s){t[s]=Array.isArray(t[s])&&Array.isArray(a[s])?t[s].concat(a[s]):Cu(t[s])&&Cu(a[s])?bi(t[s],a[s]):a[s]}),t},{})}function Nu(i){return Object.keys(i).map(function(l){return i[l]})}function Xa(i){return i.reduce(function(l,o){return l.concat(o)},[])}function Au(i){if(!i.length)return[];for(var l=[],o=0;o<i.length;o++)l.push(i[o]);return l}function ls(i,l){for(var o=0;o<i.length;o++)if(l(i[o]))return o;return-1}function pa(t){var l=t.baseUrl,a=void 0===(o=t.source)?"":o,o=void 0===(o=t.range)?"":o;return t=void 0===(t=t.indexRange)?"":t,a={uri:a,resolvedUri:Jo((void 0===l?"":l)||"",a)},(o||t)&&(o=(o||t).split("-"),t=window.BigInt?window.BigInt(o[0]):parseInt(o[0],10),o=window.BigInt?window.BigInt(o[1]):parseInt(o[1],10),t<Number.MAX_SAFE_INTEGER&&"bigint"==typeof t&&(t=Number(t)),"bigint"==typeof(o="bigint"==typeof(o=o<Number.MAX_SAFE_INTEGER&&"bigint"==typeof o?Number(o):o)||"bigint"==typeof t?window.BigInt(o)-window.BigInt(t)+window.BigInt(1):o-t+1)&&o<Number.MAX_SAFE_INTEGER&&(o=Number(o)),a.byterange={length:o,offset:t}),a}function Du(i){return i&&"number"!=typeof i&&(i=parseInt(i,10)),isNaN(i)?null:i}function us(D){var l,o=D.type,t=D.duration,a=D.timescale,s=void 0===a?1:a,h=D.periodDuration,_=D.sourceDuration;return D=function(Q,ie){for(var be=[],Se=Q;Se<ie;Se++)be.push(Se);return be}((a=Rh[o](D)).start,a.end).map((l=D,function(Q){var ie=l.duration,be=l.timescale,Ie=l.startNumber;return{number:(void 0===Ie?1:Ie)+Q,duration:ie/(void 0===be?1:be),timeline:l.periodStart,time:Q*ie}})),"static"===o&&(D[o=D.length-1].duration=("number"==typeof h?h:_)-t/s*o),D}function Ou(i){var l=i.baseUrl,o=void 0===(D=i.initialization)?{}:D,t=i.sourceDuration,a=void 0===(_=i.indexRange)?"":_,s=i.periodStart,h=i.presentationTime,_=void 0===(D=i.number)?0:D,D=i.duration;if(!l)throw new Error(Ih);return o=pa({baseUrl:l,source:o.sourceURL,range:o.range}),(a=pa({baseUrl:l,source:l,indexRange:a})).map=o,D?(i=us(i)).length&&(a.duration=i[0].duration,a.timeline=i[0].timeline):t&&(a.duration=t,a.timeline=s),a.presentationTime=h||s,a.number=_,[a]}function ds(i,l,o){for(var t=i.sidx.map||null,a=i.sidx.duration,s=i.timeline||0,h=(h=i.sidx.byterange).offset+h.length,_=l.timescale,D=l.references.filter(function(_t){return 1!==_t.referenceType}),Q=[],ie=i.endList?"static":"dynamic",be=i.sidx.timeline,Se=be,Ie=i.mediaSequence||0,Te="bigint"==typeof l.firstOffset?window.BigInt(h)+l.firstOffset:h+l.firstOffset,Ue=0;Ue<D.length;Ue++){var Ke=(it=l.references[Ue]).referencedSize,Re=it.subsegmentDuration,it=void 0;it=Ou({baseUrl:o,timescale:_,timeline:s,periodStart:be,presentationTime:Se,number:Ie,duration:Re,sourceDuration:a,indexRange:Te+"-"+(it="bigint"==typeof Te?Te+window.BigInt(Ke)-window.BigInt(1):Te+Ke-1),type:ie})[0],t&&(it.map=t),Q.push(it),Te+="bigint"==typeof Te?window.BigInt(Ke):Ke,Se+=Re/_,Ie++}return i.segments=Q,i}function Iu(i){return l=function(o){return o.timeline},Nu(i.reduce(function(o,t){return t.forEach(function(a){o[l(a)]=a}),o},{})).sort(function(o,t){return o.timeline>t.timeline?1:-1});var l}function Pu(i){var l,o,t=[];return l=i,o=function(a,s,h,_){t=t.concat(a.playlists||[])},Lh.forEach(function(a){for(var s in l.mediaGroups[a])for(var h in l.mediaGroups[a][s])o(l.mediaGroups[a][s][h])}),t}function Mu(o){var l=o.playlist;l.mediaSequence=o=o.mediaSequence,l.segments.forEach(function(t,a){t.number=l.mediaSequence+a})}function Ga(i){return i&&i.uri+"-"+(i="bigint"==typeof(l=i.byterange).offset||"bigint"==typeof l.length?window.BigInt(l.offset)+window.BigInt(l.length)-window.BigInt(1):l.offset+l.length-1,l.offset+"-"+i);var l}function cs(i){return Nu(i.reduce(function(l,o){var t,a=o.attributes.id+(o.attributes.lang||"");return l[a]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),(t=l[a].segments).push.apply(t,o.segments)),o.attributes.contentProtection&&(l[a].attributes.contentProtection=o.attributes.contentProtection)):(l[a]=o,l[a].attributes.timelineStarts=[]),l[a].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),l},{})).map(function(l){return l.discontinuityStarts=(l.segments||[]).reduce(function(a,s,h){return s.discontinuity&&a.push(h),a},[]),l})}function hs(i,l){var o=Ga(i.sidx);return(o=o&&l[o]&&l[o].sidx)&&ds(i,o,i.sidx.resolvedUri),i}function _h(i){var l=i.attributes,a=i.segments,o=i.sidx,t=i.discontinuityStarts;return a={attributes:((i={NAME:l.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:l.width,height:l.height},CODECS:l.codecs,BANDWIDTH:l.bandwidth})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:"",targetDuration:l.duration,discontinuityStarts:t,timelineStarts:l.timelineStarts,segments:a},l.contentProtection&&(a.contentProtection=l.contentProtection),o&&(a.sidx=o),a}function gh(i){return"video/mp4"===(i=i.attributes).mimeType||"video/webm"===i.mimeType||"video"===i.contentType}function vh(i){return"audio/mp4"===(i=i.attributes).mimeType||"audio/webm"===i.mimeType||"audio"===i.contentType}function yh(i){return"text/vtt"===(i=i.attributes).mimeType||"text"===i.contentType}function Ru(i){return i?Object.keys(i).reduce(function(l,o){return l.concat((o=i[o]).playlists)},[]):[]}function Lu(i,l){for(var a,s,h,_,D=i.type,Q=i.minimumUpdatePeriod,ie=void 0===Q?0:Q,be=void 0===(Q=i.media)?"":Q,Se=i.sourceDuration,Ie=void 0===(Q=i.timescale)?1:Q,Te=void 0===(Q=i.startNumber)?1:Q,Ue=i.periodStart,Ke=[],Re=-1,it=0;it<l.length;it++){var Gt,un,_t=l[it],gt=_t.d,Dt=_t.r||0,$t=_t.t||0;Re<0&&(Re=$t),$t&&Re<$t&&(Re=$t),un=Dt<0?(Gt=it+1)===l.length?"dynamic"===D&&0<ie&&0<be.indexOf("$Number$")?(_t=void 0,a=($t=i).NOW,s=$t.clientOffset,h=$t.availabilityStartTime,_=$t.timescale,_t=$t.periodStart,$t=$t.minimumUpdatePeriod,Math.ceil((((a+s)/1e3+(void 0===$t?0:$t)-(h+(void 0===_t?0:_t)))*(void 0===_?1:_)-Re)/gt)):(Se*Ie-Re)/gt:(l[Gt].t-Re)/gt:Dt+1;for(var an=Te+Ke.length+un,mn=Te+Ke.length;mn<an;)Ke.push({number:mn,duration:gt/Ie,time:Re,timeline:Ue}),Re+=gt,mn++}return Ke}function Fu(i,l){return i.replace(Fh,(o=l,function(t,a,s,h){return"$$"===t?"$":typeof o[a]>"u"?t:(t=""+o[a],"RepresentationID"===a||(h=s?parseInt(h,10):1)<=t.length?t:new Array(h-t.length+1).join("0")+t)}));var o}function wh(i,l){var o={RepresentationID:i.id,Bandwidth:i.bandwidth||0},t=void 0===(t=i.initialization)?{sourceURL:"",range:""}:t,a=pa({baseUrl:i.baseUrl,source:Fu(t.sourceURL,o),range:t.range});return(t=l,(l=i).duration||t?l.duration?us(l):Lu(l,t):[{number:l.startNumber||1,duration:l.sourceDuration,time:0,timeline:l.periodStart}]).map(function(s){o.Number=s.number,o.Time=s.time;var h=Fu(i.media||"",o),D=i.periodStart+(s.time-(i.presentationTimeOffset||0))/(D=i.timescale||1);return{uri:h,timeline:s.timeline,duration:s.duration,resolvedUri:Jo(i.baseUrl||"",h),map:a,number:s.number,presentationTime:D}})}function xh(i,l){var o=i.duration,t=void 0===(t=i.segmentUrls)?[]:t,a=i.periodStart;if(!o&&!l||o&&l)throw new Error(Ph);var s,h=t.map(function(_){return Q=_,_=(D=i).baseUrl,D=pa({baseUrl:_,source:(D=void 0===(D=D.initialization)?{}:D).sourceURL,range:D.range}),(Q=pa({baseUrl:_,source:Q.media,range:Q.mediaRange})).map=D,Q;var D,Q});return o&&(s=us(i)),(s=l?Lu(i,l):s).map(function(_,D){if(h[D]){var Q=h[D],ie=i.timescale||1;return D=i.presentationTimeOffset||0,Q.timeline=_.timeline,Q.duration=_.duration,Q.number=_.number,Q.presentationTime=a+(_.time-D)/ie,Q}}).filter(function(_){return _})}function Sh(h){var l,o=h.attributes,t=h.segmentInfo;t.template?(s=wh,l=bi(o,t.template)):t.base?(s=Ou,l=bi(o,t.base)):t.list&&(s=xh,l=bi(o,t.list));var s,a={attributes:o};return s?(h=s(l,t.segmentTimeline),l.duration=l.duration?(o=l.duration)/(void 0===(s=l.timescale)?1:s):h.length?h.reduce(function(_,D){return Math.max(_,Math.ceil(D.duration))},0):0,a.attributes=l,a.segments=h,t.base&&l.indexRange&&(a.sidx=h[0],a.segments=[]),a):a}function ni(i,l){return Au(i.childNodes).filter(function(o){return o.tagName===l})}function fs(i){return i.textContent.trim()}function Mr(a){if(!(s=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a)))return 0;var l=(h=s.slice(1))[0],o=h[1],t=h[2],s=(a=h[3],h[4]),h=h[5];return 31536e3*parseFloat(l||0)+2592e3*parseFloat(o||0)+86400*parseFloat(t||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(h||0)}function wi(i){return i&&i.attributes?Au(i.attributes).reduce(function(l,o){return l[o.name]=(Vu[o.name]||Vu.DEFAULT)(o.value),l},{}):{}}function Ka(i,l){return l.length?Xa(i.map(function(o){return l.map(function(t){return Jo(o,fs(t))})})):i}function ps(s){var l=ni(s,"SegmentTemplate")[0],o=ni(s,"SegmentList")[0],t=o&&ni(o,"SegmentURL").map(function(D){return bi({tag:"SegmentURL"},wi(D))}),a=ni(s,"SegmentBase")[0],h=(s=(h=o||l)&&ni(h,"SegmentTimeline")[0],(h=o||a||l)&&ni(h,"Initialization")[0]);(l=l&&wi(l))&&h?l.initialization=h&&wi(h):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var _={template:l,segmentTimeline:s&&ni(s,"S").map(wi),list:o&&bi(wi(o),{segmentUrls:t,initialization:wi(h)}),base:a&&bi(wi(a),{initialization:wi(h)})};return Object.keys(_).forEach(function(D){_[D]||delete _[D]}),_}function Uu(i){if(""===i)throw new Error(Dh);var l,o,t=new Nh;try{o=(l=t.parseFromString(i,"application/xml"))&&"MPD"===l.documentElement.tagName?l.documentElement:null}catch{}if(!o||o&&0<o.getElementsByTagName("parsererror").length)throw new Error(Oh);return o}function Eh(t,l){void 0===l&&(l={});var o=function kh(D,a){var o=a=void 0===a?{}:a,t=void 0===(h=o.manifestUri)?"":h,s=(a=void 0===(s=o.NOW)?Date.now():s,void 0===(h=o.clientOffset)?0:h);if(!(o=ni(D,"Period")).length)throw new Error(Ah);var h=ni(D,"Location"),_=wi(D);D=Ka([t],ni(D,"BaseURL")),_.type=_.type||"static",_.sourceDuration=_.mediaPresentationDuration||0,_.NOW=a,_.clientOffset=s,h.length&&(_.locations=h.map(fs));var Q,ie,be=[];return o.forEach(function(Se,Ie){var Te,Ue=wi(Se),Ke=be[Ie-1];Ue.start=(Ie=(Te={attributes:Ue,priorPeriodAttributes:Ke?Ke.attributes:null,mpdType:_.type}).attributes,Ke=Te.priorPeriodAttributes,Te=Te.mpdType,"number"==typeof Ie.start?Ie.start:Ke&&"number"==typeof Ke.start&&"number"==typeof Ke.duration?Ke.start+Ke.duration:Ke||"static"!==Te?null:0),be.push({node:Se,attributes:Ue})}),{locations:_.locations,representationInfo:Xa(be.map((Q=_,ie=D,function(Re,Ie){var Te=Ka(ie,ni(Re.node,"BaseURL")),Ue=bi(Q,{periodStart:Re.attributes.start});"number"==typeof Re.attributes.duration&&(Ue.periodDuration=Re.attributes.duration);var Ke=ni(Re.node,"AdaptationSet");return Re=ps(Re.node),Xa(Ke.map(function Th(i,l,o){return function(ie){var s=wi(ie),a=Ka(l,ni(ie,"BaseURL")),h={role:wi(h=ni(ie,"Role")[0])};s=bi(i,s,h),(h="urn:scte:dash:cc:cea-608:2015"===(h=wi(h=ni(ie,"Accessibility")[0])).schemeIdUri?("string"!=typeof h.value?[]:h.value.split(";")).map(function(Se){var Ie,Te,Ue;return/^CC\d=/.test(Ue=Se)?(Te=(Ie=Se.split("="))[0],Ue=Ie[1]):/^CC\d$/.test(Se)&&(Te=Se),{channel:Te,language:Ue}}):"urn:scte:dash:cc:cea-708:2015"===h.schemeIdUri?("string"!=typeof h.value?[]:h.value.split(";")).map(function(Se){var Ie,Te,Ue={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};return/=/.test(Se)?(Ie=(Te=Se.split("="))[0],Te=void 0===(Te=Te[1])?"":Te,Ue.channel=Ie,Ue.language=Se,Te.split(",").forEach(function(Re){Re=(it=Re.split(":"))[0];var it=it[1];"lang"===Re?Ue.language=it:"er"===Re?Ue.easyReader=Number(it):"war"===Re?Ue.aspectRatio=Number(it):"3D"===Re&&(Ue["3D"]=Number(it))})):Ue.language=Se,Ue.channel&&(Ue.channel="SERVICE"+Ue.channel),Ue}):void 0)&&(s=bi(s,{captionServices:h})),(h=ni(ie,"Label")[0])&&h.childNodes.length&&(s=bi(s,{label:be=h.childNodes[0].nodeValue.trim()}));var _,D,Q,be=ni(ie,"ContentProtection").reduce(function(Se,Ie){var Te=wi(Ie);Te.schemeIdUri&&(Te.schemeIdUri=Te.schemeIdUri.toLowerCase());var Ue=Uh[Te.schemeIdUri];return Ue&&(Se[Ue]={attributes:Te},(Ie=ni(Ie,"cenc:pssh")[0])&&(Ie=fs(Ie),Se[Ue].pssh=Ie&&function sh(i){for(var l=window.atob?window.atob(i):Buffer.from(i,"base64").toString("binary"),o=new Uint8Array(l.length),t=0;t<l.length;t++)o[t]=l.charCodeAt(t);return o}(Ie))),Se},{});return Object.keys(be).length&&(s=bi(s,{contentProtection:be})),be=ps(ie),ie=ni(ie,"Representation"),be=bi(o,be),Xa(ie.map((_=s,D=a,Q=be,function(Se){var Ie=ni(Se,"BaseURL"),Te=(Ie=Ka(D,Ie),bi(_,wi(Se))),Ue=ps(Se);return Ie.map(function(Ke){return{segmentInfo:bi(Q,Ue),attributes:bi(Te,{baseUrl:Ke})}})})))}}(Ue,Te,Re)))})))}}(Uu(t),l);return function bh(_){var l=_.dashPlaylists,o=_.locations,Ie=void 0===(h=_.sidxMapping)?{}:h,t=_.previousManifest;if(!l.length)return{};var ie,be,Q=(D=l[0].attributes).sourceDuration,a=D.type,Se=D.suggestedPresentationDelay,s=D.minimumUpdatePeriod,Te=cs(l.filter(gh)).map(_h),h=cs(l.filter(vh)),D=(_=cs(l.filter(yh)),l.map(function(Ue){return Ue.attributes.captionServices}).filter(Boolean));return Q={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((l={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},l.SUBTITLES={},l),uri:"",duration:Q,playlists:function(Ue,Ke){if(void 0===Ke&&(Ke={}),!Object.keys(Ke).length)return Ue;for(var Re in Ue)Ue[Re]=hs(Ue[Re],Ke);return Ue}(Te,Ie)},0<=s&&(Q.minimumUpdatePeriod=1e3*s),o&&(Q.locations=o),"dynamic"===a&&(Q.suggestedPresentationDelay=Se),Se=0===Q.playlists.length,Se=h.length?function mh(i,l,o){var t;return void 0===l&&(l={}),void 0===o&&(o=!1),i=i.reduce(function(a,s){var h=s.attributes.role&&s.attributes.role.value||"",_=s.attributes.lang||"",D=s.attributes.label||"main";a[D=_&&!s.attributes.label?s.attributes.lang+(h?" ("+h+")":""):D]||(a[D]={language:_,autoselect:!0,default:"main"===h,playlists:[],uri:""});var Q,ie,be,Se,Ie,Te,Ue=hs((ie=o,be=(Q=s).attributes,Ue=Q.segments,Se=Q.sidx,Ie=Q.mediaSequence,Te=Q.discontinuitySequence,_=Q.discontinuityStarts,Ue={attributes:((Q={NAME:be.id,BANDWIDTH:be.bandwidth,CODECS:be.codecs})["PROGRAM-ID"]=1,Q),uri:"",endList:"static"===be.type,timeline:be.periodStart,resolvedUri:"",targetDuration:be.duration,discontinuitySequence:Te,discontinuityStarts:_,timelineStarts:be.timelineStarts,mediaSequence:Ie,segments:Ue},be.contentProtection&&(Ue.contentProtection=be.contentProtection),Se&&(Ue.sidx=Se),ie&&(Ue.attributes.AUDIO="audio",Ue.attributes.SUBTITLES="subs"),Ue),l);return a[D].playlists.push(Ue),typeof t>"u"&&"main"===h&&((t=s).default=!0),a},{}),t||(i[Object.keys(i)[0]].default=!0),i}(h,Ie,Se):null,Ie=_.length?(void 0===(ie=Ie)&&(ie={}),_.reduce(function(Ue,Ke){var it,_t,gt,Dt,$t,Gt,Re=Ke.attributes.lang||"text";return Ue[Re]||(Ue[Re]={language:Re,default:!1,autoselect:!1,playlists:[],uri:""}),Ue[Re].playlists.push(hs((_t=(it=Ke).attributes,Dt=it.mediaSequence,$t=it.discontinuityStarts,Gt=it.discontinuitySequence,typeof(gt=it.segments)>"u"&&(gt=[{uri:_t.baseUrl,timeline:_t.periodStart,resolvedUri:_t.baseUrl||"",duration:_t.sourceDuration,number:0}],_t.duration=_t.sourceDuration),(it={NAME:_t.id,BANDWIDTH:_t.bandwidth})["PROGRAM-ID"]=1,_t.codecs&&(it.CODECS=_t.codecs),{attributes:it,uri:"",endList:"static"===_t.type,timeline:_t.periodStart,resolvedUri:_t.baseUrl||"",targetDuration:_t.duration,timelineStarts:_t.timelineStarts,discontinuityStarts:$t,discontinuitySequence:Gt,mediaSequence:Dt,segments:gt}),ie)),Ue},{})):null,Te=(_=Te.concat(Ru(Se),Ru(Ie))).map(function(Ue){return Ue.timelineStarts}),Q.timelineStarts=Iu(Te),be=Q.timelineStarts,_.forEach(function(Ue){Ue.mediaSequence=0,Ue.discontinuitySequence=ls(be,function(Ke){return Ke.timeline===Ue.timeline}),Ue.segments&&Ue.segments.forEach(function(Ke,Re){Ke.number=Re})}),Se&&(Q.mediaGroups.AUDIO.audio=Se),Ie&&(Q.mediaGroups.SUBTITLES.subs=Ie),D.length&&(Q.mediaGroups["CLOSED-CAPTIONS"].cc=D.reduce(function(Ue,Ke){return Ke&&Ke.forEach(function(Re){var _t=Re.language;Ue[_t]={autoselect:!1,default:!1,instreamId:Re.channel,language:_t},Re.hasOwnProperty("aspectRatio")&&(Ue[_t].aspectRatio=Re.aspectRatio),Re.hasOwnProperty("easyReader")&&(Ue[_t].easyReader=Re.easyReader),Re.hasOwnProperty("3D")&&(Ue[_t]["3D"]=Re["3D"])}),Ue},{})),t?function ph(h){var l,o,t=h.oldManifest,a=h.newManifest,s=t.playlists.concat(Pu(t));return h=a.playlists.concat(Pu(a)),a.timelineStarts=Iu([t.timelineStarts,a.timelineStarts]),l=(s={oldPlaylists:s,newPlaylists:h,timelineStarts:a.timelineStarts}).oldPlaylists,o=s.timelineStarts,(h=s.newPlaylists).forEach(function(_){_.discontinuitySequence=ls(o,function(be){return be.timeline===_.timeline});var D=function(be,Se){for(var Ie=0;Ie<be.length;Ie++)if(be[Ie].attributes.NAME===Se)return be[Ie];return null}(l,_.attributes.NAME);if(D&&!_.sidx){var Q=_.segments[0],ie=ls(D.segments,function(be){return Math.abs(be.presentationTime-Q.presentationTime)<1/60});if(-1===ie)return Mu({playlist:_,mediaSequence:D.mediaSequence+D.segments.length}),_.segments[0].discontinuity=!0,_.discontinuityStarts.unshift(0),void((!D.segments.length&&_.timeline>D.timeline||D.segments.length&&_.timeline>D.segments[D.segments.length-1].timeline)&&_.discontinuitySequence--);D.segments[ie].discontinuity&&!Q.discontinuity&&(Q.discontinuity=!0,_.discontinuityStarts.unshift(0),_.discontinuitySequence--),Mu({playlist:_,mediaSequence:D.segments[ie].number})}}),a}({oldManifest:t,newManifest:Q}):Q}({dashPlaylists:t=o.representationInfo.map(Sh),locations:o.locations,sidxMapping:l.sidxMapping,previousManifest:l.previousManifest})}function Rr(i,l){return void 0===l&&(l=0),(i=fn(i)).length-l<10||!Gn(i,Hh,{offset:l})?l:Rr(i,l+=function(o,s){void 0===s&&(s=0);var a=(o=fn(o))[s+5];return s=o[s+6]<<21|o[s+7]<<14|o[s+8]<<7|o[s+9],(16&a)>>4?20+s:10+s}(i,l))}function Bu(i){return"string"==typeof i?Wl(i):i}function ju(i,l,o){var t;void 0===o&&(o=!1),t=l,l=Array.isArray(t)?t.map(Bu):[Bu(t)],i=fn(i);var a=[];if(!l.length)return a;for(var s=0;s<i.length;){var h=(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3])>>>0,_=i.subarray(s+4,s+8);if(0==h)break;var D=s+h;if(D>i.length){if(o)break;D=i.length}h=i.subarray(s+8,D),Gn(_,l[0])&&(1===l.length?a.push(h):a.push.apply(a,ju(h,l.slice(1),o))),s=D}return a}function Ya(i,l,o,t){void 0===o&&(o=!0),void 0===t&&(t=!1);var a=function(h){for(var _=1,D=0;D<gs.length&&!(h&gs[D]);D++)_++;return _}(i[l]),s=i.subarray(l,l+a);return o&&((s=Array.prototype.slice.call(i,l,l+a))[0]^=gs[a-1]),{length:a,value:function(h,D){D=void 0!==(D=(Q=void 0===D?{}:D).signed)&&D;var Q,ie=void 0!==(Q=Q.le)&&Q;return Q=((h=fn(h))[Q=ie?"reduce":"reduceRight"]||Array.prototype[Q]).call(h,function(be,Se,Ie){return Ie=ie?Ie:Math.abs(Ie+1-h.length),be+pi(Se)*Zo[Ie]},pi(0)),!D||(D=Zo[h.length]/pi(2)-pi(1))<(Q=pi(Q))&&(Q-=D,Q-=D,Q-=pi(2)),Number(Q)}(s,{signed:t}),bytes:s}}function ms(i){return"string"==typeof i?i.match(/.{1,2}/g).map(ms):"number"==typeof i?function Zc(i,l){for(var o=void 0!==(l=(void 0===l?{}:l).le)&&l,t=(l=i=pi(i="bigint"!=typeof i&&"number"!=typeof i||"number"==typeof i&&i!=i?0:i),Math.ceil(l.toString(2).length/8)),a=new Uint8Array(new ArrayBuffer(t)),s=0;s<t;s++){var h=o?s:Math.abs(s+1-a.length);a[h]=Number(i/Zo[s]&pi(255)),i<0&&(a[h]=Math.abs(~a[h]),a[h]-=0===s?1:2)}return a}(i):i}function Hu(i,l,o){if(o>=l.length)return l.length;var t=Ya(l,o,!1);if(Gn(i.bytes,t.bytes))return o;var a=Ya(l,o+t.length);return Hu(i,l,o+a.length+a.value+t.length)}function _s(i,l){var o;o=l,l=Array.isArray(o)?o.map(ms):[ms(o)],i=fn(i);var t=[];if(!l.length)return t;for(var a=0;a<i.length;){var s=Ya(i,a,!1),h=Ya(i,a+s.length),_=a+s.length+h.length;127===h.value&&(h.value=Hu(s,i,_),h.value!==i.length&&(h.value-=_));var D=i.subarray(_,D=_+h.value>i.length?i.length:_+h.value);Gn(l[0],s.bytes)&&(1===l.length?t.push(D):t=t.concat(_s(D,l.slice(1)))),a+=s.length+h.length+D.length}return t}function zu(i,l,o,t){void 0===t&&(t=1/0),i=fn(i),o=[].concat(o);for(var a,s=0,h=0;s<i.length&&(h<t||a);){var _=void 0;if(Gn(i.subarray(s),zh)?_=4:Gn(i.subarray(s),Vh)&&(_=3),_){if(h++,a)return function(Q){for(var ie=[],be=1;be<Q.length-2;)Gn(Q.subarray(be,be+3),Wh)&&(ie.push(be+2),be++),be++;if(0===ie.length)return Q;var Se=Q.length-ie.length,Ie=new Uint8Array(Se),Te=0;for(be=0;be<Se;Te++,be++)Te===ie[0]&&(Te++,ie.shift()),Ie[be]=Q[Te];return Ie}(i.subarray(a,s));var D=void 0;"h264"===l?D=31&i[s+_]:"h265"===l&&(D=i[s+_]>>1&63),-1!==o.indexOf(D)&&(a=s+_),s+=_+("h264"===l?1:2)}else s++}return i.subarray(0,0)}ku.prototype.parseFromString=function(i,Q){var o=this.options,t=new hh,a=o.domBuilder||new fa,s=o.errorHandler,h=o.locator,_=o.xmlns||{},D=/\/x?html?$/.test(Q);return Q=D?sa.HTML_ENTITIES:sa.XML_ENTITIES,h&&a.setDocumentLocator(h),t.errorHandler=function(ie,be,Se){if(!ie){if(be instanceof fa)return be;ie=be}var Ie={},Te=ie instanceof Function;function Ue(Ke){var Re=ie[Ke];!Re&&Te&&(Re=2==ie.length?function(it){ie(Ke,it)}:ie),Ie[Ke]=Re?function(it){Re("[xmldom "+Ke+"]\t"+it+function fh(i){if(i)return"\n@"+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}(Se))}:function(){}}return Se=Se||{},Ue("warning"),Ue("error"),Ue("fatalError"),Ie}(s,a,h),t.domBuilder=o.domBuilder||a,D&&(_[""]=Tu.HTML),_.xml=_.xml||Tu.XML,i&&"string"==typeof i?t.parse(i,_,Q):t.errorHandler.error("invalid doc source"),a.doc},fa.prototype={startDocument:function(){this.doc=(new dh).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,l,o,t){var a=this.doc,s=a.createElementNS(i,o||l),h=t.length;$a(this,s),this.currentElement=s,this.locator&&Pr(this.locator,s);for(var _=0;_<h;_++){i=t.getURI(_);var D=t.getValue(_),Q=(o=t.getQName(_),a.createAttributeNS(i,o));this.locator&&Pr(t.getLocator(_),Q),Q.value=Q.nodeValue=D,s.setAttributeNode(Q)}},endElement:function(i,l,o){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(i,l){},endPrefixMapping:function(i){},processingInstruction:function(i,l){l=this.doc.createProcessingInstruction(i,l),this.locator&&Pr(this.locator,l),$a(this,l)},ignorableWhitespace:function(i,l,o){},characters:function(i,l,o){var t;(i=Eu.apply(this,arguments))&&(t=this.cdata?this.doc.createCDATASection(i):this.doc.createTextNode(i),this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(i)&&this.doc.appendChild(t),this.locator&&Pr(this.locator,t))},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,l,o){i=Eu.apply(this,arguments),i=this.doc.createComment(i),this.locator&&Pr(this.locator,i),$a(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,l,o){var t=this.doc.implementation;t&&t.createDocumentType&&(o=t.createDocumentType(i,l,o),this.locator&&Pr(this.locator,o),$a(this,o),this.doc.doctype=o)},warning:function(i){},error:function(i){},fatalError:function(i){throw new ch(i,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){fa.prototype[i]=function(){return null}});var Nh={__DOMHandler:fa,DOMParser:ku,DOMImplementation:Mi.DOMImplementation,XMLSerializer:Mi.XMLSerializer}.DOMParser,Ah="INVALID_NUMBER_OF_PERIOD",Dh="DASH_EMPTY_MANIFEST",Oh="DASH_INVALID_XML",Ih="NO_BASE_URL",Ph="SEGMENT_TIME_UNSPECIFIED",Rh={static:function(a){var s=void 0===(t=a.timescale)?1:t,o=a.sourceDuration,t=a.periodDuration;return s=a.duration/s,"number"==typeof(a=Du(a.endNumber))?{start:0,end:a}:"number"==typeof t?{start:0,end:t/s}:{start:0,end:o/s}},dynamic:function(a){var l=a.NOW,s=a.clientOffset,o=a.availabilityStartTime,t=void 0===(D=a.timescale)?1:D,Q=a.duration,h=void 0===(_=a.periodStart)?0:_,_=void 0===(D=a.minimumUpdatePeriod)?0:D,D=void 0===(D=a.timeShiftBufferDepth)?1/0:D;return a=Du(a.endNumber),s=(l+s)/1e3,h=o+h,_=Math.ceil((s+_-h)*t/Q),D=Math.floor((s-h-D)*t/Q),Q=Math.floor((s-h)*t/Q),{start:Math.max(0,D),end:"number"==typeof a?a:Math.min(_,Q)}}},Lh=["AUDIO","SUBTITLES"],Fh=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Vu={mediaPresentationDuration:Mr,availabilityStartTime:function(i){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)/1e3},minimumUpdatePeriod:Mr,suggestedPresentationDelay:Mr,type:function(i){return i},timeShiftBufferDepth:Mr,start:Mr,width:function(i){return parseInt(i,10)},height:function(i){return parseInt(i,10)},bandwidth:function(i){return parseInt(i,10)},startNumber:function(i){return parseInt(i,10)},timescale:function(i){return parseInt(i,10)},presentationTimeOffset:function(i){return parseInt(i,10)},duration:function(i){var l=parseInt(i,10);return isNaN(l)?Mr(i):l},d:function(i){return parseInt(i,10)},t:function(i){return parseInt(i,10)},r:function(i){return parseInt(i,10)},DEFAULT:function(i){return i}},Uh={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Bh=Math.pow(2,32),Wu=function(i){var l=new DataView(i.buffer,i.byteOffset,i.byteLength);return l.getBigUint64?(i=l.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(i):i:l.getUint32(0)*Bh+l.getUint32(4)},Hh=fn([73,68,51]),Ja={EBML:fn([26,69,223,163]),DocType:fn([66,130]),Segment:fn([24,83,128,103]),SegmentInfo:fn([21,73,169,102]),Tracks:fn([22,84,174,107]),Track:fn([174]),TrackNumber:fn([215]),DefaultDuration:fn([35,227,131]),TrackEntry:fn([174]),TrackType:fn([131]),FlagDefault:fn([136]),CodecID:fn([134]),CodecPrivate:fn([99,162]),VideoTrack:fn([224]),AudioTrack:fn([225]),Cluster:fn([31,67,182,117]),Timestamp:fn([231]),TimestampScale:fn([42,215,177]),BlockGroup:fn([160]),BlockDuration:fn([155]),Block:fn([161]),SimpleBlock:fn([163])},gs=[128,64,32,16,8,4,2,1],zh=fn([0,0,0,1]),Vh=fn([0,0,1]),Wh=fn([0,0,3]),Ei={webm:fn([119,101,98,109]),matroska:fn([109,97,116,114,111,115,107,97]),flac:fn([102,76,97,67]),ogg:fn([79,103,103,83]),ac3:fn([11,119]),riff:fn([82,73,70,70]),avi:fn([65,86,73]),wav:fn([87,65,86,69]),"3gp":fn([102,116,121,112,51,103]),mp4:fn([102,116,121,112]),fmp4:fn([115,116,121,112]),mov:fn([102,116,121,112,113,116]),moov:fn([109,111,111,118]),moof:fn([109,111,111,102])},Lr={aac:function(i){return Gn(i,[255,16],{offset:Rr(i),mask:[255,22]})},mp3:function(i){return Gn(i,[255,2],{offset:Rr(i),mask:[255,6]})},webm:function(i){return Gn(i=_s(i,[Ja.EBML,Ja.DocType])[0],Ei.webm)},mkv:function(i){return Gn(i=_s(i,[Ja.EBML,Ja.DocType])[0],Ei.matroska)},mp4:function(i){return!Lr["3gp"](i)&&!Lr.mov(i)&&(!(!Gn(i,Ei.mp4,{offset:4})&&!Gn(i,Ei.fmp4,{offset:4}))||!(!Gn(i,Ei.moof,{offset:4})&&!Gn(i,Ei.moov,{offset:4}))||void 0)},mov:function(i){return Gn(i,Ei.mov,{offset:4})},"3gp":function(i){return Gn(i,Ei["3gp"],{offset:4})},ac3:function(i){var l=Rr(i);return Gn(i,Ei.ac3,{offset:l})},ts:function(i){if(i.length<189&&1<=i.length)return 71===i[0];for(var l=0;l+188<i.length&&l<188;){if(71===i[l]&&71===i[l+188])return!0;l+=1}return!1},flac:function(i){var l=Rr(i);return Gn(i,Ei.flac,{offset:l})},ogg:function(i){return Gn(i,Ei.ogg)},avi:function(i){return Gn(i,Ei.riff)&&Gn(i,Ei.avi,{offset:8})},wav:function(i){return Gn(i,Ei.riff)&&Gn(i,Ei.wav,{offset:8})},h264:function(i){return zu(i,"h264",7,3).length},h265:function(i){return zu(i,"h265",[32,33],3).length}},vs=Object.keys(Lr).filter(function(i){return"ts"!==i&&"h264"!==i&&"h265"!==i}).concat(["ts","h264","h265"]);function ys(i){i=fn(i);for(var l=0;l<vs.length;l++){var o=vs[l];if(of[o](i))return o}return""}function Za(i,l,o){return i&&o&&o.responseURL&&l!==o.responseURL?o.responseURL:l}function qi(i){return ut.log.debug?ut.log.debug.bind(ut,"VHS:",i+" >"):function(){}}function qu(i,l){var o,t=[];if(i&&i.length)for(o=0;o<i.length;o++)l(i.start(o),i.end(o))&&t.push([i.start(o),i.end(o)]);return ut.createTimeRanges(t)}function Fr(i,l){return qu(i,function(o,t){return o-.1<=l&&l<=t+.1})}function Qa(i,l){return qu(i,function(o){return l<=o-_r})}function $u(i){var l=[];if(!i||!i.length)return"";for(var o=0;o<i.length;o++)l.push(i.start(o)+" => "+i.end(o));return l.join(", ")}function mr(i){for(var l=[],o=0;o<i.length;o++)l.push({start:i.start(o),end:i.end(o)});return l}function Xu(i){if(i&&i.length&&i.end)return i.end(i.length-1)}function bs(i,l){var o=0;if(!i||!i.length)return o;for(var t=0;t<i.length;t++){var a=i.start(t),s=i.end(t);s<l||(o+=a<l&&l<=s?s-l:s-a)}return o}function ws(i,l){if(!l.preload)return l.duration;var o=0;return(l.parts||[]).forEach(function(t){o+=t.duration}),(l.preloadHints||[]).forEach(function(t){"PART"===t.type&&(o+=i.partTargetDuration)}),o}function xs(i){return(i.segments||[]).reduce(function(l,o,t){return o.parts?o.parts.forEach(function(a,s){l.push({duration:a.duration,segmentIndex:t,partIndex:s,part:a,segment:o})}):l.push({duration:o.duration,segmentIndex:t,partIndex:null,segment:o,part:null}),l},[])}function Gu(i){return(i=i.segments&&i.segments.length&&i.segments[i.segments.length-1])&&i.parts||[]}function Ku(i){var l=i.preloadSegment;if(l)return i=l.parts,(l=(l.preloadHints||[]).reduce(function(o,t){return o+("PART"===t.type?1:0)},0))+(i&&i.length?i.length:0)}function Yu(i,l){return l.endList?0:i&&i.suggestedPresentationDelay?i.suggestedPresentationDelay:(i=0<Gu(l).length)&&l.serverControl&&l.serverControl.partHoldBack?l.serverControl.partHoldBack:i&&l.partTargetDuration?3*l.partTargetDuration:l.serverControl&&l.serverControl.holdBack?l.serverControl.holdBack:l.targetDuration?3*l.targetDuration:0}function Ju(i,l,o){if((l=typeof l>"u"?i.mediaSequence+i.segments.length:l)<i.mediaSequence)return 0;var t=function(a,s){var h=0,_=s-a.mediaSequence,D=a.segments[_];if(D){if(typeof D.start<"u")return{result:D.start,precise:!0};if(typeof D.end<"u")return{result:D.end-D.duration,precise:!0}}for(;_--;){if(typeof(D=a.segments[_]).end<"u")return{result:h+D.end,precise:!0};if(h+=ws(a,D),typeof D.start<"u")return{result:h+D.start,precise:!0}}return{result:h,precise:!1}}(i,l);return t.precise?t.result:(l=function(a,s){for(var h,_=0,D=s-a.mediaSequence;D<a.segments.length;D++){if(typeof(h=a.segments[D]).start<"u")return{result:h.start-_,precise:!0};if(_+=ws(a,h),typeof h.end<"u")return{result:h.end-_,precise:!0}}return{result:-1,precise:!1}}(i,l)).precise?l.result:t.result+o}function Zu(i,l,o){if(!i)return 0;if("number"!=typeof o&&(o=0),typeof l>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return window.Infinity}return Ju(i,l,o)}function ma(i){var l=i.defaultDuration,o=i.durationList,t=i.startIndex,a=i.endIndex,s=0;if(a<t&&(t=(i=[a,t])[0],a=i[1]),t<0){for(var h=t;h<Math.min(0,a);h++)s+=l;t=0}for(var _=t;_<a;_++)s+=o[_].duration;return s}function Qu(i,l,o,t){return i&&i.segments?i.endList?Zu(i):null===l?null:(l=Ju(i,i.mediaSequence+i.segments.length,l=l||0),o&&(l-=t="number"==typeof t?t:Yu(null,i)),Math.max(0,l)):null}function ed(i){return i.excludeUntil&&i.excludeUntil>Date.now()}function Ss(i){return i.excludeUntil&&i.excludeUntil===1/0}function eo(i){var l=ed(i);return!i.disabled&&!l}function td(i,l){return l.attributes&&l.attributes[i]}function Ts(i,l){if(1===i.playlists.length)return!0;var o=l.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter(function(t){return!!eo(t)&&(t.attributes.BANDWIDTH||0)<o}).length}function ks(i,l){return!(!i&&!l||!i&&l||i&&!l||i!==l&&(!i.id||!l.id||i.id!==l.id)&&(!i.resolvedUri||!l.resolvedUri||i.resolvedUri!==l.resolvedUri)&&(!i.uri||!l.uri||i.uri!==l.uri))}function nd(i,l){var o,t=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{},a=!1;for(o in t){for(var s in t[o])if(a=l(t[o][s]))break;if(a)break}return!!a}function _a(i){if(!i||!i.playlists||!i.playlists.length)return nd(i,function(t){return t.playlists&&t.playlists.length||t.uri});for(var l=0;l<i.playlists.length;l++){var o=function(s){var a=i.playlists[s];return(s=a.attributes&&a.attributes.CODECS)&&s.split(",").every(Hl)||nd(i,function(h){return ks(a,h)})?"continue":{v:!1}}(l);if("continue"!==o&&"object"==typeof o)return o.v}return!0}function Es(i,l){return i+"-"+l}function ga(i,l){i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(o){if(i.mediaGroups[o])for(var t in i.mediaGroups[o])for(var a in i.mediaGroups[o][t])l(i.mediaGroups[o][t][a],o,t,a)})}function id(t){var l=t.playlist,o=t.uri;l.id=t=t.id,l.playlistErrors_=0,o&&(l.uri=o),l.attributes=l.attributes||{}}function rd(i,l){i.uri=l;for(var o=0;o<i.playlists.length;o++)i.playlists[o].uri||(i.playlists[o].uri="placeholder-uri-"+o);var t,a=_a(i);ga(i,function(s,h,_,D){var Q="placeholder-uri-"+h+"-"+_+"-"+D;if(!s.playlists||!s.playlists.length){if(a&&"AUDIO"===h&&!s.uri)for(var ie=0;ie<i.playlists.length;ie++){var be=i.playlists[ie];if(be.attributes&&be.attributes.AUDIO&&be.attributes.AUDIO===_)return}s.playlists=[H({},s)]}s.playlists.forEach(function(Se,Ie){var Te=Es(Ie,Q);Se.uri?Se.resolvedUri=Se.resolvedUri||$i(i.uri,Se.uri):(Se.uri=0===Ie?Q:Te,Se.resolvedUri=Se.uri),Se.id=Se.id||Te,Se.attributes=Se.attributes||{},i.playlists[Se.id]=Se,i.playlists[Se.uri]=Se})}),function(s){for(var h=s.playlists.length;h--;){var _=s.playlists[h];id({playlist:_,id:Es(h,_.uri)}),_.resolvedUri=$i(s.uri,_.uri),s.playlists[_.id]=_,(s.playlists[_.uri]=_).attributes.BANDWIDTH||Id.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(i),ga(t=i,function(s){s.uri&&(s.resolvedUri=$i(t.uri,s.uri))})}function ad(i,l){!i.resolvedUri&&i.uri&&(i.resolvedUri=$i(l,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=$i(l,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=$i(l,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=$i(l,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(function(o){o.resolvedUri||(o.resolvedUri=$i(l,o.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(function(o){o.resolvedUri||(o.resolvedUri=$i(l,o.uri))})}function od(i){var l=i.segments||[],o=i.preloadSegment;if(o&&o.parts&&o.parts.length){if(o.preloadHints)for(var t=0;t<o.preloadHints.length;t++)if("MAP"===o.preloadHints[t].type)return l;o.duration=i.targetDuration,o.preload=!0,l.push(o)}return l}function sd(i,l){return i===l||i.segments&&l.segments&&i.segments.length===l.segments.length&&i.endList===l.endList&&i.mediaSequence===l.mediaSequence&&i.preloadSegment===l.preloadSegment}function Cs(i,l,o){void 0===o&&(o=sd);var t=oo(i,{}),a=t.playlists[l.id];if(!a||o(a,l))return null;l.segments=od(l);var s=oo(a,l);if(s.preloadSegment&&!l.preloadSegment&&delete s.preloadSegment,a.segments){if(l.skip){l.segments=l.segments||[];for(var h=0;h<l.skip.skippedSegments;h++)l.segments.unshift({skipped:!0})}s.segments=function qh(i,l,o){var t=i.slice(),a=l.slice();o=o||0;for(var s,h=[],_=0;_<a.length;_++){var D=t[_+o],Q=a[_];D?(s=D.map||s,h.push(function(ie,be){if(!ie)return be;var Se=oo(ie,be);if(ie.preloadHints&&!be.preloadHints&&delete Se.preloadHints,ie.parts&&!be.parts)delete Se.parts;else if(ie.parts&&be.parts)for(var Ie=0;Ie<be.parts.length;Ie++)ie.parts&&ie.parts[Ie]&&(Se.parts[Ie]=oo(ie.parts[Ie],be.parts[Ie]));return!ie.skipped&&be.skipped&&(Se.skipped=!1),ie.preload&&!be.preload&&(Se.preload=!1),Se}(D,Q))):(s&&!Q.map&&(Q.map=s),h.push(Q))}return h}(a.segments,l.segments,l.mediaSequence-a.mediaSequence)}s.segments.forEach(function(D){ad(D,s.resolvedUri)});for(var _=0;_<t.playlists.length;_++)t.playlists[_].id===l.id&&(t.playlists[_]=s);return t.playlists[l.id]=s,t.playlists[l.uri]=s,ga(i,function(D,Q,ie,be){if(D.playlists)for(var Se=0;Se<D.playlists.length;Se++)l.id===D.playlists[Se].id&&(D.playlists[Se]=s)}),t}function Ns(i,l){var o=i.segments||[],t=(o=(t=o[o.length-1])&&t.parts&&t.parts[t.parts.length-1])&&o.duration||t&&t.duration;return l&&t?1e3*t:500*(i.partTargetDuration||i.targetDuration||10)}function As(i,l,o,t){var a="arraybuffer"===i.responseType?i.response:i.responseText;!l&&a&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=a.byteLength||a.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),o.headers&&(i.responseHeaders=o.headers),l&&"ETIMEDOUT"===l.code&&(i.timedout=!0),t(l=l||i.aborted||200===o.statusCode||206===o.statusCode||0===o.statusCode?l:new Error("XHR Failed with a response of: "+(i&&(a||i.responseText))),i)}function ld(){function i(l,o){l=lf({timeout:45e3},l);var t=i.beforeRequest||ut.Vhs.xhr.beforeRequest;!t||"function"!=typeof t||(t=t(l))&&(l=t);var a=(!0===ut.Vhs.xhr.original?sf:ut.Vhs.xhr)(l,function(h,_){return As(a,h,_,o)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=l.uri,a.requestTime=Date.now(),a}return i.original=!0,i}function Ds(i){var l,o={};return i.byterange&&(o.Range="bytes="+(i=(l=i.byterange).offset)+"-"+(l="bigint"==typeof l.offset||"bigint"==typeof l.length?window.BigInt(l.offset)+window.BigInt(l.length)-window.BigInt(1):l.offset+l.length-1)),o}function $h(i,l){return i=i.toString(16),"00".substring(0,2-i.length)+i+(l%2?" ":"")}function Xh(i){return 32<=i&&i<126?String.fromCharCode(i):"."}function ud(i){var l={};return Object.keys(i).forEach(function(o){var t=i[o];l[o]=Vl(t)?{bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:t}),l}function to(i){var l=i.byterange||{length:1/0,offset:0};return[l.length,l.offset,i.resolvedUri].join(",")}function dd(i){return i.resolvedUri}function cd(i){for(var l=Array.prototype.slice.call(i),o="",t=0;t<l.length/16;t++)o+=l.slice(16*t,16*t+16).map($h).join("")+" "+l.slice(16*t,16*t+16).map(Xh).join("")+"\n";return o}function hd(i){var l=i.programTime,o=i.playlist,t=i.retryCount,a=void 0===t?2:t,s=i.seekTo,h=i.pauseAfterSeek,_=void 0===h||h,D=i.tech,Q=i.callback;if(!Q)throw new Error("seekToProgramTime: callback must be provided");return typeof l<"u"&&o&&s?o.endList||D.hasStarted_?function(ie){if(!ie.segments||0===ie.segments.length)return!1;for(var be=0;be<ie.segments.length;be++)if(!ie.segments[be].dateTimeObject)return!1;return!0}(o)?(t=function(Ke,be){var Se;try{Se=new Date(Ke)}catch{return null}if(!be||!be.segments||0===be.segments.length||Se<(Te=be.segments[0]).dateTimeObject)return null;for(var Ie=0;Ie<be.segments.length-1;Ie++){var Te=be.segments[Ie];if(Se<be.segments[Ie+1].dateTimeObject)break}var Ue=be.segments[be.segments.length-1],Re=(Ke=Ue.dateTimeObject,Ue.videoTimingInfo?(Re=Ue.videoTimingInfo).transmuxedPresentationEnd-Re.transmuxedPresentationStart-Re.transmuxerPrependedSeconds:Ue.duration+.25*Ue.duration);return new Date(Ke.getTime()+1e3*Re)<Se?null:{segment:Te=Ke<Se?Ue:Te,estimatedStart:Te.videoTimingInfo?Te.videoTimingInfo.transmuxedPresentationStart:Ii.duration(be,be.mediaSequence+be.segments.indexOf(Te)),type:Te.videoTimingInfo?"accurate":"estimate"}}(l,o))?(i=function(ie,be){var Se;try{Ie=new Date(ie),Se=new Date(be)}catch{}var Ie=Ie.getTime();return(Se.getTime()-Ie)/1e3}((h=t.segment).dateTimeObject,l),"estimate"===t.type?0===a?Q({message:l+" is not buffered yet. Try again"}):(s(t.estimatedStart+i),void D.one("seeked",function(){hd({programTime:l,playlist:o,retryCount:a-1,seekTo:s,pauseAfterSeek:_,tech:D,callback:Q})})):(i=h.start+i,D.one("seeked",function(){return Q(null,D.currentTime())}),_&&D.pause(),void s(i))):Q({message:l+" was not found in the stream"}):Q({message:"programDateTime tags must be provided in the manifest "+o.resolvedUri}):Q({message:"player must be playing a live stream to start buffering"}):Q({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}function pd(i,l){if(!sd(i,l)||i.sidx&&l.sidx&&(i.sidx.offset!==l.sidx.offset||i.sidx.length!==l.sidx.length)||!i.sidx&&l.sidx||i.sidx&&!l.sidx||i.segments&&!l.segments||!i.segments&&l.segments)return!1;if(!i.segments&&!l.segments)return!0;for(var o=0;o<i.segments.length;o++){var t=i.segments[o],a=l.segments[o];if(t.uri!==a.uri||(t.byterange||a.byterange)&&(a=a.byterange,(t=t.byterange)&&!a||!t&&a||t.offset!==a.offset||t.length!==a.length))return!1}return!0}function md(i,l){var o,t={};for(o in i){var a=i[o].sidx;if(a){var s=Ga(a);if(!l[s])break;var h=l[s].sidxInfo;(Boolean(!h.map&&!a.map)||Boolean(h.map&&a.map&&h.map.byterange.offset===a.map.byterange.offset&&h.map.byterange.length===a.map.byterange.length))&&h.uri===a.uri&&h.byterange.offset===a.byterange.offset&&h.byterange.length===a.byterange.length&&(t[s]=l[s])}}return t}function _d(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i}function gd(i){var l=i.transmuxer,o=i.bytes,t=i.audioAppendStart,a=i.gopsToAlignWith,s=i.remux,h=i.onData,_=i.onTrackInfo,D=i.onAudioTimingInfo,Q=i.onVideoTimingInfo,ie=i.onVideoSegmentTimingInfo,be=i.onAudioSegmentTimingInfo,Se=i.onId3,Ie=i.onCaptions,Te=i.onDone,Ue=i.onEndedTimeline,Ke=i.onTransmuxerLog,Re=i.isEndOfTimeline,it={buffer:[]},_t=Re;l.onmessage=function(gt){var Dt,$t,un,an,mn,cn,Pn,bn,Ln,Mn;l.currentTransmux===i&&("data"===gt.data.action&&(un=h,an=(Mn=($t=gt).data.segment).type,mn=Mn.initSegment,cn=Mn.captions,Pn=Mn.captionStreams,bn=Mn.metadata,Ln=Mn.videoFrameDtsTime,Mn=Mn.videoFramePtsTime,it.buffer.push({captions:cn,captionStreams:Pn,metadata:bn}),$t=$t.data.segment.boxes||{data:$t.data.segment.data},mn={type:an,data:new Uint8Array($t.data,$t.data.byteOffset,$t.data.byteLength),initSegment:new Uint8Array(mn.data,mn.byteOffset,mn.byteLength)},typeof Ln<"u"&&(mn.videoFrameDtsTime=Ln),typeof Mn<"u"&&(mn.videoFramePtsTime=Mn),un(mn)),"trackinfo"===gt.data.action&&_(gt.data.trackInfo),"gopInfo"===gt.data.action&&(it.gopInfo=gt.data.gopInfo),"audioTimingInfo"===gt.data.action&&D(gt.data.audioTimingInfo),"videoTimingInfo"===gt.data.action&&Q(gt.data.videoTimingInfo),"videoSegmentTimingInfo"===gt.data.action&&ie(gt.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===gt.data.action&&be(gt.data.audioSegmentTimingInfo),"id3Frame"===gt.data.action&&Se([gt.data.id3Frame],gt.data.id3Frame.dispatchType),"caption"===gt.data.action&&Ie(gt.data.caption),"endedtimeline"===gt.data.action&&(_t=!1,Ue()),"log"===gt.data.action&&Ke(gt.data.log),"transmuxed"===gt.data.type&&(_t||(l.onmessage=null,gt=(Dt={transmuxedData:it,callback:Te}).transmuxedData,Dt=Dt.callback,gt.buffer=[],Dt(gt),Md(l))))},t&&l.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(a)&&l.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s<"u"&&l.postMessage({action:"setRemux",remux:s}),o.byteLength&&(a=o instanceof ArrayBuffer?o:o.buffer,s=o instanceof ArrayBuffer?0:o.byteOffset,l.postMessage({action:"push",data:a,byteOffset:s,byteLength:o.byteLength},[a])),Re&&l.postMessage({action:"endTimeline"}),l.postMessage({action:"flush"})}function vd(i,l){i.postMessage({action:l}),Md(i)}function no(i){var l=i.transmuxer,o=i.endAction||i.action,t=i.callback,a=H({},i,{endAction:null,transmuxer:null,callback:null}),s=function h(_){_.data.action===o&&(l.removeEventListener("message",h),_.data.data&&(_.data.data=new Uint8Array(_.data.data,i.byteOffset||0,i.byteLength||_.data.data.byteLength),i.data&&(i.data=_.data.data)),t(_.data))};l.addEventListener("message",s),i.data?(s=i.data instanceof ArrayBuffer,a.byteOffset=s?0:i.data.byteOffset,a.byteLength=i.data.byteLength,l.postMessage(a,s=[s?i.data:i.data.buffer])):l.postMessage(a)}function Os(i){i.forEach(function(l){l.abort()})}function Is(i,l){return l.timedout?{status:l.status,message:"HLS request timed-out at URL: "+l.uri,code:Rs,xhr:l}:l.aborted?{status:l.status,message:"HLS request aborted at URL: "+l.uri,code:Ls,xhr:l}:i?{status:l.status,message:"HLS request errored at URL: "+l.uri,code:so,xhr:l}:"arraybuffer"===l.responseType&&0===l.response.byteLength?{status:l.status,message:"Empty HLS response at URL: "+l.uri,code:so,xhr:l}:null}function yd(i,l,o){return function(h,a){var s=a.response;if(h=Is(h,a))return o(h,i);if(16!==s.byteLength)return o({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:so,xhr:a},i);s=new DataView(s);for(var _=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),D=0;D<l.length;D++)l[D].bytes=_;return o(null,i)}}function bd(i,l){var o=ys(i.map.bytes);if("mp4"!==o)return l({internal:!0,message:"Found unsupported "+(o||"unknown")+" container for initialization segment at URL: "+(i.map.resolvedUri||i.map.uri),code:so});no({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function(h){var s=h.tracks;return i.map.bytes=h=h.data,s.forEach(function(_){i.map.tracks=i.map.tracks||{},i.map.tracks[_.type]||"number"==typeof(i.map.tracks[_.type]=_).id&&_.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[_.id]=_.timescale)}),l(null)}})}function wd(i){var l=i.segment,o=i.bytes,t=i.trackInfoFn,a=i.timingInfoFn,s=i.videoSegmentTimingInfoFn,h=i.audioSegmentTimingInfoFn,_=i.id3Fn,D=i.captionsFn,Q=i.isEndOfTimeline,ie=i.endedTimelineFn,be=i.dataFn,Se=i.doneFn,Ie=i.onTransmuxerLog,Te=new Uint8Array(o);if(0<ju(Te,["moof"]).length){l.isFmp4=!0;var Ue=l.map.tracks,Ke={isFmp4:!0,hasVideo:!!Ue.video,hasAudio:!!Ue.audio};Ue.audio&&Ue.audio.codec&&"enca"!==Ue.audio.codec&&(Ke.audioCodec=Ue.audio.codec),Ue.video&&Ue.video.codec&&"encv"!==Ue.video.codec&&(Ke.videoCodec=Ue.video.codec),Ue.video&&Ue.audio&&(Ke.isMuxed=!0),t(l,Ke);var Re=function(it){be(l,{data:Te,type:Ke.hasAudio&&!Ke.isMuxed?"audio":"video"}),it&&it.length&&D(l,it),Se(null,l,{})};no({action:"probeMp4StartTime",timescales:l.map.timescales,data:Te,transmuxer:l.transmuxer,callback:function(gt){var _t=gt.data;gt=gt.startTime,o=_t.buffer,l.bytes=Te=_t,Ke.hasAudio&&!Ke.isMuxed&&a(l,"audio","start",gt),Ke.hasVideo&&a(l,"video","start",gt),Ue.video&&_t.byteLength&&l.transmuxer?no({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:l.transmuxer,data:Te,timescales:l.map.timescales,trackIds:[Ue.video.id],callback:function(Dt){o=Dt.data.buffer,l.bytes=Te=Dt.data,Dt.logs.forEach(function($t){Ie(ut.mergeOptions($t,{stream:"mp4CaptionParser"}))}),Re(Dt.captions)}}):Re()}})}else if(l.transmuxer){if(typeof l.container>"u"&&(l.container=ys(Te)),"ts"!==l.container&&"aac"!==l.container)return t(l,{hasAudio:!1,hasVideo:!1}),Se(null,l,{}),0;!function Qh(Te){var l=Te.segment,o=Te.bytes,t=Te.trackInfoFn,a=Te.timingInfoFn,s=Te.videoSegmentTimingInfoFn,h=Te.audioSegmentTimingInfoFn,_=Te.id3Fn,D=Te.captionsFn,Q=Te.isEndOfTimeline,ie=Te.endedTimelineFn,be=Te.dataFn,Se=Te.doneFn,Ie=Te.onTransmuxerLog,Ue=(Te=l.map&&l.map.tracks||{},Boolean(Te.audio&&Te.video)),Ke=a.bind(null,l,"audio","start"),Re=a.bind(null,l,"audio","end"),it=a.bind(null,l,"video","start"),_t=a.bind(null,l,"video","end");no({action:"probeTs",transmuxer:l.transmuxer,data:o,baseStartTime:l.baseStartTime,callback:function(gt){l.bytes=o=gt.data,(gt=gt.result)&&(t(l,{hasAudio:gt.hasAudio,hasVideo:gt.hasVideo,isMuxed:Ue}),t=null,gt.hasAudio&&!Ue&&Ke(gt.audioStart),gt.hasVideo&&it(gt.videoStart),it=Ke=null),function Jh(i){if(!i.transmuxer.currentTransmux)return i.transmuxer.currentTransmux=i,void gd(i);i.transmuxer.transmuxQueue.push(i)}({bytes:o,transmuxer:l.transmuxer,audioAppendStart:l.audioAppendStart,gopsToAlignWith:l.gopsToAlignWith,remux:Ue,onData:function(Dt){Dt.type="combined"===Dt.type?"video":Dt.type,be(l,Dt)},onTrackInfo:function(Dt){t&&(Ue&&(Dt.isMuxed=!0),t(l,Dt))},onAudioTimingInfo:function(Dt){Ke&&typeof Dt.start<"u"&&(Ke(Dt.start),Ke=null),Re&&typeof Dt.end<"u"&&Re(Dt.end)},onVideoTimingInfo:function(Dt){it&&typeof Dt.start<"u"&&(it(Dt.start),it=null),_t&&typeof Dt.end<"u"&&_t(Dt.end)},onVideoSegmentTimingInfo:function(Dt){s(Dt)},onAudioSegmentTimingInfo:function(Dt){h(Dt)},onId3:function(Dt,$t){_(l,Dt,$t)},onCaptions:function(Dt){D(l,[Dt])},isEndOfTimeline:Q,onEndedTimeline:function(){ie()},onTransmuxerLog:Ie,onDone:function(Dt){Se&&(Dt.type="combined"===Dt.type?"video":Dt.type,Se(null,l,Dt))}})}})}({segment:l,bytes:o,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:h,id3Fn:_,captionsFn:D,isEndOfTimeline:Q,endedTimelineFn:ie,dataFn:be,doneFn:Se,onTransmuxerLog:Ie})}else Se(null,l,{})}function xd(h,l){var o=h.id,t=h.key,a=h.encryptedBytes,s=h.decryptionWorker;h=function _(D){D.data.source===o&&(s.removeEventListener("message",_),D=D.data.decrypted,l(new Uint8Array(D.bytes,D.byteOffset,D.byteLength)))},s.addEventListener("message",h),h=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),s.postMessage(ud({source:o,encrypted:a,key:h,iv:t.iv}),[a.buffer,h.buffer])}function Sd(i,l){return l=l.attributes||{},i&&i.mediaGroups&&i.mediaGroups.AUDIO&&l.AUDIO&&i.mediaGroups.AUDIO[l.AUDIO]}function io(i){var l={};return i.forEach(function(s){var t=s.mediaType,a=s.type;s=s.details,l[t]=l[t]||[],l[t].push(jl(""+a+s))}),Object.keys(l).forEach(function(o){return 1<l[o].length?(cf("multiple "+o+" codecs found as attributes: "+l[o].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(l[o]=null)):void(l[o]=l[o][0])}),l}function Td(i){var l=0;return i.audio&&l++,i.video&&l++,l}function va(i,l){var o,t=l.attributes||{},a=io(function(s){if((s=s.attributes||{}).CODECS)return Yi(s.CODECS)}(l)||[]);return Sd(i,l)&&!a.audio&&!function(s,D){if(!Sd(s,D))return!0;var _,Q=s.mediaGroups.AUDIO[(D=D.attributes||{}).AUDIO];for(_ in Q)if(!Q[_].uri&&!Q[_].playlists)return!0;return!1}(i,l)&&(o=io(function(s,h){if(!s.mediaGroups.AUDIO||!h)return null;var _,D=s.mediaGroups.AUDIO[h];if(!D)return null;for(_ in D){var Q=D[_];if(Q.default&&Q.playlists)return Yi(Q.playlists[0].attributes.CODECS)}return null}(i,t.AUDIO)||[])).audio&&(a.audio=o.audio),a}function kd(i){if(i&&i.playlist){var l=i.playlist;return JSON.stringify({id:l.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:l.attributes&&l.attributes.CODECS||""})}}function ro(i,l){return(i=i&&window.getComputedStyle(i))?i[l]:""}function Ur(i,l){var o=i.slice();i.sort(function(t,a){var s=l(t,a);return 0===s?o.indexOf(t)-o.indexOf(a):s})}function Ps(i,l){var o,t;return(o=(o=i.attributes.BANDWIDTH?i.attributes.BANDWIDTH:o)||window.Number.MAX_VALUE)-((t=l.attributes.BANDWIDTH?l.attributes.BANDWIDTH:t)||window.Number.MAX_VALUE)}function Ed(i,l,o,t,a,s){if(i){var h={bandwidth:l,width:o,height:t,limitRenditionByPlayerDimensions:a},Q=i.playlists;Ii.isAudioOnly(i)&&(Q=s.getAudioTrackPlaylists_(),h.audioOnly=!0);var _=Q.map(function(Re){return{bandwidth:Re.attributes&&Re.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:Re.attributes&&Re.attributes.RESOLUTION&&Re.attributes.RESOLUTION.width,height:Re.attributes&&Re.attributes.RESOLUTION&&Re.attributes.RESOLUTION.height,playlist:Re}});Ur(_,function(Re,it){return Re.bandwidth-it.bandwidth});var be,Se,Ie,D=(_=_.filter(function(Re){return!Ii.isIncompatible(Re.playlist)})).filter(function(Re){return Ii.isEnabled(Re.playlist)}),Te=(i=(D=D.length?D:_.filter(function(Re){return!Ii.isDisabled(Re.playlist)})).filter(function(Re){return Re.bandwidth*hi.BANDWIDTH_VARIANCE<l}))[i.length-1];if(Q=i.filter(function(Re){return Re.bandwidth===Te.bandwidth})[0],!1===a){var ie=Q||D[0]||_[0];return ie&&ie.playlist?(a=Q?"bandwidthBestRep":"sortedPlaylistReps",D[0]&&(a="enabledPlaylistReps"),lo("choosing "+kd(ie)+" using "+a+" with options",h),ie.playlist):(lo("could not choose a playlist with options",h),null)}Ur(ie=i.filter(function(Re){return Re.width&&Re.height}),function(Re,it){return Re.width-it.width}),Te=(i=ie.filter(function(Re){return Re.width===o&&Re.height===t}))[i.length-1],(i=i.filter(function(Re){return Re.bandwidth===Te.bandwidth})[0])||(Se=(be=ie.filter(function(Re){return Re.width>o||Re.height>t})).filter(function(Re){return Re.width===be[0].width&&Re.height===be[0].height}),Te=Se[Se.length-1],Se=Se.filter(function(Re){return Re.bandwidth===Te.bandwidth})[0]),s.experimentalLeastPixelDiffSelector&&(Ur(Ue=ie.map(function(Re){return Re.pixelDiff=Math.abs(Re.width-o)+Math.abs(Re.height-t),Re}),function(Re,it){return Re.pixelDiff===it.pixelDiff?it.bandwidth-Re.bandwidth:Re.pixelDiff-it.pixelDiff}),Ie=Ue[0]);var Ue=Ie||Se||i||Q||D[0]||_[0];return Ue&&Ue.playlist?(_="sortedPlaylistReps",Ie?_="leastPixelDiffRep":Se?_="resolutionPlusOneRep":i?_="resolutionBestRep":Q?_="bandwidthBestRep":D[0]&&(_="enabledPlaylistReps"),lo("choosing "+kd(Ue)+" using "+_+" with options",h),Ue.playlist):(lo("could not choose a playlist with options",h),null)}}function ya(i,l,o){var t,a;if(o&&o.cues)for(t=o.cues.length;t--;)(a=o.cues[t]).startTime>=i&&a.endTime<=l&&o.removeCue(a)}function Cd(i){return"number"==typeof i&&isFinite(i)}function Br(i){var l=i.startOfSegment,o=i.duration,t=i.segment,a=i.part,s=i.playlist,h=s.mediaSequence,_=s.id,D=s.segments,Q=i.mediaIndex,ie=i.partIndex,be=i.timeline,Se=(void 0===D?[]:D).length-1,Ie="mediaIndex/partIndex increment";return i.getMediaInfoForTime?Ie="getMediaInfoForTime ("+i.getMediaInfoForTime+")":i.isSyncRequest&&(Ie="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(Ie+=" with independent "+i.independent),D=i.segment.uri?"segment":"pre-segment",i=(s="number"==typeof ie)?Ku({preloadSegment:t})-1:0,D+" ["+(h+Q)+"/"+(h+Se)+"]"+(s?" part ["+ie+"/"+i+"]":"")+" segment start/end ["+t.start+" => "+t.end+"]"+(s?" part start/end ["+a.start+" => "+a.end+"]":"")+" startOfSegment ["+l+"] duration ["+o+"] timeline ["+be+"] selected by ["+Ie+"] playlist ["+_+"]"}function Nd(i){return i+"TimingInfo"}function Ad(s){var l=s.timelineChangeController,o=s.currentTimeline,t=s.segmentTimeline,a=s.loaderType;if(s=s.audioDisabled,o!==t){if("audio"===a)return!(o=l.lastTimelineChange({type:"main"}))||o.to!==t;if("main"===a&&s)return!((l=l.pendingTimelineChange({type:"audio"}))&&l.to===t)}}function Dd(o){var l=o.segmentDuration;return o=o.maxDuration,!!l&&Math.round(l)>o+_r}vs.forEach(function(i){var l=Lr[i];Lr[i]=function(o){return l(fn(o))}});var of=Lr,ao=9e4,$i=function(i,l){if(/^[a-z]+:/i.test(l))return l;/^data:/.test(i)&&(i=window.location&&window.location.href||"");var o="function"==typeof window.URL,t=/^\/\//.test(i),a=!window.location&&!/\/\//i.test(i);return o?i=new window.URL(i,window.location||Bl):/\/\//i.test(i)||(i=Fa.buildAbsoluteURL(window.location&&window.location.href||"",i)),o?(o=new URL(l,i),a?o.href.slice(Bl.length):t?o.href.slice(o.protocol.length):o.href):Fa.buildAbsoluteURL(i,l)},_r=1/30,Od=ut.createTimeRange,Ii={liveEdgeDelay:Yu,duration:Zu,seekable:function(i,l,a){var t=l||0;return null===(a=Qu(i,l,!0,a))?Od():Od(t,a)},getMediaInfoForTime:function(i){for(var l=i.playlist,o=i.currentTime,t=i.startingSegmentIndex,a=i.startingPartIndex,s=i.startTime,h=i.experimentalExactManifestTimings,_=o-s,D=xs(l),Q=0,ie=0;ie<D.length;ie++){var be=D[ie];if(t===be.segmentIndex&&("number"!=typeof a||"number"!=typeof be.partIndex||a===be.partIndex)){Q=ie;break}}if(_<0){if(0<Q)for(var Se=Q-1;0<=Se;Se--){var Ie=D[Se];if(_+=Ie.duration,h){if(_<0)continue}else if(_+_r<=0)continue;return{partIndex:Ie.partIndex,segmentIndex:Ie.segmentIndex,startTime:s-ma({defaultDuration:l.targetDuration,durationList:D,startIndex:Q,endIndex:Se})}}return{partIndex:D[0]&&D[0].partIndex||null,segmentIndex:D[0]&&D[0].segmentIndex||0,startTime:o}}if(Q<0){for(var Te=Q;Te<0;Te++)if((_-=l.targetDuration)<0)return{partIndex:D[0]&&D[0].partIndex||null,segmentIndex:D[0]&&D[0].segmentIndex||0,startTime:o};Q=0}for(var Ue=Q;Ue<D.length;Ue++){var Ke=D[Ue];if(_-=Ke.duration,h){if(0<_)continue}else if(0<=_-_r)continue;return{partIndex:Ke.partIndex,segmentIndex:Ke.segmentIndex,startTime:s+ma({defaultDuration:l.targetDuration,durationList:D,startIndex:Q,endIndex:Ue})}}return{segmentIndex:D[D.length-1].segmentIndex,partIndex:D[D.length-1].partIndex,startTime:o}},isEnabled:eo,isDisabled:function(i){return i.disabled},isBlacklisted:ed,isIncompatible:Ss,playlistEnd:Qu,isAes:function(i){for(var l=0;l<i.segments.length;l++)if(i.segments[l].key)return!0;return!1},hasAttribute:td,estimateSegmentRequestTime:function(i,l,o,t){return td("BANDWIDTH",o)?(i*o.attributes.BANDWIDTH-8*(t=void 0===t?0:t))/l:NaN},isLowestEnabledRendition:Ts,isAudioOnly:_a,playlistMatch:ks,segmentDurationWithParts:ws},Id=ut.log,oo=ut.mergeOptions,jr=function(i){function l(t,a,D){var h;if(void 0===D&&(D={}),h=i.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");h.logger_=qi("PlaylistLoader");var _=void 0!==(_=D.withCredentials)&&_;return D=void 0!==(D=D.handleManifestRedirects)&&D,h.src=t,h.vhs_=a,h.withCredentials=_,h.handleManifestRedirects=D,h.customTagParsers=(a=a.options_)&&a.customTagParsers||[],h.customTagMappers=a&&a.customTagMappers||[],h.experimentalLLHLS=a&&a.experimentalLLHLS||!1,ut.browser.IE_VERSION&&(h.experimentalLLHLS=!1),h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(Pe(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}ke(l,i);var o=l.prototype;return o.handleMediaupdatetimeout_=function(){var t,a,s=this;"HAVE_METADATA"===this.state&&(t=this.media(),a=$i(this.master.uri,t.uri),this.experimentalLLHLS&&(a=function(h,_){if(_.endList||!_.serverControl)return h;var D,Q,ie,be,Se={};return _.serverControl.canBlockReload&&(D=_.mediaSequence+_.segments.length,(ie=_.preloadSegment)&&(Q=ie.parts||[],-1<(ie=Ku(_)-1)&&ie!=Q.length-1&&(Se._HLS_part=ie),(-1<ie||Q.length)&&D--),Se._HLS_msn=D),_.serverControl&&_.serverControl.canSkipUntil&&(Se._HLS_skip=_.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(Se).length&&(be=new window.URL(h),["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(Ie){Se.hasOwnProperty(Ie)&&be.searchParams.set(Ie,Se[Ie])}),h=be.toString()),h}(a,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(h,_){if(s.request)return h?s.playlistRequestError(s.request,s.media(),"HAVE_METADATA"):void s.haveMetadata({playlistString:s.request.responseText,url:s.media().uri,id:s.media().id})}))},o.playlistRequestError=function(t,_,s){var h=_.uri;_=_.id,this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[_],status:t.status,message:"HLS playlist request error at URL: "+h+".",responseText:t.responseText,code:500<=t.status?4:2},this.trigger("error")},o.parseManifest_=function(t){var a=this,s=t.url;return function(Se){var _=Se.onwarn,D=Se.oninfo,Q=Se.manifestString,ie=void 0===(be=Se.customTagParsers)?[]:be,be=void 0===(be=Se.customTagMappers)?[]:be,Ie=(Se=Se.experimentalLLHLS,new nh);_&&Ie.on("warn",_),D&&Ie.on("info",D),ie.forEach(function(Ke){return Ie.addParser(Ke)}),be.forEach(function(Ke){return Ie.addTagMapper(Ke)}),Ie.push(Q),Ie.end();var Te=Ie.manifest;Se||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Ke){Te.hasOwnProperty(Ke)&&delete Te[Ke]}),Te.segments&&Te.segments.forEach(function(Ke){["parts","preloadHints"].forEach(function(Re){Ke.hasOwnProperty(Re)&&delete Ke[Re]})})),Te.targetDuration||(Ue=10,Te.segments&&Te.segments.length&&(Ue=Te.segments.reduce(function(Ke,Re){return Math.max(Ke,Re.duration)},0)),_&&_("manifest has no targetDuration defaulting to "+Ue),Te.targetDuration=Ue);var Ue=Gu(Te);return Ue.length&&!Te.partTargetDuration&&(Ue=Ue.reduce(function(Ke,Re){return Math.max(Ke,Re.duration)},0),_&&(_("manifest has no partTargetDuration defaulting to "+Ue),Id.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),Te.partTargetDuration=Ue),Te}({onwarn:function(h){return a.logger_("m3u8-parser warn for "+s+": "+(h=h.message))},oninfo:function(h){return a.logger_("m3u8-parser info for "+s+": "+(h=h.message))},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},o.haveMetadata=function(_){var a=_.playlistString,s=_.playlistObject,h=_.url;_=_.id,this.request=null,this.state="HAVE_METADATA",(a=s||this.parseManifest_({url:h,manifestString:a})).lastRequest=Date.now(),id({playlist:a,uri:h,id:_}),h=Cs(this.master,a),this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,h?(this.master=h,this.media_=this.master.playlists[_]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ns(this.media(),!!h)),this.trigger("loadedplaylist")},o.dispose=function(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.off()},o.stopRequest=function(){var t;this.request&&(t=this.request,this.request=null,t.onreadystatechange=null,t.abort())},o.media=function(t,a){var s=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(window.clearTimeout(this.finalRenditionTimeout),a){var h=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,t,!1),h)}else{var _=this.state;if(a=!this.media_||t.id!==this.media_.id,(h=this.master.playlists[t.id])&&h.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(a&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===_?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(Ns(t,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(ie,be){if(s.request){if(t.lastRequest=Date.now(),t.resolvedUri=Za(s.handleManifestRedirects,t.resolvedUri,be),ie)return s.playlistRequestError(s.request,t,_);s.haveMetadata({playlistString:be.responseText,url:t.uri,id:t.id}),s.trigger("HAVE_MASTER"===_?"loadedmetadata":"mediachange")}})}}},o.pause=function(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},o.load=function(t){var a=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();t?(t=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},t)):this.started?this.trigger(s&&!s.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},o.updateMediaUpdateTimeout_=function(t){var a=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(t)},t))},o.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=window.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){t.setupInitialPlaylist(t.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(t.request){if(t.request=null,a)return t.error={status:s.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:s.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Za(t.handleManifestRedirects,t.src,s),s=t.parseManifest_({manifestString:s.responseText,url:t.src}),t.setupInitialPlaylist(s)}})},o.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},o.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,rd(this.master,this.srcUri()),t.playlists.forEach(function(D){D.segments=od(D),D.segments.forEach(function(Q){ad(Q,D.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var a,s,h,_=this.srcUri()||window.location.href;this.master=(s=Es(0,a=_),(h={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:a,id:s,resolvedUri:a,attributes:{}}]}).playlists[s]=h.playlists[0],h.playlists[a]=h.playlists[0],h),this.haveMetadata({playlistObject:t,url:_,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},l}(ii=ut.EventTarget),sf=ut.xhr,lf=ut.mergeOptions,Pd=(Ji=Object.freeze({__proto__:null,createTransferableMessage:ud,initSegmentId:to,segmentKeyId:dd,hexDump:cd,tagDump:function(i){return cd(i=i.bytes)},textRanges:function(i){for(var l,o,t="",a=0;a<i.length;a++)t+=(l=i).start(o=a)+"-"+l.end(o)+" ";return t}}),ut.mergeOptions),Ms=function(i){function l(t,a,s,h){var _;if(void 0===s&&(s={}),(_=i.call(this)||this).masterPlaylistLoader_=h||Pe(_),h||(_.isMaster_=!0),h=void 0!==(h=s.withCredentials)&&h,s=void 0!==(s=s.handleManifestRedirects)&&s,_.vhs_=a,_.withCredentials=h,_.handleManifestRedirects=s,!t)throw new Error("A non-empty playlist URL or object is required");return _.on("minimumUpdatePeriod",function(){_.refreshXml_()}),_.on("mediaupdatetimeout",function(){_.refreshMedia_(_.media().id)}),_.state="HAVE_NOTHING",_.loadedPlaylists_={},_.logger_=qi("DashPlaylistLoader"),_.isMaster_?(_.masterPlaylistLoader_.srcUrl=t,_.masterPlaylistLoader_.sidxMapping_={}):_.childPlaylist_=t,_}ke(l,i);var o=l.prototype;return o.requestErrored_=function(t,a,s){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2}:t,s&&(this.state=s),this.trigger("error"),!0):void 0)},o.addSidxSegments_=function(t,a,s){var h,_,D=this,Q=t.sidx&&Ga(t.sidx);t.sidx&&Q&&!this.masterPlaylistLoader_.sidxMapping_[Q]?(h=Za(this.handleManifestRedirects,t.sidx.resolvedUri),_=function(ie,be){if(!D.requestErrored_(ie,be,a)){var Se;ie=D.masterPlaylistLoader_.sidxMapping_;try{Se=function(i){var l=new DataView(i.buffer,i.byteOffset,i.byteLength),o={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:l.getUint32(4),timescale:l.getUint32(8)},t=12;0===o.version?(o.earliestPresentationTime=l.getUint32(t),o.firstOffset=l.getUint32(t+4),t+=8):(o.earliestPresentationTime=Wu(i.subarray(t)),o.firstOffset=Wu(i.subarray(t+8)),t+=16);var a=l.getUint16(t+=2);for(t+=2;0<a;t+=12,a--)o.references.push({referenceType:(128&i[t])>>>7,referencedSize:2147483647&l.getUint32(t),subsegmentDuration:l.getUint32(t+4),startsWithSap:!!(128&i[t+8]),sapType:(112&i[t+8])>>>4,sapDeltaTime:268435455&l.getUint32(t+8)});return o}(fn(be.response).subarray(8))}catch(Te){return void D.requestErrored_(Te,be,a)}return ie[Q]={sidxInfo:t.sidx,sidx:Se},ds(t,Se,t.sidx.resolvedUri),s(!0)}},this.request=function Kh(i,l,o){function t(Q,ie,be,Se){return ie.abort(),_=!0,o(Q,ie,be,Se)}function a(Q,ie){if(!_){if(Q)return t(Q,ie,"",h);var be=ie.responseText.substring(h&&h.byteLength||0,ie.responseText.length);return h=function(){for(var Se=arguments.length,Ie=new Array(Se),Te=0;Te<Se;Te++)Ie[Te]=arguments[Te];if((Ie=Ie.filter(function(it){return it&&(it.byteLength||it.length)&&"string"!=typeof it})).length<=1)return fn(Ie[0]);var Ue=Ie.reduce(function(it,_t,gt){return it+(_t.byteLength||_t.length)},0),Ke=new Uint8Array(Ue),Re=0;return Ie.forEach(function(it){it=fn(it),Ke.set(it,Re),Re+=it.byteLength}),Ke}(h,Wl(be,!0)),s=s||Rr(h),h.length<10||s&&h.length<s+2||"ts"===(be=ys(h))&&h.length<188||!be&&h.length<376?function fd(i,l){if(4===i.readyState)return l()}(ie,function(){return t(Q,ie,"",h)}):t(null,ie,be,h)}}var s,h=[],_=!1,D=l({uri:i,beforeSend:function(Q){Q.overrideMimeType("text/plain; charset=x-user-defined"),Q.addEventListener("progress",function(ie){return As(Q,null,{statusCode:Q.status},a)})}},function(Q,ie){return As(D,Q,ie,a)});return D}(h,this.vhs_.xhr,function(ie,be,Te,Ie){return ie?_(ie,be):Te&&"mp4"===Te?(Te=(Ue=t.sidx.byterange).offset,Ie.length>=(Ue=Ue.length)+Te?_(ie,{response:Ie.subarray(Te,Te+Ue),status:be.status,uri:be.uri}):void(D.request=D.vhs_.xhr({uri:h,responseType:"arraybuffer",headers:Ds({byterange:t.sidx.byterange})},_))):_({status:be.status,message:"Unsupported "+(Te||"unknown")+" container type for sidx segment at URL: "+h,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},be);var Ue})):this.mediaRequest_=window.setTimeout(function(){return s(!1)},0)},o.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window.clearTimeout(this.minimumUpdatePeriodTimeout_),window.clearTimeout(this.mediaRequest_),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},o.hasPendingRequest=function(){return this.request||this.mediaRequest_},o.stopRequest=function(){var t;this.request&&(t=this.request,this.request=null,t.onreadystatechange=null,t.abort())},o.media=function(t){var a=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var h=!this.media_||t.id!==this.media_.id;if(h&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(h&&(this.trigger("mediachanging"),this.trigger("mediachange")));h&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,s,function(_){a.haveMetadata({startingState:s,playlist:t})}))},o.haveMetadata=function(s){var a=s.startingState;s=s.playlist,this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),this.trigger("HAVE_MASTER"===a?"loadedmetadata":"mediachange")},o.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(window.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},o.load=function(t){var a=this;window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();t?(t=s?s.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(function(){return a.load()},t)):this.started?s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},o.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_(function(a,s){t.haveMaster_(),t.hasPendingRequest()||t.media_||t.media(t.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=window.setTimeout(function(){return t.haveMaster_()},0)},o.requestMaster_=function(t){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,h){if(!a.requestErrored_(s,h)){var _=h.responseText!==a.masterPlaylistLoader_.masterXml_;return a.masterPlaylistLoader_.masterXml_=h.responseText,a.masterLoaded_=h.responseHeaders&&h.responseHeaders.date?Date.parse(h.responseHeaders.date):Date.now(),a.masterPlaylistLoader_.srcUrl=Za(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,h),_?(a.handleMaster_(),void a.syncClientServerClock_(function(){return t(h,_)})):t(h,_)}"HAVE_NOTHING"===a.state&&(a.started=!1)})},o.syncClientServerClock_=function(t){var a=this,s=function Ch(i){return function(l){if(!(l=ni(l,"UTCTiming")[0]))return null;var o=wi(l);switch(o.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":o.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":o.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":o.method="DIRECT",o.value=Date.parse(o.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return o}(Uu(i))}(this.masterPlaylistLoader_.masterXml_);return null===s?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===s.method?(this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:$i(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(h,_){if(a.request){if(h)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),t();_="HEAD"===s.method?_.responseHeaders&&_.responseHeaders.date?Date.parse(_.responseHeaders.date):a.masterLoaded_:Date.parse(_.responseText),a.masterPlaylistLoader_.clientOffset_=_-Date.now(),t()}}))},o.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},o.handleMaster_=function(){this.mediaRequest_=null;var h=this.masterPlaylistLoader_.master,_=(rd(D=Eh((D={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:h}).masterXml,{manifestUri:_=D.srcUrl,clientOffset:D.clientOffset,sidxMapping:D.sidxMapping,previousManifest:D=D.previousManifest}),_),D);h&&(_=function(Q,ie,be){for(var Se=!0,Ie=Pd(Q,{duration:ie.duration,minimumUpdatePeriod:ie.minimumUpdatePeriod,timelineStarts:ie.timelineStarts}),Te=0;Te<ie.playlists.length;Te++){var Ue,Ke=ie.playlists[Te];Ke.sidx&&(Ue=Ga(Ke.sidx),be&&be[Ue]&&be[Ue].sidx&&ds(Ke,be[Ue].sidx,Ke.sidx.resolvedUri)),(Ke=Cs(Ie,Ke,pd))&&(Ie=Ke,Se=!1)}return ga(ie,function(Re,it,_t,gt){var Dt;Re.playlists&&Re.playlists.length&&(Dt=Re.playlists[0].id,(Re=Cs(Ie,Re.playlists[0],pd))&&((Ie=Re).mediaGroups[it][_t][gt].playlists[0]=Ie.playlists[Dt],Se=!1))}),(Se=ie.minimumUpdatePeriod===Q.minimumUpdatePeriod&&Se)?null:Ie}(h,_,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=_||h;var D=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return D&&D!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=D),(!h||_&&_.minimumUpdatePeriod!==h.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(_)},o.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(window.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var a=t.master&&t.master.minimumUpdatePeriod;0===a&&(t.media()?a=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof a||a<=0?a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout"):this.createMUPTimeout_(a)},o.createMUPTimeout_=function(t){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=window.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(t)},t)},o.refreshXml_=function(){var t=this;this.requestMaster_(function(a,s){var h,_;s&&(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=(_=md((s=t.masterPlaylistLoader_.master).playlists,h=t.masterPlaylistLoader_.sidxMapping_),ga(s,function(D,Q,ie,be){D.playlists&&D.playlists.length&&(_=Pd(_,md(D=D.playlists,h)))}),_),t.addSidxSegments_(t.media(),t.state,function(D){t.refreshMedia_(t.media().id)}))})},o.refreshMedia_=function(t){var a=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,h=!this.media_||this.media_!==s[t];h?this.media_=s[t]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function _(){a.media().endList||(a.mediaUpdateTimeout=window.setTimeout(function(){a.trigger("mediaupdatetimeout"),_()},Ns(a.media(),Boolean(h))))}(),this.trigger("loadedplaylist")},l}(Ci=ut.EventTarget),hi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},uf=(Vn=function(i){return function(){var l=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch{var s=new BlobBuilder;return s.append(a),URL.createObjectURL(s.getBlob())}}(i),o=_d(new Worker(l));o.objURL=l;var t=o.terminate;return o.on=o.addEventListener,o.off=o.removeEventListener,o.terminate=function(){return URL.revokeObjectURL(l),t.call(this)},o}})((Mi=function(i){return"var browserWorkerPolyFill = "+_d.toString()+";\nbrowserWorkerPolyFill(self);\n"+i})((ii=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)})(function(){var ui=function(){this.init=function(){var L={};this.on=function(se,ye){L[se]||(L[se]=[]),L[se]=L[se].concat(ye)},this.off=function(se,ye){return!!L[se]&&(ye=L[se].indexOf(ye),L[se]=L[se].slice(),L[se].splice(ye,1),-1<ye)},this.trigger=function(se){var ye,pe,me,Ne=L[se];if(Ne)if(2===arguments.length)for(pe=Ne.length,ye=0;ye<pe;++ye)Ne[ye].call(this,arguments[1]);else{for(me=[],ye=arguments.length,ye=1;ye<arguments.length;++ye)me.push(arguments[ye]);for(pe=Ne.length,ye=0;ye<pe;++ye)Ne[ye].apply(this,me)}},this.dispose=function(){L={}}}};ui.prototype.pipe=function(L){return this.on("data",function(se){L.push(se)}),this.on("done",function(se){L.flush(se)}),this.on("partialdone",function(se){L.partialFlush(se)}),this.on("endedtimeline",function(se){L.endTimeline(se)}),this.on("reset",function(se){L.reset(se)}),L},ui.prototype.push=function(L){this.trigger("data",L)},ui.prototype.flush=function(L){this.trigger("done",L)},ui.prototype.partialFlush=function(L){this.trigger("partialdone",L)},ui.prototype.endTimeline=function(L){this.trigger("endedtimeline",L)},ui.prototype.reset=function(L){this.trigger("reset",L)};var i,l,o,t,a,s,h,_,D,Q,ie,be,Se,Ie,Te,Ue,Ke,Re,it,_t,gt,Dt,$t,Gt,un,an,mn,cn,Pn,bn,Ln,Mn,Nn,Ni,on,Kt,On,wn,Kn,ei=ui,Xn=Math.pow(2,32),ir=(Sa={getUint64:function(L){var se=new DataView(L.buffer,L.byteOffset,L.byteLength);return se.getBigUint64?(L=se.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(L):L:se.getUint32(0)*Xn+se.getUint32(4)},MAX_UINT32:Xn}).MAX_UINT32;function oi(L,se){var ye={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return ye.dataOffset=se,ye.compositionTimeOffset=L.pts-L.dts,ye.duration=L.duration,ye.size=4*L.length,ye.size+=L.byteLength,L.keyFrame&&(ye.flags.dependsOn=2,ye.flags.isNonSyncSample=0),ye}function pn(L){for(var se=[];L--;)se.push(0);return se}(function(){if(gt={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array<"u"){for(var L in gt)gt.hasOwnProperty(L)&&(gt[L]=[L.charCodeAt(0),L.charCodeAt(1),L.charCodeAt(2),L.charCodeAt(3)]);Dt=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Gt=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),$t=new Uint8Array([0,0,0,1]),un=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),an=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),mn={video:un,audio:an},bn=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Pn=new Uint8Array([0,0,0,0,0,0,0,0]),Ln=new Uint8Array([0,0,0,0,0,0,0,0]),Mn=Ln,Nn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ni=Ln,cn=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),i=function(L){for(var se,ye=[],pe=0,me=1;me<arguments.length;me++)ye.push(arguments[me]);for(me=ye.length;me--;)pe+=ye[me].byteLength;for(se=new Uint8Array(pe+8),new DataView(se.buffer,se.byteOffset,se.byteLength).setUint32(0,se.byteLength),se.set(L,4),me=0,pe=8;me<ye.length;me++)se.set(ye[me],pe),pe+=ye[me].byteLength;return se},l=function(){return i(gt.dinf,i(gt.dref,bn))},o=function(L){return i(gt.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,L.audioobjecttype<<3|L.samplingfrequencyindex>>>1,L.samplingfrequencyindex<<7|L.channelcount<<3,6,1,2]))},Ie=function(L){return i(gt.hdlr,mn[L])},Se=function(L){var se=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,L.duration>>>24&255,L.duration>>>16&255,L.duration>>>8&255,255&L.duration,85,196,0,0]);return L.samplerate&&(se[12]=L.samplerate>>>24&255,se[13]=L.samplerate>>>16&255,se[14]=L.samplerate>>>8&255,se[15]=255&L.samplerate),i(gt.mdhd,se)},be=function(L){return i(gt.mdia,Se(L),Ie(L.type),s(L))},a=function(L){return i(gt.mfhd,new Uint8Array([0,0,0,0,(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L]))},s=function(L){return i(gt.minf,"video"===L.type?i(gt.vmhd,cn):i(gt.smhd,Pn),l(),Ue(L))},ba=function(L,se){for(var ye=[],pe=se.length;pe--;)ye[pe]=Re(se[pe]);return i.apply(null,[gt.moof,a(L)].concat(ye))},h=function(L){for(var se=L.length,ye=[];se--;)ye[se]=Q(L[se]);return i.apply(null,[gt.moov,D(4294967295)].concat(ye).concat(_(L)))},_=function(L){for(var se=L.length,ye=[];se--;)ye[se]=it(L[se]);return i.apply(null,[gt.mvex].concat(ye))},D=function(L){return L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),i(gt.mvhd,L)},Te=function(L){for(var se,ye=L.samples||[],pe=new Uint8Array(4+ye.length),me=0;me<ye.length;me++)pe[me+4]=(se=ye[me].flags).dependsOn<<4|se.isDependedOn<<2|se.hasRedundancy;return i(gt.sdtp,pe)},Ue=function(L){return i(gt.stbl,Ke(L),i(gt.stts,Ni),i(gt.stsc,Mn),i(gt.stsz,Nn),i(gt.stco,Ln))},Ke=function(L){return i(gt.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===L.type?on:Kt)(L))},on=function(L){for(var se,ye,pe=L.sps||[],me=L.pps||[],Ne=[],$e=[],ze=0;ze<pe.length;ze++)Ne.push((65280&pe[ze].byteLength)>>>8),Ne.push(255&pe[ze].byteLength),Ne=Ne.concat(Array.prototype.slice.call(pe[ze]));for(ze=0;ze<me.length;ze++)$e.push((65280&me[ze].byteLength)>>>8),$e.push(255&me[ze].byteLength),$e=$e.concat(Array.prototype.slice.call(me[ze]));return se=[gt.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&L.width)>>8,255&L.width,(65280&L.height)>>8,255&L.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(gt.avcC,new Uint8Array([1,L.profileIdc,L.profileCompatibility,L.levelIdc,255].concat([pe.length],Ne,[me.length],$e))),i(gt.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],L.sarRatio&&(ye=L.sarRatio[0],L=L.sarRatio[1],se.push(i(gt.pasp,new Uint8Array([(4278190080&ye)>>24,(16711680&ye)>>16,(65280&ye)>>8,255&ye,(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L])))),i.apply(null,se)},Kt=function(L){return i(gt.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&L.channelcount)>>8,255&L.channelcount,(65280&L.samplesize)>>8,255&L.samplesize,0,0,0,0,(65280&L.samplerate)>>8,255&L.samplerate,0,0]),o(L))},ie=function(L){return L=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&L.id)>>24,(16711680&L.id)>>16,(65280&L.id)>>8,255&L.id,0,0,0,0,(4278190080&L.duration)>>24,(16711680&L.duration)>>16,(65280&L.duration)>>8,255&L.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&L.width)>>8,255&L.width,0,0,(65280&L.height)>>8,255&L.height,0,0]),i(gt.tkhd,L)},Re=function(L){var se,ye=i(gt.tfhd,new Uint8Array([0,0,0,58,(4278190080&L.id)>>24,(16711680&L.id)>>16,(65280&L.id)>>8,255&L.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),me=Math.floor(L.baseMediaDecodeTime/ir),pe=Math.floor(L.baseMediaDecodeTime%ir);return me=i(gt.tfdt,new Uint8Array([1,0,0,0,me>>>24&255,me>>>16&255,me>>>8&255,255&me,pe>>>24&255,pe>>>16&255,pe>>>8&255,255&pe])),"audio"===L.type?(se=_t(L,92),i(gt.traf,ye,me,se)):(pe=Te(L),se=_t(L,pe.length+92),i(gt.traf,ye,me,se,pe))},Q=function(L){return L.duration=L.duration||4294967295,i(gt.trak,ie(L),be(L))},it=function(L){var se=new Uint8Array([0,0,0,0,(4278190080&L.id)>>24,(16711680&L.id)>>16,(65280&L.id)>>8,255&L.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==L.type&&(se[se.length-1]=0),i(gt.trex,se)},On=function(L,se){var ye=0,pe=0,me=0,Ne=0;return L.length&&(void 0!==L[0].duration&&(ye=1),void 0!==L[0].size&&(pe=2),void 0!==L[0].flags&&(me=4),void 0!==L[0].compositionTimeOffset&&(Ne=8)),[0,0,ye|pe|me|Ne,1,(4278190080&L.length)>>>24,(16711680&L.length)>>>16,(65280&L.length)>>>8,255&L.length,(4278190080&se)>>>24,(16711680&se)>>>16,(65280&se)>>>8,255&se]},wn=function(L,se){var ye,pe,me,Ne,$e=L.samples||[];for(se=On($e,se+=20+16*$e.length),(pe=new Uint8Array(se.length+16*$e.length)).set(se),ye=se.length,Ne=0;Ne<$e.length;Ne++)pe[ye++]=(4278190080&(me=$e[Ne]).duration)>>>24,pe[ye++]=(16711680&me.duration)>>>16,pe[ye++]=(65280&me.duration)>>>8,pe[ye++]=255&me.duration,pe[ye++]=(4278190080&me.size)>>>24,pe[ye++]=(16711680&me.size)>>>16,pe[ye++]=(65280&me.size)>>>8,pe[ye++]=255&me.size,pe[ye++]=me.flags.isLeading<<2|me.flags.dependsOn,pe[ye++]=me.flags.isDependedOn<<6|me.flags.hasRedundancy<<4|me.flags.paddingValue<<1|me.flags.isNonSyncSample,pe[ye++]=61440&me.flags.degradationPriority,pe[ye++]=15&me.flags.degradationPriority,pe[ye++]=(4278190080&me.compositionTimeOffset)>>>24,pe[ye++]=(16711680&me.compositionTimeOffset)>>>16,pe[ye++]=(65280&me.compositionTimeOffset)>>>8,pe[ye++]=255&me.compositionTimeOffset;return i(gt.trun,pe)},Kn=function(L,se){var ye,pe,me,Ne,$e=L.samples||[];for(se=On($e,se+=20+8*$e.length),(ye=new Uint8Array(se.length+8*$e.length)).set(se),pe=se.length,Ne=0;Ne<$e.length;Ne++)ye[pe++]=(4278190080&(me=$e[Ne]).duration)>>>24,ye[pe++]=(16711680&me.duration)>>>16,ye[pe++]=(65280&me.duration)>>>8,ye[pe++]=255&me.duration,ye[pe++]=(4278190080&me.size)>>>24,ye[pe++]=(16711680&me.size)>>>16,ye[pe++]=(65280&me.size)>>>8,ye[pe++]=255&me.size;return i(gt.trun,ye)},_t=function(L,se){return("audio"===L.type?Kn:wn)(L,se)},t=function(){return i(gt.ftyp,Dt,$t,Dt,Gt)};var Li,Yn=function(L){return i(gt.mdat,L)},zr=ba,lr=[33,16,5,32,164,27],zs=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ec=function(L){return 9e4*L},Vs=function(L){return L/9e4},gr=9e4,tc=ec,xi=Vs,nc=function(L,se){return ec(function(L,se){return L/se}(L,se))},Ws=function(L,se,ye){return Vs(ye?L:L-se)},Vr=function(L){delete L.minSegmentDts,delete L.maxSegmentDts,delete L.minSegmentPts,delete L.maxSegmentPts},ic=function(L,se){var ye=L.minSegmentDts;return se||(ye-=L.timelineStartInfo.dts),se=L.timelineStartInfo.baseMediaDecodeTime,se+=ye,se=Math.max(0,se),"audio"===L.type&&(se*=L.samplerate/9e4,se=Math.floor(se)),se},qs=function(L,se){"number"==typeof se.pts&&(void 0===L.timelineStartInfo.pts&&(L.timelineStartInfo.pts=se.pts),L.minSegmentPts=void 0===L.minSegmentPts?se.pts:Math.min(L.minSegmentPts,se.pts),L.maxSegmentPts=void 0===L.maxSegmentPts?se.pts:Math.max(L.maxSegmentPts,se.pts)),"number"==typeof se.dts&&(void 0===L.timelineStartInfo.dts&&(L.timelineStartInfo.dts=se.dts),L.minSegmentDts=void 0===L.minSegmentDts?se.dts:Math.min(L.minSegmentDts,se.dts),L.maxSegmentDts=void 0===L.maxSegmentDts?se.dts:Math.max(L.maxSegmentDts,se.dts))},al=function(L){for(var se=L.byteLength,ye=[],pe=1;pe<se-2;)0===L[pe]&&0===L[pe+1]&&3===L[pe+2]?(ye.push(pe+2),pe+=2):pe++;if(0===ye.length)return L;var me=se-ye.length,Ne=new Uint8Array(me),$e=0;for(pe=0;pe<me;$e++,pe++)$e===ye[0]&&($e++,ye.shift()),Ne[pe]=L[$e];return Ne};function fo(L){return 32<=L&&L<=127||160<=L&&L<=255}function rr(L){this.windowNum=L,this.reset()}((Pi=function L(se){se=se||{},L.prototype.init.call(this),this.parse708captions_="boolean"!=typeof se.parse708captions||se.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Qn(0,0),new Qn(0,1),new Qn(1,0),new Qn(1,1)],this.parse708captions_&&(this.cc708Stream_=new qn({captionServices:se.captionServices})),this.reset(),this.ccStreams_.forEach(function(ye){ye.on("data",this.trigger.bind(this,"data")),ye.on("partialdone",this.trigger.bind(this,"partialdone")),ye.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))}).prototype=new ei).push=function(L){var se,ye;if("sei_rbsp"===L.nalUnitType&&(se=function(L){for(var se=0,ye={payloadType:-1,payloadSize:0},pe=0,me=0;se<L.byteLength&&128!==L[se];){for(;255===L[se];)pe+=255,se++;for(pe+=L[se++];255===L[se];)me+=255,se++;if(me+=L[se++],!ye.payload&&4===pe){if("GA94"===String.fromCharCode(L[se+3],L[se+4],L[se+5],L[se+6])){ye.payloadType=pe,ye.payloadSize=me,ye.payload=L.subarray(se,se+me);break}ye.payload=void 0}se+=me,me=pe=0}return ye}(L.escapedRBSP)).payload&&4===se.payloadType&&(ye=function(L){return 181!==L.payload[0]||49!=(L.payload[1]<<8|L.payload[2])||"GA94"!==String.fromCharCode(L.payload[3],L.payload[4],L.payload[5],L.payload[6])||3!==L.payload[7]?null:L.payload.subarray(8,L.payload.length-1)}(se)))if(L.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(L.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));ye=function(L,se){var ye,pe,me,Ne,$e=[];if(!(64&se[0]))return $e;for(pe=31&se[0],ye=0;ye<pe;ye++)Ne={type:3&se[2+(me=3*ye)],pts:L},4&se[2+me]&&(Ne.ccData=se[3+me]<<8|se[4+me],$e.push(Ne));return $e}(L.pts,ye),this.captionPackets_=this.captionPackets_.concat(ye),this.latestDts_!==L.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=L.dts}},Pi.prototype.flushCCStreams=function(L){this.ccStreams_.forEach(function(se){return"flush"===L?se.flush():se.partialFlush()},this)},Pi.prototype.flushStream=function(L){this.captionPackets_.length&&(this.captionPackets_.forEach(function(se,ye){se.presortIndex=ye}),this.captionPackets_.sort(function(se,ye){return se.pts===ye.pts?se.presortIndex-ye.presortIndex:se.pts-ye.pts}),this.captionPackets_.forEach(function(se){se.type<2?this.dispatchCea608Packet(se):this.dispatchCea708Packet(se)},this),this.captionPackets_.length=0),this.flushCCStreams(L)},Pi.prototype.flush=function(){return this.flushStream("flush")},Pi.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Pi.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(L){L.reset()})},Pi.prototype.dispatchCea608Packet=function(L){this.setsTextOrXDSActive(L)?this.activeCea608Channel_[L.type]=null:this.setsChannel1Active(L)?this.activeCea608Channel_[L.type]=0:this.setsChannel2Active(L)&&(this.activeCea608Channel_[L.type]=1),null!==this.activeCea608Channel_[L.type]&&this.ccStreams_[(L.type<<1)+this.activeCea608Channel_[L.type]].push(L)},Pi.prototype.setsChannel1Active=function(L){return 4096==(30720&L.ccData)},Pi.prototype.setsChannel2Active=function(L){return 6144==(30720&L.ccData)},Pi.prototype.setsTextOrXDSActive=function(L){return 256==(28928&L.ccData)||4138==(30974&L.ccData)||6186==(30974&L.ccData)},Pi.prototype.dispatchCea708Packet=function(L){this.parse708captions_&&this.cc708Stream_.push(L)};var Yf={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};function po(L,se,ye){this.serviceNum=L,this.text="",this.currentWindow=new rr(-1),this.windows=[],this.stream=ye,"string"==typeof se&&this.createTextDecoder(se)}rr.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},rr.prototype.getText=function(){return this.rows.join("\n")},rr.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},rr.prototype.newLine=function(L){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(L),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},rr.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},rr.prototype.addText=function(L){this.rows[this.rowIdx]+=L},rr.prototype.backspace=function(){var L;this.isEmpty()||(this.rows[this.rowIdx]=(L=this.rows[this.rowIdx]).substr(0,L.length-1))},po.prototype.init=function(L,se){this.startPts=L;for(var ye=0;ye<8;ye++)this.windows[ye]=new rr(ye),"function"==typeof se&&(this.windows[ye].beforeRowOverflow=se)},po.prototype.setCurrentWindow=function(L){this.currentWindow=this.windows[L]},po.prototype.createTextDecoder=function(L){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(L)}catch(se){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+L+" encoding. "+se})}};var qn=function L(se){se=se||{},L.prototype.init.call(this);var ye,pe=this,me=se.captionServices||{},Ne={};Object.keys(me).forEach(function($e){ye=me[$e],/^SERVICE/.test($e)&&(Ne[$e]=ye.encoding)}),this.serviceEncodings=Ne,this.current708Packet=null,this.services={},this.push=function($e){(3===$e.type||null===pe.current708Packet)&&pe.new708Packet(),pe.add708Bytes($e)}};function mo(L){return null===L?"":(L=Jf[L]||L,String.fromCharCode(L))}function vr(){for(var L=[],se=15;se--;)L.push("");return L}qn.prototype=new ei,qn.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},qn.prototype.add708Bytes=function(L){var se=(ye=L.ccData)>>>8,ye=255&ye;this.current708Packet.ptsVals.push(L.pts),this.current708Packet.data.push(se),this.current708Packet.data.push(ye)},qn.prototype.push708Packet=function(){var L,se=this.current708Packet,ye=se.data,pe=null,me=0,Ne=ye[me++];for(se.seq=Ne>>6,se.sizeCode=63&Ne;me<ye.length;me++)L=31&(Ne=ye[me++]),7==(pe=Ne>>5)&&0<L&&(pe=ye[me++]),this.pushServiceBlock(pe,me,L),0<L&&(me+=L-1)},qn.prototype.pushServiceBlock=function(L,se,ye){for(var pe,me=se,Ne=this.current708Packet.data,$e=($e=this.services[L])||this.initService(L,me);me<se+ye&&me<Ne.length;me++)fo(pe=Ne[me])?me=this.handleText(me,$e):24===pe?me=this.multiByteCharacter(me,$e):16===pe?me=this.extendedCommands(me,$e):128<=pe&&pe<=135?me=this.setCurrentWindow(me,$e):152<=pe&&pe<=159?me=this.defineWindow(me,$e):136===pe?me=this.clearWindows(me,$e):140===pe?me=this.deleteWindows(me,$e):137===pe?me=this.displayWindows(me,$e):138===pe?me=this.hideWindows(me,$e):139===pe?me=this.toggleWindows(me,$e):151===pe?me=this.setWindowAttributes(me,$e):144===pe?me=this.setPenAttributes(me,$e):145===pe?me=this.setPenColor(me,$e):146===pe?me=this.setPenLocation(me,$e):143===pe?$e=this.reset(me,$e):8===pe?$e.currentWindow.backspace():12===pe?$e.currentWindow.clearText():13===pe?$e.currentWindow.pendingNewLine=!0:14===pe?$e.currentWindow.clearText():141===pe&&me++},qn.prototype.extendedCommands=function(L,se){return fo(this.current708Packet.data[++L])?this.handleText(L,se,{isExtended:!0}):L},qn.prototype.getPts=function(L){return this.current708Packet.ptsVals[Math.floor(L/2)]},qn.prototype.initService=function(L,se){var ye,pe="SERVICE"+L,me=this;return pe in this.serviceEncodings&&(ye=this.serviceEncodings[pe]),this.services[L]=new po(L,ye,me),this.services[L].init(this.getPts(se),function(Ne){me.flushDisplayed(Ne,me.services[L])}),this.services[L]},qn.prototype.handleText=function(L,se,tt){var pe,me=tt&&tt.isExtended,Ne=tt&&tt.isMultiByte,$e=me?4096:0,ze=(Pt=this.current708Packet.data)[L],Pt=(tt=Pt[L+1],se.currentWindow),At=se.textDecoder_&&!me?(Ne?(pe=[ze,tt],L++):pe=[ze],se.textDecoder_.decode(new Uint8Array(pe))):(At=Yf[ze|=$e]||ze,4096&ze&&ze===At?"":String.fromCharCode(At));return Pt.pendingNewLine&&!Pt.isEmpty()&&Pt.newLine(this.getPts(L)),Pt.pendingNewLine=!1,Pt.addText(At),L},qn.prototype.multiByteCharacter=function(L,se){var ye=(pe=this.current708Packet.data)[L+1],pe=pe[L+2];return fo(ye)&&fo(pe)?this.handleText(++L,se,{isMultiByte:!0}):L},qn.prototype.setCurrentWindow=function(L,se){return se.setCurrentWindow(7&this.current708Packet.data[L]),L},qn.prototype.defineWindow=function(L,se){var ye=this.current708Packet.data,pe=ye[L];return se.setCurrentWindow(7&pe),pe=ye[++L],(se=se.currentWindow).visible=(32&pe)>>5,se.rowLock=(16&pe)>>4,se.columnLock=(8&pe)>>3,se.priority=7&pe,pe=ye[++L],se.relativePositioning=(128&pe)>>7,se.anchorVertical=127&pe,pe=ye[++L],se.anchorHorizontal=pe,pe=ye[++L],se.anchorPoint=(240&pe)>>4,se.rowCount=15&pe,pe=ye[++L],se.columnCount=63&pe,pe=ye[++L],se.windowStyle=(56&pe)>>3,se.penStyle=7&pe,se.virtualRowCount=se.rowCount+1,L},qn.prototype.setWindowAttributes=function(L,pe){var ye=this.current708Packet.data,me=ye[L];return me=ye[++L],(pe=pe.currentWindow.winAttr).fillOpacity=(192&me)>>6,pe.fillRed=(48&me)>>4,pe.fillGreen=(12&me)>>2,pe.fillBlue=3&me,me=ye[++L],pe.borderType=(192&me)>>6,pe.borderRed=(48&me)>>4,pe.borderGreen=(12&me)>>2,pe.borderBlue=3&me,me=ye[++L],pe.borderType+=(128&me)>>5,pe.wordWrap=(64&me)>>6,pe.printDirection=(48&me)>>4,pe.scrollDirection=(12&me)>>2,pe.justify=3&me,me=ye[++L],pe.effectSpeed=(240&me)>>4,pe.effectDirection=(12&me)>>2,pe.displayEffect=3&me,L},qn.prototype.flushDisplayed=function(L,se){for(var ye=[],pe=0;pe<8;pe++)se.windows[pe].visible&&!se.windows[pe].isEmpty()&&ye.push(se.windows[pe].getText());se.endPts=L,se.text=ye.join("\n\n"),this.pushCaption(se),se.startPts=L},qn.prototype.pushCaption=function(L){""!==L.text&&(this.trigger("data",{startPts:L.startPts,endPts:L.endPts,text:L.text,stream:"cc708_"+L.serviceNum}),L.text="",L.startPts=L.endPts)},qn.prototype.displayWindows=function(L,se){var ye=this.current708Packet.data[++L],pe=this.getPts(L);this.flushDisplayed(pe,se);for(var me=0;me<8;me++)ye&1<<me&&(se.windows[me].visible=1);return L},qn.prototype.hideWindows=function(L,se){var ye=this.current708Packet.data[++L],pe=this.getPts(L);this.flushDisplayed(pe,se);for(var me=0;me<8;me++)ye&1<<me&&(se.windows[me].visible=0);return L},qn.prototype.toggleWindows=function(L,se){var ye=this.current708Packet.data[++L],pe=this.getPts(L);this.flushDisplayed(pe,se);for(var me=0;me<8;me++)ye&1<<me&&(se.windows[me].visible^=1);return L},qn.prototype.clearWindows=function(L,se){var ye=this.current708Packet.data[++L],pe=this.getPts(L);this.flushDisplayed(pe,se);for(var me=0;me<8;me++)ye&1<<me&&se.windows[me].clearText();return L},qn.prototype.deleteWindows=function(L,se){var ye=this.current708Packet.data[++L],pe=this.getPts(L);this.flushDisplayed(pe,se);for(var me=0;me<8;me++)ye&1<<me&&se.windows[me].reset();return L},qn.prototype.setPenAttributes=function(L,pe){var ye=this.current708Packet.data,me=ye[L];return me=ye[++L],(pe=pe.currentWindow.penAttr).textTag=(240&me)>>4,pe.offset=(12&me)>>2,pe.penSize=3&me,me=ye[++L],pe.italics=(128&me)>>7,pe.underline=(64&me)>>6,pe.edgeType=(56&me)>>3,pe.fontStyle=7&me,L},qn.prototype.setPenColor=function(L,pe){var ye=this.current708Packet.data,me=ye[L];return me=ye[++L],(pe=pe.currentWindow.penColor).fgOpacity=(192&me)>>6,pe.fgRed=(48&me)>>4,pe.fgGreen=(12&me)>>2,pe.fgBlue=3&me,me=ye[++L],pe.bgOpacity=(192&me)>>6,pe.bgRed=(48&me)>>4,pe.bgGreen=(12&me)>>2,pe.bgBlue=3&me,me=ye[++L],pe.edgeRed=(48&me)>>4,pe.edgeGreen=(12&me)>>2,pe.edgeBlue=3&me,L},qn.prototype.setPenLocation=function(L,se){var ye=this.current708Packet.data,pe=ye[L],me=se.currentWindow.penLoc;return se.currentWindow.pendingNewLine=!0,pe=ye[++L],me.row=15&pe,pe=ye[++L],me.column=63&pe,L},qn.prototype.reset=function(L,se){var ye=this.getPts(L);return this.flushDisplayed(ye,se),this.initService(se.serviceNum,L)};var Jf={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Zf=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Qn=function L(se,ye){L.prototype.init.call(this),this.field_=se||0,this.dataChannel_=ye||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(pe){var me,Ne,$e,ze,tt=32639&pe.ccData;tt!==this.lastControlCode_?(4096==(61440&tt)?this.lastControlCode_=tt:tt!==this.PADDING_&&(this.lastControlCode_=null),me=tt>>>8,Ne=255&tt,tt===this.PADDING_||(tt===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":tt===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(pe.pts),this.flushDisplayed(pe.pts),ze=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=ze,this.startPts_=pe.pts):tt===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(pe.pts)):tt===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(pe.pts)):tt===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(pe.pts)):tt===this.CARRIAGE_RETURN_?(this.clearFormatting(pe.pts),this.flushDisplayed(pe.pts),this.shiftRowsUp_(),this.startPts_=pe.pts):tt===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):tt===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(pe.pts),this.displayed_=vr()):tt===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=vr():tt===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(pe.pts),this.displayed_=vr()),this.mode_="paintOn",this.startPts_=pe.pts):this.isSpecialCharacter(me,Ne)?($e=mo((me=(3&me)<<8)|Ne),this[this.mode_](pe.pts,$e),this.column_++):this.isExtCharacter(me,Ne)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),$e=mo((me=(3&me)<<8)|Ne),this[this.mode_](pe.pts,$e),this.column_++):this.isMidRowCode(me,Ne)?(this.clearFormatting(pe.pts),this[this.mode_](pe.pts," "),this.column_++,14==(14&Ne)&&this.addFormatting(pe.pts,["i"]),1==(1&Ne)&&this.addFormatting(pe.pts,["u"])):this.isOffsetControlCode(me,Ne)?this.column_+=3&Ne:this.isPAC(me,Ne)?(ze=Zf.indexOf(7968&tt),"rollUp"===this.mode_&&(ze-this.rollUpRows_+1<0&&(ze=this.rollUpRows_-1),this.setRollUp(pe.pts,ze)),ze!==this.row_&&(this.clearFormatting(pe.pts),this.row_=ze),1&Ne&&-1===this.formatting_.indexOf("u")&&this.addFormatting(pe.pts,["u"]),16==(16&tt)&&(this.column_=4*((14&tt)>>1)),this.isColorPAC(Ne)&&14==(14&Ne)&&this.addFormatting(pe.pts,["i"])):this.isNormalChar(me)&&(0===Ne&&(Ne=null),$e=mo(me),$e+=mo(Ne),this[this.mode_](pe.pts,$e),this.column_+=$e.length))):this.lastControlCode_=null}};function $s(L,se){var ye=1;for(se<L&&(ye=-1);4294967296<Math.abs(se-L);)L+=8589934592*ye;return L}Qn.prototype=new ei,Qn.prototype.flushDisplayed=function(L){var se=this.displayed_.map(function(ye,pe){try{return ye.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+pe+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");se.length&&this.trigger("data",{startPts:this.startPts_,endPts:L,text:se,stream:this.name_})},Qn.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=vr(),this.nonDisplayed_=vr(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Qn.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Qn.prototype.isSpecialCharacter=function(L,se){return L===this.EXT_&&48<=se&&se<=63},Qn.prototype.isExtCharacter=function(L,se){return(L===this.EXT_+1||L===this.EXT_+2)&&32<=se&&se<=63},Qn.prototype.isMidRowCode=function(L,se){return L===this.EXT_&&32<=se&&se<=47},Qn.prototype.isOffsetControlCode=function(L,se){return L===this.OFFSET_&&33<=se&&se<=35},Qn.prototype.isPAC=function(L,se){return L>=this.BASE_&&L<this.BASE_+8&&64<=se&&se<=127},Qn.prototype.isColorPAC=function(L){return 64<=L&&L<=79||96<=L&&L<=127},Qn.prototype.isNormalChar=function(L){return 32<=L&&L<=127},Qn.prototype.setRollUp=function(L,se){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(L),this.nonDisplayed_=vr(),this.displayed_=vr()),void 0!==se&&se!==this.row_)for(var ye=0;ye<this.rollUpRows_;ye++)this.displayed_[se-ye]=this.displayed_[this.row_-ye],this.displayed_[this.row_-ye]="";void 0===se&&(se=this.row_),this.topRow_=se-this.rollUpRows_+1},Qn.prototype.addFormatting=function(L,se){this.formatting_=this.formatting_.concat(se),se=se.reduce(function(ye,pe){return ye+"<"+pe+">"},""),this[this.mode_](L,se)},Qn.prototype.clearFormatting=function(L){var se;this.formatting_.length&&(se=this.formatting_.reverse().reduce(function(ye,pe){return ye+"</"+pe+">"},""),this.formatting_=[],this[this.mode_](L,se))},Qn.prototype.popOn=function(L,se){var ye=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=ye+=se},Qn.prototype.rollUp=function(L,se){var ye=this.displayed_[this.row_];this.displayed_[this.row_]=ye+=se},Qn.prototype.shiftRowsUp_=function(){for(var L=0;L<this.topRow_;L++)this.displayed_[L]="";for(L=this.row_+1;L<15;L++)this.displayed_[L]="";for(L=this.topRow_;L<this.row_;L++)this.displayed_[L]=this.displayed_[L+1];this.displayed_[this.row_]=""},Qn.prototype.paintOn=function(L,se){var ye=this.displayed_[this.row_];this.displayed_[this.row_]=ye+=se};var _o={CaptionStream:Pi,Cea608Stream:Qn,Cea708Stream:qn},_i={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function rc(L,se,ye){for(var pe="",me=se;me<ye;me++)pe+="%"+("00"+L[me].toString(16)).slice(-2);return pe}function go(L,se,ye){return decodeURIComponent(rc(L,se,ye))}function vo(L){return L[0]<<21|L[1]<<14|L[2]<<7|L[3]}(ui=function L(se){var ye,pe;L.prototype.init.call(this),this.type_=se||"shared",this.push=function(me){"shared"!==this.type_&&me.type!==this.type_||(void 0===pe&&(pe=me.dts),me.dts=$s(me.dts,pe),me.pts=$s(me.pts,pe),ye=me.dts,this.trigger("data",me))},this.flush=function(){pe=ye,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){ye=pe=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}).prototype=new ei;var ba=ui,Pi=$s,ac={TXXX:function(L){var se;if(3===L.data[0]){for(se=1;se<L.data.length;se++)if(0===L.data[se]){L.description=go(L.data,1,se),L.value=go(L.data,se+1,L.data.length).replace(/\0*$/,"");break}L.data=L.value}},WXXX:function(L){var se;if(3===L.data[0])for(se=1;se<L.data.length;se++)if(0===L.data[se]){L.description=go(L.data,1,se),L.url=go(L.data,se+1,L.data.length);break}},PRIV:function(L){for(var ye=0;ye<L.data.length;ye++)if(0===L.data[ye]){L.owner=unescape(rc(L.data,0,ye));break}L.privateData=L.data.subarray(ye+1),L.data=L.privateData}},Xs=function(L){var se,ye={descriptor:L&&L.descriptor},pe=0,me=[],Ne=0;if(Xs.prototype.init.call(this),this.dispatchType=_i.METADATA_STREAM_TYPE.toString(16),ye.descriptor)for(se=0;se<ye.descriptor.length;se++)this.dispatchType+=("00"+ye.descriptor[se].toString(16)).slice(-2);this.push=function($e){var ze,tt,Pt,At,Ot,tn,_n;if("timed-metadata"===$e.type)if($e.dataAlignmentIndicator&&(Ne=0,me.length=0),0===me.length&&($e.data.length<10||$e.data[0]!=="I".charCodeAt(0)||$e.data[1]!=="D".charCodeAt(0)||$e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(me.push($e),Ne+=$e.data.byteLength,1===me.length&&(pe=vo($e.data.subarray(6,10)),pe+=10),!(Ne<pe)){for(ze={data:new Uint8Array(pe),frames:[],pts:me[0].pts,dts:me[0].dts},At=0;At<pe;)ze.data.set(me[0].data.subarray(0,pe-At),At),At+=me[0].data.byteLength,Ne-=me[0].data.byteLength,me.shift();tt=10,64&ze.data[5]&&(tt+=4,tt+=vo(ze.data.subarray(10,14)),pe-=vo(ze.data.subarray(16,20)));do{if((Pt=vo(ze.data.subarray(tt+4,tt+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."})}while((_n={id:String.fromCharCode(ze.data[tt],ze.data[tt+1],ze.data[tt+2],ze.data[tt+3]),data:ze.data.subarray(tt+10,tt+Pt+10)}).key=_n.id,ac[_n.id]&&(ac[_n.id](_n),"com.apple.streaming.transportStreamTimestamp"===_n.owner&&(tn=(1&(Ot=_n.data)[3])<<30|Ot[4]<<22|Ot[5]<<14|Ot[6]<<6|Ot[7]>>>2,tn*=4,_n.timeStamp=tn+=3&Ot[7],void 0===ze.pts&&void 0===ze.dts&&(ze.pts=_n.timeStamp,ze.dts=_n.timeStamp),this.trigger("timestamp",_n))),ze.frames.push(_n),tt+=10,(tt+=Pt)<pe);this.trigger("data",ze)}}};Xs.prototype=new ei,ui=Xs;var yo,Gs,Ks=function(){var L=new Uint8Array(188),se=0;Ks.prototype.init.call(this),this.push=function(ye){var pe,me=0,Ne=188;for(se?((pe=new Uint8Array(ye.byteLength+se)).set(L.subarray(0,se)),pe.set(ye,se),se=0):pe=ye;Ne<pe.byteLength;)71!==pe[me]||71!==pe[Ne]?(me++,Ne++):(this.trigger("data",pe.subarray(me,Ne)),me+=188,Ne+=188);me<pe.byteLength&&(L.set(pe.subarray(me),0),se=pe.byteLength-me)},this.flush=function(){188===se&&71===L[0]&&(this.trigger("data",L),se=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){se=0,this.trigger("reset")}};Ks.prototype=new ei,(yo=function(){var L,se,ye,pe;yo.prototype.init.call(this),(pe=this).packetsWaitingForPmt=[],this.programMapTable=void 0,L=function(me,Ne){var $e=0;Ne.payloadUnitStartIndicator&&($e+=me[$e]+1),("pat"===Ne.type?se:ye)(me.subarray($e),Ne)},se=function(me,Ne){Ne.section_number=me[7],Ne.last_section_number=me[8],pe.pmtPid=(31&me[10])<<8|me[11],Ne.pmtPid=pe.pmtPid},ye=function(me,Ne){var $e,ze;if(1&me[5]){for(pe.programMapTable={video:null,audio:null,"timed-metadata":{}},$e=3+((15&me[1])<<8|me[2])-4,ze=12+((15&me[10])<<8|me[11]);ze<$e;){var tt=me[ze],Pt=(31&me[ze+1])<<8|me[ze+2];tt===_i.H264_STREAM_TYPE&&null===pe.programMapTable.video?pe.programMapTable.video=Pt:tt===_i.ADTS_STREAM_TYPE&&null===pe.programMapTable.audio?pe.programMapTable.audio=Pt:tt===_i.METADATA_STREAM_TYPE&&(pe.programMapTable["timed-metadata"][Pt]=tt),ze+=5+((15&me[ze+3])<<8|me[ze+4])}Ne.programMapTable=pe.programMapTable}},this.push=function(me){var Ne={},$e=4;if(Ne.payloadUnitStartIndicator=!!(64&me[1]),Ne.pid=31&me[1],Ne.pid<<=8,Ne.pid|=me[2],1<(48&me[3])>>>4&&($e+=me[$e]+1),0===Ne.pid)Ne.type="pat",L(me.subarray($e),Ne),this.trigger("data",Ne);else if(Ne.pid===this.pmtPid)for(Ne.type="pmt",L(me.subarray($e),Ne),this.trigger("data",Ne);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([me,$e,Ne]):this.processPes_(me,$e,Ne)},this.processPes_=function(me,Ne,$e){$e.streamType=$e.pid===this.programMapTable.video?_i.H264_STREAM_TYPE:$e.pid===this.programMapTable.audio?_i.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][$e.pid],$e.type="pes",$e.data=me.subarray(Ne),this.trigger("data",$e)}}).prototype=new ei,yo.STREAM_TYPES={h264:27,adts:15},(Gs=function(){function L(ze,tt,Pt){var At,Ot,tn,_n,En=new Uint8Array(ze.size),An={type:tt},In=0,Bn=0;if(ze.data.length&&!(ze.size<9)){for(An.trackId=ze.data[0].pid,In=0;In<ze.data.length;In++)En.set((At=ze.data[In]).data,Bn),Bn+=At.data.byteLength;_n=(Ot=En)[0]<<16|Ot[1]<<8|Ot[2],(tn=An).data=new Uint8Array,1==_n&&(tn.packetLength=6+(Ot[4]<<8|Ot[5]),tn.dataAlignmentIndicator=0!=(4&Ot[6]),192&(_n=Ot[7])&&(tn.pts=(14&Ot[9])<<27|(255&Ot[10])<<20|(254&Ot[11])<<12|(255&Ot[12])<<5|(254&Ot[13])>>>3,tn.pts*=4,tn.pts+=(6&Ot[13])>>>1,tn.dts=tn.pts,64&_n&&(tn.dts=(14&Ot[14])<<27|(255&Ot[15])<<20|(254&Ot[16])<<12|(255&Ot[17])<<5|(254&Ot[18])>>>3,tn.dts*=4,tn.dts+=(6&Ot[18])>>>1)),tn.data=Ot.subarray(9+Ot[8])),tt="video"===tt||An.packetLength<=ze.size,(Pt||tt)&&(ze.size=0,ze.data.length=0),tt&&ye.trigger("data",An)}}var se,ye=this,pe=!1,me={data:[],size:0},Ne={data:[],size:0},$e={data:[],size:0};Gs.prototype.init.call(this),this.push=function(ze){({pat:function(){},pes:function(){var tt,Pt;switch(ze.streamType){case _i.H264_STREAM_TYPE:tt=me,Pt="video";break;case _i.ADTS_STREAM_TYPE:tt=Ne,Pt="audio";break;case _i.METADATA_STREAM_TYPE:tt=$e,Pt="timed-metadata";break;default:return}ze.payloadUnitStartIndicator&&L(tt,Pt,!0),tt.data.push(ze),tt.size+=ze.data.byteLength},pmt:function(){var tt={type:"metadata",tracks:[]};null!==(se=ze.programMapTable).video&&tt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+se.video,codec:"avc",type:"video"}),null!==se.audio&&tt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+se.audio,codec:"adts",type:"audio"}),pe=!0,ye.trigger("data",tt)}})[ze.type]()},this.reset=function(){me.size=0,me.data.length=0,Ne.size=0,Ne.data.length=0,this.trigger("reset")},this.flushStreams_=function(){L(me,"video"),L(Ne,"audio"),L($e,"timed-metadata")},this.flush=function(){var ze;!pe&&se&&(ze={type:"metadata",tracks:[]},null!==se.video&&ze.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+se.video,codec:"avc",type:"video"}),null!==se.audio&&ze.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+se.audio,codec:"adts",type:"audio"}),ye.trigger("data",ze)),pe=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new ei;var bo,oc={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ks,TransportParseStream:yo,ElementaryStream:Gs,TimestampRolloverStream:ba,CaptionStream:_o.CaptionStream,Cea608Stream:_o.Cea608Stream,Cea708Stream:_o.Cea708Stream,MetadataStream:ui};for(bo in _i)_i.hasOwnProperty(bo)&&(oc[bo]=_i[bo]);var ar=oc,sc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ys=function(L){var se,ye=0;Ys.prototype.init.call(this),this.skipWarn_=function(pe,me){this.trigger("log",{level:"warn",message:"adts skiping bytes "+pe+" to "+me+" in frame "+ye+" outside syncword"})},this.push=function(pe){var me,Ne,$e,ze,tt,Pt,At=0;if(L||(ye=0),"audio"===pe.type){for(se&&se.length?($e=se,(se=new Uint8Array($e.byteLength+pe.data.byteLength)).set($e),se.set(pe.data,$e.byteLength)):se=pe.data;At+7<se.length;)if(255===se[At]&&240==(246&se[At+1])){if("number"==typeof Pt&&(this.skipWarn_(Pt,At),Pt=null),Ne=2*(1&~se[At+1]),tt=9e4*(ze=1024*(1+(3&se[At+6])))/sc[(60&se[At+2])>>>2],se.byteLength-At<(me=(3&se[At+3])<<11|se[At+4]<<3|(224&se[At+5])>>5))break;this.trigger("data",{pts:pe.pts+ye*tt,dts:pe.dts+ye*tt,sampleCount:ze,audioobjecttype:1+(se[At+2]>>>6&3),channelcount:(1&se[At+2])<<2|(192&se[At+3])>>>6,samplerate:sc[(60&se[At+2])>>>2],samplingfrequencyindex:(60&se[At+2])>>>2,samplesize:16,data:se.subarray(At+7+Ne,At+me)}),ye++,At+=me}else"number"!=typeof Pt&&(Pt=At),At++;"number"==typeof Pt&&(this.skipWarn_(Pt,At),Pt=null),se=se.subarray(At)}},this.flush=function(){ye=0,this.trigger("done")},this.reset=function(){se=void 0,this.trigger("reset")},this.endTimeline=function(){se=void 0,this.trigger("endedtimeline")}};Ys.prototype=new ei;var Js,lc,uc=Ys,ep=function(L){var se=L.byteLength,ye=0,pe=0;this.length=function(){return 8*se},this.bitsAvailable=function(){return 8*se+pe},this.loadWord=function(){var me=L.byteLength-se,Ne=new Uint8Array(4),$e=Math.min(4,se);if(0===$e)throw new Error("no bytes available");Ne.set(L.subarray(me,me+$e)),ye=new DataView(Ne.buffer).getUint32(0),pe=8*$e,se-=$e},this.skipBits=function(me){var Ne;me<pe||(me-=pe,me-=8*(Ne=Math.floor(me/8)),se-=Ne,this.loadWord()),ye<<=me,pe-=me},this.readBits=function(me){var Ne=Math.min(pe,me),$e=ye>>>32-Ne;return 0<(pe-=Ne)?ye<<=Ne:0<se&&this.loadWord(),0<(Ne=me-Ne)?$e<<Ne|this.readBits(Ne):$e},this.skipLeadingZeros=function(){for(var me=0;me<pe;++me)if(0!=(ye&2147483648>>>me))return ye<<=me,pe-=me,me;return this.loadWord(),me+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var me=this.skipLeadingZeros();return this.readBits(me+1)-1},this.readExpGolomb=function(){var me=this.readUnsignedExpGolomb();return 1&me?1+me>>>1:-1*(me>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},wo=function(){var L,se,ye=0;wo.prototype.init.call(this),this.push=function(pe){for(var me,Ne=(se=se?((me=new Uint8Array(se.byteLength+pe.data.byteLength)).set(se),me.set(pe.data,se.byteLength),me):pe.data).byteLength;ye<Ne-3;ye++)if(1===se[ye+2]){L=ye+5;break}for(;L<Ne;)switch(se[L]){case 0:if(0!==se[L-1]){L+=2;break}if(0!==se[L-2]){L++;break}for(ye+3!==L-2&&this.trigger("data",se.subarray(ye+3,L-2));1!==se[++L]&&L<Ne;);ye=L-2,L+=3;break;case 1:if(0!==se[L-1]||0!==se[L-2]){L+=3;break}this.trigger("data",se.subarray(ye+3,L-2)),ye=L-2,L+=3;break;default:L+=3}se=se.subarray(ye),L-=ye,ye=0},this.reset=function(){se=null,ye=0,this.trigger("reset")},this.flush=function(){se&&3<se.byteLength&&this.trigger("data",se.subarray(ye+3)),se=null,ye=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};function dc(L,se){var ye=0<=(ye=L[se+6]<<21|L[se+7]<<14|L[se+8]<<7|L[se+9])?ye:0;return(16&L[se+5])>>4?ye+20:ye+10}function cc(L,se){return L.length-se<10||L[se]!=="I".charCodeAt(0)||L[se+1]!=="D".charCodeAt(0)||L[se+2]!=="3".charCodeAt(0)?se:cc(L,se+=dc(L,se))}function hc(L){return L[0]<<21|L[1]<<14|L[2]<<7|L[3]}wo.prototype=new ei,lc={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Js=function(){var L,se,ye,pe,me,Ne,$e,ze=new wo;Js.prototype.init.call(this),(L=this).push=function(tt){"video"===tt.type&&(se=tt.trackId,ye=tt.pts,pe=tt.dts,ze.push(tt))},ze.on("data",function(tt){var Pt={trackId:se,pts:ye,dts:pe,data:tt,nalUnitTypeCode:31&tt[0]};switch(Pt.nalUnitTypeCode){case 5:Pt.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Pt.nalUnitType="sei_rbsp",Pt.escapedRBSP=me(tt.subarray(1));break;case 7:Pt.nalUnitType="seq_parameter_set_rbsp",Pt.escapedRBSP=me(tt.subarray(1)),Pt.config=Ne(Pt.escapedRBSP);break;case 8:Pt.nalUnitType="pic_parameter_set_rbsp";break;case 9:Pt.nalUnitType="access_unit_delimiter_rbsp"}L.trigger("data",Pt)}),ze.on("done",function(){L.trigger("done")}),ze.on("partialdone",function(){L.trigger("partialdone")}),ze.on("reset",function(){L.trigger("reset")}),ze.on("endedtimeline",function(){L.trigger("endedtimeline")}),this.flush=function(){ze.flush()},this.partialFlush=function(){ze.partialFlush()},this.reset=function(){ze.reset()},this.endTimeline=function(){ze.endTimeline()},$e=function(tt,Pt){for(var At=8,Ot=8,tn=0;tn<tt;tn++)At=0===(Ot=0!==Ot?(At+Pt.readExpGolomb()+256)%256:Ot)?At:Ot},me=function(tt){for(var Pt=tt.byteLength,At=[],Ot=1;Ot<Pt-2;)0===tt[Ot]&&0===tt[Ot+1]&&3===tt[Ot+2]?(At.push(Ot+2),Ot+=2):Ot++;if(0===At.length)return tt;var tn=Pt-At.length,_n=new Uint8Array(tn),En=0;for(Ot=0;Ot<tn;En++,Ot++)En===At[0]&&(En++,At.shift()),_n[Ot]=tt[En];return _n},Ne=function(tt){var Pt,At,Ot,tn,_n,En=0,An=0,In=0,Bn=0,vn=[1,1],Sn=new ep(tt),ur=Sn.readUnsignedByte(),Xr=Sn.readUnsignedByte(),ol=Sn.readUnsignedByte();if(Sn.skipUnsignedExpGolomb(),lc[ur]&&(3===(At=Sn.readUnsignedExpGolomb())&&Sn.skipBits(1),Sn.skipUnsignedExpGolomb(),Sn.skipUnsignedExpGolomb(),Sn.skipBits(1),Sn.readBoolean()))for(tn=3!==At?8:12,_n=0;_n<tn;_n++)Sn.readBoolean()&&$e(_n<6?16:64,Sn);if(Sn.skipUnsignedExpGolomb(),0===(Ot=Sn.readUnsignedExpGolomb()))Sn.readUnsignedExpGolomb();else if(1===Ot)for(Sn.skipBits(1),Sn.skipExpGolomb(),Sn.skipExpGolomb(),Pt=Sn.readUnsignedExpGolomb(),_n=0;_n<Pt;_n++)Sn.skipExpGolomb();if(Sn.skipUnsignedExpGolomb(),Sn.skipBits(1),tt=Sn.readUnsignedExpGolomb(),At=Sn.readUnsignedExpGolomb(),0===(Ot=Sn.readBits(1))&&Sn.skipBits(1),Sn.skipBits(1),Sn.readBoolean()&&(En=Sn.readUnsignedExpGolomb(),An=Sn.readUnsignedExpGolomb(),In=Sn.readUnsignedExpGolomb(),Bn=Sn.readUnsignedExpGolomb()),Sn.readBoolean()&&Sn.readBoolean())switch(Sn.readUnsignedByte()){case 1:vn=[1,1];break;case 2:vn=[12,11];break;case 3:vn=[10,11];break;case 4:vn=[16,11];break;case 5:vn=[40,33];break;case 6:vn=[24,11];break;case 7:vn=[20,11];break;case 8:vn=[32,11];break;case 9:vn=[80,33];break;case 10:vn=[18,11];break;case 11:vn=[15,11];break;case 12:vn=[64,33];break;case 13:vn=[160,99];break;case 14:vn=[4,3];break;case 15:vn=[3,2];break;case 16:vn=[2,1];break;case 255:vn=[Sn.readUnsignedByte()<<8|Sn.readUnsignedByte(),Sn.readUnsignedByte()<<8|Sn.readUnsignedByte()]}return{profileIdc:ur,levelIdc:ol,profileCompatibility:Xr,width:16*(tt+1)-2*En-2*An,height:(2-Ot)*(At+1)*16-2*In-2*Bn,sarRatio:vn}}}).prototype=new ei,ui={H264Stream:Js,NalByteStream:wo};var tp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],xo={isLikelyAacData:function(L){var se=cc(L,0);return L.length>=se+2&&255==(255&L[se])&&240==(240&L[se+1])&&16==(22&L[se+1])},parseId3TagSize:dc,parseAdtsSize:function(L,se){return 6144&L[se+3]|L[se+4]<<3|(224&L[se+5])>>5},parseType:function(L,se){return L[se]==="I".charCodeAt(0)&&L[se+1]==="D".charCodeAt(0)&&L[se+2]==="3".charCodeAt(0)?"timed-metadata":!0&L[se]&&240==(240&L[se+1])?"audio":null},parseSampleRate:function(L){for(var se=0;se+5<L.length;){if(255===L[se]&&240==(246&L[se+1]))return tp[(60&L[se+2])>>>2];se++}return null},parseAacTimestamp:function(L){var se,ye=10;64&L[5]&&(ye+=4,ye+=hc(L.subarray(10,14)));do{if((se=hc(L.subarray(ye+4,ye+8)))<1)return null;if("PRIV"===String.fromCharCode(L[ye],L[ye+1],L[ye+2],L[ye+3]))for(var pe=L.subarray(ye+10,ye+se+10),me=0;me<pe.byteLength;me++)if(0===pe[me]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(ze,tt,Pt){for(var At="",Ot=0;Ot<Pt;Ot++)At+="%"+("00"+ze[Ot].toString(16)).slice(-2);return At}(pe,0,me)))break;var Ne=pe.subarray(me+1),$e=(1&Ne[3])<<30|Ne[4]<<22|Ne[5]<<14|Ne[6]<<6|Ne[7]>>>2;return($e*=4)+(3&Ne[7])}}while(ye+=10,(ye+=se)<L.byteLength);return null}},Zs=function(){var L=new Uint8Array,se=0;Zs.prototype.init.call(this),this.setTimestamp=function(ye){se=ye},this.push=function(ye){var pe,me,Ne=0,$e=0;for(L.length?(me=L.length,(L=new Uint8Array(ye.byteLength+me)).set(L.subarray(0,me)),L.set(ye,me)):L=ye;3<=L.length-$e;)if(L[$e]!=="I".charCodeAt(0)||L[$e+1]!=="D".charCodeAt(0)||L[$e+2]!=="3".charCodeAt(0))if(255!=(255&L[$e])||240!=(240&L[$e+1]))$e++;else{if(L.length-$e<7||$e+(Ne=xo.parseAdtsSize(L,$e))>L.length)break;pe={type:"audio",data:L.subarray($e,$e+Ne),pts:se,dts:se},this.trigger("data",pe),$e+=Ne}else{if(L.length-$e<10||$e+(Ne=xo.parseId3TagSize(L,$e))>L.length)break;pe={type:"timed-metadata",data:L.subarray($e,$e+Ne)},this.trigger("data",pe),$e+=Ne}L=0<(ye=L.length-$e)?L.subarray($e):new Uint8Array},this.reset=function(){L=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){L=new Uint8Array,this.trigger("endedtimeline")}};function np(L,se){se.stream=L,this.trigger("log",se)}function fc(L,se){for(var ye=Object.keys(se),pe=0;pe<ye.length;pe++){var me=ye[pe];"headOfPipeline"!==me&&se[me].on&&se[me].on("log",np.bind(L,me))}}function pc(L,se){var ye;if(L.length===se.length){for(ye=0;ye<L.length;ye++)if(L[ye]!==se[ye])return;return 1}}function Qs(L,se,ye,pe,me,Ne){return{start:{dts:L,pts:L+(ye-se)},end:{dts:L+(pe-se),pts:L+(me-ye)},prependedContentDuration:Ne,baseMediaDecodeTime:L}}Zs.prototype=new ei;var So,el,Wr,ip=Zs,tl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],nl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],rp=ui.H264Stream,ap=xo.isLikelyAacData,wa=function(L,se){var ye=[],pe=0,me=0,Ne=1/0,$e=(se=se||{}).firstSequenceNumber||0;wa.prototype.init.call(this),this.push=function(ze){qs(L,ze),L&&tl.forEach(function(tt){L[tt]=ze[tt]}),ye.push(ze)},this.setEarliestDts=function(ze){pe=ze},this.setVideoBaseMediaDecodeTime=function(ze){Ne=ze},this.setAudioAppendStart=function(ze){me=ze},this.flush=function(){var ze,tt,Pt,At,Ot;0!==ye.length&&(ze=function(L,se,ye){return se.minSegmentDts>=ye?L:(se.minSegmentDts=1/0,L.filter(function(pe){return pe.dts>=ye&&(se.minSegmentDts=Math.min(se.minSegmentDts,pe.dts),se.minSegmentPts=se.minSegmentDts,!0)}))}(ye,L,pe),L.baseMediaDecodeTime=ic(L,se.keepOriginalTimestamps),Ot=function(L,se,ye,pe){var me,Ne,$e,ze,tt,Pt,At=0,Ot=0;if(se.length&&(me=nc(L.baseMediaDecodeTime,L.samplerate),Ne=Math.ceil(gr/(L.samplerate/1024)),ye&&pe&&($e=me-Math.max(ye,pe),Ot=(At=Math.floor($e/Ne))*Ne),!(At<1||gr/2<Ot))){for(ze=(ze=function Rn(){var L,se;return Li||(L={96e3:[lr,[227,64],pn(154),[56]],88200:[lr,[231],pn(170),[56]],64e3:[lr,[248,192],pn(240),[56]],48e3:[lr,[255,192],pn(268),[55,148,128],pn(54),[112]],44100:[lr,[255,192],pn(268),[55,163,128],pn(84),[112]],32e3:[lr,[255,192],pn(268),[55,234],pn(226),[112]],24e3:[lr,[255,192],pn(268),[55,255,128],pn(268),[111,112],pn(126),[224]],16e3:[lr,[255,192],pn(268),[55,255,128],pn(268),[111,255],pn(269),[223,108],pn(195),[1,192]],12e3:[zs,pn(268),[3,127,248],pn(268),[6,255,240],pn(268),[13,255,224],pn(268),[27,253,128],pn(259),[56]],11025:[zs,pn(268),[3,127,248],pn(268),[6,255,240],pn(268),[13,255,224],pn(268),[27,255,192],pn(268),[55,175,128],pn(108),[112]],8e3:[zs,pn(268),[3,121,16],pn(47),[7]]},se=L,Li=Object.keys(se).reduce(function(ye,pe){return ye[pe]=new Uint8Array(se[pe].reduce(function(me,Ne){return me.concat(Ne)},[])),ye},{})),Li}()[L.samplerate])||se[0].data,tt=0;tt<At;tt++)se.splice(0,0,{data:ze,dts:(Pt=se[0]).dts-Ne,pts:Pt.pts-Ne});return L.baseMediaDecodeTime-=Math.floor(function(L,se){return function(L,se){return L*se}(Vs(L),se)}(Ot,L.samplerate)),Ot}}(L,ze,me,Ne),L.samples=function(L){for(var ye=[],pe=0;pe<L.length;pe++)ye.push({size:L[pe].data.byteLength,duration:1024});return ye}(ze),tt=Yn(function(L){for(var se,ye=0,pe=new Uint8Array(function(Ne){for(var $e=0,ze=0;ze<Ne.length;ze++)$e+=Ne[ze].data.byteLength;return $e}(L)),me=0;me<L.length;me++)pe.set((se=L[me]).data,ye),ye+=se.data.byteLength;return pe}(ze)),ye=[],At=zr($e,[L]),Pt=new Uint8Array(At.byteLength+tt.byteLength),$e++,Pt.set(At),Pt.set(tt,At.byteLength),Vr(L),At=Math.ceil(9216e4/L.samplerate),ze.length&&(At*=ze.length,this.trigger("segmentTimingInfo",Qs(nc(L.baseMediaDecodeTime,L.samplerate),ze[0].dts,ze[0].pts,ze[0].dts+At,ze[0].pts+At,Ot||0)),this.trigger("timingInfo",{start:ze[0].pts,end:ze[0].pts+At})),this.trigger("data",{track:L,boxes:Pt})),this.trigger("done","AudioSegmentStream")},this.reset=function(){Vr(L),ye=[],this.trigger("reset")}};function mc(L){var se=31&L[1];return(se<<=8)|L[2]}function To(L){return!!(64&L[1])}function ko(L){var se=0;return 1<(48&L[3])>>>4&&(se+=L[4]+1),se}function il(L){switch(L){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}wa.prototype=new ei,(So=function(L,se){var ye,pe,me=[],Ne=[],$e=(se=se||{}).firstSequenceNumber||0;So.prototype.init.call(this),delete L.minPTS,this.gopCache_=[],this.push=function(ze){qs(L,ze),"seq_parameter_set_rbsp"!==ze.nalUnitType||ye||(ye=ze.config,L.sps=[ze.data],nl.forEach(function(tt){L[tt]=ye[tt]},this)),"pic_parameter_set_rbsp"!==ze.nalUnitType||pe||(pe=ze.data,L.pps=[ze.data]),me.push(ze)},this.flush=function(){for(var ze,tt,Pt,At=0;me.length&&"access_unit_delimiter_rbsp"!==me[0].nalUnitType;)me.shift();if(0===me.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(ze=function(L){var se,ye,pe=[],me=[];for(me.byteLength=0,me.nalCount=0,me.duration=0,se=pe.byteLength=0;se<L.length;se++)"access_unit_delimiter_rbsp"===(ye=L[se]).nalUnitType?(pe.length&&(pe.duration=ye.dts-pe.dts,me.byteLength+=pe.byteLength,me.nalCount+=pe.length,me.duration+=pe.duration,me.push(pe)),(pe=[ye]).byteLength=ye.data.byteLength,pe.pts=ye.pts,pe.dts=ye.dts):("slice_layer_without_partitioning_rbsp_idr"===ye.nalUnitType&&(pe.keyFrame=!0),pe.duration=ye.dts-pe.dts,pe.byteLength+=ye.data.byteLength,pe.push(ye));return me.length&&(!pe.duration||pe.duration<=0)&&(pe.duration=me[me.length-1].duration),me.byteLength+=pe.byteLength,me.nalCount+=pe.length,me.duration+=pe.duration,me.push(pe),me}(me),(tt=function(L){var se,ye,pe=[],me=[];for(pe.byteLength=0,pe.nalCount=0,pe.duration=0,pe.pts=L[0].pts,pe.dts=L[0].dts,me.byteLength=0,me.nalCount=0,me.duration=0,me.pts=L[0].pts,me.dts=L[0].dts,se=0;se<L.length;se++)(ye=L[se]).keyFrame?(pe.length&&(me.push(pe),me.byteLength+=pe.byteLength,me.nalCount+=pe.nalCount,me.duration+=pe.duration),(pe=[ye]).nalCount=ye.length,pe.byteLength=ye.byteLength,pe.pts=ye.pts,pe.dts=ye.dts,pe.duration=ye.duration):(pe.duration+=ye.duration,pe.nalCount+=ye.length,pe.byteLength+=ye.byteLength,pe.push(ye));return me.length&&pe.duration<=0&&(pe.duration=me[me.length-1].duration),me.byteLength+=pe.byteLength,me.nalCount+=pe.nalCount,me.duration+=pe.duration,me.push(pe),me}(ze))[0][0].keyFrame||((Pt=this.getGopForFusion_(me[0],L))?(At=Pt.duration,tt.unshift(Pt),tt.byteLength+=Pt.byteLength,tt.nalCount+=Pt.nalCount,tt.pts=Pt.pts,tt.dts=Pt.dts,tt.duration+=Pt.duration):tt=function(L){var se;return!L[0][0].keyFrame&&1<L.length&&(se=L.shift(),L.byteLength-=se.byteLength,L.nalCount-=se.nalCount,L[0][0].dts=se.dts,L[0][0].pts=se.pts,L[0][0].duration+=se.duration),L}(tt)),Ne.length){var Ot=se.alignGopsAtEnd?this.alignGopsAtEnd_(tt):this.alignGopsAtStart_(tt);if(!Ot)return this.gopCache_.unshift({gop:tt.pop(),pps:L.pps,sps:L.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),me=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Vr(L),tt=Ot}qs(L,tt),L.samples=function(L,se){for(var ye,pe,me,Ne=0,$e=[],ze=0;ze<L.length;ze++)for(pe=L[ze],ye=0;ye<pe.length;ye++)Ne+=(me=oi(me=pe[ye],Ne)).size,$e.push(me);return $e}(tt),ze=Yn(function(L){for(var se,ye,pe,me,Ne,$e=0,Pt=new Uint8Array(L.byteLength+4*L.nalCount),At=new DataView(Pt.buffer),Ot=0;Ot<L.length;Ot++)for(pe=L[Ot],se=0;se<pe.length;se++)for(me=pe[se],ye=0;ye<me.length;ye++)At.setUint32($e,(Ne=me[ye]).data.byteLength),Pt.set(Ne.data,$e+=4),$e+=Ne.data.byteLength;return Pt}(tt)),L.baseMediaDecodeTime=ic(L,se.keepOriginalTimestamps),this.trigger("processedGopsInfo",tt.map(function(tn){return{pts:tn.pts,dts:tn.dts,byteLength:tn.byteLength}})),this.trigger("segmentTimingInfo",Qs(L.baseMediaDecodeTime,(Pt=tt[0]).dts,Pt.pts,(Ot=tt[tt.length-1]).dts+Ot.duration,Ot.pts+Ot.duration,At)),this.trigger("timingInfo",{start:tt[0].pts,end:tt[tt.length-1].pts+tt[tt.length-1].duration}),this.gopCache_.unshift({gop:tt.pop(),pps:L.pps,sps:L.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),me=[],this.trigger("baseMediaDecodeTime",L.baseMediaDecodeTime),this.trigger("timelineStartInfo",L.timelineStartInfo),At=zr($e,[L]),tt=new Uint8Array(At.byteLength+ze.byteLength),$e++,tt.set(At),tt.set(ze,At.byteLength),this.trigger("data",{track:L,boxes:tt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),me=[],this.gopCache_.length=0,Ne.length=0,this.trigger("reset")},this.resetStream_=function(){Vr(L),pe=ye=void 0},this.getGopForFusion_=function(ze){for(var tt,Pt,At,Ot=1/0,tn=0;tn<this.gopCache_.length;tn++)Pt=(At=this.gopCache_[tn]).gop,L.pps&&pc(L.pps[0],At.pps[0])&&L.sps&&pc(L.sps[0],At.sps[0])&&(Pt.dts<L.timelineStartInfo.dts||-1e4<=(Pt=ze.dts-Pt.dts-Pt.duration)&&Pt<=45e3&&(!tt||Pt<Ot)&&(tt=At,Ot=Pt));return tt?tt.gop:null},this.alignGopsAtStart_=function(ze){for(var tt,Pt,At,Ot,tn=ze.byteLength,_n=ze.nalCount,En=ze.duration,An=tt=0;An<Ne.length&&tt<ze.length&&(Pt=Ne[An]).pts!==(At=ze[tt]).pts;)At.pts>Pt.pts?An++:(tt++,tn-=At.byteLength,_n-=At.nalCount,En-=At.duration);return 0===tt?ze:tt===ze.length?null:((Ot=ze.slice(tt)).byteLength=tn,Ot.duration=En,Ot.nalCount=_n,Ot.pts=Ot[0].pts,Ot.dts=Ot[0].dts,Ot)},this.alignGopsAtEnd_=function(ze){for(var tt,Pt,At=Ne.length-1,Ot=ze.length-1,tn=null,_n=!1;0<=At&&0<=Ot;){if((tt=Ne[At]).pts===(Pt=ze[Ot]).pts){_n=!0;break}tt.pts>Pt.pts?At--:(At===Ne.length-1&&(tn=Ot),Ot--)}if(!_n&&null===tn)return null;if(0===(An=_n?Ot:tn))return ze;var En=ze.slice(An),An=En.reduce(function(In,Bn){return In.byteLength+=Bn.byteLength,In.duration+=Bn.duration,In.nalCount+=Bn.nalCount,In},{byteLength:0,duration:0,nalCount:0});return En.byteLength=An.byteLength,En.duration=An.duration,En.nalCount=An.nalCount,En.pts=En[0].pts,En.dts=En[0].dts,En},this.alignGopsWith=function(ze){Ne=ze}}).prototype=new ei,(Wr=function(L,se){this.numberOfTracks=0,this.metadataStream=se,this.remuxTracks=!(typeof(L=L||{}).remux<"u"&&!L.remux),this.keepOriginalTimestamps="boolean"==typeof L.keepOriginalTimestamps&&L.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Wr.prototype.init.call(this),this.push=function(ye){return ye.text?this.pendingCaptions.push(ye):ye.frames?this.pendingMetadata.push(ye):(this.pendingTracks.push(ye.track),this.pendingBytes+=ye.boxes.byteLength,"video"===ye.track.type&&(this.videoTrack=ye.track,this.pendingBoxes.push(ye.boxes)),void("audio"===ye.track.type&&(this.audioTrack=ye.track,this.pendingBoxes.unshift(ye.boxes))))}}).prototype=new ei,Wr.prototype.flush=function(L){var se,ye,pe,me=0,Ne={captions:[],captionStreams:{},metadata:[],info:{}},$e=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==L&&"AudioSegmentStream"!==L||this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?($e=this.videoTrack.timelineStartInfo.pts,nl.forEach(function(ze){Ne.info[ze]=this.videoTrack[ze]},this)):this.audioTrack&&($e=this.audioTrack.timelineStartInfo.pts,tl.forEach(function(ze){Ne.info[ze]=this.audioTrack[ze]},this)),this.videoTrack||this.audioTrack){for(Ne.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,L=function(pe){var se=t(),ye=h(pe);return(pe=new Uint8Array(se.byteLength+ye.byteLength)).set(se),pe.set(ye,se.byteLength),pe}(this.pendingTracks),Ne.initSegment=new Uint8Array(L.byteLength),Ne.initSegment.set(L),Ne.data=new Uint8Array(this.pendingBytes),pe=0;pe<this.pendingBoxes.length;pe++)Ne.data.set(this.pendingBoxes[pe],me),me+=this.pendingBoxes[pe].byteLength;for(pe=0;pe<this.pendingCaptions.length;pe++)(se=this.pendingCaptions[pe]).startTime=Ws(se.startPts,$e,this.keepOriginalTimestamps),se.endTime=Ws(se.endPts,$e,this.keepOriginalTimestamps),Ne.captionStreams[se.stream]=!0,Ne.captions.push(se);for(pe=0;pe<this.pendingMetadata.length;pe++)(ye=this.pendingMetadata[pe]).cueTime=Ws(ye.pts,$e,this.keepOriginalTimestamps),Ne.metadata.push(ye);for(Ne.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",Ne),pe=0;pe<Ne.captions.length;pe++)this.trigger("caption",se=Ne.captions[pe]);for(pe=0;pe<Ne.metadata.length;pe++)this.trigger("id3Frame",ye=Ne.metadata[pe])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Wr.prototype.setRemux=function(L){this.remuxTracks=L},(el=function(L){var se,ye,pe=this,me=!0;el.prototype.init.call(this),this.baseMediaDecodeTime=(L=L||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var Ne={};(this.transmuxPipeline_=Ne).type="aac",Ne.metadataStream=new ar.MetadataStream,Ne.aacStream=new ip,Ne.audioTimestampRolloverStream=new ar.TimestampRolloverStream("audio"),Ne.timedMetadataTimestampRolloverStream=new ar.TimestampRolloverStream("timed-metadata"),Ne.adtsStream=new uc,Ne.coalesceStream=new Wr(L,Ne.metadataStream),Ne.headOfPipeline=Ne.aacStream,Ne.aacStream.pipe(Ne.audioTimestampRolloverStream).pipe(Ne.adtsStream),Ne.aacStream.pipe(Ne.timedMetadataTimestampRolloverStream).pipe(Ne.metadataStream).pipe(Ne.coalesceStream),Ne.metadataStream.on("timestamp",function($e){Ne.aacStream.setTimestamp($e.timeStamp)}),Ne.aacStream.on("data",function($e){"timed-metadata"!==$e.type&&"audio"!==$e.type||Ne.audioSegmentStream||(ye=ye||{timelineStartInfo:{baseMediaDecodeTime:pe.baseMediaDecodeTime},codec:"adts",type:"audio"},Ne.coalesceStream.numberOfTracks++,Ne.audioSegmentStream=new wa(ye,L),Ne.audioSegmentStream.on("log",pe.getLogTrigger_("audioSegmentStream")),Ne.audioSegmentStream.on("timingInfo",pe.trigger.bind(pe,"audioTimingInfo")),Ne.adtsStream.pipe(Ne.audioSegmentStream).pipe(Ne.coalesceStream),pe.trigger("trackinfo",{hasAudio:!!ye,hasVideo:!!se}))}),Ne.coalesceStream.on("data",this.trigger.bind(this,"data")),Ne.coalesceStream.on("done",this.trigger.bind(this,"done")),fc(this,Ne)},this.setupTsPipeline=function(){var Ne={};(this.transmuxPipeline_=Ne).type="ts",Ne.metadataStream=new ar.MetadataStream,Ne.packetStream=new ar.TransportPacketStream,Ne.parseStream=new ar.TransportParseStream,Ne.elementaryStream=new ar.ElementaryStream,Ne.timestampRolloverStream=new ar.TimestampRolloverStream,Ne.adtsStream=new uc,Ne.h264Stream=new rp,Ne.captionStream=new ar.CaptionStream(L),Ne.coalesceStream=new Wr(L,Ne.metadataStream),Ne.headOfPipeline=Ne.packetStream,Ne.packetStream.pipe(Ne.parseStream).pipe(Ne.elementaryStream).pipe(Ne.timestampRolloverStream),Ne.timestampRolloverStream.pipe(Ne.h264Stream),Ne.timestampRolloverStream.pipe(Ne.adtsStream),Ne.timestampRolloverStream.pipe(Ne.metadataStream).pipe(Ne.coalesceStream),Ne.h264Stream.pipe(Ne.captionStream).pipe(Ne.coalesceStream),Ne.elementaryStream.on("data",function($e){var ze;if("metadata"===$e.type){for(ze=$e.tracks.length;ze--;)se||"video"!==$e.tracks[ze].type?ye||"audio"!==$e.tracks[ze].type||((ye=$e.tracks[ze]).timelineStartInfo.baseMediaDecodeTime=pe.baseMediaDecodeTime):(se=$e.tracks[ze]).timelineStartInfo.baseMediaDecodeTime=pe.baseMediaDecodeTime;se&&!Ne.videoSegmentStream&&(Ne.coalesceStream.numberOfTracks++,Ne.videoSegmentStream=new So(se,L),Ne.videoSegmentStream.on("log",pe.getLogTrigger_("videoSegmentStream")),Ne.videoSegmentStream.on("timelineStartInfo",function(tt){ye&&!L.keepOriginalTimestamps&&(ye.timelineStartInfo=tt,Ne.audioSegmentStream.setEarliestDts(tt.dts-pe.baseMediaDecodeTime))}),Ne.videoSegmentStream.on("processedGopsInfo",pe.trigger.bind(pe,"gopInfo")),Ne.videoSegmentStream.on("segmentTimingInfo",pe.trigger.bind(pe,"videoSegmentTimingInfo")),Ne.videoSegmentStream.on("baseMediaDecodeTime",function(tt){ye&&Ne.audioSegmentStream.setVideoBaseMediaDecodeTime(tt)}),Ne.videoSegmentStream.on("timingInfo",pe.trigger.bind(pe,"videoTimingInfo")),Ne.h264Stream.pipe(Ne.videoSegmentStream).pipe(Ne.coalesceStream)),ye&&!Ne.audioSegmentStream&&(Ne.coalesceStream.numberOfTracks++,Ne.audioSegmentStream=new wa(ye,L),Ne.audioSegmentStream.on("log",pe.getLogTrigger_("audioSegmentStream")),Ne.audioSegmentStream.on("timingInfo",pe.trigger.bind(pe,"audioTimingInfo")),Ne.audioSegmentStream.on("segmentTimingInfo",pe.trigger.bind(pe,"audioSegmentTimingInfo")),Ne.adtsStream.pipe(Ne.audioSegmentStream).pipe(Ne.coalesceStream)),pe.trigger("trackinfo",{hasAudio:!!ye,hasVideo:!!se})}}),Ne.coalesceStream.on("data",this.trigger.bind(this,"data")),Ne.coalesceStream.on("id3Frame",function($e){$e.dispatchType=Ne.metadataStream.dispatchType,pe.trigger("id3Frame",$e)}),Ne.coalesceStream.on("caption",this.trigger.bind(this,"caption")),Ne.coalesceStream.on("done",this.trigger.bind(this,"done")),fc(this,Ne)},this.setBaseMediaDecodeTime=function(Ne){var $e=this.transmuxPipeline_;L.keepOriginalTimestamps||(this.baseMediaDecodeTime=Ne),ye&&(ye.timelineStartInfo.dts=void 0,ye.timelineStartInfo.pts=void 0,Vr(ye),$e.audioTimestampRolloverStream&&$e.audioTimestampRolloverStream.discontinuity()),se&&($e.videoSegmentStream&&($e.videoSegmentStream.gopCache_=[]),se.timelineStartInfo.dts=void 0,se.timelineStartInfo.pts=void 0,Vr(se),$e.captionStream.reset()),$e.timestampRolloverStream&&$e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(Ne){ye&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(Ne)},this.setRemux=function(Ne){var $e=this.transmuxPipeline_;L.remux=Ne,$e&&$e.coalesceStream&&$e.coalesceStream.setRemux(Ne)},this.alignGopsWith=function(Ne){se&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(Ne)},this.getLogTrigger_=function(Ne){var $e=this;return function(ze){ze.stream=Ne,$e.trigger("log",ze)}},this.push=function(Ne){var $e;me&&(($e=ap(Ne))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():$e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),me=!1),this.transmuxPipeline_.headOfPipeline.push(Ne)},this.flush=function(){me=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new ei;var Sa,lp={Transmuxer:el,VideoSegmentStream:So,AudioSegmentStream:wa,AUDIO_PROPERTIES:tl,VIDEO_PROPERTIES:nl,generateSegmentTimingInfo:Qs},qr=function(L){var se="";return se+=String.fromCharCode(L[0]),se+=String.fromCharCode(L[1]),(se+=String.fromCharCode(L[2]))+String.fromCharCode(L[3])},up=ui=function(L){return L>>>0},si=function L(se,ye){var pe,me,Ne,$e=[];if(!ye.length)return null;for(pe=0;pe<se.byteLength;)me=up(se[pe]<<24|se[pe+1]<<16|se[pe+2]<<8|se[pe+3]),Ne=qr(se.subarray(pe+4,pe+8)),me=1<me?pe+me:se.byteLength,Ne===ye[0]&&(1===ye.length?$e.push(se.subarray(pe+8,me)):(Ne=L(se.subarray(pe+8,me),ye.slice(1))).length&&($e=$e.concat(Ne))),pe=me;return $e},dp=ui,cp=Sa.getUint64,_c=function(L){return{isLeading:(12&L[0])>>>2,dependsOn:3&L[0],isDependedOn:(192&L[1])>>>6,hasRedundancy:(48&L[1])>>>4,paddingValue:(14&L[1])>>>1,isNonSyncSample:1&L[1],degradationPriority:L[2]<<8|L[3]}},rl=(ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ei=typeof window<"u"?window:typeof ei<"u"?ei:typeof self<"u"?self:{}),mp=al,_p=_o.CaptionStream,gp=function(){var L,se,ye,pe,me,Ne,$e=!1;this.isInitialized=function(){return $e},this.init=function(ze){L=new _p,$e=!0,Ne=!!ze&&ze.isPartial,L.on("data",function(tt){tt.startTime=tt.startPts/pe,tt.endTime=tt.endPts/pe,me.captions.push(tt),me.captionStreams[tt.stream]=!0}),L.on("log",function(tt){me.logs.push(tt)})},this.isNewInit=function(ze,tt){return!(ze&&0===ze.length||tt&&"object"==typeof tt&&0===Object.keys(tt).length||ye===ze[0]&&pe===tt[ye])},this.parse=function(ze,tt,Pt){if(!this.isInitialized()||!tt||!Pt)return null;if(this.isNewInit(tt,Pt))pe=Pt[ye=tt[0]];else if(null===ye||!pe)return se.push(ze),null;for(;0<se.length;){var At=se.shift();this.parse(At,tt,Pt)}return _n=pe,(ze=null===(tn=ye)?null:(tn=function sp(pe,se){var ye=si(pe,["moof","traf"]),me=(pe=si(pe,["mdat"]),{}),Ne=[];return pe.forEach(function($e,ze){Ne.push({mdat:$e,traf:ze=ye[ze]})}),Ne.forEach(function(En){var ze,tt,Pt,At,Ot,tn=En.mdat,An=si(In=En.traf,["tfhd"]),_n=function(At){var se=new DataView(At.buffer,At.byteOffset,At.byteLength),ye={version:At[0],flags:new Uint8Array(At.subarray(1,4)),trackId:se.getUint32(4)},pe=1&ye.flags[2],me=2&ye.flags[2],Ne=8&ye.flags[2],$e=16&ye.flags[2],ze=32&ye.flags[2],tt=65536&ye.flags[0],Pt=131072&ye.flags[0];return At=8,pe&&(At+=4,ye.baseDataOffset=se.getUint32(12),At+=4),me&&(ye.sampleDescriptionIndex=se.getUint32(At),At+=4),Ne&&(ye.defaultSampleDuration=se.getUint32(At),At+=4),$e&&(ye.defaultSampleSize=se.getUint32(At),At+=4),ze&&(ye.defaultSampleFlags=se.getUint32(At)),tt&&(ye.durationIsEmpty=!0),!pe&&Pt&&(ye.baseDataOffsetIsMoof=!0),ye}(An[0]),In=(En=_n.trackId,An=0<(An=si(In,["tfdt"])).length?function(L){var se={version:L[0],flags:new Uint8Array(L.subarray(1,4))};return se.baseMediaDecodeTime=1===se.version?cp(L.subarray(4)):dp(L[4]<<24|L[5]<<16|L[6]<<8|L[7]),se}(An[0]).baseMediaDecodeTime:0,si(In,["trun"]));se===En&&0<In.length&&(ze=An,tt=_n.defaultSampleDuration||0,Pt=_n.defaultSampleSize||0,At=_n.trackId,Ot=[],In.forEach(function(Bn){(Bn=function(L){var se,ye={version:L[0],flags:new Uint8Array(L.subarray(1,4)),samples:[]},pe=new DataView(L.buffer,L.byteOffset,L.byteLength),me=1&ye.flags[2],Ne=4&ye.flags[2],$e=1&ye.flags[1],ze=2&ye.flags[1],tt=4&ye.flags[1],Pt=8&ye.flags[1],At=pe.getUint32(4),Ot=8;for(me&&(ye.dataOffset=pe.getInt32(Ot),Ot+=4),Ne&&At&&(se={flags:_c(L.subarray(Ot,Ot+4))},Ot+=4,$e&&(se.duration=pe.getUint32(Ot),Ot+=4),ze&&(se.size=pe.getUint32(Ot),Ot+=4),Pt&&(se.compositionTimeOffset=1===ye.version?pe.getInt32(Ot):pe.getUint32(Ot),Ot+=4),ye.samples.push(se),At--);At--;)se={},$e&&(se.duration=pe.getUint32(Ot),Ot+=4),ze&&(se.size=pe.getUint32(Ot),Ot+=4),tt&&(se.flags=_c(L.subarray(Ot,Ot+4)),Ot+=4),Pt&&(se.compositionTimeOffset=1===ye.version?pe.getInt32(Ot):pe.getUint32(Ot),Ot+=4),ye.samples.push(se);return ye}(Bn).samples).forEach(function(vn){void 0===vn.duration&&(vn.duration=tt),void 0===vn.size&&(vn.size=Pt),vn.trackId=At,vn.dts=ze,void 0===vn.compositionTimeOffset&&(vn.compositionTimeOffset=0),"bigint"==typeof ze?(vn.pts=ze+rl.BigInt(vn.compositionTimeOffset),ze+=rl.BigInt(vn.duration)):(vn.pts=ze+vn.compositionTimeOffset,ze+=vn.duration)}),Ot=Ot.concat(Bn)}),tn=function(Bn,vn,Sn){for(var ur,Xr,ol=new DataView(Bn.buffer,Bn.byteOffset,Bn.byteLength),sl={logs:[],seiNals:[]},or=0;or+4<Bn.length;or+=ur)if(ur=ol.getUint32(or),or+=4,!(ur<=0))switch(31&Bn[or]){case 6:var dr=Bn.subarray(or+1,or+1+ur),Co=function(kp,vc){for(var yc=kp,ll=0;ll<vc.length;ll++){var ul=vc[ll];if(yc<ul.size)return ul;yc-=ul.size}return null}(or,vn);if(dr={nalUnitType:"sei_rbsp",size:ur,data:dr,escapedRBSP:mp(dr),trackId:Sn},Co)dr.pts=Co.pts,dr.dts=Co.dts,Xr=Co;else{if(!Xr){sl.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+or+" for trackId "+Sn+". See mux.js#223."});break}dr.pts=Xr.pts,dr.dts=Xr.dts}sl.seiNals.push(dr)}return sl}(tn,Ot,En),me[En]||(me[En]={seiNals:[],logs:[]}),me[En].seiNals=me[En].seiNals.concat(tn.seiNals),me[En].logs=me[En].logs.concat(tn.logs))}),me}(ze,tn)[tn]||{},{seiNals:tn.seiNals,logs:tn.logs,timescale:_n}))&&ze.logs&&(me.logs=me.logs.concat(ze.logs)),null!==ze&&ze.seiNals?(this.pushNals(ze.seiNals),this.flushStream(),me):me.logs.length?{logs:me.logs,captions:[],captionStreams:[]}:null;var tn,_n},this.pushNals=function(ze){if(!this.isInitialized()||!ze||0===ze.length)return null;ze.forEach(function(tt){L.push(tt)})},this.flushStream=function(){if(!this.isInitialized())return null;Ne?L.partialFlush():L.flush()},this.clearParsedCaptions=function(){me.captions=[],me.captionStreams={},me.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;L.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){se=[],pe=ye=null,me?this.clearParsedCaptions():me={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Eo=ui,xa=function(L){return("00"+L.toString(16)).slice(-2)},vp=Sa.getUint64,bp=(ei=function(L){return si(L,["moov","trak"]).reduce(function(se,ye){var me,Ne=si(ye,["tkhd"])[0];return Ne?(Ne=Eo(Ne[me=0===Ne[0]?12:20]<<24|Ne[1+me]<<16|Ne[2+me]<<8|Ne[3+me]),(ye=si(ye,["mdia","mdhd"])[0])?(se[Ne]=Eo(ye[me=0===ye[0]?12:20]<<24|ye[1+me]<<16|ye[2+me]<<8|ye[3+me]),se):null):null},{})},ui=function(se){se=si(se,["moov","trak"]);var ye=[];return se.forEach(function(pe){var me=si(pe,["mdia","hdlr"]),Ne=si(pe,["tkhd"]);me.forEach(function($e,ze){$e=qr($e.subarray(8,12)),ze=Ne[ze],"vide"===$e&&(ze=0===(ze=new DataView(ze.buffer,ze.byteOffset,ze.byteLength)).getUint8(0)?ze.getUint32(12):ze.getUint32(20),ye.push(ze))})}),ye},al=function(L,se){return"bigint"==typeof(se=si(se,["moof","traf"]).reduce(function(ye,ze){var me,Ne=si(ze,["tfhd"])[0],$e=Eo(Ne[4]<<24|Ne[5]<<16|Ne[6]<<8|Ne[7]);return Ne=L[$e]||9e4,$e=si(ze,["tfdt"])[0],ze=new DataView($e.buffer,$e.byteOffset,$e.byteLength),"bigint"==typeof(ze=1===$e[0]?vp($e.subarray(4,12)):ze.getUint32(4))?me=ze/rl.BigInt(Ne):"number"!=typeof ze||isNaN(ze)||(me=ze/Ne),(me=me<Number.MAX_SAFE_INTEGER?Number(me):me)<ye?me:ye},1/0))||isFinite(se)?se:0}),wp=Sa=function(se){se=si(se,["moov","trak"]);var ye=[];return se.forEach(function(pe){var me={},Ne=si(pe,["tkhd"])[0];Ne&&(Ne=($e=new DataView(Ne.buffer,Ne.byteOffset,Ne.byteLength)).getUint8(0),me.id=$e.getUint32(0===Ne?12:20));var $e=si(pe,["mdia","hdlr"])[0];$e&&(tt=qr($e.subarray(8,12)),me.type="vide"===tt?"video":"soun"===tt?"audio":tt);var ze,tt=si(pe,["mdia","minf","stbl","stsd"])[0];tt&&(tt=tt.subarray(8),me.codec=qr(tt.subarray(4,8)),(tt=si(tt,[me.codec])[0])&&(/^[asm]vc[1-9]$/i.test(me.codec)?(ze=tt.subarray(78),"avcC"===qr(ze.subarray(4,8))&&11<ze.length?(me.codec+=".",me.codec+=xa(ze[9]),me.codec+=xa(ze[10]),me.codec+=xa(ze[11])):me.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(me.codec)?(ze=tt.subarray(28),"esds"===qr(ze.subarray(4,8))&&20<ze.length&&0!==ze[19]?(me.codec+="."+xa(ze[19]),me.codec+="."+xa(ze[20]>>>2&63).replace(/^0/,"")):me.codec="mp4a.40.2"):me.codec=me.codec.toLowerCase())),(pe=si(pe,["mdia","mdhd"])[0])&&(me.timescale=function(L){var se=0===L[0]?12:20;return Eo(L[se]<<24|L[1+se]<<16|L[2+se]<<8|L[3+se])}(pe)),ye.push(me)}),ye},$r=Pi,Fn={};function xp(L,se,ye){for(var pe,me,Ne,$e,ze=0,tt=188,Pt=!1;tt<=L.byteLength;)if(71!==L[ze]||71!==L[tt]&&tt!==L.byteLength)ze++,tt++;else{if(pe=L.subarray(ze,tt),"pes"===Fn.ts.parseType(pe,se.pid)&&(me=Fn.ts.parsePesType(pe,se.table),Ne=Fn.ts.parsePayloadUnitStartIndicator(pe),"audio"===me&&Ne&&($e=Fn.ts.parsePesTime(pe))&&($e.type="audio",ye.audio.push($e),Pt=!0)),Pt)break;ze+=188,tt+=188}for(ze=(tt=L.byteLength)-188,Pt=!1;0<=ze;)if(71!==L[ze]||71!==L[tt]&&tt!==L.byteLength)ze--,tt--;else{if(pe=L.subarray(ze,tt),"pes"===Fn.ts.parseType(pe,se.pid)&&(me=Fn.ts.parsePesType(pe,se.table),Ne=Fn.ts.parsePayloadUnitStartIndicator(pe),"audio"===me&&Ne&&($e=Fn.ts.parsePesTime(pe))&&($e.type="audio",ye.audio.push($e),Pt=!0)),Pt)break;ze-=188,tt-=188}}function Sp(L){var se,ye={pid:null,table:null},pe={};for(se in function(me,Ne){for(var $e,ze=0,tt=188;tt<me.byteLength;)if(71!==me[ze]||71!==me[tt])ze++,tt++;else{switch($e=me.subarray(ze,tt),Fn.ts.parseType($e,Ne.pid)){case"pat":Ne.pid=Fn.ts.parsePat($e);break;case"pmt":var Pt=Fn.ts.parsePmt($e);Ne.table=Ne.table||{},Object.keys(Pt).forEach(function(At){Ne.table[At]=Pt[At]})}ze+=188,tt+=188}}(L,ye),ye.table)if(ye.table.hasOwnProperty(se))switch(ye.table[se]){case _i.H264_STREAM_TYPE:pe.video=[],function(me,Ne,$e){for(var ze,tt,Pt,At,Ot,tn,_n,En,An=0,In=188,Bn=!1,vn={data:[],size:0};In<me.byteLength;)if(71!==me[An]||71!==me[In])An++,In++;else{if(ze=me.subarray(An,In),"pes"===Fn.ts.parseType(ze,Ne.pid)&&(tt=Fn.ts.parsePesType(ze,Ne.table),Pt=Fn.ts.parsePayloadUnitStartIndicator(ze),"video"===tt&&(Pt&&!Bn&&(At=Fn.ts.parsePesTime(ze))&&(At.type="video",$e.video.push(At),Bn=!0),!$e.firstKeyFrame))){if(Pt&&0!==vn.size){for(Ot=new Uint8Array(vn.size),tn=0;vn.data.length;)_n=vn.data.shift(),Ot.set(_n,tn),tn+=_n.byteLength;!Fn.ts.videoPacketContainsKeyFrame(Ot)||(En=Fn.ts.parsePesTime(Ot))&&($e.firstKeyFrame=En,$e.firstKeyFrame.type="video"),vn.size=0}vn.data.push(ze),vn.size+=ze.byteLength}if(Bn&&$e.firstKeyFrame)break;An+=188,In+=188}for(An=(In=me.byteLength)-188,Bn=!1;0<=An;)if(71!==me[An]||71!==me[In])An--,In--;else{if(ze=me.subarray(An,In),"pes"===Fn.ts.parseType(ze,Ne.pid)&&(tt=Fn.ts.parsePesType(ze,Ne.table),Pt=Fn.ts.parsePayloadUnitStartIndicator(ze),"video"===tt&&Pt&&(At=Fn.ts.parsePesTime(ze))&&(At.type="video",$e.video.push(At),Bn=!0)),Bn)break;An-=188,In-=188}}(L,ye,pe),0===pe.video.length&&delete pe.video;break;case _i.ADTS_STREAM_TYPE:pe.audio=[],xp(L,ye,pe),0===pe.audio.length&&delete pe.audio}return pe}Fn.ts={parseType:function(L,se){return 0===(L=mc(L))?"pat":L===se?"pmt":se?"pes":null},parsePat:function(L){var se=To(L),ye=4+ko(L);return se&&(ye+=L[ye]+1),(31&L[ye+10])<<8|L[ye+11]},parsePmt:function(L){var se={},ye=To(L),pe=4+ko(L);if(ye&&(pe+=L[pe]+1),1&L[pe+5]){for(var me=3+((15&L[pe+1])<<8|L[pe+2])-4,Ne=12+((15&L[pe+10])<<8|L[pe+11]);Ne<me;){var $e=pe+Ne;se[(31&L[$e+1])<<8|L[$e+2]]=L[$e],Ne+=5+((15&L[$e+3])<<8|L[$e+4])}return se}},parsePayloadUnitStartIndicator:To,parsePesType:function(L,se){switch(se[mc(L)]){case _i.H264_STREAM_TYPE:return"video";case _i.ADTS_STREAM_TYPE:return"audio";case _i.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(L){if(!To(L))return null;var se=4+ko(L);if(se>=L.byteLength)return null;var ye=null,pe=L[se+7];return 192&pe&&((ye={}).pts=(14&L[se+9])<<27|(255&L[se+10])<<20|(254&L[se+11])<<12|(255&L[se+12])<<5|(254&L[se+13])>>>3,ye.pts*=4,ye.pts+=(6&L[se+13])>>>1,ye.dts=ye.pts,64&pe&&(ye.dts=(14&L[se+14])<<27|(255&L[se+15])<<20|(254&L[se+16])<<12|(255&L[se+17])<<5|(254&L[se+18])>>>3,ye.dts*=4,ye.dts+=(6&L[se+18])>>>1)),ye},videoPacketContainsKeyFrame:function(L){for(var se=4+ko(L),ye=L.subarray(se),pe=0,me=0,Ne=!1;me<ye.byteLength-3;me++)if(1===ye[me+2]){pe=me+5;break}for(;pe<ye.byteLength;)switch(ye[pe]){case 0:if(0!==ye[pe-1]){pe+=2;break}if(0!==ye[pe-2]){pe++;break}for(me+3!==pe-2&&"slice_layer_without_partitioning_rbsp_idr"===il(31&ye[me+3])&&(Ne=!0);1!==ye[++pe]&&pe<ye.length;);me=pe-2,pe+=3;break;case 1:if(0!==ye[pe-1]||0!==ye[pe-2]){pe+=3;break}"slice_layer_without_partitioning_rbsp_idr"===il(31&ye[me+3])&&(Ne=!0),me=pe-2,pe+=3;break;default:pe+=3}return ye=ye.subarray(me),pe-=me,me=0,!!(ye&&3<ye.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===il(31&ye[me+3]))||Ne}},Fn.aac=xo;var yr=gr,Tp=function(L,se){var ye,pe,me=(Fn.aac.isLikelyAacData(L)?function(Ne){for(var $e,ze=!1,tt=0,Pt=null,At=null,Ot=0,tn=0;3<=Ne.length-tn;){switch(Fn.aac.parseType(Ne,tn)){case"timed-metadata":if(Ne.length-tn<10){ze=!0;break}if((Ot=Fn.aac.parseId3TagSize(Ne,tn))>Ne.length){ze=!0;break}null===At&&($e=Ne.subarray(tn,tn+Ot),At=Fn.aac.parseAacTimestamp($e)),tn+=Ot;break;case"audio":if(Ne.length-tn<7){ze=!0;break}if((Ot=Fn.aac.parseAdtsSize(Ne,tn))>Ne.length){ze=!0;break}null===Pt&&($e=Ne.subarray(tn,tn+Ot),Pt=Fn.aac.parseSampleRate($e)),tt++,tn+=Ot;break;default:tn++}if(ze)return null}if(null===Pt||null===At)return null;var _n=yr/Pt;return{audio:[{type:"audio",dts:At,pts:At},{type:"audio",dts:At+1024*tt*_n,pts:At+1024*tt*_n}]}}:Sp)(L);return me&&(me.audio||me.video)?(L=se,(se=me).audio&&se.audio.length&&(typeof(ye=L)<"u"&&!isNaN(ye)||(ye=se.audio[0].dts),se.audio.forEach(function(Ne){Ne.dts=$r(Ne.dts,ye),Ne.pts=$r(Ne.pts,ye),Ne.dtsTime=Ne.dts/yr,Ne.ptsTime=Ne.pts/yr})),se.video&&se.video.length&&(typeof(pe=L)<"u"&&!isNaN(pe)||(pe=se.video[0].dts),se.video.forEach(function(Ne){Ne.dts=$r(Ne.dts,pe),Ne.pts=$r(Ne.pts,pe),Ne.dtsTime=Ne.dts/yr,Ne.ptsTime=Ne.pts/yr}),se.firstKeyFrame&&((se=se.firstKeyFrame).dts=$r(se.dts,pe),se.pts=$r(se.pts,pe),se.dtsTime=se.dts/yr,se.ptsTime=se.pts/yr)),me):null},gc=function(){function L(ye,pe){this.options=pe||{},this.self=ye,this.init()}var se=L.prototype;return se.init=function(){var ye,pe;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new lp.Transmuxer(this.options),ye=this.self,(pe=this.transmuxer).on("data",function(me){var Ne=me.initSegment;me.initSegment={data:Ne.buffer,byteOffset:Ne.byteOffset,byteLength:Ne.byteLength},me.data=(Ne=me.data).buffer,ye.postMessage({action:"data",segment:me,byteOffset:Ne.byteOffset,byteLength:Ne.byteLength},[me.data])}),pe.on("done",function(me){ye.postMessage({action:"done"})}),pe.on("gopInfo",function(me){ye.postMessage({action:"gopInfo",gopInfo:me})}),pe.on("videoSegmentTimingInfo",function(me){var Ne={start:{decode:xi(me.start.dts),presentation:xi(me.start.pts)},end:{decode:xi(me.end.dts),presentation:xi(me.end.pts)},baseMediaDecodeTime:xi(me.baseMediaDecodeTime)};me.prependedContentDuration&&(Ne.prependedContentDuration=xi(me.prependedContentDuration)),ye.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:Ne})}),pe.on("audioSegmentTimingInfo",function(me){var Ne={start:{decode:xi(me.start.dts),presentation:xi(me.start.pts)},end:{decode:xi(me.end.dts),presentation:xi(me.end.pts)},baseMediaDecodeTime:xi(me.baseMediaDecodeTime)};me.prependedContentDuration&&(Ne.prependedContentDuration=xi(me.prependedContentDuration)),ye.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:Ne})}),pe.on("id3Frame",function(me){ye.postMessage({action:"id3Frame",id3Frame:me})}),pe.on("caption",function(me){ye.postMessage({action:"caption",caption:me})}),pe.on("trackinfo",function(me){ye.postMessage({action:"trackinfo",trackInfo:me})}),pe.on("audioTimingInfo",function(me){ye.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:xi(me.start),end:xi(me.end)}})}),pe.on("videoTimingInfo",function(me){ye.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:xi(me.start),end:xi(me.end)}})}),pe.on("log",function(me){ye.postMessage({action:"log",log:me})})},se.pushMp4Captions=function(me){this.captionParser||(this.captionParser=new gp,this.captionParser.init());var pe=new Uint8Array(me.data,me.byteOffset,me.byteLength);me=this.captionParser.parse(pe,me.trackIds,me.timescales),this.self.postMessage({action:"mp4Captions",captions:me&&me.captions||[],logs:me&&me.logs||[],data:pe.buffer},[pe.buffer])},se.probeMp4StartTime=function(pe){var me=bp(me=pe.timescales,pe=pe.data);this.self.postMessage({action:"probeMp4StartTime",startTime:me,data:pe},[pe.buffer])},se.probeMp4Tracks=function(me){var pe=me.data;me=wp(pe),this.self.postMessage({action:"probeMp4Tracks",tracks:me,data:pe},[pe.buffer])},se.probeTs=function(Ne){var pe=Ne.data,me=(Ne="number"!=typeof(me=Ne.baseStartTime)||isNaN(me)?void 0:me*gr,Tp(pe,Ne));Ne=null,me&&((Ne={hasVideo:me.video&&2===me.video.length||!1,hasAudio:me.audio&&2===me.audio.length||!1}).hasVideo&&(Ne.videoStart=me.video[0].ptsTime),Ne.hasAudio&&(Ne.audioStart=me.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:Ne,data:pe},[pe.buffer])},se.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},se.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},se.push=function(ye){ye=new Uint8Array(ye.data,ye.byteOffset,ye.byteLength),this.transmuxer.push(ye)},se.reset=function(){this.transmuxer.reset()},se.setTimestampOffset=function(ye){ye=ye.timestampOffset||0,this.transmuxer.setBaseMediaDecodeTime(Math.round(tc(ye)))},se.setAudioAppendStart=function(ye){this.transmuxer.setAudioAppendStart(Math.ceil(tc(ye.appendStart)))},se.setRemux=function(ye){this.transmuxer.setRemux(ye.remux)},se.flush=function(ye){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},se.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},se.alignGopsWith=function(ye){this.transmuxer.alignGopsWith(ye.gopsToAlignWith.slice())},L}();self.onmessage=function(L){"init"===L.data.action&&L.data.options?this.messageHandlers=new gc(self,L.data.options):(this.messageHandlers||(this.messageHandlers=new gc(self)),L.data&&L.data.action&&"init"!==L.data.action&&this.messageHandlers[L.data.action]&&this.messageHandlers[L.data.action](L.data))}}))),Md=function(i){i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),"function"==typeof i.currentTransmux?i.currentTransmux():gd(i.currentTransmux))},Rd=function(i){!function Yh(i,l){if(!l.currentTransmux)return l.currentTransmux=i,vd(l,i),0;l.transmuxQueue.push(vd.bind(null,l,i))}("reset",i)},so=2,Rs=-101,Ls=-102,cf=qi("CodecUtils"),lo=qi("PlaylistSelector"),Fs=(Ci=function(){var i=this.useDevicePixelRatio&&window.devicePixelRatio||1;return Ed(this.playlists.master,this.systemBandwidth,parseInt(ro(this.tech_.el(),"width"),10)*i,parseInt(ro(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},function(i){function l(t,a){var s=i.call(this)||this;if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=t.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=t.hasPlayed,s.currentTime_=t.currentTime,s.seekable_=t.seekable,s.seeking_=t.seeking,s.duration_=t.duration,s.mediaSource_=t.mediaSource,s.vhs_=t.vhs,s.loaderType_=t.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=t.segmentMetadataTrack,s.goalBufferLength_=t.goalBufferLength,s.sourceType_=t.sourceType,s.sourceUpdater_=t.sourceUpdater,s.inbandTextTracks_=t.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=t.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=t.parse708captions,s.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,s.captionServices_=t.captionServices,s.experimentalExactManifestTimings=t.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=11<=ut.browser.IE_VERSION,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=t.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=t.decrypter,s.syncController_=t.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=qi("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(Pe(s),"state",{get:function(){return this.state_},set:function(h){h!==this.state_&&(this.logger_(this.state_+" -> "+h),this.state_=h,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"main"===s.loaderType_&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"audio"===s.loaderType_&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}ke(l,i);var o=l.prototype;return o.createTransmuxer_=function(){return function(i){var l=new uf;l.currentTransmux=null,l.transmuxQueue=[];var o=l.terminate;return l.terminate=function(){return l.currentTransmux=null,l.transmuxQueue.length=0,o.call(l)},l.postMessage({action:"init",options:i}),l}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},o.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},o.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},o.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},o.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},o.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},o.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},o.error=function(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},o.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Rd(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},o.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return ut.createTimeRanges();if("main"===this.loaderType_){var a=t.hasAudio,s=t.hasVideo;if(t=t.isMuxed,s&&a&&!this.audioDisabled_&&!t)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},o.initSegmentForMap=function(t,a){if(void 0===a&&(a=!1),!t)return null;var s=to(t),h=this.initSegments_[s];return a&&!h&&t.bytes&&(this.initSegments_[s]=h={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),h||t},o.segmentKey=function(t,a){if(void 0===a&&(a=!1),!t)return null;var s=dd(t),h=this.keyCache_[s];return this.cacheEncryptionKeys_&&a&&!h&&t.bytes&&(this.keyCache_[s]=h={resolvedUri:t.resolvedUri,bytes:t.bytes}),t={resolvedUri:(h||t).resolvedUri},h&&(t.bytes=h.bytes),t},o.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},o.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},o.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},o.playlist=function(t,a){if(void 0===a&&(a={}),t){var s=this.playlist_,h=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=a,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var _=null;if(s&&(s.id?_=s.id:s.uri&&(_=s.uri)),this.logger_("playlist update ["+_+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");this.logger_("live window shift ["+(a=t.mediaSequence-s.mediaSequence)+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(_=this.playlist_.segments[this.mediaIndex],!this.partIndex||_.parts&&_.parts.length&&_.parts[this.partIndex]||(_=this.mediaIndex,this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=_))),h&&(h.mediaIndex-=a,h.mediaIndex<0?(h.mediaIndex=null,h.partIndex=null):(0<=h.mediaIndex&&(h.segment=t.segments[h.mediaIndex]),0<=h.partIndex&&h.segment.parts&&(h.part=h.segment.parts[h.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,t)}},o.pause=function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},o.paused=function(){return null===this.checkBufferTimeout_},o.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},o.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},o.resyncLoader=function(){this.transmuxer_&&Rd(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},o.remove=function(t,a,s,h){if(void 0===s&&(s=function(){}),void 0===h&&(h=!1),(a=a===1/0?this.duration_():a)<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var _,D=1,Q=function(){0==--D&&s()};for(_ in!h&&this.audioDisabled_||(D++,this.sourceUpdater_.removeAudio(t,a,Q)),!h&&"main"!==this.loaderType_||(this.gopBuffer_=function(ie,be,Se,Ie){for(var Te=Math.ceil((be-Ie)*ao),Ue=Math.ceil((Se-Ie)*ao),Ke=(Ie=ie.slice(),ie.length);Ke--&&!(ie[Ke].pts<=Ue););if(-1===Ke)return Ie;for(var Re=Ke+1;Re--&&!(ie[Re].pts<=Te););return Re=Math.max(Re,0),Ie.splice(Re,Ke-Re+1),Ie}(this.gopBuffer_,t,a,this.timeMapping_),D++,this.sourceUpdater_.removeVideo(t,a,Q)),this.inbandTextTracks_)ya(t,a,this.inbandTextTracks_[_]);ya(t,a,this.segmentMetadataTrack_),Q()}else this.logger_("skipping remove because no source updater or starting media info")},o.monitorBuffer_=function(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)},o.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),500)},o.fillBuffer_=function(){var t;this.sourceUpdater_.updating()||(t=this.chooseNextRequest_())&&("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))},o.isEndOfStream_=function(h,a,s){if(void 0===h&&(h=this.mediaIndex),void 0===a&&(a=this.playlist_),void 0===s&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var _="number"==typeof h&&a.segments[h];return h=h+1===a.segments.length,_=!_||!_.parts||s+1===_.parts.length,a.endList&&"open"===this.mediaSource_.readyState&&h&&_},o.chooseNextRequest_=function(){var h,_,t=Xu(h=this.buffered_())||0,a=bs(h,this.currentTime_()),D=!this.hasPlayed_()&&1<=a,s=a>=this.goalBufferLength_();if(!(h=this.playlist_.segments).length||D||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()),(D={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)}).isSyncRequest?D.mediaIndex=function(be,Se,Ie){Se=Se||[];for(var Te=[],Ue=0,Ke=0;Ke<Se.length;Ke++){var Re=Se[Ke];if(be===Re.timeline&&(Te.push(Ke),Ie<(Ue+=Re.duration)))return Ke}return 0===Te.length?0:Te[Te.length-1]}(this.currentTimeline_,h,t):null!==this.mediaIndex?(_="number"==typeof this.partIndex?this.partIndex:-1,D.startOfSegment=(s=h[this.mediaIndex]).end||t,s.parts&&s.parts[_+1]?(D.mediaIndex=this.mediaIndex,D.partIndex=_+1):D.mediaIndex=this.mediaIndex+1):(_=(ie=Ii.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time})).segmentIndex,Q=ie.startTime,ie=ie.partIndex,D.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),D.mediaIndex=_,D.startOfSegment=Q,D.partIndex=ie);var Q=h[D.mediaIndex],ie=Q&&"number"==typeof D.partIndex&&Q.parts&&Q.parts[D.partIndex];return!Q||"number"==typeof D.partIndex&&!ie?null:("number"!=typeof D.partIndex&&Q.parts&&(D.partIndex=0,ie=Q.parts[0]),a||!ie||ie.independent||(0===D.partIndex?(ie=(a=h[D.mediaIndex-1]).parts&&a.parts.length&&a.parts[a.parts.length-1])&&ie.independent&&(--D.mediaIndex,D.partIndex=a.parts.length-1,D.independent="previous segment"):Q.parts[D.partIndex-1].independent&&(--D.partIndex,D.independent="previous part")),Q=this.mediaSource_&&"ended"===this.mediaSource_.readyState,D.mediaIndex>=h.length-1&&Q&&!this.seeking_()?null:this.generateSegmentInfo_(D))},o.generateSegmentInfo_=function(be){var Se=be.independent,a=be.playlist,s=be.mediaIndex,h=be.startOfSegment,_=be.isSyncRequest,D=be.partIndex,Ie=be.forceTimestampOffset,Q=be.getMediaInfoForTime,ie=a.segments[s];return be="number"==typeof D&&ie.parts[D],Se={requestId:"segment-loader-"+Math.random(),uri:be&&be.resolvedUri||ie.resolvedUri,mediaIndex:s,partIndex:be?D:null,isSyncRequest:_,startOfSegment:h,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:ie.timeline,duration:be&&be.duration||ie.duration,segment:ie,part:be,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:Q,independent:Se},Ie=typeof Ie<"u"?Ie:this.isPendingTimestampOffset_,Se.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:ie.timeline,currentTimeline:this.currentTimeline_,startOfSegment:h,buffered:this.buffered_(),overrideCheck:Ie}),"number"==typeof(Ie=Xu(this.sourceUpdater_.audioBuffered()))&&(Se.audioAppendStart=Ie-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(Se.gopsToAlignWith=function(Te,Ue,Ke){if(typeof Ue>"u"||null===Ue||!Te.length)return[];for(var Re=Math.ceil((Ue-Ke+3)*ao),it=0;it<Te.length&&!(Te[it].pts>Re);it++);return Te.slice(it)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),Se},o.timestampOffsetForSegment_=function(t){return s=(a=t).segmentTimeline,h=a.currentTimeline,t=a.buffered,a.overrideCheck||s!==h?s<h||!t.length?a.startOfSegment:t.end(t.length-1):null;var a,s,h},o.earlyAbortWhenNeeded_=function(t){var a,s,h,_,D,Q,ie,be,Se,Ie,Te,Ue,Ke;!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3||(a=this.currentTime_(),Ke=Ii.estimateSegmentRequestTime(D=this.pendingSegment_.duration,_=t.bandwidth,this.playlist_,t.bytesReceived),s=this.buffered_(),h=a,void 0===(t=this.vhs_.tech_.playbackRate())&&(t=1),Ke<=(t=((s.length?s.end(s.length-1):0)-h)/t-1)||(_={master:this.vhs_.playlists.master,currentTime:a,bandwidth:_,duration:this.duration_(),segmentDuration:D,timeUntilRebuffer:t,currentTimeline:this.currentTimeline_,syncController:this.syncController_},Q=_.currentTime,ie=_.bandwidth,be=_.duration,Se=_.segmentDuration,Ie=_.timeUntilRebuffer,Te=_.currentTimeline,Ue=_.syncController,Ur(D=(_=(D=(D=(_=(D=_.master).playlists.filter(function(Re){return!Ii.isIncompatible(Re)})).filter(Ii.isEnabled)).length?D:_.filter(function(Re){return!Ii.isDisabled(Re)})).filter(Ii.hasAttribute.bind(null,"BANDWIDTH")).map(function(Re){var it=Ue.getSyncPoint(Re,be,Te,Q)?1:2;return{playlist:Re,rebufferingImpact:Ii.estimateSegmentRequestTime(Se,ie,Re)*it-Ie}})).filter(function(Re){return Re.rebufferingImpact<=0}),function(Re,it){return Ps(it.playlist,Re.playlist)}),(_=D.length?D[0]:(Ur(_,function(Re,it){return Re.rebufferingImpact-it.rebufferingImpact}),_[0]||null))&&(Ke=Ke-t-_.rebufferingImpact,!_.playlist||_.playlist.uri===this.playlist_.uri||Ke<(t<=_r?1:.5)||(this.bandwidth=_.playlist.attributes.BANDWIDTH*hi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))))))},o.handleAbort_=function(t){this.logger_("Aborting "+Br(t)),this.mediaRequestsAborted+=1},o.handleProgress_=function(t,a){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.trigger("progress")},o.handleTrackInfo_=function(t,a){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(a)||(function(s,h){if(!s&&!h||!s&&h||s&&!h)return!1;if(s===h)return!0;var _=Object.keys(s).sort(),D=Object.keys(h).sort();if(_.length!==D.length)return!1;for(var Q=0;Q<_.length;Q++){var ie=_[Q];if(ie!==D[Q]||s[ie]!==h[ie])return!1}return!0}(this.currentMediaInfo_,a=a||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},o.handleTimingInfo_=function(t,a,s,h){var _;this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||((_=this.pendingSegment_)[t=Nd(a)]=_[t]||{},_[t][s]=h,this.logger_("timinginfo: "+a+" - "+s+" - "+h),this.hasEnoughInfoToAppend_()&&this.processCallQueue_())},o.handleCaptions_=function(t,a){var s,h,_=this;this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||(0!==a.length?this.pendingSegment_.hasAppendedData_?(s=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),h={},a.forEach(function(D){h[D.stream]=h[D.stream]||{startTime:1/0,captions:[],endTime:0};var Q=h[D.stream];Q.startTime=Math.min(Q.startTime,D.startTime+s),Q.endTime=Math.max(Q.endTime,D.endTime+s),Q.captions.push(D)}),Object.keys(h).forEach(function(D){var Q,ie,be,Se,Ie,Te,Ue,Ke,Re,it,_t=h[D],gt=_t.startTime,Dt=_t.endTime,$t=_t.captions,Gt=_.inbandTextTracks_;_.logger_("adding cues from "+gt+" -> "+Dt+" for "+D),ie=_.vhs_.tech_,(Q=Gt)[be=D]||(ie.trigger({type:"usage",name:"vhs-608"}),ie.trigger({type:"usage",name:"hls-608"}),/^cc708_/.test(Se=be)&&(Se="SERVICE"+be.split("_")[1]),(Ue=ie.textTracks().getTrackById(Se))?Q[be]=Ue:(Te=Ie=be,_t=!1,(Ue=(ie.options_.vhs&&ie.options_.vhs.captionServices||{})[Se])&&(Ie=Ue.label,Te=Ue.language,_t=Ue.default),Q[be]=ie.addRemoteTextTrack({kind:"captions",id:Se,default:_t,label:Ie,language:Te},!1).track)),ya(gt,Dt,Gt[D]),Re=($t={captionArray:$t,inbandTextTracks:Gt,timestampOffset:s}).inbandTextTracks,it=$t.timestampOffset,(Gt=$t.captionArray)&&(Ke=window.WebKitDataCue||window.VTTCue,Gt.forEach(function(un){Re[un.stream].addCue(new Ke(un.startTime+it,un.endTime+it,un.text))}))}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})):this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,a)):this.logger_("SegmentLoader received no captions from a caption event"))},o.handleId3_=function(t,a,s){var h,_,D;this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||(this.pendingSegment_.hasAppendedData_?(h=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),D=s,(_=this.inbandTextTracks_).metadataTrack_||(_.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,_.metadataTrack_.inBandMetadataTrackDispatchType=D),function rf(i){var o=i.metadataArray,t=i.timestampOffset,a=i.videoDuration;if(o){var s=window.WebKitDataCue||window.VTTCue,h=i.inbandTextTracks.metadataTrack_;if(h&&(o.forEach(function(Se){var Ie=Se.cueTime+t;!("number"!=typeof Ie||window.isNaN(Ie)||Ie<0)&&Ie<1/0&&Se.frames.forEach(function(Te){var Ue,Ke=new s(Ie,Ie,Te.value||Te.url||Te.data||"");Ke.frame=Te,Ke.value=Te,Ue=Ke,Object.defineProperties(Ue.frame,{id:{get:function(){return ut.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),Ue.value.key}},value:{get:function(){return ut.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),Ue.value.data}},privateData:{get:function(){return ut.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),Ue.value.data}}}),h.addCue(Ke)})}),h.cues&&h.cues.length)){for(var _=h.cues,D=[],Q=0;Q<_.length;Q++)_[Q]&&D.push(_[Q]);var ie=D.reduce(function(Se,Ie){var Te=Se[Ie.startTime]||[];return Te.push(Ie),Se[Ie.startTime]=Te,Se},{}),be=Object.keys(ie).sort(function(Se,Ie){return Number(Se)-Number(Ie)});be.forEach(function(Te,Ie){Te=ie[Te];var Ue=Number(be[Ie+1])||a;Te.forEach(function(Ke){Ke.endTime=Ue})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:h,videoDuration:this.duration_()})):this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,a,s)))},o.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},o.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(a){return a()})},o.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(a){return a()})},o.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&Ad({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},o.getCurrentMediaInfo_=function(t){return(t=void 0===t?this.pendingSegment_:t)&&t.trackInfo||this.currentMediaInfo_},o.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},o.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,h=this.getCurrentMediaInfo_();if(!t||!h)return!1;var a=h.hasAudio,s=h.hasVideo;return h=h.isMuxed,!(s&&!t.videoTimingInfo||a&&!this.audioDisabled_&&!h&&!t.audioTimingInfo||Ad({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},o.handleData_=function(t,a){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var s,h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.part||h.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),h.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),h.isFmp4=t.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4?(this.trigger("fmp4"),h.timingInfo.start=h[Nd(a.type)].start):(s=this.getCurrentMediaInfo_(),(s="main"===this.loaderType_&&s&&s.hasVideo)&&(_=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:_,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})),this.updateAppendInitSegmentStatus(h,a.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var _=this.chooseNextRequest_();if(_.mediaIndex!==h.mediaIndex||_.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,a)}}else this.callQueue_.push(this.handleData_.bind(this,t,a))},o.updateAppendInitSegmentStatus=function(t,a){"main"!==this.loaderType_||"number"!=typeof t.timestampOffset||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==t.playlist&&(this.appendInitSegment_[a]=!0)},o.getInitSegmentAndUpdateState_=function(t){var a=t.type,s=t.initSegment,h=t.map,_=t.playlist;if(h){if(t=to(h),this.activeInitSegmentId_===t)return null;s=this.initSegmentForMap(h,!0).bytes,this.activeInitSegmentId_=t}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=_,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},o.handleQuotaExceededError_=function(Te,a){var s=this,h=Te.segmentInfo,_=Te.type,D=Te.bytes,Q=this.sourceUpdater_.audioBuffered(),ie=this.sourceUpdater_.videoBuffered();1<Q.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+mr(Q).join(", ")),1<ie.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+mr(ie).join(", "));var be=Q.length?Q.start(0):0,Se=Q.length?Q.end(Q.length-1):0,Ie=ie.length?ie.start(0):0;if(Te=ie.length?ie.end(ie.length-1):0,Se-be<=1&&Te-Ie<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+D.byteLength+", audio buffer: "+mr(Q).join(", ")+", video buffer: "+mr(ie).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:h,type:_,bytes:D})),D=this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+D),this.remove(0,D,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=window.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},1e3)},!0)},o.handleAppendError_=function(_,a){var s=_.segmentInfo,h=_.type;_=_.bytes,a&&(22!==a.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(h+" append of "+_.length+"b failed for segment #"+s.mediaIndex+" in playlist "+s.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:s,type:h,bytes:_}))},o.appendToSourceBuffer_=function(t){var a,s,h=t.segmentInfo,_=t.type,D=t.initSegment,Q=t.data,ie=t.bytes;ie||(t=[Q],Q=Q.byteLength,D&&(t.unshift(D),Q+=D.byteLength),s=0,(t={bytes:Q,segments:t}).bytes&&(a=new Uint8Array(t.bytes),t.segments.forEach(function(be){a.set(be,s),s+=be.byteLength})),ie=a),this.sourceUpdater_.appendBuffer({segmentInfo:h,type:_,bytes:ie},this.handleAppendError_.bind(this,{segmentInfo:h,type:_,bytes:ie}))},o.handleSegmentTimingInfo_=function(t,a,s){this.pendingSegment_&&a===this.pendingSegment_.requestId&&((a=this.pendingSegment_.segment)[t+="TimingInfo"]||(a[t]={}),a[t].transmuxerPrependedSeconds=s.prependedContentDuration||0,a[t].transmuxedPresentationStart=s.start.presentation,a[t].transmuxedDecodeStart=s.start.decode,a[t].transmuxedPresentationEnd=s.end.presentation,a[t].transmuxedDecodeEnd=s.end.decode,a[t].baseMediaDecodeTime=s.baseMediaDecodeTime)},o.appendData_=function(t,a){var s=a.type,h=a.data;h&&h.byteLength&&("audio"===s&&this.audioDisabled_||(a=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:t,type:s,initSegment:a,data:h})))},o.loadSegment_=function(t){var a=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var s=H({},t,{forceTimestampOffset:!0});H(t,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(t)})},o.updateTransmuxerAndRequestSegment_=function(t){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var s=this.createSimplifiedSegmentObj_(t),h=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),D=t.timeline!==this.currentTimeline_&&0<t.timeline;D=h||null!==this.mediaIndex&&D,this.logger_("Requesting "+Br(t)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=function nf(_t){var l,o,t,a=_t.xhr,s=_t.xhrOptions,_=_t.segment,D=_t.abortFn,Q=_t.progressFn,ie=_t.trackInfoFn,be=_t.timingInfoFn,Se=_t.videoSegmentTimingInfoFn,Ie=_t.audioSegmentTimingInfoFn,Te=_t.id3Fn,Ue=_t.captionsFn,Ke=_t.isEndOfTimeline,Re=_t.endedTimelineFn,it=_t.dataFn,gt=[],Dt=function ef(i){var l=i.activeXhrs,o=i.decryptionWorker,t=i.trackInfoFn,a=i.timingInfoFn,s=i.videoSegmentTimingInfoFn,h=i.audioSegmentTimingInfoFn,_=i.id3Fn,D=i.captionsFn,Q=i.isEndOfTimeline,ie=i.endedTimelineFn,be=i.dataFn,Se=i.doneFn,Ie=i.onTransmuxerLog,Te=0,Ue=!1;return function(Ke,Re){if(!Ue){if(Ke)return Ue=!0,Os(l),Se(Ke,Re);if((Te+=1)===l.length){var it=function(){if(Re.encryptedBytes)return gt=(_t={decryptionWorker:o,segment:Re,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:h,id3Fn:_,captionsFn:D,isEndOfTimeline:Q,endedTimelineFn:ie,dataFn:be,doneFn:Se,onTransmuxerLog:Ie}).decryptionWorker,$t=_t.trackInfoFn,Gt=_t.timingInfoFn,un=_t.videoSegmentTimingInfoFn,an=_t.audioSegmentTimingInfoFn,mn=_t.id3Fn,cn=_t.captionsFn,Pn=_t.isEndOfTimeline,bn=_t.endedTimelineFn,Ln=_t.dataFn,Mn=_t.doneFn,Nn=_t.onTransmuxerLog,void xd({id:(Dt=_t.segment).requestId,key:Dt.key,encryptedBytes:Dt.encryptedBytes,decryptionWorker:gt},function(Ni){Dt.bytes=Ni,wd({segment:Dt,bytes:Dt.bytes,trackInfoFn:$t,timingInfoFn:Gt,videoSegmentTimingInfoFn:un,audioSegmentTimingInfoFn:an,id3Fn:mn,captionsFn:cn,isEndOfTimeline:Pn,endedTimelineFn:bn,dataFn:Ln,doneFn:Mn,onTransmuxerLog:Nn})});var _t,gt,Dt,$t,Gt,un,an,mn,cn,Pn,bn,Ln,Mn,Nn;wd({segment:Re,bytes:Re.bytes,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:h,id3Fn:_,captionsFn:D,isEndOfTimeline:Q,endedTimelineFn:ie,dataFn:be,doneFn:Se,onTransmuxerLog:Ie})};if(Re.endOfAllRequests=Date.now(),Re.map&&Re.map.encryptedBytes&&!Re.map.bytes)return xd({decryptionWorker:o,id:Re.requestId+"-init",encryptedBytes:Re.map.encryptedBytes,key:Re.map.key},function(_t){Re.map.bytes=_t,bd(Re,function(gt){return gt?(Os(l),Se(gt,Re)):void it()})});it()}}}}({activeXhrs:gt,decryptionWorker:_t.decryptionWorker,trackInfoFn:ie,timingInfoFn:be,videoSegmentTimingInfoFn:Se,audioSegmentTimingInfoFn:Ie,id3Fn:Te,captionsFn:Ue,isEndOfTimeline:Ke,endedTimelineFn:Re,dataFn:it,doneFn:Dt=_t.doneFn,onTransmuxerLog:_t=_t.onTransmuxerLog});_.key&&!_.key.bytes&&(_t=[_.key],_.map&&!_.map.bytes&&_.map.key&&_.map.key.resolvedUri===_.key.resolvedUri&&_t.push(_.map.key),_t=a(ut.mergeOptions(s,{uri:_.key.resolvedUri,responseType:"arraybuffer"}),yd(_,_t,Dt)),gt.push(_t)),_.map&&!_.map.bytes&&(!_.map.key||_.key&&_.key.resolvedUri===_.map.key.resolvedUri||(l=a(ut.mergeOptions(s,{uri:_.map.key.resolvedUri,responseType:"arraybuffer"}),yd(_,[_.map.key],Dt)),gt.push(l)),l=a(ut.mergeOptions(s,{uri:_.map.resolvedUri,responseType:"arraybuffer",headers:Ds(_.map)}),(o=(l={segment:_,finishProcessingFn:Dt}).segment,t=l.finishProcessingFn,function(Gt,un){return(Gt=Is(Gt,un))?t(Gt,o):(Gt=new Uint8Array(un.response),o.map.key?(o.map.encryptedBytes=Gt,t(null,o)):(o.map.bytes=Gt,void bd(o,function(an){return an?(an.xhr=un,an.status=un.status,t(an,o)):void t(null,o)})))})),gt.push(l)),(s=a(s=ut.mergeOptions(s,{uri:_.part&&_.part.resolvedUri||_.resolvedUri,responseType:"arraybuffer",headers:Ds(_)}),function Zh(i){var l=i.segment,o=i.finishProcessingFn,t=i.responseType;return function(a,s){return(a=Is(a,s))?o(a,l):(a="arraybuffer"!==t&&s.responseText?function(h){for(var _=new Uint8Array(new ArrayBuffer(h.length)),D=0;D<h.length;D++)_[D]=h.charCodeAt(D);return _.buffer}(s.responseText.substring(l.lastReachedChar||0)):s.response,l.stats={bandwidth:s.bandwidth,bytesReceived:s.bytesReceived||0,roundTripTime:s.roundTripTime||0},l.key?l.encryptedBytes=new Uint8Array(a):l.bytes=new Uint8Array(a),o(null,l))}}({segment:_,finishProcessingFn:Dt,responseType:s.responseType}))).addEventListener("progress",function tf(i){var l=i.segment,o=i.progressFn;return function(t){var a,s=t.target;if(!s.aborted)return l.stats=ut.mergeOptions(l.stats,(s=(a=t).target,(s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-s.requestTime||0}).bytesReceived=a.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s)),!l.stats.firstBytesReceivedAt&&l.stats.bytesReceived&&(l.stats.firstBytesReceivedAt=Date.now()),o(t,l)}}({segment:_,progressFn:Q,trackInfoFn:ie,timingInfoFn:be,videoSegmentTimingInfoFn:Se,audioSegmentTimingInfoFn:Ie,id3Fn:Te,captionsFn:Ue,isEndOfTimeline:Ke,endedTimelineFn:Re,dataFn:it})),gt.push(s);var $t={};return gt.forEach(function(Gt){var un,an;Gt.addEventListener("loadend",(un=(Gt={loadendState:$t,abortFn:D}).loadendState,an=Gt.abortFn,function(mn){mn.target.aborted&&an&&!un.calledAbortFn&&(an(),un.calledAbortFn=!0)}))}),function(){return Os(gt)}}({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:D,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(Se){var ie=Se.message,be=Se.level;Se=Se.stream,a.logger_(Br(t)+" logged from transmuxer stream "+Se+" as a "+be+": "+ie)}})},o.trimBackBuffer_=function(t){var a,s,h,_;0<(a=this.seekable_(),s=this.currentTime_(),h=this.playlist_.targetDuration||10,_=s-hi.BACK_BUFFER_LENGTH,a.length&&(_=Math.max(_,a.start(0))),_=Math.min(s-h,_))&&this.remove(0,_)},o.createSimplifiedSegmentObj_=function(t){var h,a=t.segment,s={resolvedUri:((h=t.part)||a).resolvedUri,byterange:(h||a).byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part};return(h=t.playlist.segments[t.mediaIndex-1])&&h.timeline===a.timeline&&(h.videoTimingInfo?s.baseStartTime=h.videoTimingInfo.transmuxedDecodeEnd:h.audioTimingInfo&&(s.baseStartTime=h.audioTimingInfo.transmuxedDecodeEnd)),a.key&&(t=a.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]),s.key=this.segmentKey(a.key),s.key.iv=t),a.map&&(s.map=this.initSegmentForMap(a.map)),s},o.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},o.saveBandwidthRelatedStats_=function(t,a){this.pendingSegment_.byteLength=a.bytesReceived,t<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+1/60):(this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime)},o.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},o.segmentRequestFinished_=function(t,a,s){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,a,s));else if(this.saveTransferStats_(a.stats),this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===Ls?void 0:(this.pause(),t.code===Rs?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.saveBandwidthRelatedStats_((t=this.pendingSegment_).duration,a.stats),t.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=function(h,_,D){if(!_.length)return h;if(D)return _.slice();for(var Q=_[0].pts,ie=0;ie<h.length&&!(h[ie].pts>=Q);ie++);return h.slice(0,ie).concat(_)}(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(t)}},o.setTimeMapping_=function(t){null!==(t=this.syncController_.mappingForTimeline(t))&&(this.timeMapping_=t)},o.updateMediaSecondsLoaded_=function(t){this.mediaSecondsLoaded+="number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:t.duration},o.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},o.trueSegmentStart_=function(be){var a=be.currentStart,s=be.playlist,h=be.mediaIndex,_=be.firstVideoFrameTimeForData,D=be.currentVideoTimestampOffset,Q=be.useVideoTimingInfo,ie=be.videoTimingInfo;return be=be.audioTimingInfo,typeof a<"u"?a:Q?(s=s.segments[h-1],0!==h&&s&&typeof s.start<"u"&&s.end===_+D?ie.start:_):be.start},o.waitForAppendsToComplete_=function(t){if(!(h=this.getCurrentMediaInfo_(t)))return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var a=h.hasAudio,s=h.hasVideo,h=h.isMuxed;if(s="main"===this.loaderType_&&s,h=!this.audioDisabled_&&a&&!h,t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||"number"!=typeof t.timestampOffset||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);s&&t.waitingOnAppends++,h&&t.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),h&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},o.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},o.checkForIllegalMediaSwitch=function(h){var a,s;return!(a=this.loaderType_,s=this.getCurrentMediaInfo_(),!(h="main"===a&&s&&h?h.hasAudio||h.hasVideo?s.hasVideo&&!h.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!s.hasVideo&&h.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)||(this.error({message:h,blacklistDuration:1/0}),this.trigger("error"),0))},o.updateSourceBufferTimestampOffset_=function(t){var a;null===t.timestampOffset||"number"!=typeof t.timingInfo.start||t.changedTimestampOffset||"main"!==this.loaderType_||(a=!1,t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),a=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),a=!0),a&&this.trigger("timestampoffset"))},o.getSegmentStartTimeForTimestampOffsetCalculation_=function(h){var a=h.videoTimingInfo,s=h.audioTimingInfo;return h=h.timingInfo,this.useDtsForTimestampOffset_?a&&"number"==typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:h.start:h.start},o.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var a=this.getMediaInfo_();(a="main"===this.loaderType_&&a&&a.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo)&&(t.timingInfo.end="number"==typeof a.end?a.end:a.start+t.duration)},o.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var a=function af(i,h){if("hls"!==h)return null;var o,t,a=(o={audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo},t=0,["video","audio"].forEach(function(D){var Q,ie=o[D+"TimingInfo"];ie&&(D=ie.start,ie=ie.end,"bigint"==typeof D||"bigint"==typeof ie?Q=window.BigInt(ie)-window.BigInt(D):"number"==typeof D&&"number"==typeof ie&&(Q=ie-D),typeof Q<"u"&&t<Q&&(t=Q))}),t="bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER?Number(t):t);if(!a)return null;var s=Dd({segmentDuration:a,maxDuration:2*(_=i.playlist.targetDuration)}),_=(h=Dd({segmentDuration:a,maxDuration:_}),"Segment with index "+i.mediaIndex+" from playlist "+i.playlist.id+" has a duration of "+a+" when the reported duration is "+i.duration+" and the target duration is "+_+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1");return s||h?{severity:s?"warn":"info",message:_}:null}(t,this.sourceType_);if(a&&("warn"===a.severity?ut.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+Br(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),a=t.part;var s=(s=t.segment).end&&this.currentTime_()-s.end>3*t.playlist.targetDuration;if(a=a&&a.end&&this.currentTime_()-a.end>3*t.playlist.partTargetDuration,s||a)return this.logger_("bad "+(s?"segment":"part")+" "+Br(t)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Br(t))},o.recordThroughput_=function(t){var a,s;t.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+1/60):(a=this.throughput.rate,s=Date.now()-t.endOfAllRequests+1,s=Math.floor(t.byteLength/s*8*1e3),this.throughput.rate+=(s-a)/++this.throughput.count)},o.addSegmentMetadataCue_=function(t){var a,s,h,_;this.segmentMetadataTrack_&&(s=(a=t.segment).start,_=a.end,Cd(s)&&Cd(_)&&(ya(s,_,this.segmentMetadataTrack_),h=window.WebKitDataCue||window.VTTCue,t={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:s,end:_},(_=new h(s,_,JSON.stringify(t))).value=t,this.segmentMetadataTrack_.addCue(_)))},l}(ut.EventTarget));function tr(){}function Ld(i){return"string"!=typeof i?i:i.replace(/./,function(l){return l.toUpperCase()})}function Us(i,l){var o=l[i+"Buffer"];return o&&o.updating||l.queuePending[i]}function Hr(i,l){if(0!==l.queue.length){var o=0,t=l.queue[o];if("mediaSource"!==t.type){if("mediaSource"!==i&&l.ready()&&"closed"!==l.mediaSource.readyState&&!Us(i,l)){if(t.type!==i){if(null===(o=function(a,s){for(var h=0;h<s.length;h++){var _=s[h];if("mediaSource"===_.type)return null;if(_.type===a)return h}return null}(i,l.queue)))return;t=l.queue[o]}l.queue.splice(o,1),(l.queuePending[i]=t).action(i,l),t.doneFn||(l.queuePending[i]=null,Hr(i,l))}}else l.updating()||"closed"===l.mediaSource.readyState||(l.queue.shift(),t.action(l),t.doneFn&&t.doneFn(),Hr("audio",l),Hr("video",l))}}function Fd(i,l){var o=l[i+"Buffer"],t=Ld(i);o&&(o.removeEventListener("updateend",l["on"+t+"UpdateEnd_"]),o.removeEventListener("error",l["on"+t+"Error_"]),l.codecs[i]=null,l[i+"Buffer"]=null)}function Zi(i,l){return i&&l&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,l)}function Ri(s){var l=s.type,o=s.sourceUpdater;o.queue.push({type:l,action:s.action,doneFn:s.doneFn,name:s=s.name}),Hr(l,o)}function Ud(i,l){return function(o){var t;l.queuePending[i]&&(t=l.queuePending[i].doneFn,l.queuePending[i]=null,t&&t(l[i+"Error_"])),Hr(i,l)}}function Bd(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))}function uo(i,l){i.abort(),i.pause(),l&&l.activePlaylistLoader&&(l.activePlaylistLoader.pause(),l.activePlaylistLoader=null)}function jd(i,l){(l.activePlaylistLoader=i).load()}function Hd(i,l){for(var o=0;o<i.length;o++)if(ks(l,i[o])||i[o].playlists&&Hd(i[o].playlists,l))return!0;return!1}function ff(i,l,o){var t,a,s,h,_=i.masterPlaylistController_,D=_[(i.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(_);l.attributes&&(this.width=(t=l.attributes.RESOLUTION)&&t.width,this.height=t&&t.height,this.bandwidth=l.attributes.BANDWIDTH),this.codecs=va(_.master(),l),this.playlist=l,this.id=o,this.enabled=(a=i.playlists,s=l.id,h=D,function(Q){var ie=a.master.playlists[s],be=Ss(ie),Se=eo(ie);return typeof Q>"u"?Se:(Q?delete ie.disabled:ie.disabled=!0,Q===Se||be||(h(),a.trigger(Q?"renditionenabled":"renditiondisabled")),Q)})}function zd(i,l){var o=0,t=0,a=ut.mergeOptions(Of,l);function s(){t&&i.currentTime(t)}function h(Q){null!=Q&&(t=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",s),i.src(Q),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())}function _(){return Date.now()-o<1e3*a.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void i.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(o=Date.now(),a.getSource.call(i,h)):void ut.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function D(){i.off("loadedmetadata",s),i.off("error",_),i.off("dispose",D)}i.ready(function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})}),i.on("error",_),i.on("dispose",D),i.reloadSourceOnError=function(Q){D(),zd(i,Q)}}var nr,pf=["video","audio"],mf=function(i,l,o){return function(t,a){var s=a[t+"Buffer"];if(Zi(a.mediaSource,s)){a.logger_("Appending segment "+l.mediaIndex+"'s "+i.length+" bytes to "+t+"Buffer");try{s.appendBuffer(i)}catch(h){a.logger_("Error with code "+h.code+" "+(22===h.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+l.mediaIndex+" to "+t+"Buffer"),a.queuePending[t]=null,o(h)}}}},Vd=function(i,l){return function(o,t){var a=t[o+"Buffer"];if(Zi(t.mediaSource,a)){t.logger_("Removing "+i+" to "+l+" from "+o+"Buffer");try{a.remove(i,l)}catch{t.logger_("Remove "+i+" to "+l+" from "+o+"Buffer failed")}}}},Wd=function(i){return function(l,o){var t=o[l+"Buffer"];Zi(o.mediaSource,t)&&(o.logger_("Setting "+l+"timestampOffset to "+i),t.timestampOffset=i)}},qd=function(i){return function(l,o){i()}},_f=function(i){return function(l){if("open"===l.mediaSource.readyState){l.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{l.mediaSource.endOfStream(i)}catch(o){ut.log.warn("Failed to call media source endOfStream",o)}}}},gf=function(i){return function(l){l.logger_("Setting mediaSource duration to "+i);try{l.mediaSource.duration=i}catch(o){ut.log.warn("Failed to set media source duration",o)}}},yf=function(i,l){return function(o){var t=Ld(i),a=ta(l);o.logger_("Adding "+i+"Buffer with codec "+l+" to mediaSource"),(a=o.mediaSource.addSourceBuffer(a)).addEventListener("updateend",o["on"+t+"UpdateEnd_"]),a.addEventListener("error",o["on"+t+"Error_"]),o.codecs[i]=l,o[i+"Buffer"]=a}},bf=function(i){return function(l){var o=l[i+"Buffer"];if(Fd(i,l),Zi(l.mediaSource,o)){l.logger_("Removing "+i+"Buffer with codec "+l.codecs[i]+" from mediaSource");try{l.mediaSource.removeSourceBuffer(o)}catch(t){ut.log.warn("Failed to removeSourceBuffer "+i+"Buffer",t)}}}},wf=function(i){return function(l,o){var t=o[l+"Buffer"],a=ta(i);Zi(o.mediaSource,t)&&o.codecs[l]!==i&&(o.logger_("changing "+l+"Buffer codec from "+o.codecs[l]+" to "+i),t.changeType(a),o.codecs[l]=i)}},$d=function(i){function l(t){var a=i.call(this)||this;return a.mediaSource=t,a.sourceopenListener_=function(){return Hr("mediaSource",Pe(a))},a.mediaSource.addEventListener("sourceopen",a.sourceopenListener_),a.logger_=qi("SourceUpdater"),a.audioTimestampOffset_=0,a.videoTimestampOffset_=0,a.queue=[],a.queuePending={audio:null,video:null},a.delayedAudioAppendQueue_=[],a.videoAppendQueued_=!1,a.codecs={},a.onVideoUpdateEnd_=Ud("video",Pe(a)),a.onAudioUpdateEnd_=Ud("audio",Pe(a)),a.onVideoError_=function(s){a.videoError_=s},a.onAudioError_=function(s){a.audioError_=s},a.createdSourceBuffers_=!1,a.initializedEme_=!1,a.triggeredReady_=!1,a}ke(l,i);var o=l.prototype;return o.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},o.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},o.hasInitializedAnyEme=function(){return this.initializedEme_},o.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},o.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},o.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},o.addSourceBuffer=function(t,a){Ri({type:"mediaSource",sourceUpdater:this,action:yf(t,a),name:"addSourceBuffer"})},o.abort=function(t){Ri({type:t,sourceUpdater:this,action:function(i,l){if("open"===l.mediaSource.readyState){var o=l[i+"Buffer"];if(Zi(l.mediaSource,o)){l.logger_("calling abort on "+i+"Buffer");try{o.abort()}catch(t){ut.log.warn("Failed to abort on "+i+"Buffer",t)}}}},name:"abort"})},o.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?Ri({type:"mediaSource",sourceUpdater:this,action:bf(t),name:"removeSourceBuffer"}):ut.log.error("removeSourceBuffer is not supported!")},o.canRemoveSourceBuffer=function(){return!ut.browser.IE_VERSION&&!ut.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&"function"==typeof window.MediaSource.prototype.removeSourceBuffer},l.canChangeType=function(){return window.SourceBuffer&&window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.changeType},o.canChangeType=function(){return this.constructor.canChangeType()},o.changeType=function(t,a){this.canChangeType()?Ri({type:t,sourceUpdater:this,action:wf(a),name:"changeType"}):ut.log.error("changeType is not supported!")},o.addOrChangeSourceBuffers=function(t){var a=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(s){var h=t[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,h);a.canChangeType()&&a.changeType(s,h)})},o.appendBuffer=function(t,a){var s=this,h=t.segmentInfo,_=t.type,D=t.bytes;if(this.processedAppend_=!0,"audio"===_&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,a]),void this.logger_("delayed audio append of "+D.length+" until video append");Ri({type:_,sourceUpdater:this,action:mf(D,h||{mediaIndex:-1},a),doneFn:a,name:"appendBuffer"}),"video"===_&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(_=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+_.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,_.forEach(function(Q){s.appendBuffer.apply(s,Q)})))},o.audioBuffered=function(){return Zi(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||ut.createTimeRange()},o.videoBuffered=function(){return Zi(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||ut.createTimeRange()},o.buffered=function(){var t=Zi(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Zi(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!t?this.audioBuffered():t&&!a?this.videoBuffered():function(s,h){var _=null,D=null,Q=0,ie=[],be=[];if(!(s&&s.length&&h&&h.length))return ut.createTimeRange();for(var Se=s.length;Se--;)ie.push({time:s.start(Se),type:"start"}),ie.push({time:s.end(Se),type:"end"});for(Se=h.length;Se--;)ie.push({time:h.start(Se),type:"start"}),ie.push({time:h.end(Se),type:"end"});for(ie.sort(function(Ie,Te){return Ie.time-Te.time}),Se=0;Se<ie.length;Se++)"start"===ie[Se].type?2==++Q&&(_=ie[Se].time):"end"===ie[Se].type&&1==--Q&&(D=ie[Se].time),null!==_&&null!==D&&(be.push([_,D]),D=_=null);return ut.createTimeRanges(be)}(this.audioBuffered(),this.videoBuffered())},o.setDuration=function(t,a){void 0===a&&(a=tr),Ri({type:"mediaSource",sourceUpdater:this,action:gf(t),name:"duration",doneFn:a})},o.endOfStream=function(t,a){void 0===a&&(a=tr),Ri({type:"mediaSource",sourceUpdater:this,action:_f(t="string"!=typeof(t=void 0===t?null:t)?void 0:t),name:"endOfStream",doneFn:a})},o.removeAudio=function(t,a,s){void 0===s&&(s=tr),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Ri({type:"audio",sourceUpdater:this,action:Vd(t,a),doneFn:s,name:"remove"}):s()},o.removeVideo=function(t,a,s){void 0===s&&(s=tr),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Ri({type:"video",sourceUpdater:this,action:Vd(t,a),doneFn:s,name:"remove"}):s()},o.updating=function(){return!(!Us("audio",this)&&!Us("video",this))},o.audioTimestampOffset=function(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Ri({type:"audio",sourceUpdater:this,action:Wd(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},o.videoTimestampOffset=function(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Ri({type:"video",sourceUpdater:this,action:Wd(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},o.audioQueueCallback=function(t){this.audioBuffer&&Ri({type:"audio",sourceUpdater:this,action:qd(t),name:"callback"})},o.videoQueueCallback=function(t){this.videoBuffer&&Ri({type:"video",sourceUpdater:this,action:qd(t),name:"callback"})},o.dispose=function(){var t=this;this.trigger("dispose"),pf.forEach(function(a){t.abort(a),t.canRemoveSourceBuffer()?t.removeSourceBuffer(a):t[a+"QueueCallback"](function(){return Fd(a,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},l}(ut.EventTarget),Xd=new Uint8Array("\n\n".split("").map(function(i){return i.charCodeAt(0)})),xf=function(i){function l(t,a){return(a=i.call(this,t,a=void 0===a?{}:a)||this).mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=t.featuresNativeTextTracks,a.shouldSaveSegmentTimingInfo_=!1,a}ke(l,i);var o=l.prototype;return o.createTransmuxer_=function(){return null},o.buffered_=function(){return this.subtitlesTrack_&&this.subtitlesTrack_.cues&&this.subtitlesTrack_.cues.length?ut.createTimeRanges([[(a=this.subtitlesTrack_.cues)[0].startTime,a=a[a.length-1].startTime]]):ut.createTimeRanges();var a},o.initSegmentForMap=function(t,a){if(void 0===a&&(a=!1),!t)return null;var s=to(t),h=this.initSegments_[s];return a&&!h&&t.bytes&&(a=Xd.byteLength+t.bytes.byteLength,(a=new Uint8Array(a)).set(t.bytes),a.set(Xd,t.bytes.byteLength),this.initSegments_[s]=h={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:a}),h||t},o.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},o.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},o.track=function(t){return typeof t>"u"||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},o.remove=function(t,a){ya(t,a,this.subtitlesTrack_)},o.fillBuffer_=function(){var t=this,a=this.chooseNextRequest_();if(a){if(null===this.syncController_.timestampOffsetForTimeline(a.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(a)}},o.timestampOffsetForSegment_=function(){return null},o.chooseNextRequest_=function(){return this.skipEmptySegments_(i.prototype.chooseNextRequest_.call(this))},o.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},o.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},o.segmentRequestFinished_=function(t,a,s){var h=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(a.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===Rs&&this.handleTimeout_(),t.code===Ls?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var _=this.pendingSegment_;this.saveBandwidthRelatedStats_(_.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var D=_.segment;if(D.map&&(D.map.bytes=a.map.bytes),_.bytes=a.bytes,"function"!=typeof window.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var Q=function(){h.subtitlesTrack_.tech_.off("vttjsloaded",ie),h.stopForError({message:"Error loading vtt.js"})},ie=function(){h.subtitlesTrack_.tech_.off("vttjserror",Q),h.segmentRequestFinished_(t,a,s)};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",ie),void this.subtitlesTrack_.tech_.one("vttjserror",Q)}D.requested=!0;try{this.parseVTTCues_(_)}catch(be){return void this.stopForError({message:be.message})}if(this.updateTimeMapping_(_,this.syncController_.timelines[_.timeline],this.playlist_),_.timingInfo=_.cues.length?{start:_.cues[0].startTime,end:_.cues[_.cues.length-1].endTime}:{start:_.startOfSegment,end:_.startOfSegment+_.duration},_.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");_.byteLength=_.bytes.byteLength,this.mediaSecondsLoaded+=D.duration,_.cues.forEach(function(be){h.subtitlesTrack_.addCue(h.featuresNativeTextTracks_?new window.VTTCue(be.startTime,be.endTime,be.text):be)}),function(be){var Se=be.cues;if(Se)for(var Ie=0;Ie<Se.length;Ie++){for(var Te=[],Ue=0,Ke=0;Ke<Se.length;Ke++)Se[Ie].startTime===Se[Ke].startTime&&Se[Ie].endTime===Se[Ke].endTime&&Se[Ie].text===Se[Ke].text&&1<++Ue&&Te.push(Se[Ke]);Te.length&&Te.forEach(function(Re){return be.removeCue(Re)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},o.handleData_=function(){},o.updateTimingInfoEnd_=function(){},o.parseVTTCues_=function(t){var a=!1;"function"==typeof window.TextDecoder?s=new window.TextDecoder("utf8"):(s=window.WebVTT.StringDecoder(),a=!0);var s=new window.WebVTT.Parser(window,window.vttjs,s);t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},s.oncue=t.cues.push.bind(t.cues),s.ontimestampmap=function(_){t.timestampmap=_},s.onparsingerror=function(_){ut.log.warn("Error encountered when parsing cues: "+_.message)},t.segment.map&&(h=t.segment.map.bytes,a&&(h=Bd(h)),s.parse(h));var h=t.bytes;a&&(h=Bd(h)),s.parse(h),s.flush()},o.updateTimeMapping_=function(t,a,s){var h,_,D=t.segment;a&&(t.cues.length?(h=(_=t.timestampmap).MPEGTS/ao-_.LOCAL+a.mapping,t.cues.forEach(function(Q){Q.startTime+=h,Q.endTime+=h}),s.syncInfo||(_=t.cues[0].startTime,a=t.cues[t.cues.length-1].startTime,s.syncInfo={mediaSequence:s.mediaSequence+t.mediaIndex,time:Math.min(_,a-D.duration)})):D.empty=!0)},l}(Fs),Gd=[{name:"VOD",run:function(i,l,o,t,a){return o===1/0?null:{time:0,segmentIndex:0,partIndex:null}}},{name:"ProgramDateTime",run:function(i,l,o,t,a){if(!Object.keys(i.timelineToDatetimeMappings).length)return null;var s=null,h=null,_=xs(l);a=a||0;for(var D=0;D<_.length;D++){var Q=_[l.endList||0===a?D:_.length-(D+1)],ie=Q.segment,be=i.timelineToDatetimeMappings[ie.timeline];if(be&&ie.dateTimeObject){var Se=ie.dateTimeObject.getTime()/1e3+be;if(ie.parts&&"number"==typeof Q.partIndex)for(var Ie=0;Ie<Q.partIndex;Ie++)Se+=ie.parts[Ie].duration;if(be=Math.abs(a-Se),null!==h&&(0===be||h<be))break;h=be,s={time:Se,segmentIndex:Q.segmentIndex,partIndex:Q.partIndex}}}return s}},{name:"Segment",run:function(i,l,o,t,a){var s=null,h=null;a=a||0;for(var _=xs(l),D=0;D<_.length;D++){var Q=_[l.endList||0===a?D:_.length-(D+1)],ie=Q.segment,be=Q.part&&Q.part.start||ie&&ie.start;if(ie.timeline===t&&typeof be<"u"){if(ie=Math.abs(a-be),null!==h&&h<ie)break;(!s||null===h||ie<=h)&&(h=ie,s={time:be,segmentIndex:Q.segmentIndex,partIndex:Q.partIndex})}}return s}},{name:"Discontinuity",run:function(i,l,o,t,a){var s=null;if(a=a||0,l.discontinuityStarts&&l.discontinuityStarts.length)for(var h=null,_=0;_<l.discontinuityStarts.length;_++){var D=l.discontinuityStarts[_],Q=l.discontinuitySequence+_+1,ie=i.discontinuities[Q];if(ie){if(Q=Math.abs(a-ie.time),null!==h&&h<Q)break;(!s||null===h||Q<=h)&&(h=Q,s={time:ie.time,segmentIndex:D,partIndex:null})}}return s}},{name:"Playlist",run:function(i,l,o,t,a){return l.syncInfo?{time:l.syncInfo.time,segmentIndex:l.syncInfo.mediaSequence-l.mediaSequence,partIndex:null}:null}}],Sf=function(i){function l(t){var a=i.call(this)||this;return a.timelines=[],a.discontinuities=[],a.timelineToDatetimeMappings={},a.logger_=qi("SyncController"),a}ke(l,i);var o=l.prototype;return o.getSyncPoint=function(t,a,s,h){return(s=this.runStrategies_(t,a,s,h)).length?this.selectSyncPoint_(s,{key:"time",value:h}):null},o.getExpiredTime=function(t,a){return t&&t.segments&&(a=this.runStrategies_(t,a,t.discontinuitySequence,0)).length?(0<(a=this.selectSyncPoint_(a,{key:"segmentIndex",value:0})).segmentIndex&&(a.time*=-1),Math.abs(a.time+ma({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:a.segmentIndex,endIndex:0}))):null},o.runStrategies_=function(t,a,s,h){for(var _=[],D=0;D<Gd.length;D++){var Q=Gd[D],ie=Q.run(this,t,a,s,h);ie&&(ie.strategy=Q.name,_.push({strategy:Q.name,syncPoint:ie}))}return _},o.selectSyncPoint_=function(t,a){for(var s=t[0].syncPoint,h=Math.abs(t[0].syncPoint[a.key]-a.value),_=t[0].strategy,D=1;D<t.length;D++){var Q=Math.abs(t[D].syncPoint[a.key]-a.value);Q<h&&(h=Q,s=t[D].syncPoint,_=t[D].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy ["+_+"]: [time:"+s.time+", segmentIndex:"+s.segmentIndex+("number"==typeof s.partIndex?",partIndex:"+s.partIndex:"")+"]"),s},o.saveExpiredSegmentInfo=function(t,a){var s=a.mediaSequence-t.mediaSequence;if(86400<s)ut.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");else for(var h=s-1;0<=h;h--){var _=t.segments[h];if(_&&typeof _.start<"u"){a.syncInfo={mediaSequence:t.mediaSequence+h,time:_.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+", mediaSequence: "+a.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},o.setDateTimeMappingForStart=function(t){var a;this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject&&(t=(a=t.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[a.timeline]=-t)},o.saveSegmentTimingInfo=function(_){var a=_.segmentInfo,s=_.shouldSaveTimelineMapping,h=this.calculateSegmentTimeMapping_(a,a.timingInfo,s);_=a.segment,h&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:_.start})),a=_.dateTimeObject,_.discontinuity&&s&&a&&(this.timelineToDatetimeMappings[_.timeline]=-a.getTime()/1e3)},o.timestampOffsetForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time},o.mappingForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping},o.calculateSegmentTimeMapping_=function(t,a,s){var h,_,D=t.segment,Q=t.part,ie=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)ie={time:t.startOfSegment,mapping:t.startOfSegment-a.start},s&&(this.timelines[t.timeline]=ie,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+ie.time+"] [mapping: "+ie.mapping+"]")),h=t.startOfSegment,_=a.end+ie.mapping;else{if(!ie)return!1;h=a.start+ie.mapping,_=a.end+ie.mapping}return Q&&(Q.start=h,Q.end=_),(!D.start||h<D.start)&&(D.start=h),D.end=_,!0},o.saveDiscontinuitySyncInfo_=function(t){var a=t.playlist,s=t.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var h=0;h<a.discontinuityStarts.length;h++){var _,D=a.discontinuityStarts[h],Q=a.discontinuitySequence+h+1,ie=D-t.mediaIndex,be=Math.abs(ie);(!this.discontinuities[Q]||this.discontinuities[Q].accuracy>be)&&(_=ie<0?s.start-ma({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex,endIndex:D}):s.end+ma({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex+1,endIndex:D}),this.discontinuities[Q]={time:_,accuracy:be})}},o.dispose=function(){this.trigger("dispose"),this.off()},l}(ut.EventTarget),Tf=function(i){function l(){var t=i.call(this)||this;return t.pendingTimelineChanges_={},t.lastTimelineChanges_={},t}ke(l,i);var o=l.prototype;return o.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},o.pendingTimelineChange=function(h){var a=h.type,s=h.from;return h=h.to,"number"==typeof s&&"number"==typeof h&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:h},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},o.lastTimelineChange=function(h){var a=h.type,s=h.from;return h=h.to,"number"==typeof s&&"number"==typeof h&&(this.lastTimelineChanges_[a]={type:a,from:s,to:h},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},o.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},l}(ut.EventTarget),kf=Vn(Mi(ii(function(){var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i(Se,Ie,Te){return Se(Te={path:Ie,exports:{},require:function(Ue,Ke){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},Te.exports),Te.exports}var l=i(function(Se){function Ie(Te,Ue){for(var Ke=0;Ke<Ue.length;Ke++){var Re=Ue[Ke];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(Te,Re.key,Re)}}Se.exports=function(Te,Ue,Ke){return Ue&&Ie(Te.prototype,Ue),Ke&&Ie(Te,Ke),Te},Se.exports.default=Se.exports,Se.exports.__esModule=!0}),o=i(function(Se){function Ie(Te,Ue){return Se.exports=Ie=Object.setPrototypeOf||function(Ke,Re){return Ke.__proto__=Re,Ke},Se.exports.default=Se.exports,Se.exports.__esModule=!0,Ie(Te,Ue)}Se.exports=Ie,Se.exports.default=Se.exports,Se.exports.__esModule=!0}),t=i(function(Se){Se.exports=function(Ie,Te){Ie.prototype=Object.create(Te.prototype),Ie.prototype.constructor=Ie,o(Ie,Te)},Se.exports.default=Se.exports,Se.exports.__esModule=!0}),a=function(){function Se(){this.listeners={}}var Ie=Se.prototype;return Ie.on=function(Te,Ue){this.listeners[Te]||(this.listeners[Te]=[]),this.listeners[Te].push(Ue)},Ie.off=function(Te,Ue){return!!this.listeners[Te]&&(Ue=this.listeners[Te].indexOf(Ue),this.listeners[Te]=this.listeners[Te].slice(0),this.listeners[Te].splice(Ue,1),-1<Ue)},Ie.trigger=function(Te){var Ue=this.listeners[Te];if(Ue)if(2===arguments.length)for(var Ke=Ue.length,Re=0;Re<Ke;++Re)Ue[Re].call(this,arguments[1]);else for(var it=Array.prototype.slice.call(arguments,1),_t=Ue.length,gt=0;gt<_t;++gt)Ue[gt].apply(this,it)},Ie.dispose=function(){this.listeners={}},Ie.pipe=function(Te){this.on("data",function(Ue){Te.push(Ue)})},Se}(),s=null,h=function(){function Se(Ie){var Te,Ue,Ke;s=s||function(){for(var Gt,un,an,mn,cn,Pn,bn,Ln=[[[],[],[],[],[]],[[],[],[],[],[]]],Mn=Ln[0],Nn=Ln[1],Ni=Mn[4],on=Nn[4],Kt=[],On=[],wn=0;wn<256;wn++)On[(Kt[wn]=wn<<1^283*(wn>>7))^wn]=wn;for(Gt=un=0;!Ni[Gt];Gt^=an||1,un=On[un]||1)for(bn=16843009*Kt[mn=Kt[an=Kt[on[Ni[Gt]=cn=(cn=un^un<<1^un<<2^un<<3^un<<4)>>8^255&cn^99]=Gt]]]^65537*mn^257*an^16843008*Gt,Pn=257*Kt[cn]^16843008*cn,wn=0;wn<4;wn++)Mn[wn][Gt]=Pn=Pn<<24^Pn>>>8,Nn[wn][cn]=bn=bn<<24^bn>>>8;for(wn=0;wn<5;wn++)Mn[wn]=Mn[wn].slice(0),Nn[wn]=Nn[wn].slice(0);return Ln}(),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var Re=this._tables[0][4],it=this._tables[1],_t=Ie.length,gt=1;if(4!==_t&&6!==_t&&8!==_t)throw new Error("Invalid aes key size");var Dt=Ie.slice(0),$t=[];for(this._key=[Dt,$t],Te=_t;Te<4*_t+28;Te++)Ke=Dt[Te-1],(Te%_t==0||8===_t&&Te%_t==4)&&(Ke=Re[Ke>>>24]<<24^Re[Ke>>16&255]<<16^Re[Ke>>8&255]<<8^Re[255&Ke],Te%_t==0&&(Ke=Ke<<8^Ke>>>24^gt<<24,gt=gt<<1^283*(gt>>7))),Dt[Te]=Dt[Te-_t]^Ke;for(Ue=0;Te;Ue++,Te--)Ke=Dt[3&Ue?Te:Te-4],$t[Ue]=Te<=4||Ue<4?Ke:it[0][Re[Ke>>>24]]^it[1][Re[Ke>>16&255]]^it[2][Re[Ke>>8&255]]^it[3][Re[255&Ke]]}return Se.prototype.decrypt=function(Ie,Te,Ue,Ke,Re,it){for(var _t,gt,Dt,$t=this._key[1],Gt=Ie^$t[0],un=Ke^$t[1],an=Ue^$t[2],mn=Te^$t[3],cn=$t.length/4-2,Pn=4,bn=(Te=this._tables[1])[0],Ln=Te[1],Mn=Te[2],Nn=Te[3],Ni=Te[4],on=0;on<cn;on++)_t=bn[Gt>>>24]^Ln[un>>16&255]^Mn[an>>8&255]^Nn[255&mn]^$t[Pn],gt=bn[un>>>24]^Ln[an>>16&255]^Mn[mn>>8&255]^Nn[255&Gt]^$t[Pn+1],Dt=bn[an>>>24]^Ln[mn>>16&255]^Mn[Gt>>8&255]^Nn[255&un]^$t[Pn+2],mn=bn[mn>>>24]^Ln[Gt>>16&255]^Mn[un>>8&255]^Nn[255&an]^$t[Pn+3],Pn+=4,Gt=_t,un=gt,an=Dt;for(on=0;on<4;on++)Re[(3&-on)+it]=Ni[Gt>>>24]<<24^Ni[un>>16&255]<<16^Ni[an>>8&255]<<8^Ni[255&mn]^$t[Pn++],_t=Gt,Gt=un,un=an,an=mn,mn=_t},Se}(),_=function(Se){function Ie(){var Ue=Se.call(this,a)||this;return Ue.jobs=[],Ue.delay=1,Ue.timeout_=null,Ue}t(Ie,Se);var Te=Ie.prototype;return Te.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Te.push=function(Ue){this.jobs.push(Ue),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Ie}(a),D=function(Se){return Se<<24|(65280&Se)<<8|(16711680&Se)>>8|Se>>>24},Q=function(){function Se(Ie,Te,Ue,Ke){var Re=Se.STEP,it=new Int32Array(Ie.buffer),_t=new Uint8Array(Ie.byteLength),gt=0;for(this.asyncStream_=new _,this.asyncStream_.push(this.decryptChunk_(it.subarray(gt,gt+Re),Te,Ue,_t)),gt=Re;gt<it.length;gt+=Re)Ue=new Uint32Array([D(it[gt-4]),D(it[gt-3]),D(it[gt-2]),D(it[gt-1])]),this.asyncStream_.push(this.decryptChunk_(it.subarray(gt,gt+Re),Te,Ue,_t));this.asyncStream_.push(function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var Dt;Ke(null,(Dt=_t).subarray(0,Dt.byteLength-Dt[Dt.byteLength-1]))})}return Se.prototype.decryptChunk_=function(Ie,Te,Ue,Ke){return function(){var Re=function(it,_t,gt){for(var Dt,$t,Gt,un,an=new Int32Array(it.buffer,it.byteOffset,it.byteLength>>2),mn=new h(Array.prototype.slice.call(_t)),cn=(it=new Uint8Array(it.byteLength),new Int32Array(it.buffer)),Pn=gt[0],bn=gt[1],Ln=gt[2],Mn=gt[3],Nn=0;Nn<an.length;Nn+=4)Dt=D(an[Nn]),$t=D(an[Nn+1]),Gt=D(an[Nn+2]),un=D(an[Nn+3]),mn.decrypt(Dt,$t,Gt,un,cn,Nn),cn[Nn]=D(cn[Nn]^Pn),cn[Nn+1]=D(cn[Nn+1]^bn),cn[Nn+2]=D(cn[Nn+2]^Ln),cn[Nn+3]=D(cn[Nn+3]^Mn),Pn=Dt,bn=$t,Ln=Gt,Mn=un;return it}(Ie,Te,Ue);Ke.set(Re,Ie.byteOffset)}},l(Se,null,[{key:"STEP",get:function(){return 32e3}}]),Se}();
/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */(ie=(ie=typeof window<"u"?window:typeof ie<"u"?ie:typeof self<"u"?self:{}).BigInt||Number)("0x1"),ie("0x100"),ie("0x10000"),ie("0x1000000"),ie("0x100000000"),ie("0x10000000000"),ie("0x1000000000000"),ie("0x100000000000000"),ie("0x10000000000000000"),self.onmessage=function(Ke){var Ie=Ke.data,Te=new Uint8Array(Ie.encrypted.bytes,Ie.encrypted.byteOffset,Ie.encrypted.byteLength),Ue=new Uint32Array(Ie.key.bytes,Ie.key.byteOffset,Ie.key.byteLength/4);Ke=new Uint32Array(Ie.iv.bytes,Ie.iv.byteOffset,Ie.iv.byteLength/4),new Q(Te,Ue,Ke,function(Re,it){self.postMessage(function be(Se){var Ie={};return Object.keys(Se).forEach(function(Te){var Ue,Ke=Se[Te];Ue=Ke,Ie[Te]=("function"===ArrayBuffer.isView?ArrayBuffer.isView(Ue):Ue&&Ue.buffer instanceof ArrayBuffer)?{bytes:Ke.buffer,byteOffset:Ke.byteOffset,byteLength:Ke.byteLength}:Ke}),Ie}({source:Ie.source,decrypted:it}),[it.buffer])})}}))),co={AUDIO:function(i,l){return function(){var o=l.mediaTypes[i],t=l.blacklistCurrentPlaylist;uo(s=l.segmentLoaders[i],o);var a=o.activeTrack(),s=((s=o.activeGroup()).filter(function(D){return D.default})[0]||s[0]).id,h=o.tracks[s];if(a!==h){for(var _ in ut.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),o.tracks)o.tracks[_].enabled=o.tracks[_]===h;o.onTrackChanged()}else t({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,l){return function(){var o=l.segmentLoaders[i],t=l.mediaTypes[i];ut.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),uo(o,t),(o=t.activeTrack())&&(o.mode="disabled"),t.onTrackChanged()}}},Kd={AUDIO:function(i,l,o){var t,a,s;l&&(t=o.tech,a=o.requestOptions,s=o.segmentLoaders[i],l.on("loadedmetadata",function(){var h=l.media();s.playlist(h,a),(!t.paused()||h.endList&&"none"!==t.preload())&&s.load()}),l.on("loadedplaylist",function(){s.playlist(l.media(),a),t.paused()||s.load()}),l.on("error",co[i](i,o)))},SUBTITLES:function(i,l,o){var t=o.tech,a=o.requestOptions,s=o.segmentLoaders[i],h=o.mediaTypes[i];l.on("loadedmetadata",function(){var _=l.media();s.playlist(_,a),s.track(h.activeTrack()),(!t.paused()||_.endList&&"none"!==t.preload())&&s.load()}),l.on("loadedplaylist",function(){s.playlist(l.media(),a),t.paused()||s.load()}),l.on("error",co[i](i,o))}},Ef={AUDIO:function(i,l){var o,t,a=l.vhs,s=l.sourceType,h=l.segmentLoaders[i],_=l.requestOptions,D=l.master.mediaGroups,Q=l.mediaTypes[i],ie=Q.groups,be=Q.tracks,Se=Q.logger_,Ie=l.masterPlaylistLoader,Te=_a(Ie.master);for(o in D[i]&&0!==Object.keys(D[i]).length||(D[i]={main:{default:{default:!0}}},Te&&(D[i].main.default.playlists=Ie.master.playlists)),D[i])for(var Ue in ie[o]||(ie[o]=[]),D[i][o]){var Re=D[i][o][Ue],Ke=void 0;Ke=Te?(Se("AUDIO group '"+o+"' label '"+Ue+"' is a master playlist"),Re.isMasterPlaylist=!0,null):"vhs-json"===s&&Re.playlists?new jr(Re.playlists[0],a,_):Re.resolvedUri?new jr(Re.resolvedUri,a,_):Re.playlists&&"dash"===s?new Ms(Re.playlists[0],a,_,Ie):null,Re=ut.mergeOptions({id:Ue,playlistLoader:Ke},Re),Kd[i](i,Re.playlistLoader,l),ie[o].push(Re),typeof be[Ue]>"u"&&(Re=new ut.AudioTrack({id:Ue,kind:(t=void 0,t=(Ke=Re).default?"main":"alternative",t=Ke.characteristics&&0<=Ke.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":t),enabled:!1,language:Re.language,default:Re.default,label:Ue}),be[Ue]=Re)}h.on("error",co[i](i,l))},SUBTITLES:function(i,l){var o,t=l.tech,a=l.vhs,s=l.sourceType,h=l.segmentLoaders[i],_=l.requestOptions,D=l.master.mediaGroups,Q=l.mediaTypes[i],ie=Q.groups,be=Q.tracks,Se=l.masterPlaylistLoader;for(o in D[i])for(var Ie in ie[o]||(ie[o]=[]),D[i][o])if(!D[i][o][Ie].forced){var Te=D[i][o][Ie],Ue=void 0;if("hls"===s)Ue=new jr(Te.resolvedUri,a,_);else if("dash"===s){if(!Te.playlists.filter(function(Ke){return Ke.excludeUntil!==1/0}).length)return;Ue=new Ms(Te.playlists[0],a,_,Se)}else"vhs-json"===s&&(Ue=new jr(Te.playlists?Te.playlists[0]:Te.resolvedUri,a,_));Te=ut.mergeOptions({id:Ie,playlistLoader:Ue},Te),Kd[i](i,Te.playlistLoader,l),ie[o].push(Te),typeof be[Ie]>"u"&&(Te=t.addRemoteTextTrack({id:Ie,kind:"subtitles",default:Te.default&&Te.autoselect,language:Te.language,label:Ie},!1).track,be[Ie]=Te)}h.on("error",co[i](i,l))},"CLOSED-CAPTIONS":function(i,s){var o,t=s.tech,a=s.master.mediaGroups,h=(s=s.mediaTypes[i]).groups,_=s.tracks;for(o in a[i])for(var D in h[o]||(h[o]=[]),a[i][o]){var Q,ie,be=a[i][o][D];/^(?:CC|SERVICE)/.test(be.instreamId)&&(void 0===(ie=(Q=t.options_.vhs&&t.options_.vhs.captionServices||{})[(ie={label:D,language:be.language,instreamId:be.instreamId,default:be.default&&be.autoselect}).instreamId]?ut.mergeOptions(ie,Q[ie.instreamId]):ie).default&&delete ie.default,h[o].push(ut.mergeOptions({id:D},be)),typeof _[D]>"u"&&(ie=t.addRemoteTextTrack({id:ie.instreamId,kind:"captions",default:ie.default,language:ie.language,label:ie.label},!1).track,_[D]=ie))}}},Cf={AUDIO:function(i,l){return function(){var o,t=l.mediaTypes[i].tracks;for(o in t)if(t[o].enabled)return t[o];return null}},SUBTITLES:function(i,l){return function(){var o,t=l.mediaTypes[i].tracks;for(o in t)if("showing"===t[o].mode||"hidden"===t[o].mode)return t[o];return null}}},Nf=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Af=function(i){function l(t){var a=i.call(this)||this,s=t.src,h=t.handleManifestRedirects,_=t.withCredentials,D=t.tech,Q=t.bandwidth,ie=t.externVhs,be=t.useCueTags,Se=t.blacklistDuration,Ie=t.enableLowInitialPlaylist,Te=t.sourceType,Ue=t.cacheEncryptionKeys,Ke=t.experimentalBufferBasedABR,Re=t.experimentalLeastPixelDiffSelector,it=t.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var _t,gt=t.maxPlaylistRetries;return null!==gt&&typeof gt<"u"||(gt=1/0),nr=ie,a.experimentalBufferBasedABR=Boolean(Ke),a.experimentalLeastPixelDiffSelector=Boolean(Re),a.withCredentials=_,a.tech_=D,a.vhs_=D.vhs,a.sourceType_=Te,a.useCueTags_=be,a.blacklistDuration=Se,a.maxPlaylistRetries=gt,a.enableLowInitialPlaylist=Ie,a.useCueTags_&&(a.cueTagsTrack_=a.tech_.addTextTrack("metadata","ad-cues"),a.cueTagsTrack_.inBandMetadataTrackDispatchType=""),a.requestOptions_={withCredentials:_,handleManifestRedirects:h,maxPlaylistRetries:gt,timeout:null},a.on("error",a.pauseLoading),a.mediaTypes_=(_t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(Dt){_t[Dt]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:tr,activeTrack:tr,getActiveGroup:tr,onGroupChanged:tr,onTrackChanged:tr,lastTrack_:null,logger_:qi("MediaGroups["+Dt+"]")}}),_t),a.mediaSource=new window.MediaSource,a.handleDurationChange_=a.handleDurationChange_.bind(Pe(a)),a.handleSourceOpen_=a.handleSourceOpen_.bind(Pe(a)),a.handleSourceEnded_=a.handleSourceEnded_.bind(Pe(a)),a.mediaSource.addEventListener("durationchange",a.handleDurationChange_),a.mediaSource.addEventListener("sourceopen",a.handleSourceOpen_),a.mediaSource.addEventListener("sourceended",a.handleSourceEnded_),a.seekable_=ut.createTimeRanges(),a.hasPlayed_=!1,a.syncController_=new Sf(t),a.segmentMetadataTrack_=D.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,a.decrypter_=new kf,a.sourceUpdater_=new $d(a.mediaSource),a.inbandTextTracks_={},a.timelineChangeController_=new Tf,Ue={vhs:a.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:it,mediaSource:a.mediaSource,currentTime:a.tech_.currentTime.bind(a.tech_),seekable:function(){return a.seekable()},seeking:function(){return a.tech_.seeking()},duration:function(){return a.duration()},hasPlayed:function(){return a.hasPlayed_},goalBufferLength:function(){return a.goalBufferLength()},bandwidth:Q,syncController:a.syncController_,decrypter:a.decrypter_,sourceType:a.sourceType_,inbandTextTracks:a.inbandTextTracks_,cacheEncryptionKeys:Ue,sourceUpdater:a.sourceUpdater_,timelineChangeController:a.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings},a.masterPlaylistLoader_=new("dash"===a.sourceType_?Ms:jr)(s,a.vhs_,a.requestOptions_),a.setupMasterPlaylistLoaderListeners_(),a.mainSegmentLoader_=new Fs(ut.mergeOptions(Ue,{segmentMetadataTrack:a.segmentMetadataTrack_,loaderType:"main"}),t),a.audioSegmentLoader_=new Fs(ut.mergeOptions(Ue,{loaderType:"audio"}),t),a.subtitleSegmentLoader_=new xf(ut.mergeOptions(Ue,{loaderType:"vtt",featuresNativeTextTracks:a.tech_.featuresNativeTextTracks}),t),a.setupSegmentLoaderListeners_(),a.experimentalBufferBasedABR&&(a.masterPlaylistLoader_.one("loadedplaylist",function(){return a.startABRTimer_()}),a.tech_.on("pause",function(){return a.stopABRTimer_()}),a.tech_.on("play",function(){return a.startABRTimer_()})),Nf.forEach(function(Dt){a[Dt+"_"]=function($t){return this.audioSegmentLoader_[$t]+this.mainSegmentLoader_[$t]}.bind(Pe(a),Dt)}),a.logger_=qi("MPC"),a.triggeredFmp4Usage=!1,"none"===a.tech_.preload()?(a.loadOnPlay_=function(){a.loadOnPlay_=null,a.masterPlaylistLoader_.load()},a.tech_.one("play",a.loadOnPlay_)):a.masterPlaylistLoader_.load(),a.timeToLoadedData__=-1,a.mainAppendsToLoadedData__=-1,a.audioAppendsToLoadedData__=-1,t="none"===a.tech_.preload()?"play":"loadstart",a.tech_.one(t,function(){var Dt=Date.now();a.tech_.one("loadeddata",function(){a.timeToLoadedData__=Date.now()-Dt,a.mainAppendsToLoadedData__=a.mainSegmentLoader_.mediaAppends,a.audioAppendsToLoadedData__=a.audioSegmentLoader_.mediaAppends})}),a}ke(l,i);var o=l.prototype;return o.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},o.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},o.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return-1===t||-1===a?-1:t+a},o.timeToLoadedData_=function(){return this.timeToLoadedData__},o.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},o.switchMedia_=function(t,a,s){var h=(_=this.media())&&(_.id||_.uri),_=t.id||t.uri;h&&h!==_&&(this.logger_("switch media "+h+" -> "+_+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(t,s)},o.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=window.setInterval(function(){return t.checkABR_()},250)},o.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)},o.getAudioTrackPlaylists_=function(){var t=this.master(),a=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return a;var s,h=t.mediaGroups.AUDIO,_=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{var D,Q=h.main||_.length&&h[_[0]];for(D in Q)if(Q[D].default){s={label:D};break}}if(!s)return a;var ie,be=[];for(ie in h)if(h[ie][s.label]){var Se=h[ie][s.label];if(Se.playlists&&Se.playlists.length)be.push.apply(be,Se.playlists);else if(Se.uri)be.push(Se);else if(t.playlists.length)for(var Ie=0;Ie<t.playlists.length;Ie++){var Te=t.playlists[Ie];Te.attributes&&Te.attributes.AUDIO&&Te.attributes.AUDIO===ie&&be.push(Te)}}return be.length?be:a},o.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=t.masterPlaylistLoader_.media(),s=1.5*a.targetDuration*1e3;t.requestOptions_.timeout=Ts(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:s,a.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(a,t.requestOptions_),t.mainSegmentLoader_.load()),function hf(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(ie){Ef[ie](ie,i)});var l,o=i.mediaTypes,t=i.masterPlaylistLoader,a=i.tech,s=i.vhs,h=i.segmentLoaders,_=h.AUDIO,D=h.main;function Q(){o.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"vhs-audio-change"}),a.trigger({type:"usage",name:"hls-audio-change"})}for(l in["AUDIO","SUBTITLES"].forEach(function(ie){var be,Se,Ie,Te,Ue,Ke,Re,it,_t,gt;o[ie].activeGroup=(be=ie,Se=i,function(Dt){var Gt=Se.mediaTypes[be].groups,un=Se.masterPlaylistLoader.media();if(!un)return null;var an=null;un.attributes[be]&&(an=Gt[un.attributes[be]]);var mn=Object.keys(Gt);if(!an)if("AUDIO"===be&&1<mn.length&&_a(Se.master))for(var cn=0;cn<mn.length;cn++){var Pn=Gt[mn[cn]];if(Hd(Pn,un)){an=Pn;break}}else Gt.main?an=Gt.main:1===mn.length&&(an=Gt[mn[0]]);return typeof Dt>"u"?an:null!==Dt&&an&&an.filter(function(bn){return bn.id===Dt.id})[0]||null}),o[ie].activeTrack=Cf[ie](ie,i),o[ie].onGroupChanged=(Ie=ie,Te=i,function(){var Dt=(cn=Te.segmentLoaders)[Ie],$t=cn.main,Gt=Te.mediaTypes[Ie],un=Gt.activeTrack(),an=Gt.getActiveGroup(),mn=Gt.activePlaylistLoader,cn=Gt.lastGroup_;an&&cn&&an.id===cn.id||(Gt.lastGroup_=an,Gt.lastTrack_=un,uo(Dt,Gt),an&&!an.isMasterPlaylist&&(an.playlistLoader?(Dt.resyncLoader(),jd(an.playlistLoader,Gt)):mn&&$t.resetEverything()))}),o[ie].onGroupChanging=(Ue=ie,Ke=i,function(){var Dt=Ke.segmentLoaders[Ue];Ke.mediaTypes[Ue].lastGroup_=null,Dt.abort(),Dt.pause()}),o[ie].onTrackChanged=(Re=ie,it=i,function(){var Dt=it.masterPlaylistLoader,Gt=($t=it.segmentLoaders)[Re],un=$t.main,an=it.mediaTypes[Re],mn=an.activeTrack(),cn=an.getActiveGroup(),Pn=an.activePlaylistLoader,bn=an.lastTrack_;if((!bn||!mn||bn.id!==mn.id)&&(an.lastGroup_=cn,an.lastTrack_=mn,uo(Gt,an),cn)){if(cn.isMasterPlaylist){if(!mn||!bn||mn.id===bn.id)return;var Ln=it.vhs.masterPlaylistController_,$t=Ln.selectPlaylist();return Ln.media()===$t?void 0:(an.logger_("track change. Switching master audio from "+bn.id+" to "+mn.id),Dt.pause(),un.resetEverything(),void Ln.fastQualityChange_($t))}if("AUDIO"===Re){if(!cn.playlistLoader)return un.setAudio(!0),void un.resetEverything();Gt.setAudio(!0),un.setAudio(!1)}Pn!==cn.playlistLoader&&(Gt.track&&Gt.track(mn),Gt.resetEverything()),jd(cn.playlistLoader,an)}}),o[ie].getActiveGroup=(_t=ie,gt=i.mediaTypes,function(){var Dt=gt[_t].activeTrack();return Dt?gt[_t].activeGroup(Dt):null})}),(h=o.AUDIO.activeGroup())&&(h=(h.filter(function(ie){return ie.default})[0]||h[0]).id,o.AUDIO.tracks[h].enabled=!0,o.AUDIO.onGroupChanged(),o.AUDIO.onTrackChanged(),o.AUDIO.getActiveGroup().playlistLoader?(D.setAudio(!1),_.setAudio(!0)):D.setAudio(!0)),t.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(ie){return o[ie].onGroupChanged()})}),t.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(ie){return o[ie].onGroupChanging()})}),a.audioTracks().addEventListener("change",Q),a.remoteTextTracks().addEventListener("change",o.SUBTITLES.onTrackChanged),s.on("dispose",function(){a.audioTracks().removeEventListener("change",Q),a.remoteTextTracks().removeEventListener("change",o.SUBTITLES.onTrackChanged)}),a.clearTracks("audio"),o.AUDIO.tracks)a.audioTracks().addTrack(o.AUDIO.tracks[l])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),a),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var a,s=t.masterPlaylistLoader_.media();if(!s){if(t.excludeUnsupportedVariants_(),!(a=(a=t.enableLowInitialPlaylist?t.selectInitialPlaylist():a)||t.selectPlaylist())||!t.shouldSwitchToMedia_(a)||(t.initialMedia_=a,t.switchMedia_(t.initialMedia_,"initial"),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments))return;s=t.initialMedia_}t.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=t.masterPlaylistLoader_.media(),s=1.5*a.targetDuration*1e3;t.requestOptions_.timeout=Ts(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:s,t.mainSegmentLoader_.playlist(a,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=t.masterPlaylistLoader_.media();"playlist-unchanged"!==a.lastExcludeReason_&&t.stuckAtPlaylistEnd_(a)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},o.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},o.triggerPresenceUsage_=function(D,a){var s,h=D.mediaGroups||{},_=!0;for(s in D=Object.keys(h.AUDIO),h.AUDIO)for(var Q in h.AUDIO[s])h.AUDIO[s][Q].uri||(_=!1);_&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),nr.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),D.length&&1<Object.keys(h.AUDIO[D[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},o.shouldSwitchToMedia_=function(t){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),h=this.bufferLowWaterLine(),_=this.bufferHighWaterLine();return function(D){var Q=D.currentPlaylist,ie=D.buffered,be=D.currentTime,Se=D.nextPlaylist,Ie=D.bufferLowWaterLine,Te=D.bufferHighWaterLine,Ue=D.duration,Ke=D.experimentalBufferBasedABR,Re=D.log;if(!Se)return ut.log.warn("We received no playlist to switch to. Please check your stream."),!1;var it="allowing switch "+(Q&&Q.id||"null")+" -> "+Se.id;return Q?!(Se.id===Q.id||(D=Boolean(Fr(ie,be).length),Q.endList?(ie=bs(ie,be),Ue<(be=Ke?hi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:hi.MAX_BUFFER_LOW_WATER_LINE)?(Re(it+" as duration < max low water line ("+Ue+" < "+be+")"),0):(be=Se.attributes.BANDWIDTH)<(Se=Q.attributes.BANDWIDTH)&&(!Ke||ie<Te)?(Q=it+" as next bandwidth < current bandwidth ("+be+" < "+Se+")",Ke&&(Q+=" and forwardBuffer < bufferHighWaterLine ("+ie+" < "+Te+")"),Re(Q),0):(!Ke||Se<be)&&Ie<=ie?(Ie=it+" as forwardBuffer >= bufferLowWaterLine ("+ie+" >= "+Ie+")",Ke&&(Ie+=" and next bandwidth > current bandwidth ("+be+" > "+Se+")"),Re(Ie),0):(Re("not "+it+" as no switching criteria met"),1)):D||"number"!=typeof Q.partTargetDuration?(Re(it+" as current playlist is live"),0):(Re("not "+it+" as current playlist is live llhls, but currentTime isn't in buffered."),1))):(Re(it+" as current playlist is not set"),!0)}({buffered:this.tech_.buffered(),currentTime:s,currentPlaylist:a,nextPlaylist:t,bufferLowWaterLine:h,bufferHighWaterLine:_,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},o.setupSegmentLoaderListeners_=function(){var t=this;function a(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var s=t.getCodecsOrExclude_();s&&t.sourceUpdater_.addOrChangeSourceBuffers(s)}this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var s=t.selectPlaylist();t.shouldSwitchToMedia_(s)&&t.switchMedia_(s,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}),this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},o.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},o.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},o.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},o.fastQualityChange_=function(t){var a=this;(t=void 0===t?this.selectPlaylist():t)!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){a.tech_.setCurrentTime(ut.browser.IE_VERSION||ut.browser.IS_EDGE?a.tech_.currentTime()+.04:a.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},o.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}},o.setupFirstPlay=function(){var t=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(ut.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(s.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},o.handleSourceOpen_=function(){var t;this.tryToCreateSourceBuffers_(),!this.tech_.autoplay()||typeof(t=this.tech_.play())<"u"&&"function"==typeof t.then&&t.then(null,function(a){}),this.trigger("sourceopen")},o.handleSourceEnded_=function(){var t,a;!this.inbandTextTracks_.metadataTrack_||(t=this.inbandTextTracks_.metadataTrack_.cues)&&t.length&&(a=this.duration(),t[t.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a)},o.handleDurationChange_=function(){this.tech_.trigger("durationchange")},o.onEndOfStream=function(){var t,a=this.mainSegmentLoader_.ended_;(a=this.mediaTypes_.AUDIO.activePlaylistLoader?((t=this.mainSegmentLoader_.getCurrentMediaInfo_())&&!t.hasVideo||a)&&this.audioSegmentLoader_.ended_:a)&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},o.stuckAtPlaylistEnd_=function(s){if(!this.seekable().length)return!1;if(null===(h=this.syncController_.getExpiredTime(s,this.duration())))return!1;var h,a=nr.Playlist.playlistEnd(s,h);return s=this.tech_.currentTime(),(h=this.tech_.buffered()).length?(h=h.end(h.length-1))-s<=.1&&a-h<=.1:a-s<=.1},o.blacklistCurrentPlaylist=function(t,a){var s=(t=void 0===t?{}:t).playlist||this.masterPlaylistLoader_.media();if(a=a||t.blacklistDuration||this.blacklistDuration,!s)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));s.playlistErrors_++;var h,_=this.masterPlaylistLoader_.master.playlists,D=_.filter(eo),Q=1===D.length&&D[0]===s;return 1===_.length&&a!==1/0?(ut.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(Q)):(Q&&(h=!1,_.forEach(function(ie){var be;ie===s||typeof(be=ie.excludeUntil)<"u"&&be!==1/0&&(h=!0,delete ie.excludeUntil)}),h&&(ut.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))),D=s.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*a,s.excludeUntil=D,t.reason&&(s.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),(_=this.selectPlaylist())?((a=t.internal?this.logger_:ut.log.warn)((t.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(D=t.message?" "+t.message:"")+" Switching to playlist "+_.id+"."),_.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),_.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),D=_.targetDuration/2*1e3||5e3,D="number"==typeof _.lastRequest&&Date.now()-_.lastRequest<=D,this.switchMedia_(_,"exclude",Q||D)):(this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error")))},o.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},o.delegateLoaders_=function(t,a){var s=this,h=[],_="all"===t;!_&&"main"!==t||h.push(this.masterPlaylistLoader_);var D=[];!_&&"audio"!==t||D.push("AUDIO"),!_&&"subtitle"!==t||(D.push("CLOSED-CAPTIONS"),D.push("SUBTITLES")),D.forEach(function(Q){(Q=s.mediaTypes_[Q]&&s.mediaTypes_[Q].activePlaylistLoader)&&h.push(Q)}),["main","audio","subtitle"].forEach(function(Q){var ie=s[Q+"SegmentLoader_"];!ie||t!==Q&&"all"!==t||h.push(ie)}),h.forEach(function(Q){return a.forEach(function(ie){"function"==typeof Q[ie]&&Q[ie]()})})},o.setCurrentTime=function(t){var a=Fr(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?a&&a.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},o.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:nr.Playlist.duration(t):1/0:0},o.seekable=function(){return this.seekable_},o.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var s=this.syncController_.getExpiredTime(a,this.duration());if(null!==s){var h,_,D=this.masterPlaylistLoader_.master,Q=nr.Playlist.seekable(a,s,nr.Playlist.liveEdgeDelay(D,a));if(0!==Q.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(s=this.syncController_.getExpiredTime(a,this.duration()))||0===(t=nr.Playlist.seekable(a,s,nr.Playlist.liveEdgeDelay(D,a))).length))return;this.seekable_&&this.seekable_.length&&(h=this.seekable_.end(0),_=this.seekable_.start(0)),this.seekable_=!t||t.start(0)>Q.end(0)||Q.start(0)>t.end(0)?Q:ut.createTimeRanges([[(t.start(0)>Q.start(0)?t:Q).start(0),(t.end(0)<Q.end(0)?t:Q).end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===h&&this.seekable_.start(0)===_||(this.logger_("seekable updated ["+$u(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},o.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var a=this.seekable();return a.length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1))):void 0}t=this.tech_.buffered(),a=nr.Playlist.duration(this.masterPlaylistLoader_.media()),0<t.length&&(a=Math.max(a,t.end(t.length-1))),this.mediaSource.duration!==a&&this.sourceUpdater_.setDuration(a)},o.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s,h=t.mediaTypes_[a].groups;for(s in h)h[s].forEach(function(_){_.playlistLoader&&_.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},o.master=function(){return this.masterPlaylistLoader_.master},o.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},o.areMediaTypesKnown_=function(){var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_();return a=!a||!!this.audioSegmentLoader_.getCurrentMediaInfo_(),t&&a},o.getCodecsOrExclude_=function(){var t=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};a.video=a.main;var s=va(this.master(),this.media()),h={},_=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(h.video=s.video||a.main.videoCodec||"avc1.4d400d"),a.main.isMuxed&&(h.video+=","+(s.audio||a.main.audioCodec||$l)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||_)&&(h.audio=s.audio||a.main.audioCodec||a.audio.audioCodec||$l,a.audio.isFmp4=(a.main.hasAudio&&!a.main.isMuxed?a.main:a.audio).isFmp4),h.audio||h.video){var D,Q,ie={};if(["video","audio"].forEach(function(Se){var Te;h.hasOwnProperty(Se)&&!(a[Se].isFmp4?Ua:Yo)(Te=h[Se])&&(ie[Te=a[Se].isFmp4?"browser":"muxer"]=ie[Te]||[],ie[Te].push(h[Se]),"audio"===Se&&(D=Te))}),_&&D&&this.media().attributes.AUDIO&&(Q=this.media().attributes.AUDIO,this.master().playlists.forEach(function(Se){(Se.attributes&&Se.attributes.AUDIO)===Q&&Se!==t.media()&&(Se.excludeUntil=1/0)}),this.logger_("excluding audio group "+Q+" as "+D+' does not support codec(s): "'+h.audio+'"')),!Object.keys(ie).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var be=[];if(["video","audio"].forEach(function(Se){var Ie=(Yi(t.sourceUpdater_.codecs[Se]||"")[0]||{}).type,Te=(Yi(h[Se]||"")[0]||{}).type;Ie&&Te&&Ie.toLowerCase()!==Te.toLowerCase()&&be.push('"'+t.sourceUpdater_.codecs[Se]+'" -> "'+h[Se]+'"')}),be.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+be.join(", ")+".",blacklistDuration:1/0,internal:!0})}return h}_=Object.keys(ie).reduce(function(Se,Ie){return Se&&(Se+=", "),Se+(Ie+' does not support codec(s): "')+ie[Ie].join(",")+'"'},"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:_,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},o.tryToCreateSourceBuffers_=function(){var t;"open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_()||(t=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(t),t=[t.video,t.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(t))},o.excludeUnsupportedVariants_=function(){var t=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(h){var _,D=a[h];-1===s.indexOf(D.id)&&(s.push(D.id),_=[],!(h=va(t.master,D)).audio||Yo(h.audio)||Ua(h.audio)||_.push("audio codec "+h.audio),!h.video||Yo(h.video)||Ua(h.video)||_.push("video codec "+h.video),h.text&&"stpp.ttml.im1t"===h.text&&_.push("text codec "+h.text),_.length&&(D.excludeUntil=1/0,t.logger_("excluding "+D.id+" for unsupported: "+_.join(", "))))})},o.excludeIncompatibleVariants_=function(_){var a=this,s=[],h=this.master().playlists,D=Td(_=io(Yi(_))),Q=_.video&&Yi(_.video)[0]||null,ie=_.audio&&Yi(_.audio)[0]||null;Object.keys(h).forEach(function(be){var Se,Ie,Te=h[be];-1===s.indexOf(Te.id)&&Te.excludeUntil!==1/0&&(s.push(Te.id),Se=[],be=Td(Ie=va(a.masterPlaylistLoader_.master,Te)),(Ie.audio||Ie.video)&&(be!==D&&Se.push('codec count "'+be+'" !== "'+D+'"'),a.sourceUpdater_.canChangeType()||(be=Ie.video&&Yi(Ie.video)[0]||null,Ie=Ie.audio&&Yi(Ie.audio)[0]||null,be&&Q&&be.type.toLowerCase()!==Q.type.toLowerCase()&&Se.push('video codec "'+be.type+'" !== "'+Q.type+'"'),Ie&&ie&&Ie.type.toLowerCase()!==ie.type.toLowerCase()&&Se.push('audio codec "'+Ie.type+'" !== "'+ie.type+'"')),Se.length&&(Te.excludeUntil=1/0,a.logger_("blacklisting "+Te.id+": "+Se.join(" && ")))))})},o.updateAdCues_=function(t){var a=0,s=this.seekable();s.length&&(a=s.start(0)),function(h,_,D){if(void 0===D&&(D=0),h.segments)for(var Q=D,ie=0;ie<h.segments.length;ie++){var be,Se,Ie,Te=h.segments[ie];if(Ie=Ie||function(Ue,Ke){for(var Re=Ue.cues,it=0;it<Re.length;it++){var _t=Re[it];if(Ke>=_t.adStartTime&&Ke<=_t.adEndTime)return _t}return null}(_,Q+Te.duration/2)){if("cueIn"in Te){Ie.endTime=Q,Ie.adEndTime=Q,Q+=Te.duration,Ie=null;continue}if(Q<Ie.endTime){Q+=Te.duration;continue}Ie.endTime+=Te.duration}else"cueOut"in Te&&((Ie=new window.VTTCue(Q,Q+Te.duration,Te.cueOut)).adStartTime=Q,Ie.adEndTime=Q+parseFloat(Te.cueOut),_.addCue(Ie)),"cueOutCont"in Te&&(be=(Se=Te.cueOutCont.split("/").map(parseFloat))[0],Se=Se[1],(Ie=new window.VTTCue(Q,Q+Te.duration,"")).adStartTime=Q-be,Ie.adEndTime=Ie.adStartTime+Se,_.addCue(Ie));Q+=Te.duration}}(t,this.cueTagsTrack_,a)},o.goalBufferLength=function(){var t=this.tech_.currentTime(),a=hi.GOAL_BUFFER_LENGTH,s=hi.GOAL_BUFFER_LENGTH_RATE,h=Math.max(a,hi.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+t*s,h)},o.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),a=hi.BUFFER_LOW_WATER_LINE,s=hi.BUFFER_LOW_WATER_LINE_RATE,h=Math.max(a,hi.MAX_BUFFER_LOW_WATER_LINE),_=Math.max(a,hi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+t*s,this.experimentalBufferBasedABR?_:h)},o.bufferHighWaterLine=function(){return hi.BUFFER_HIGH_WATER_LINE},l}(ut.EventTarget),Yd=["seeking","seeked","pause","playing","error"],Df=function(){function i(o){var t=this;function a(){return t.monitorCurrentTime_()}function s(){return t.monitorCurrentTime_()}function h(){return t.techWaiting_()}function _(){return t.cancelTimer_()}this.masterPlaylistController_=o.masterPlaylistController,this.tech_=o.tech,this.seekable=o.seekable,this.allowSeeksWithinUnsafeLiveWindow=o.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=o.liveRangeSafeTimeDelta,this.media=o.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=qi("PlaybackWatcher"),this.logger_("initialize");var D=this.masterPlaylistController_,Q=["main","subtitle","audio"],ie={};function be(Se){["main","audio"].forEach(function(Ie){D[Ie+"SegmentLoader_"][Se]("appended",t.seekingAppendCheck_)})}Q.forEach(function(Se){ie[Se]={reset:function(){return t.resetSegmentDownloads_(Se)},updateend:function(){return t.checkSegmentDownloads_(Se)}},D[Se+"SegmentLoader_"].on("appendsdone",ie[Se].updateend),D[Se+"SegmentLoader_"].on("playlistupdate",ie[Se].reset),t.tech_.on(["seeked","seeking"],ie[Se].reset)}),this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),be("off"))},this.clearSeekingAppendCheck_=function(){return be("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),be("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",h),this.tech_.on(Yd,_),this.tech_.on("canplay",s),this.tech_.one("play",a),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",h),t.tech_.off(Yd,_),t.tech_.off("canplay",s),t.tech_.off("play",a),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),Q.forEach(function(Se){D[Se+"SegmentLoader_"].off("appendsdone",ie[Se].updateend),D[Se+"SegmentLoader_"].off("playlistupdate",ie[Se].reset),t.tech_.off(["seeked","seeking"],ie[Se].reset)}),t.checkCurrentTimeTimeout_&&window.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var l=i.prototype;return l.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)},l.resetSegmentDownloads_=function(o){var t=this.masterPlaylistController_[o+"SegmentLoader_"];0<this[o+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+o+" loader"),this[o+"StalledDownloads_"]=0,this[o+"Buffered_"]=t.buffered_()},l.checkSegmentDownloads_=function(o){var t=this.masterPlaylistController_,a=t[o+"SegmentLoader_"],s=a.buffered_(),h=function(_,D){if(_===D)return!1;if(!_&&D||!D&&_||_.length!==D.length)return!0;for(var Q=0;Q<_.length;Q++)if(_.start(Q)!==D.start(Q)||_.end(Q)!==D.end(Q))return!0;return!1}(this[o+"Buffered_"],s);this[o+"Buffered_"]=s,h?this.resetSegmentDownloads_(o):(this[o+"StalledDownloads_"]++,this.logger_("found #"+this[o+"StalledDownloads_"]+" "+o+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:mr(s)}),this[o+"StalledDownloads_"]<10||(this.logger_(o+" loader stalled download exclusion"),this.resetSegmentDownloads_(o),this.tech_.trigger({type:"usage",name:"vhs-"+o+"-download-exclusion"}),"subtitle"!==o&&t.blacklistCurrentPlaylist({message:"Excessive "+o+" segment downloading detected."},1/0)))},l.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var o=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===o&&(!t.length||o+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&o===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):o===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=o)}},l.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},l.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var o,t=this.seekable(),a=this.tech_.currentTime();if(this.afterSeekableWindow_(t,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(o=t.end(t.length-1)),typeof(o=this.beforeSeekableWindow_(t,a)?(h=t.start(0))+(h===t.end(0)?0:.1):o)<"u")return this.logger_("Trying to seek outside of seekable at time "+a+" with seekable range "+$u(t)+". Seeking to "+o+"."),this.tech_.setCurrentTime(o),!0;for(var _=this.masterPlaylistController_.sourceUpdater_,s=this.tech_.buffered(),h=_.audioBuffer?_.audioBuffered():null,D=(t=_.videoBuffer?_.videoBuffered():null,(_=this.media()).partTargetDuration||2*(_.targetDuration-_r)),Q=[h,t],ie=0;ie<Q.length;ie++)if(Q[ie]&&bs(Q[ie],a)<D)return!1;return 0!==(s=Qa(s,a)).length&&(o=s.start(0)+.1,this.logger_("Buffered region starts ("+s.start(0)+")  just beyond seek point ("+a+"). Seeking to "+o+"."),this.tech_.setCurrentTime(o),!0)},l.waiting_=function(){var o,t;this.techWaiting_()||(o=this.tech_.currentTime(),(t=Fr(t=this.tech_.buffered(),o)).length&&o+3<=t.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(o),this.logger_("Stopped at "+o+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))},l.techWaiting_=function(){var o=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(o,t)){var a=o.end(o.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+a),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}return o=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),this.videoUnderflow_({audioBuffered:o.audioBuffered(),videoBuffered:o.videoBuffered(),currentTime:t})?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<(o=Qa(a,t)).length&&(a=o.start(0)-t,this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0)},l.afterSeekableWindow_=function(o,t,a,s){if(void 0===s&&(s=!1),!o.length)return!1;var h=o.end(o.length-1)+.1;return(h=!a.endList&&s?o.end(o.length-1)+3*a.targetDuration:h)<t},l.beforeSeekableWindow_=function(o,t){return!!(o.length&&0<o.start(0)&&t<o.start(0)-this.liveRangeSafeTimeDelta)},l.videoUnderflow_=function(o){var t,a,s=o.videoBuffered,h=o.audioBuffered,_=o.currentTime;if(s)return s.length&&h.length?(a=Fr(s,_-3),o=Fr(s,_),(h=Fr(h,_)).length&&!o.length&&a.length&&(t={start:a.end(0),end:h.end(0)})):Qa(s,_).length||(t=this.gapFromVideoUnderflow_(s,_)),!!t&&(this.logger_("Encountered a gap in video from "+t.start+" to "+t.end+". Seeking to current time "+_),!0)},l.skipTheGap_=function(o){var a=this.tech_.buffered(),t=this.tech_.currentTime();a=Qa(a,t),this.cancelTimer_(),0!==a.length&&t===o&&(this.logger_("skipTheGap_:","currentTime:",t,"scheduled currentTime:",o,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+_r),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},l.gapFromVideoUnderflow_=function(o,t){for(var a=function(D){if(D.length<2)return ut.createTimeRanges();for(var Q=[],ie=1;ie<D.length;ie++){var be=D.end(ie-1),Se=D.start(ie);Q.push([be,Se])}return ut.createTimeRanges(Q)}(o),s=0;s<a.length;s++){var h=a.start(s),_=a.end(s);if(t-h<4&&2<t-h)return{start:h,end:_}}return null},i}(),Of={errorInterval:30,getSource:function(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},mi={PlaylistLoader:jr,Playlist:Ii,utils:Ji,STANDARD_PLAYLIST_SELECTOR:Ci,INITIAL_PLAYLIST_SELECTOR:function(){var i=this,l=this.playlists.master.playlists.filter(Ii.isEnabled);return Ur(l,Ps),l.filter(function(o){return!!va(i.playlists.master,o).video})[0]||null},lastBandwidthSelector:Ci,movingAverageBandwidthSelector:function(i){var l=-1,o=-1;if(i<0||1<i)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&window.devicePixelRatio||1;return l<0&&(l=this.systemBandwidth,o=this.systemBandwidth),0<this.systemBandwidth&&this.systemBandwidth!==o&&(l=i*this.systemBandwidth+(1-i)*l,o=this.systemBandwidth),Ed(this.playlists.master,l,parseInt(ro(this.tech_.el(),"width"),10)*t,parseInt(ro(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Ps,comparePlaylistResolution:function(i,l){var o,t;return(o=(o=i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width?i.attributes.RESOLUTION.width:o)||window.Number.MAX_VALUE)===(t=(t=l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width?l.attributes.RESOLUTION.width:t)||window.Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&l.attributes.BANDWIDTH?i.attributes.BANDWIDTH-l.attributes.BANDWIDTH:o-t},xhr:ld()};function Jd(i,l){for(var o=l.media(),t=-1,a=0;a<i.length;a++)if(i[a].id===o.id){t=a;break}i.selectedIndex_=t,i.trigger({selectedIndex:t,type:"change"})}Object.keys(hi).forEach(function(i){Object.defineProperty(mi,i,{get:function(){return ut.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),hi[i]},set:function(l){ut.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),"number"!=typeof l||l<0?ut.log.warn("value of Vhs."+i+" must be greater than or equal to 0"):hi[i]=l}})});var Zd="videojs-vhs";function Qd(){if(!window.localStorage)return null;var i=window.localStorage.getItem(Zd);if(!i)return null;try{return JSON.parse(i)}catch{return null}}mi.canPlaySource=function(){return ut.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},mi.supportsNativeHls=function(){if(!document||!document.createElement)return!1;var i=document.createElement("video");return!!ut.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(l){return/maybe|probably/i.test(i.canPlayType(l))})}(),mi.supportsNativeDash=!!(document&&document.createElement&&ut.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")),mi.supportsTypeNatively=function(i){return"hls"===i?mi.supportsNativeHls:"dash"===i&&mi.supportsNativeDash},mi.isSupported=function(){return ut.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Bs=function(i){function l(t,a,s){var h=i.call(this,a,ut.mergeOptions(s.hls,s.vhs))||this;if(s.hls&&Object.keys(s.hls).length&&ut.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof s.initialBandwidth&&(h.options_.bandwidth=s.initialBandwidth),h.logger_=qi("VhsHandler"),a.options_&&a.options_.playerId&&((s=ut(a.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return ut.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),a.trigger({type:"usage",name:"hls-player-access"}),Pe(h)},configurable:!0}),s.hasOwnProperty("vhs")||Object.defineProperty(s,"vhs",{get:function(){return ut.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),a.trigger({type:"usage",name:"vhs-player-access"}),Pe(h)},configurable:!0}),s.hasOwnProperty("dash")||Object.defineProperty(s,"dash",{get:function(){return ut.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Pe(h)},configurable:!0}),h.player_=s),h.tech_=a,h.source_=t,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&a.overrideNativeAudioTracks&&a.overrideNativeVideoTracks)a.overrideNativeAudioTracks(!0),a.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(a.featuresNativeVideoTracks||a.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(_){var D=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;D&&D.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}ke(l,i);var o=l.prototype;return o.setOptions_=function(){var t,a=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((t=Qd())&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=hi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===hi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof a.source_[s]<"u"&&(a.options_[s]=a.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},o.src=function(t,a){var s=this;t&&(this.setOptions_(),this.options_.src=0===(t=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(t.substring(t.indexOf(",")+1)):t,this.options_.tech=this.tech_,this.options_.externVhs=mi,this.options_.sourceType=zl(a),this.options_.seekTo=function(h){s.tech_.setCurrentTime(h)},this.options_.smoothQualityChange&&ut.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Af(this.options_),a=ut.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new Df(a),this.masterPlaylistController_.on("error",function(){var h=ut.players[s.tech_.options_.playerId],_=s.masterPlaylistController_.error;"object"!=typeof _||_.code?"string"==typeof _&&(_={message:_,code:3}):_.code=3,h.error(_)}),a=this.options_.experimentalBufferBasedABR?mi.movingAverageBandwidthSelector(.55):mi.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||a).bind(this),this.masterPlaylistController_.selectInitialPlaylist=mi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(h){this.masterPlaylistController_.selectPlaylist=h.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(h){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=h,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var h=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,_=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;return this.options_.useNetworkInformationApi&&_?1e7<=(_=1e3*_.downlink*1e3)&&1e7<=h?Math.max(h,_):_:h},set:function(h){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=h,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){ut.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return mr(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return mr(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&function(h){if(window.localStorage){var _=(_=Qd())?ut.mergeOptions(_,h):h;try{window.localStorage.setItem(Zd,JSON.stringify(_))}catch{return}}}({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var h;(h=s).representations=function(){var _;return(_=_a(_=h.masterPlaylistController_.master())?h.masterPlaylistController_.getAudioTrackPlaylists_():_.playlists)?_.filter(function(D){return!Ss(D)}).map(function(D,Q){return new ff(h,D,D.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))},o.createKeySessions_=function(){var t=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function If(s){var l=s.player,o=s.sourceKeySystems,t=s.audioMedia;if(s=s.mainPlaylists,!l.eme.initializeMediaKeys)return Promise.resolve();s=s=t?s.concat([t]):s,a=Object.keys(o),s=s.reduce(function(D,Q){if(!Q.contentProtection)return D;var ie=a.reduce(function(be,Se){var Ie=Q.contentProtection[Se];return Ie&&Ie.pssh&&(be[Se]={pssh:Ie.pssh}),be},{});return Object.keys(ie).length&&D.push(ie),D},[]);var a,h=[],_=[];return s.forEach(function(D){_.push(new Promise(function(Q,ie){l.tech_.one("keysessioncreated",Q)})),h.push(new Promise(function(Q,ie){l.eme.initializeMediaKeys({keySystems:D},function(be){be?ie(be):Q()})}))}),Promise.race([Promise.all(h),Promise.race(_)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){t.logger_("error while creating EME key session",s),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})},o.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},o.setupEme_=function(){var t=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;a=function Pf(i){var l=i.player;return!(!(i=function(o,t,a){if(!o)return o;var s={};t&&t.attributes&&t.attributes.CODECS&&(s=io(Yi(t.attributes.CODECS))),a&&a.attributes&&a.attributes.CODECS&&(s.audio=a.attributes.CODECS);var h,_=ta(s.video),D=ta(s.audio),Q={};for(h in o)Q[h]={},D&&(Q[h].audioContentType=D),_&&(Q[h].videoContentType=_),t.contentProtection&&t.contentProtection[h]&&t.contentProtection[h].pssh&&(Q[h].pssh=t.contentProtection[h].pssh),"string"==typeof o[h]&&(Q[h].url=o[h]);return ut.mergeOptions(o,Q)}(i.sourceKeySystems,i.media,i.audioMedia))||(l.currentSource().keySystems=i)&&!l.eme&&(ut.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()}),this.player_.tech_.on("keystatuschange",function(s){var h;"output-restricted"!==s.status||(s=t.masterPlaylistController_.master())&&s.playlists&&(h=[],s.playlists.forEach(function(_){_&&_.attributes&&_.attributes.RESOLUTION&&720<=_.attributes.RESOLUTION.height&&(!_.excludeUntil||_.excludeUntil<1/0)&&(_.excludeUntil=1/0,h.push(_))}),h.length&&((s=ut.log).warn.apply(s,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(h)),t.masterPlaylistController_.fastQualityChange_()))}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==ut.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},o.setupQualityLevels_=function(){var t=this,a=ut.players[this.tech_.options_.playerId];a&&a.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var s,h;s=t.qualityLevels_,(h=t).representations().forEach(function(_){s.addQualityLevel(_)}),Jd(s,h.playlists)}),this.playlists.on("mediachange",function(){Jd(t.qualityLevels_,t.playlists)}))},l.version=function(){return{"@videojs/http-streaming":"2.14.3","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},o.version=function(){return this.constructor.version()},o.canChangeType=function(){return $d.canChangeType()},o.play=function(){this.masterPlaylistController_.play()},o.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},o.duration=function(){return this.masterPlaylistController_.duration()},o.seekable=function(){return this.masterPlaylistController_.seekable()},o.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),i.prototype.dispose.call(this)},o.convertToProgramTime=function(t,a){return function Gh(i){var l=i.playlist,o=i.time,t=void 0===o?void 0:o;if(!(o=i.callback))throw new Error("getProgramTime: callback must be provided");return l&&void 0!==t?(i=function(a,s){if(!s||!s.segments||0===s.segments.length)return null;for(var h,_=0,D=0;D<s.segments.length&&!(a<=(_=(h=s.segments[D]).videoTimingInfo?h.videoTimingInfo.transmuxedPresentationEnd:_+h.duration));D++);var Q=s.segments[s.segments.length-1];if(Q.videoTimingInfo&&Q.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(_<a){if(a>_+.25*Q.duration)return null;h=Q}return{segment:h,estimatedStart:h.videoTimingInfo?h.videoTimingInfo.transmuxedPresentationStart:_-h.duration,type:h.videoTimingInfo?"accurate":"estimate"}}(t,l))?"estimate"===i.type?o({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart}):(l={mediaSeconds:t},(i=function(a,s){if(!s.dateTimeObject)return null;var h=a-(s.videoTimingInfo.transmuxedPresentationStart+(h=s.videoTimingInfo.transmuxerPrependedSeconds));return new Date(s.dateTimeObject.getTime()+1e3*h)}(t,i.segment))&&(l.programDateTime=i.toISOString()),o(null,l)):o({message:"valid programTime was not found"}):o({message:"getProgramTime: playlist and time must be provided"})}({playlist:this.masterPlaylistController_.media(),time:t,callback:a})},o.seekToProgramTime=function(t,a,s,h){return void 0===s&&(s=!0),void 0===h&&(h=2),hd({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:h,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},l}(ut.getComponent("Component")),ho={name:"videojs-http-streaming",VERSION:"2.14.3",canHandleSource:function(i,l){return l=ut.mergeOptions(ut.options,l=void 0===l?{}:l),ho.canPlayType(i.type,l)},handleSource:function(i,l,o){return o=ut.mergeOptions(ut.options,o=void 0===o?{}:o),l.vhs=new Bs(i,l,o),ut.hasOwnProperty("hls")||Object.defineProperty(l,"hls",{get:function(){return ut.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),l.vhs},configurable:!0}),l.vhs.xhr=ld(),l.vhs.src(i.src,i.type),l.vhs},canPlayType:function(a,o){var t=ut.mergeOptions(ut.options,o=void 0===o?{}:o);return o=void 0===(o=(o=void 0===(o=t.vhs)?{}:o).overrideNative)?!ut.browser.IS_ANY_SAFARI:o,t=void 0!==(t=(t=void 0===(t=t.hls)?{}:t).overrideNative)&&t,(a=zl(a))&&(!mi.supportsTypeNatively(a)||t||o)?"maybe":""}};return Ua("avc1.4d400d,mp4a.40.2")&&ut.getTech("Html5").registerSourceHandler(ho,0),ut.VhsHandler=Bs,Object.defineProperty(ut,"HlsHandler",{get:function(){return ut.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Bs},configurable:!0}),ut.VhsSourceHandler=ho,Object.defineProperty(ut,"HlsSourceHandler",{get:function(){return ut.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ho},configurable:!0}),ut.Vhs=mi,Object.defineProperty(ut,"Hls",{get:function(){return ut.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),mi},configurable:!0}),ut.use||(ut.registerComponent("Hls",mi),ut.registerComponent("Vhs",mi)),ut.options.vhs=ut.options.vhs||{},ut.options.hls=ut.options.hls||{},ut.getPlugin&&ut.getPlugin("reloadSourceOnError")||(ut.registerPlugin||ut.plugin)("reloadSourceOnError",function(i){zd(this,i)}),ut}),
/**
* videojs-http-source-selector
* @version 1.1.6
* @copyright 2019 Justin Fujita <Justin@pivotshare.com>
* @license MIT
*/
function(z,re){"object"==typeof exports&&typeof module<"u"?module.exports=re(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],re):(z=z||self)["videojs-http-source-selector"]=re(z.videojs)}(this,function(z){"use strict";function re(v,S){v.prototype=Object.create(S.prototype),(v.prototype.constructor=v).__proto__=S}function q(v){if(void 0===v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}var O=(z=z&&z.hasOwnProperty("default")?z.default:z).getComponent("MenuItem"),I=z.getComponent("Component"),R=function(v){function S(x,H){return H.selectable=!0,H.multiSelectable=!1,v.call(this,x,H)||this}re(S,v);var E=S.prototype;return E.handleClick=function(){var x=this.options_;console.log("Changing quality to:",x.label),v.prototype.handleClick.call(this);for(var H=this.player().qualityLevels(),B=0;B<H.length;B++)H[B].enabled=x.index==H.length||x.index==B},E.update=function(){var x=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==x)},S}(O);I.registerComponent("SourceMenuItem",R);var V=z.getComponent("MenuButton"),F=function(v){function S(x,H){var B;B=v.call(this,x,H)||this,V.apply(q(B),arguments);var ae=B.player().qualityLevels();if(H&&H.default)if("low"==H.default)for(var he=0;he<ae.length;he++)ae[he].enabled=0==he;else if(H.default="high")for(he=0;he<ae.length;he++)ae[he].enabled=he==ae.length-1;return B.player().qualityLevels().on(["change","addqualitylevel"],z.bind(q(B),B.update)),B}re(S,v);var E=S.prototype;return E.createEl=function(){return z.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},E.buildCSSClass=function(){return V.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},E.update=function(){return V.prototype.update.call(this)},E.createItems=function(){for(var x=[],H=this.player().qualityLevels(),B=[],ae=0;ae<H.length;ae++){var he=H.length-(ae+1),de=he===H.selectedIndex,G=""+he,U=he;H[he].height?(G=H[he].height+"p",U=parseInt(H[he].height,10)):H[he].bitrate&&(G=Math.floor(H[he].bitrate/1e3)+" kbps",U=parseInt(H[he].bitrate,10)),0<=B.indexOf(G)||(B.push(G),x.push(new R(this.player_,{label:G,index:he,selected:de,sortVal:U})))}return 1<H.length&&x.push(new R(this.player_,{label:"Auto",index:H.length,selected:!1,sortVal:99999})),x.sort(function(te,ne){return te.options_.sortVal<ne.options_.sortVal?1:te.options_.sortVal>ne.options_.sortVal?-1:0}),x},S}(V),W={},P=function(v){var S=this;this.ready(function(){var E;E=S,z.mergeOptions(W,v),E.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+E.techName_),"Html5"==E.techName_&&E.on(["loadedmetadata"],function(H){if(E.qualityLevels(),z.log("loadmetadata event"),"undefined"==E.videojs_http_source_selector_initialized||1==E.videojs_http_source_selector_initialized)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),E.videojs_http_source_selector_initialized=!0;var B=E.controlBar,ae=B.getChild("fullscreenToggle").el();B.el().insertBefore(B.addChild("SourceMenuButton").el(),ae)}})}),z.registerComponent("SourceMenuButton",F),z.registerComponent("SourceMenuItem",R)};return(z.registerPlugin||z.plugin)("httpSourceSelector",P),P.VERSION="1.1.6",P}),
/*! @name videojs-contrib-quality-levels @version 2.2.0 @license Apache-2.0 */
function(z,re){"object"==typeof exports&&typeof module<"u"?module.exports=re(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],re):z.videojsContribQualityLevels=re(z.videojs)}(this,function(z){"use strict";function re(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}var q=function(R){var V,F;function W(){var P,v=re(re(P=R.call(this)||this));return v.levels_=[],v.selectedIndex_=-1,Object.defineProperty(v,"selectedIndex",{get:function(){return v.selectedIndex_}}),Object.defineProperty(v,"length",{get:function(){return v.levels_.length}}),v||re(P)}F=R,(V=W).prototype=Object.create(F.prototype),V.prototype.constructor=V,V.__proto__=F;var A=W.prototype;return A.addQualityLevel=function(P){var v=this.getQualityLevelById(P.id);if(v)return v;var S=this.levels_.length;return v=new function(E){var x=this;return x.id=E.id,x.label=x.id,x.width=E.width,x.height=E.height,x.bitrate=E.bandwidth,x.frameRate=E.frameRate,x.enabled_=E.enabled,Object.defineProperty(x,"enabled",{get:function(){return x.enabled_()},set:function(H){x.enabled_(H)}}),x}(P),""+S in this||Object.defineProperty(this,S,{get:function(){return this.levels_[S]}}),this.levels_.push(v),this.trigger({qualityLevel:v,type:"addqualitylevel"}),v},A.removeQualityLevel=function(P){for(var v=null,S=0,E=this.length;S<E;S++)if(this[S]===P){v=this.levels_.splice(S,1)[0],this.selectedIndex_===S?this.selectedIndex_=-1:this.selectedIndex_>S&&this.selectedIndex_--;break}return v&&this.trigger({qualityLevel:P,type:"removequalitylevel"}),v},A.getQualityLevelById=function(P){for(var v=0,S=this.length;v<S;v++){var E=this[v];if(E.id===P)return E}return null},A.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},W}((z=z&&z.hasOwnProperty("default")?z.default:z).EventTarget);for(var O in q.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},q.prototype.allowedEvents_)q.prototype["on"+O]=null;var I=function(R){return V=this,z.mergeOptions({},R),F=V.qualityLevels,W=new q,V.on("dispose",function A(){W.dispose(),V.qualityLevels=F,V.off("dispose",A)}),V.qualityLevels=function(){return W},V.qualityLevels.VERSION="2.2.0",W;var V,F,W};return(z.registerPlugin||z.plugin)("qualityLevels",I),I.VERSION="2.2.0",I}),function(){function z(I,R){for(var V in R)I[V]||(I[V]=R[V]);return I}function re(I,R){var V={};return(I=R._els[I])&&I[0]?(V.x=I[0].scrollWidth,V.y=I[0].scrollHeight):(V.x=0,V.y=0),V}function q(I){function R(){var A=I.getState().mode;return I.matrix&&I.matrix[A]?I.matrix[A]:null}I.exportToPDF=function(A){(A=z(A||{},{name:"calendar.pdf",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:I.config.rtl})).html=this._export_html(A),A.mode=this.getState().mode,this._send_to_export(A,"pdf")},I.exportToPNG=function(A){(A=z(A||{},{name:"calendar.png",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:I.config.rtl})).html=this._export_html(A),A.mode=this.getState().mode,this._send_to_export(A,"png")},I.exportToICal=function(A){A=z(A||{},{name:"calendar.ical",data:this._serialize_plain(null,A)}),this._send_to_export(A,"ical")},I.exportToExcel=function(A){A=z(A||{},{name:"calendar.xlsx",title:"Events",data:this._serialize_plain(this.templates.xml_format,A),columns:this._serialize_columns()}),this._send_to_export(A,"excel")},I._plain_export_copy=function(A,P){var v={};for(var S in A)v[S]=A[S];return v.start_date=P(v.start_date),v.end_date=P(v.end_date),v.$text=this.templates.event_text(A.start_date,A.end_date,A),v},I._serialize_plain=function(A,P){var v;A=A||I.date.date_to_str("%Y%m%dT%H%i%s",!0),v=P&&P.start&&P.end?I.getEvents(P.start,P.end):I.getEvents();for(var S=[],E=0;E<v.length;E++)S[E]=this._plain_export_copy(v[E],A);return S},I._serialize_columns=function(){return[{id:"start_date",header:"Start Date",width:30},{id:"end_date",header:"End Date",width:30},{id:"$text",header:"Text",width:100}]},I._send_to_export=function(A,P){A.version||(A.version=I.version),A.skin||(A.skin=I.skin);var v=this._create_hidden_form();v.firstChild.action=A.server||"https://export.dhtmlx.com/scheduler",v.firstChild.childNodes[0].value=JSON.stringify(A),v.firstChild.childNodes[1].value=P,v.firstChild.submit()},I._create_hidden_form=function(){if(!this._hidden_export_form){var A=this._hidden_export_form=document.createElement("div");A.style.display="none",A.innerHTML="<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>",document.body.appendChild(A)}return this._hidden_export_form},I._get_export_size=function(A,P,v,S,E,x,H){S=parseInt(S)/25.4||4;var B={A5:{x:148,y:210},A4:{x:210,y:297},A3:{x:297,y:420},A2:{x:420,y:594},A1:{x:594,y:841},A0:{x:841,y:1189}},ae=re("dhx_cal_data",this).x,U={y:re("dhx_cal_data",this).y+re("dhx_cal_header",this).y+re("dhx_multi_day",this).y};return U.x="full"===A?ae:Math.floor(("landscape"===P?B[A].y:B[A].x)*S),H&&(U.x*=parseFloat(H.x)||1,U.y*=parseFloat(H.y)||1),U},I._export_html=function(A){var P=function V(){var A,P,v=R();return v&&(P=v.scrollable,A=v.smart_rendering),{nav_height:I.xy.nav_height,scroll_width:I.xy.scroll_width,style_width:I._obj.style.width,style_height:I._obj.style.height,timeline_scrollable:P,timeline_smart_rendering:A}}(),v=I._get_export_size(A.format,A.orientation,A.zoom,A.dpi,A.header,A.footer,A.scales),S="";try{(function F(A,P){I._obj.style.width=A.x+"px",I._obj.style.height=A.y+"px",I.xy.nav_height=0,I.xy.scroll_width=0;var v=R();(P.timeline_scrollable||P.timeline_smart_rendering)&&(v.scrollable=!1,v.smart_rendering=!1)})(v,P),I.setCurrentView(),S=I._obj.innerHTML}catch(E){console.error(E)}finally{(function W(A){I.xy.scroll_width=A.scroll_width,I.xy.nav_height=A.nav_height,I._obj.style.width=A.style_width,I._obj.style.height=A.style_height;var P=R();(A.timeline_scrollable||A.timeline_smart_rendering)&&(P.scrollable=A.timeline_scrollable,P.smart_rendering=A.timeline_smart_rendering)})(P),I.setCurrentView()}return S}}q(scheduler),scheduler.plugins({tooltip:!0,year_view:!0}),scheduler.i18n.setLocale("fr"),window.Scheduler&&Scheduler.plugin&&(function O(){scheduler.locale.labels=Object.assign(scheduler.locale.labels,{next:"Afficher la semaine pr\xe9c\xe9dente",prev:"Afficher la semaine suivante"})}(),Scheduler.plugin(q))}();var webodf_version="0.5.9";function Runtime(){}Runtime.prototype.getVariable=function(z){},Runtime.prototype.toJson=function(z){},Runtime.prototype.fromJson=function(z){},Runtime.prototype.byteArrayFromString=function(z,re){},Runtime.prototype.byteArrayToString=function(z,re){},Runtime.prototype.read=function(z,re,q,O){},Runtime.prototype.readFile=function(z,re,q){},Runtime.prototype.readFileSync=function(z,re){},Runtime.prototype.loadXML=function(z,re){},Runtime.prototype.writeFile=function(z,re,q){},Runtime.prototype.deleteFile=function(z,re){},Runtime.prototype.log=function(z,re){},Runtime.prototype.setTimeout=function(z,re){},Runtime.prototype.clearTimeout=function(z){},Runtime.prototype.libraryPaths=function(){},Runtime.prototype.currentDirectory=function(){},Runtime.prototype.setCurrentDirectory=function(z){},Runtime.prototype.type=function(){},Runtime.prototype.getDOMImplementation=function(){},Runtime.prototype.parseXML=function(z){},Runtime.prototype.exit=function(z){},Runtime.prototype.getWindow=function(){},Runtime.prototype.requestAnimationFrame=function(z){},Runtime.prototype.cancelAnimationFrame=function(z){},Runtime.prototype.assert=function(z,re){};var IS_COMPILED_CODE=!0;function BrowserRuntime(){function z(W){var P,v,A=W.length,S=0;for(P=0;P<A;P+=1)S+=1+(128<(v=W.charCodeAt(P)))+(2048<v),55040<v&&57344>v&&(S+=1,P+=1);return S}function re(W,A,P){var S,E,v=W.length;for(A=new Uint8Array(new ArrayBuffer(A)),P?(A[0]=239,A[1]=187,A[2]=191,E=3):E=0,P=0;P<v;P+=1)128>(S=W.charCodeAt(P))?(A[E]=S,E+=1):2048>S?(A[E]=192|S>>>6,A[E+1]=128|63&S,E+=2):55040>=S||57344<=S?(A[E]=224|S>>>12&15,A[E+1]=128|S>>>6&63,A[E+2]=128|63&S,E+=3):(S=65536+(S-55296<<10|W.charCodeAt(P+=1)-56320),A[E]=240|S>>>18&7,A[E+1]=128|S>>>12&63,A[E+2]=128|S>>>6&63,A[E+3]=128|63&S,E+=4);return A}function q(W){var v,A=W.length,P=new Uint8Array(new ArrayBuffer(A));for(v=0;v<A;v+=1)P[v]=255&W.charCodeAt(v);return P}function O(W,A){var P;void 0!==A?P=W:A=W,console.log(A),F.enableAlerts&&"alert"===P&&alert(A)}function I(W,A,P){if(0!==P.status||P.responseText)if(200===P.status||0===P.status){if(P.response&&"string"!=typeof P.response)"binary"===A?(P=P.response,P=new Uint8Array(P)):P=String(P.response);else if("binary"===A)if(null!==P.responseBody&&"undefined"!==String(typeof VBArray)){var v=(P=new VBArray(P.responseBody).toArray()).length;for(A=new Uint8Array(new ArrayBuffer(v)),W=0;W<v;W+=1)A[W]=P[W];P=A}else{if((W=P.getResponseHeader("Content-Length"))&&(W=parseInt(W,10)),W&&W!==P.responseText.length)e:{A=!1;var S=z(v=P.responseText);if("number"==typeof W){if(W!==S&&W!==S+3){v=void 0;break e}A=S+3===W,S=W}v=re(v,S,A)}void 0===v&&(v=q(P.responseText)),P=v}else P=P.responseText;P={err:null,data:P}}else P={err:P.responseText||P.statusText,data:null};else P={err:"File "+W+" is empty.",data:null};return P}function R(W,A,P){var v=new XMLHttpRequest;return v.open("GET",W,P),v.overrideMimeType&&v.overrideMimeType("binary"!==A?"text/plain; charset="+A:"text/plain; charset=x-user-defined"),v}function V(W,A,P){var v=R(W,A,!0);v.onreadystatechange=function(){var S;4===v.readyState&&(S=I(W,A,v),P(S.err,S.data))};try{v.send(null)}catch(S){P(S.message,null)}}var F=this;this.byteArrayFromString=function(W,A){var P;return"utf8"===A?P=re(W,z(W),!1):("binary"!==A&&F.log("unknown encoding: "+A),P=q(W)),P},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=V,this.read=function(W,A,P,v){V(W,"binary",function(S,E){var x=null;if(E){if("string"==typeof E)throw"This should not happen.";x=E.subarray(A,A+P)}v(S,x)})},this.readFileSync=function(W,A){var v,P=R(W,A,!1);try{if(P.send(null),(v=I(W,A,P)).err)throw v.err;if(null===v.data)throw"No data read from "+W+"."}catch(S){throw S}return v.data},this.writeFile=function(W,A,P){var S,v=new XMLHttpRequest;v.open("PUT",W,!0),v.onreadystatechange=function(){4===v.readyState&&P(0!==v.status||v.responseText?200<=v.status&&300>v.status||0===v.status?null:"Status "+String(v.status)+": "+v.responseText||v.statusText:"File "+W+" is empty.")},S=A.buffer&&!v.sendAsBinary?A.buffer:F.byteArrayToString(A,"binary");try{v.sendAsBinary?v.sendAsBinary(S):v.send(S)}catch(E){F.log("HUH? "+E+" "+A),P(E.message)}},this.deleteFile=function(W,A){var P=new XMLHttpRequest;P.open("DELETE",W,!0),P.onreadystatechange=function(){4===P.readyState&&A(200>P.status&&300<=P.status?P.responseText:null)},P.send(null)},this.loadXML=function(W,A){var P=new XMLHttpRequest;P.open("GET",W,!0),P.overrideMimeType&&P.overrideMimeType("text/xml"),P.onreadystatechange=function(){4===P.readyState&&(0!==P.status||P.responseText?200===P.status||0===P.status?A(null,P.responseXML):A(P.responseText,null):A("File "+W+" is empty.",null))};try{P.send(null)}catch(v){A(v.message,null)}},this.log=O,this.enableAlerts=!0,this.assert=Runtime.assert,this.setTimeout=function(W,A){return setTimeout(function(){W()},A)},this.clearTimeout=function(W){clearTimeout(W)},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(){},this.currentDirectory=function(){return""},this.type=function(){return"BrowserRuntime"},this.getDOMImplementation=function(){return window.document.implementation},this.parseXML=function(W){return(new DOMParser).parseFromString(W,"text/xml")},this.exit=function(W){O("Calling exit with code "+String(W)+", but exit() is not implemented.")},this.getWindow=function(){return window},this.requestAnimationFrame=function(W){var A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return A?(A.bind(window),A(W)):setTimeout(W,15)},this.cancelAnimationFrame=function(W){var A=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;A?(A.bind(window),A(W)):clearTimeout(W)}}function NodeJSRuntime(){function z(W){var P,A=W.length,v=new Uint8Array(new ArrayBuffer(A));for(P=0;P<A;P+=1)v[P]=W[P];return v}function re(W,A,P){W=I.resolve(R,W),O.readFile(W,"binary"!==A?A:null,function v(S,E){return S?P(S,null):E?"string"==typeof E?P(S,E):void P(S,z(E)):P("No data for "+W+".",null)})}var V,F,q=this,O=require("fs"),I=require("path"),R="";this.byteArrayFromString=function(W,A){var v,P=new Buffer(W,A),S=P.length,E=new Uint8Array(new ArrayBuffer(S));for(v=0;v<S;v+=1)E[v]=P[v];return E},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=re,this.loadXML=function(W,A){re(W,"utf-8",function(P,v){return P?A(P,null):v?void A(null,q.parseXML(v)):A("No data for "+W+".",null)})},this.writeFile=function(W,A,P){A=new Buffer(A),W=I.resolve(R,W),O.writeFile(W,A,"binary",function(v){P(v||null)})},this.deleteFile=function(W,A){W=I.resolve(R,W),O.unlink(W,A)},this.read=function(W,A,P,v){W=I.resolve(R,W),O.open(W,"r+",666,function(S,E){if(S)v(S,null);else{var x=new Buffer(P);O.read(E,x,0,P,A,function(H){O.close(E),v(H,z(x))})}})},this.readFileSync=function(W,A){var P;if(null===(P=O.readFileSync(W,"binary"===A?null:A)))throw"File "+W+" could not be read.";return"binary"===A&&(P=z(P)),P},this.log=function(W,A){var P;void 0!==A?P=W:A=W,"alert"===P&&process.stderr.write("\n!!!!! ALERT !!!!!\n"),process.stderr.write(A+"\n"),"alert"===P&&process.stderr.write("!!!!! ALERT !!!!!\n")},this.assert=Runtime.assert,this.setTimeout=function(W,A){return setTimeout(function(){W()},A)},this.clearTimeout=function(W){clearTimeout(W)},this.libraryPaths=function(){return[__dirname]},this.setCurrentDirectory=function(W){R=W},this.currentDirectory=function(){return R},this.type=function(){return"NodeJSRuntime"},this.getDOMImplementation=function(){return F},this.parseXML=function(W){return V.parseFromString(W,"text/xml")},this.exit=process.exit,this.getWindow=function(){return null},this.requestAnimationFrame=function(W){return setTimeout(W,15)},this.cancelAnimationFrame=function(W){clearTimeout(W)},V=new(require("xmldom").DOMParser),F=q.parseXML("<a/>").implementation}function RhinoRuntime(){var O,I,z=this,re={},q=re.javax.xml.parsers.DocumentBuilderFactory.newInstance(),R="";q.setValidating(!1),q.setNamespaceAware(!0),q.setExpandEntityReferences(!1),q.setSchema(null),I=re.org.xml.sax.EntityResolver({resolveEntity:function(V,F){var W=new re.java.io.FileReader(F);return new re.org.xml.sax.InputSource(W)}}),(O=q.newDocumentBuilder()).setEntityResolver(I),this.byteArrayFromString=function(V,F){var W,A=V.length,P=new Uint8Array(new ArrayBuffer(A));for(W=0;W<A;W+=1)P[W]=255&V.charCodeAt(W);return P},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.loadXML=function(V,F){var W=new re.java.io.File(V),A=null;try{A=O.parse(W)}catch(P){return print(P),F(P,null)}F(null,A)},this.readFile=function(V,F,W){R&&(V=R+"/"+V);var P="binary"===F?"latin1":F;new re.java.io.File(V).isFile()?((V=readFile(V,P))&&"binary"===F&&(V=z.byteArrayFromString(V,"binary")),W(null,V)):W(V+" is not a file.",null)},this.writeFile=function(V,F,W){R&&(V=R+"/"+V),V=new re.java.io.FileOutputStream(V);var A,P=F.length;for(A=0;A<P;A+=1)V.write(F[A]);V.close(),W(null)},this.deleteFile=function(V,F){R&&(V=R+"/"+V);var W=new re.java.io.File(V),A=V+Math.random();A=new re.java.io.File(A),W.rename(A)?(A.deleteOnExit(),F(null)):F("Could not delete "+V)},this.read=function(V,F,W,A){var P;R&&(V=R+"/"+V);var v="binary";new re.java.io.File(P=V).isFile()?("binary"===v&&(v="latin1"),P=readFile(P,v)):P=null,P?A(null,this.byteArrayFromString(P.substring(F,F+W),"binary")):A("Cannot read "+V,null)},this.readFileSync=function(V,F){if(!F)return"";var W=readFile(V,F);if(null===W)throw"File could not be read.";return W},this.log=function(V,F){var W;void 0!==F?W=V:F=V,"alert"===W&&print("\n!!!!! ALERT !!!!!"),print(F),"alert"===W&&print("!!!!! ALERT !!!!!")},this.assert=Runtime.assert,this.setTimeout=function(V){return V(),0},this.clearTimeout=function(){},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(V){R=V},this.currentDirectory=function(){return R},this.type=function(){return"RhinoRuntime"},this.getDOMImplementation=function(){return O.getDOMImplementation()},this.parseXML=function(V){return V=new re.java.io.StringReader(V),V=new re.org.xml.sax.InputSource(V),O.parse(V)},this.exit=quit,this.getWindow=function(){return null},this.requestAnimationFrame=function(V){return V(),0},this.cancelAnimationFrame=function(){}}Runtime.byteArrayToString=function(z,re){var I;return"utf8"===re?I=function O(R){var F,P,v,S,V="",W=R.length,A=[];for(F=3<=W&&239===R[0]&&187===R[1]&&191===R[2]?3:0;F<W;F+=1)128>(P=R[F])?A.push(P):(v=R[F+=1],194<=P&&224>P?A.push((31&P)<<6|63&v):(S=R[F+=1],224<=P&&240>P?A.push((15&P)<<12|(63&v)<<6|63&S):(F+=1,240<=P&&245>P&&(P=(7&P)<<18|(63&v)<<12|(63&S)<<6|63&R[F],A.push(55296+((P-=65536)>>10),56320+(1023&P)))))),1e3<=A.length&&(V+=String.fromCharCode.apply(null,A),A.length=0);return V+String.fromCharCode.apply(null,A)}(z):("binary"!==re&&this.log("Unsupported encoding: "+re),I=function q(R){var F,V="",W=R.length;for(F=0;F<W;F+=1)V+=String.fromCharCode(255&R[F]);return V}(z)),I},Runtime.getVariable=function(g){try{return eval(g)}catch(z){}},Runtime.toJson=function(z){return JSON.stringify(z)},Runtime.fromJson=function(z){return JSON.parse(z)},Runtime.getFunctionName=function(z){return void 0===z.name?(z=/function\s+(\w+)/.exec(z))&&z[1]:z.name},Runtime.assert=function(z,re){if(!z)throw this.log("alert","ASSERTION FAILED:\n"+re),Error(re)},Runtime.create=function(){return"undefined"!==String(typeof window)?new BrowserRuntime:"undefined"!==String(typeof require)?new NodeJSRuntime:new RhinoRuntime};var runtime=Runtime.create(),core={},gui={},xmldom={},odf={},ops={},webodf={};function makeBase64(){function z(G){var U,te=G.length,ne=new Uint8Array(new ArrayBuffer(te));for(U=0;U<te;U+=1)ne[U]=255&G.charCodeAt(U);return ne}function re(G){var U,ne,te="",oe=G.length-2;for(ne=0;ne<oe;ne+=3)te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(U=G[ne]<<16|G[ne+1]<<8|G[ne+2])>>>18],te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[U>>>12&63],te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[U>>>6&63],te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&U];return ne===oe+1?(te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(U=G[ne]<<4)>>>6],te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&U],te+="=="):ne===oe&&(te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(U=G[ne]<<10|G[ne+1]<<2)>>>12],te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[U>>>6&63],te+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&U],te+="="),te}function q(G){var fe,Y,U=(G=G.replace(/[^A-Za-z0-9+\/]+/g,"")).length,te=new Uint8Array(new ArrayBuffer(3*U)),ne=G.length%4,oe=0;for(fe=0;fe<U;fe+=4)Y=(x[G.charAt(fe)]||0)<<18|(x[G.charAt(fe+1)]||0)<<12|(x[G.charAt(fe+2)]||0)<<6|(x[G.charAt(fe+3)]||0),te[oe]=Y>>16,te[oe+1]=Y>>8&255,te[oe+2]=255&Y,oe+=3;return te.subarray(0,U=3*U-[0,0,2,1][ne])}function O(G){var U,te,ne=G.length,oe=0,fe=new Uint8Array(new ArrayBuffer(3*ne));for(U=0;U<ne;U+=1)128>(te=G[U])?fe[oe++]=te:(2048>te?fe[oe++]=192|te>>>6:(fe[oe++]=224|te>>>12&15,fe[oe++]=128|te>>>6&63),fe[oe++]=128|63&te);return fe.subarray(0,oe)}function I(G){var U,te,ne,fe=G.length,Y=new Uint8Array(new ArrayBuffer(fe)),le=0;for(U=0;U<fe;U+=1)128>(te=G[U])?Y[le++]=te:(ne=G[U+=1],Y[le++]=224>te?(31&te)<<6|63&ne:(15&te)<<12|(63&ne)<<6|63&G[U+=1]);return Y.subarray(0,le)}function R(G){return re(z(G))}function V(G){return String.fromCharCode.apply(String,q(G))}function F(G){return I(z(G))}function W(G){G=I(G);for(var U="",te=0;te<G.length;)U+=String.fromCharCode.apply(String,G.subarray(te,te+45e3)),te+=45e3;return U}function A(G,U,te){var ne,oe,fe,Y="";for(fe=U;fe<te;fe+=1)128>(U=255&G.charCodeAt(fe))?Y+=String.fromCharCode(U):(ne=255&G.charCodeAt(fe+=1),224>U?Y+=String.fromCharCode((31&U)<<6|63&ne):(oe=255&G.charCodeAt(fe+=1),Y+=String.fromCharCode((15&U)<<12|(63&ne)<<6|63&oe)));return Y}function P(G,U){var ne="",oe=0;1e5>G.length?U(A(G,0,G.length),!0):("string"!=typeof G&&(G=G.slice()),function te(){var fe=oe+1e5;fe>G.length&&(fe=G.length),ne+=A(G,oe,fe),U(ne,fe=(oe=fe)===G.length)&&!fe&&runtime.setTimeout(te,0)}())}function v(G){return O(z(G))}function S(G){return String.fromCharCode.apply(String,O(G))}function E(G){return String.fromCharCode.apply(String,O(z(G)))}var H,B,he,de,x=function(G){var te,ne,U={};for(te=0,ne=G.length;te<ne;te+=1)U[G.charAt(te)]=te;return U}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ae=runtime.getWindow();return ae&&ae.btoa?(he=ae.btoa,H=function(G){return he(E(G))}):(he=R,H=function(G){return re(v(G))}),ae&&ae.atob?(de=ae.atob,B=function(G){return A(G=de(G),0,G.length)}):(de=V,B=function(G){return W(q(G))}),core.Base64=function(){return this.convertByteArrayToBase64=this.convertUTF8ArrayToBase64=re,this.convertBase64ToByteArray=this.convertBase64ToUTF8Array=q,this.convertUTF16ArrayToByteArray=this.convertUTF16ArrayToUTF8Array=O,this.convertByteArrayToUTF16Array=this.convertUTF8ArrayToUTF16Array=I,this.convertUTF8StringToBase64=R,this.convertBase64ToUTF8String=V,this.convertUTF8StringToUTF16Array=F,this.convertByteArrayToUTF16String=this.convertUTF8ArrayToUTF16String=W,this.convertUTF8StringToUTF16String=P,this.convertUTF16StringToByteArray=this.convertUTF16StringToUTF8Array=v,this.convertUTF16ArrayToUTF8String=S,this.convertUTF16StringToUTF8String=E,this.convertUTF16StringToBase64=H,this.convertBase64ToUTF16String=B,this.fromBase64=V,this.toBase64=R,this.atob=de,this.btoa=he,this.utob=E,this.btou=P,this.encode=H,this.encodeURI=function(G){return H(G).replace(/[+\/]/g,function(U){return"+"===U?"-":"_"}).replace(/\\=+$/,"")},this.decode=function(G){return B(G.replace(/[\-_]/g,function(U){return"-"===U?"+":"/"}))},this},core.Base64}function createXPathSingleton(){function z(P,v,S){return-1!==P&&(P<v||-1===v)&&(P<S||-1===S)}function re(P){for(var x,v=[],S=0,E=P.length;S<E;){var H=P,B=E,ae=v,he="",de=[],G=H.indexOf("[",S),U=H.indexOf("/",S),te=H.indexOf("=",S);if(z(U,G,te)?(he=H.substring(S,U),S=U+1):z(G,U,te)?(he=H.substring(S,G),S=A(H,G,de)):z(te,U,G)?(he=H.substring(S,te),S=te):(he=H.substring(S,B),S=B),ae.push({location:he,predicates:de}),S<E&&"="===P[S]){if(2<(x=P.substring(S+1,E)).length&&("'"===x[0]||'"'===x[0]))x=x.slice(1,x.length-1);else try{x=parseInt(x,10)}catch{}S=E}}return{steps:v,value:x}}function q(){var P=null,v=!1;this.setNode=function(S){P=S},this.reset=function(){v=!1},this.next=function(){var S=v?null:P;return v=!0,S}}function O(P,v,S){this.reset=function(){P.reset()},this.next=function(){for(var E=P.next();E&&(E.nodeType===Node.ELEMENT_NODE&&(E=E.getAttributeNodeNS(v,S)),!E);)E=P.next();return E}}function I(P,v){var S=P.next(),E=null;this.reset=function(){P.reset(),S=P.next(),E=null},this.next=function(){for(;S;){if(E)if(v&&E.firstChild)E=E.firstChild;else{for(;!E.nextSibling&&E!==S;)E=E.parentNode;E===S?S=P.next():E=E.nextSibling}else do{(E=S.firstChild)||(S=P.next())}while(S&&!E);if(E&&E.nodeType===Node.ELEMENT_NODE)return E}return null}}function R(P,v){this.reset=function(){P.reset()},this.next=function(){for(var S=P.next();S&&!v(S);)S=P.next();return S}}function V(P,v,S){var E=S((v=v.split(":",2))[0]),x=v[1];return new R(P,function(H){return H.localName===x&&H.namespaceURI===E})}function F(P,v,S){var E=new q,x=W(E,v,S),H=v.value;return new R(P,void 0===H?function(B){return E.setNode(B),x.reset(),null!==x.next()}:function(B){return E.setNode(B),x.reset(),!!(B=x.next())&&B.nodeValue===H})}var W,A;return A=function(P,v,S){for(var E=v,x=P.length,H=0;E<x;)"]"===P[E]?0>=--H&&S.push(re(P.substring(v,E))):"["===P[E]&&(0>=H&&(v=E+1),H+=1),E+=1;return E},W=function(P,v,S){var E,x,H,B;for(E=0;E<v.steps.length;E+=1){if(""===(x=(H=v.steps[E]).location))P=new I(P,!1);else if("@"===x[0]){if(!(B=S((x=x.substr(1).split(":",2))[0])))throw"No namespace associated with the prefix "+x[0];P=new O(P,B,x[1])}else"."!==x&&(P=new I(P,!1),-1!==x.indexOf(":")&&(P=V(P,x,S)));for(x=0;x<H.predicates.length;x+=1)P=F(P,B=H.predicates[x],S)}return P},{getODFElementsWithXPath:function(P,v,S){var E=P.ownerDocument,x=[],H=null;if(E&&"function"==typeof E.evaluate)for(H=(S=E.evaluate(v,P,S,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null)).iterateNext();null!==H;)H.nodeType===Node.ELEMENT_NODE&&x.push(H),H=S.iterateNext();else{for((x=new q).setNode(P),P=re(v),x=W(x,P,S),P=[],S=x.next();S;)P.push(S),S=x.next();x=P}return x}}}function RootFilter(z,re,q){var O=core.PositionFilter.FilterResult.FILTER_ACCEPT,I=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(R){var V;return R=R.container(),V="string"==typeof z?re[z].getNode():z,q(R)===q(V)?O:I}}webodf.Version="undefined"!==String(typeof webodf_version)?webodf_version:"From Source",function(){function g(z,re,q){var I,R,O=z+"/manifest.json";runtime.log("Loading manifest: "+O);try{I=runtime.readFileSync(O,"utf-8")}catch(V){if(!q)throw console.log(String(V)),V;return void runtime.log("No loadable manifest found.")}for(R in q=JSON.parse(I))q.hasOwnProperty(R)&&(re[R]={dir:z,deps:q[R]})}function k(z,re,q){var I=[],R={},V={};return z.forEach(function O(F){if(!V[F]&&!q(F)){if(R[F])throw"Circular dependency detected for "+F+".";if(R[F]=!0,!re[F])throw"Missing dependency information for class "+F+".";var P,W=re[F],A=W.deps,v=A.length;for(P=0;P<v;P+=1)O(A[P]);R[F]=!1,V[F]=!0,I.push(W.dir+"/"+F.replace(".","/")+".js")}}),I}function d(z,re){return re+"\n//# sourceURL="+z}function b(b){var f,e;for(f=0;f<b.length;f+=1)e=runtime.readFileSync(b[f],"utf-8"),e=d(b[f],e),eval(e)}function f(z){z=z.split(".");var re,q=p,O=z.length;for(re=0;re<O;re+=1){if(!q.hasOwnProperty(z[re]))return!1;q=q[z[re]]}return!0}var n,p={core,gui,xmldom,odf,ops};runtime.loadClasses=function(z,re){if(IS_COMPILED_CODE||0===z.length)return re&&re();var q;if(!(q=n)){q=[];var I,O=runtime.libraryPaths();for(runtime.currentDirectory()&&-1===O.indexOf(runtime.currentDirectory())&&g(runtime.currentDirectory(),q,!0),I=0;I<O.length;I+=1)g(O[I],q)}if(0===(z=k(z,n=q,f)).length)return re&&re();if("BrowserRuntime"===runtime.type()&&re){var R,V;for(q=z,O=document.currentScript||document.documentElement.lastChild,I=document.createDocumentFragment(),V=0;V<q.length;V+=1)(R=document.createElement("script")).type="text/javascript",R.charset="utf-8",R.async=!1,R.setAttribute("src",q[V]),I.appendChild(R);re&&(R.onload=re),O.parentNode.insertBefore(I,O)}else b(z),re&&re()},runtime.loadClass=function(z,re){runtime.loadClasses([z],re)}}(),function(){var z=function(re){return re};runtime.getTranslator=function(){return z},runtime.setTranslator=function(re){z=re},runtime.tr=function(re){var q=z(re);return q&&"string"===String(typeof q)?q:re}}(),function(g){function k(d){if(d.length){var b=d[0];runtime.readFile(b,"utf8",function(f,n){function g(){var b;(b=eval(k))&&runtime.exit(b)}var r="",r=b.lastIndexOf("/"),k=n,r=-1!==r?b.substring(0,r):".";runtime.setCurrentDirectory(r),f?(runtime.log(f),runtime.exit(1)):null===k?(runtime.log("No code found for "+b),runtime.exit(1)):g.apply(null,d)})}}g=g?Array.prototype.slice.call(g):[],"NodeJSRuntime"===runtime.type()?k(process.argv.slice(2)):"RhinoRuntime"===runtime.type()?k(g):k(g.slice(1))}("undefined"!==String(typeof arguments)&&arguments),core.Async={forEach:function(z,re,q){function O(F){V!==R&&(F?(V=R,q(F)):(V+=1)===R&&q(null))}var I,R=z.length,V=0;for(I=0;I<R;I+=1)re(z[I],O)},destroyAll:function(z,re){!function q(O,I){I?re(I):O<z.length?z[O](function(R){q(O+1,R)}):re()}(0,void 0)}},core.Base64=makeBase64(),core.CSSUnits=function(){var z=this,re={in:1,cm:2.54,mm:25.4,pt:72,pc:12,px:96};this.convert=function(q,O,I){return q*re[I]/re[O]},this.convertMeasure=function(q,O){var I,R;return q&&O&&(I=parseFloat(q),R=q.replace(I.toString(),""),I=z.convert(I,R,O)),I},this.getUnits=function(q){return q.substr(q.length-2,q.length)}},function(){function z(){var O,I,R,V,F,W,A,P,v;return void 0===q&&(W=(I=(O=runtime.getWindow())&&O.document).documentElement,A=I.body,q={rangeBCRIgnoresElementBCR:!1,unscaledRangeClientRects:!1,elementBCRIgnoresBodyScroll:!1},I&&((V=I.createElement("div")).style.position="absolute",V.style.left="-99999px",V.style.transform="scale(2)",V.style["-webkit-transform"]="scale(2)",F=I.createElement("div"),V.appendChild(F),A.appendChild(V),(O=I.createRange()).selectNode(F),q.rangeBCRIgnoresElementBCR=0===O.getClientRects().length,F.appendChild(I.createTextNode("Rect transform test")),I=F.getBoundingClientRect(),R=O.getBoundingClientRect(),q.unscaledRangeClientRects=2<Math.abs(I.height-R.height),V.style.transform="",V.style["-webkit-transform"]="",I=W.style.overflow,R=A.style.overflow,P=A.style.height,v=A.scrollTop,W.style.overflow="visible",A.style.overflow="visible",A.style.height="200%",A.scrollTop=A.scrollHeight,q.elementBCRIgnoresBodyScroll=O.getBoundingClientRect().top!==F.getBoundingClientRect().top,A.scrollTop=v,A.style.height=P,A.style.overflow=R,W.style.overflow=I,O.detach(),A.removeChild(V),O=Object.keys(q).map(function(S){return S+":"+String(q[S])}).join(", "),runtime.log("Detected browser quirks - "+O))),q}function re(O,I,R){for(O=O?O.firstElementChild:null;O;){if(O.localName===R&&O.namespaceURI===I)return O;O=O.nextElementSibling}return null}var q;core.DomUtilsImpl=function(){function O(E,x){for(var B,H=0;E.parentNode!==x;)runtime.assert(null!==E.parentNode,"parent is null"),E=E.parentNode;for(B=x.firstChild;B!==E;)H+=1,B=B.nextSibling;return H}function I(E,x){return 0>=E.compareBoundaryPoints(Range.START_TO_START,x)&&0<=E.compareBoundaryPoints(Range.END_TO_END,x)}function R(E,x){return 0>=E.compareBoundaryPoints(Range.END_TO_START,x)&&0<=E.compareBoundaryPoints(Range.START_TO_END,x)}function V(E,x){var H=null;return E.nodeType===Node.TEXT_NODE&&(0===E.length?(E.parentNode.removeChild(E),x.nodeType===Node.TEXT_NODE&&(H=x)):(x.nodeType===Node.TEXT_NODE&&(E.appendData(x.data),x.parentNode.removeChild(x)),H=E)),H}function F(E){for(var x=E.parentNode;E.firstChild;)x.insertBefore(E.firstChild,E);return x.removeChild(E),x}function P(E,x){return z().unscaledRangeClientRects?E:E/x}var x,H,S=null;this.splitBoundaries=function(E){var x,B,ae,he,H=[];if(E.startContainer.nodeType===Node.TEXT_NODE||E.endContainer.nodeType===Node.TEXT_NODE){if(B=E.endContainer,ae=E.endContainer.nodeType!==Node.TEXT_NODE&&E.endOffset===E.endContainer.childNodes.length,(he=E.endOffset)<(x=E.endContainer).childNodes.length)for(x=x.childNodes.item(he),he=0;x.firstChild;)x=x.firstChild;else for(;x.lastChild;)he=(x=x.lastChild).nodeType===Node.TEXT_NODE?x.textContent.length:x.childNodes.length;if(x===B&&(B=null),E.setEnd(x,he),he=E.endContainer,0!==E.endOffset&&he.nodeType===Node.TEXT_NODE&&E.endOffset!==(x=he).length&&(H.push(x.splitText(E.endOffset)),H.push(x)),he=E.startContainer,0!==E.startOffset&&he.nodeType===Node.TEXT_NODE&&E.startOffset!==(x=he).length&&(he=x.splitText(E.startOffset),H.push(x),H.push(he),E.setStart(he,0)),null!==B){for(he=E.endContainer;he.parentNode&&he.parentNode!==B;)he=he.parentNode;ae=ae?B.childNodes.length:O(he,B),E.setEnd(B,ae)}}return H},this.containsRange=I,this.rangesIntersect=R,this.rangeIntersection=function(E,x){var H;return R(E,x)&&(H=E.cloneRange(),-1===E.compareBoundaryPoints(Range.START_TO_START,x)&&H.setStart(x.startContainer,x.startOffset),1===E.compareBoundaryPoints(Range.END_TO_END,x)&&H.setEnd(x.endContainer,x.endOffset)),H},this.getNodesInRange=function(E,x,H){var he,de,B=[],ae=(ae=E.commonAncestorContainer).nodeType===Node.TEXT_NODE?ae.parentNode:ae;if(H=E.startContainer.ownerDocument.createTreeWalker(ae,H,x,!1),E.endContainer.childNodes[E.endOffset-1]?(he=E.endContainer.childNodes[E.endOffset-1],de=Node.DOCUMENT_POSITION_PRECEDING|Node.DOCUMENT_POSITION_CONTAINED_BY):(he=E.endContainer,de=Node.DOCUMENT_POSITION_PRECEDING),E.startContainer.childNodes[E.startOffset])H.currentNode=E=E.startContainer.childNodes[E.startOffset];else{var G=E.startContainer;E.startOffset===(G.nodeType===Node.TEXT_NODE?G.length:G.childNodes.length)?(H.currentNode=E=E.startContainer,H.lastChild(),E=H.nextNode()):H.currentNode=E=E.startContainer}if(E){if((E=H.currentNode)!==ae)for(E=E.parentNode;E&&E!==ae;)x(E)===NodeFilter.FILTER_REJECT&&(H.currentNode=E),E=E.parentNode;switch(x(E=H.currentNode)){case NodeFilter.FILTER_REJECT:for(E=H.nextSibling();!E&&H.parentNode();)E=H.nextSibling();break;case NodeFilter.FILTER_SKIP:E=H.nextNode()}for(;E&&(0===(x=he.compareDocumentPosition(E))||0!=(x&de));)B.push(E),E=H.nextNode()}return B},this.normalizeTextNodes=function(E){E&&E.nextSibling&&(E=V(E,E.nextSibling)),E&&E.previousSibling&&V(E.previousSibling,E)},this.rangeContainsNode=function(E,x){var ae,H=x.ownerDocument.createRange(),B=x.ownerDocument.createRange();return H.setStart(E.startContainer,E.startOffset),H.setEnd(E.endContainer,E.endOffset),B.selectNodeContents(x),ae=I(H,B),H.detach(),B.detach(),ae},this.mergeIntoParent=F,this.removeUnwantedNodes=function W(E,x){var he,H=E.parentNode,B=E.firstChild,ae=x(E);if(ae===NodeFilter.FILTER_SKIP)return H;for(;B;)he=B.nextSibling,W(B,x),B=he;return H&&ae===NodeFilter.FILTER_REJECT&&F(E),H},this.removeAllChildNodes=function(E){for(;E.firstChild;)E.removeChild(E.firstChild)},this.getElementsByTagNameNS=function(E,x,H){var B=[];for(E=E.getElementsByTagNameNS(x,H),B.length=H=E.length,x=0;x<H;x+=1)B[x]=E.item(x);return B},this.getElementsByTagName=function(E,x){var B,ae,he,H=[];for(B=E.getElementsByTagName(x),H.length=he=B.length,ae=0;ae<he;ae+=1)H[ae]=B.item(ae);return H},this.containsNode=function(E,x){return E===x||E.contains(x)},this.comparePoints=function(E,x,H,B){if(E===H)return B-x;var ae=E.compareDocumentPosition(H);return ae=2===ae?-1:4===ae?1:10===ae?(x=O(E,H))<B?1:-1:(B=O(H,E))<x?-1:1},this.adaptRangeDifferenceToZoomLevel=P,this.translateRect=function(E,x,H){return{top:P(E.top-x.top,H),left:P(E.left-x.left,H),bottom:P(E.bottom-x.top,H),right:P(E.right-x.left,H),width:P(E.width,H),height:P(E.height,H)}},this.getBoundingClientRect=function(E){var ae,x=E.ownerDocument,H=z(),B=x.body;return!1!==H.unscaledRangeClientRects&&!H.rangeBCRIgnoresElementBCR||E.nodeType!==Node.ELEMENT_NODE?(S?ae=S:S=ae=x.createRange(),(H=ae).selectNode(E),H.getBoundingClientRect()):(E=E.getBoundingClientRect(),H.elementBCRIgnoresBodyScroll?{left:E.left+B.scrollLeft,right:E.right+B.scrollLeft,top:E.top+B.scrollTop,bottom:E.bottom+B.scrollTop,width:E.width,height:E.height}:E)},this.mapKeyValObjOntoNode=function(E,x,H){Object.keys(x).forEach(function(B){var ae=(he=B.split(":"))[1],he=H(he[0]),de=x[B];he?((ae=E.getElementsByTagNameNS(he,ae)[0])||(ae=E.ownerDocument.createElementNS(he,B),E.appendChild(ae)),ae.textContent=de):runtime.log("Key ignored: "+B)})},this.removeKeyElementsFromNode=function(E,x,H){x.forEach(function(B){var ae=B.split(":"),he=ae[1];(ae=H(ae[0]))?(he=E.getElementsByTagNameNS(ae,he)[0])?he.parentNode.removeChild(he):runtime.log("Element for "+B+" not found."):runtime.log("Property Name ignored: "+B)})},this.getKeyValRepresentationOfNode=function(E,x){for(var ae,H={},B=E.firstElementChild;B;)(ae=x(B.namespaceURI))&&(H[ae+":"+B.localName]=B.textContent),B=B.nextElementSibling;return H},this.mapObjOntoNode=function v(E,x,H){Object.keys(x).forEach(function(B){var de,ae=(de=B.split(":"))[1],he=H(de[0]),G=typeof(de=x[B]);"object"===G?Object.keys(de).length&&(B=he?E.getElementsByTagNameNS(he,ae)[0]||E.ownerDocument.createElementNS(he,B):E.getElementsByTagName(ae)[0]||E.ownerDocument.createElement(B),E.appendChild(B),v(B,de,H)):he&&(runtime.assert("number"===G||"string"===G,"attempting to map unsupported type '"+G+"' (key: "+B+")"),E.setAttributeNS(he,B,String(de)))})},this.cloneEvent=function(E){var x=Object.create(null);return Object.keys(E.constructor.prototype).forEach(function(H){x[H]=E[H]}),x.prototype=E.constructor.prototype,x},this.getDirectChild=re,null!==(H=runtime.getWindow())&&(x=H.navigator.appVersion.toLowerCase(),H=-1===x.indexOf("chrome")&&(-1!==x.indexOf("applewebkit")||-1!==x.indexOf("safari")),x=-1!==x.indexOf("msie")||-1!==x.indexOf("trident"),H||x)&&(this.containsNode=function A(E,x){return E===x||Boolean(E.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)})},core.DomUtils=new core.DomUtilsImpl}(),core.Cursor=function(z,re){function q(v){v.parentNode&&(F.push(v.previousSibling),F.push(v.nextSibling),v.parentNode.removeChild(v))}function O(v,S,E){if(S.nodeType===Node.TEXT_NODE){runtime.assert(Boolean(S),"putCursorIntoTextNode: invalid container");var x=S.parentNode;runtime.assert(Boolean(x),"putCursorIntoTextNode: container without parent"),runtime.assert(0<=E&&E<=S.length,"putCursorIntoTextNode: offset is out of bounds"),0===E?x.insertBefore(v,S):(E!==S.length&&S.splitText(E),x.insertBefore(v,S.nextSibling))}else S.nodeType===Node.ELEMENT_NODE&&S.insertBefore(v,S.childNodes.item(E));F.push(v.previousSibling),F.push(v.nextSibling)}var V,A,I=z.createElementNS("urn:webodf:names:cursor","cursor"),R=z.createElementNS("urn:webodf:names:cursor","anchor"),F=[],W=z.createRange(),P=core.DomUtils;this.getNode=function(){return I},this.getAnchorNode=function(){return R.parentNode?R:I},this.getSelectedRange=function(){return A?(W.setStartBefore(I),W.collapse(!0)):(W.setStartAfter(V?R:I),W.setEndBefore(V?I:R)),W},this.setSelectedRange=function(v,S){W&&W!==v&&W.detach(),W=v,V=!1!==S,(A=v.collapsed)?(q(R),q(I),O(I,v.startContainer,v.startOffset)):(q(R),q(I),O(V?I:R,v.endContainer,v.endOffset),O(V?R:I,v.startContainer,v.startOffset)),F.forEach(P.normalizeTextNodes),F.length=0},this.hasForwardSelection=function(){return V},this.remove=function(){q(I),F.forEach(P.normalizeTextNodes),F.length=0},I.setAttributeNS("urn:webodf:names:cursor","memberId",re),R.setAttributeNS("urn:webodf:names:cursor","memberId",re)},core.Destroyable=function(){},core.Destroyable.prototype.destroy=function(z){},core.EventSource=function(){},core.EventSource.prototype.subscribe=function(z,re){},core.EventSource.prototype.unsubscribe=function(z,re){},core.EventNotifier=function(z){function re(O){runtime.assert(!q.hasOwnProperty(O),'Duplicated event ids: "'+O+'" registered more than once.'),q[O]=[]}var q={};this.emit=function(O,I){var R,V;for(runtime.assert(q.hasOwnProperty(O),'unknown event fired "'+O+'"'),V=q[O],R=0;R<V.length;R+=1)V[R](I)},this.subscribe=function(O,I){runtime.assert(q.hasOwnProperty(O),'tried to subscribe to unknown event "'+O+'"'),q[O].push(I)},this.unsubscribe=function(O,I){var R;runtime.assert(q.hasOwnProperty(O),'tried to unsubscribe from unknown event "'+O+'"'),R=q[O].indexOf(I),runtime.assert(-1!==R,'tried to unsubscribe unknown callback from event "'+O+'"'),-1!==R&&q[O].splice(R,1)},this.register=re,z&&z.forEach(re)},core.ScheduledTask=function(z,re,q){function O(){V&&(q(R),V=!1)}function I(){O(),z.apply(void 0,F),F=null}var R,V=!1,F=[],W=!1;this.trigger=function(){runtime.assert(!1===W,"Can't trigger destroyed ScheduledTask instance"),F=Array.prototype.slice.call(arguments),V||(V=!0,R=re(I))},this.triggerImmediate=function(){runtime.assert(!1===W,"Can't trigger destroyed ScheduledTask instance"),F=Array.prototype.slice.call(arguments),I()},this.processRequests=function(){V&&I()},this.cancel=O,this.restart=function(){runtime.assert(!1===W,"Can't trigger destroyed ScheduledTask instance"),O(),V=!0,R=re(I)},this.destroy=function(A){O(),W=!0,A()}},function(){var z;core.Task={},core.Task.SUPPRESS_MANUAL_PROCESSING=!1,core.Task.processTasks=function(){core.Task.SUPPRESS_MANUAL_PROCESSING||z.performRedraw()},core.Task.createRedrawTask=function(re){return new core.ScheduledTask(re,z.requestRedrawTask,z.cancelRedrawTask)},core.Task.createTimeoutTask=function(re,q){return new core.ScheduledTask(re,function(O){return runtime.setTimeout(O,q)},runtime.clearTimeout)},z=new function(){var re={};this.requestRedrawTask=function(q){var O=runtime.requestAnimationFrame(function(){q(),delete re[O]});return re[O]=q,O},this.performRedraw=function(){Object.keys(re).forEach(function(q){re[q](),runtime.cancelAnimationFrame(parseInt(q,10))}),re={}},this.cancelRedrawTask=function(q){runtime.cancelAnimationFrame(q),delete re[q]}}}(),core.EventSubscriptions=function(){function z(V,F,W){V.subscribe(F,W),q.push({eventSource:V,eventid:F,callback:W})}function re(){var V=[];q.forEach(function(F){F.eventSource.unsubscribe(F.eventid,F.callback)}),q.length=0,Object.keys(I).forEach(function(F){I[F].forEach(function(W){V.push(W.task.destroy)}),delete I[F]}),core.Async.destroyAll(V,function(){}),O=new core.EventNotifier}var q=[],O=new core.EventNotifier,I={},R=0;this.addSubscription=z,this.addFrameSubscription=function(V,F,W){var A,P,v,S;for(I.hasOwnProperty(F)||(I[F]=[]),v=I[F],S=0;S<v.length;S+=1)if(v[S].eventSource===V){A=v[S];break}A||(P="s"+R,R+=1,O.register(P),A={frameEventId:P,eventSource:V,task:core.Task.createRedrawTask(function(){O.emit(P,void 0)})},v.push(A),z(V,F,A.task.trigger)),O.subscribe(A.frameEventId,W)},this.unsubscribeAll=re,this.destroy=function(V){re(),V()}},core.LazyProperty=function(z){var re,q=!1;this.value=function(){return q||(re=z(),q=!0),re},this.reset=function(){q=!1}},core.LoopWatchDog=function(z,re){var q=Date.now(),O=0;this.check=function(){if(z&&Date.now()-q>z)throw runtime.log("alert","watchdog timeout"),"timeout!";if(0<re&&(O+=1)>re)throw runtime.log("alert","watchdog loop overflow"),"loop overflow"}},core.NodeFilterChain=function(z){var re=NodeFilter.FILTER_REJECT,q=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(O){var I;for(I=0;I<z.length;I+=1)if(z[I].acceptNode(O)===re)return re;return q}},core.PositionIterator=function(z,re,q,O){function V(){var ae=P.currentNode,he=ae.nodeType;v=he===E?ae.length-1:he===x?1:0}function F(){if(null===P.previousSibling()){if(!P.parentNode()||P.currentNode===z)return P.firstChild(),!1;v=0}else V();return!0}function W(){var he,ae=P.currentNode;if(he=S(ae),ae!==z)for(ae=ae.parentNode;ae&&ae!==z;)S(ae)===B&&(P.currentNode=ae,he=B),ae=ae.parentNode;return he===B?(v=P.currentNode.nodeType===E?ae.length:1,ae=A.nextPosition()):ae=he===H||A.nextPosition(),ae&&runtime.assert(S(P.currentNode)===H,"moveToAcceptedNode did not result in walker being on an accepted node"),ae}var P,v,S,A=this,E=Node.TEXT_NODE,x=Node.ELEMENT_NODE,H=NodeFilter.FILTER_ACCEPT,B=NodeFilter.FILTER_REJECT;this.nextPosition=function(){var ae=P.currentNode,he=ae.nodeType;if(ae===z)return!1;if(0===v&&he===x)null===P.firstChild()&&(v=1);else if(he===E&&v+1<ae.length)v+=1;else if(null!==P.nextSibling())v=0;else{if(!P.parentNode())return!1;v=1}return!0},this.previousPosition=function(){var ae=!0,he=P.currentNode;return 0===v?ae=F():he.nodeType===E?--v:null!==P.lastChild()?V():he===z?ae=!1:v=0,ae},this.previousNode=F,this.container=function(){var ae=P.currentNode;return 0===v&&ae.nodeType!==E&&(ae=ae.parentNode),ae},this.rightNode=function(){var ae=P.currentNode,he=ae.nodeType;if(he===E&&v===ae.length)for(ae=ae.nextSibling;ae&&S(ae)!==H;)ae=ae.nextSibling;else he===x&&1===v&&(ae=null);return ae},this.leftNode=function(){var ae=P.currentNode;if(0===v)for(ae=ae.previousSibling;ae&&S(ae)!==H;)ae=ae.previousSibling;else if(ae.nodeType===x)for(ae=ae.lastChild;ae&&S(ae)!==H;)ae=ae.previousSibling;return ae},this.getCurrentNode=function(){return P.currentNode},this.unfilteredDomOffset=function(){if(P.currentNode.nodeType===E)return v;var ae=0,he=P.currentNode;for(he=1===v?he.lastChild:he.previousSibling;he;)ae+=1,he=he.previousSibling;return ae},this.getPreviousSibling=function(){var ae=P.currentNode,he=P.previousSibling();return P.currentNode=ae,he},this.getNextSibling=function(){var ae=P.currentNode,he=P.nextSibling();return P.currentNode=ae,he},this.setPositionBeforeElement=function(ae){return runtime.assert(Boolean(ae),"setPositionBeforeElement called without element"),P.currentNode=ae,v=0,W()},this.setUnfilteredPosition=function(ae,he){return runtime.assert(Boolean(ae),"PositionIterator.setUnfilteredPosition called without container"),P.currentNode=ae,ae.nodeType===E?(v=he,runtime.assert(he<=ae.length,"Error in setPosition: "+he+" > "+ae.length),runtime.assert(0<=he,"Error in setPosition: "+he+" < 0"),he===ae.length&&(P.nextSibling()?v=0:P.parentNode()?v=1:runtime.assert(!1,"Error in setUnfilteredPosition: position not valid."))):he<ae.childNodes.length?(P.currentNode=ae.childNodes.item(he),v=0):v=1,W()},this.moveToEnd=function(){P.currentNode=z,v=1},this.moveToEndOfNode=function(ae){ae.nodeType===E?A.setUnfilteredPosition(ae,ae.length):(P.currentNode=ae,v=1)},this.isBeforeNode=function(){return 0===v},this.getNodeFilter=function(){return S},(S=(q?new function R(ae){this.acceptNode=function(he){return!he||he.nodeType===E&&0===he.length?B:ae.acceptNode(he)}}(q):new function I(){this.acceptNode=function(ae){return!ae||ae.nodeType===E&&0===ae.length?B:H}}).acceptNode).acceptNode=S,re=re||NodeFilter.SHOW_ALL,runtime.assert(z.nodeType!==Node.TEXT_NODE,"Internet Explorer doesn't allow tree walker roots to be text nodes"),P=z.ownerDocument.createTreeWalker(z,re,S,O),v=0,null===P.firstChild()&&(v=1)},core.PositionFilter=function(){},core.PositionFilter.FilterResult={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3},core.PositionFilter.prototype.acceptPosition=function(z){},core.PositionFilterChain=function(){var z=[],re=core.PositionFilter.FilterResult.FILTER_ACCEPT,q=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(O){var I;for(I=0;I<z.length;I+=1)if(z[I].acceptPosition(O)===q)return q;return re},this.addFilter=function(O){z.push(O)}},core.StepDirection={PREVIOUS:1,NEXT:2},core.StepIterator=function(z,re){function q(){v=null,E=S=void 0}function O(){return void 0===E&&(E=z.acceptPosition(re)===A),E}function I(x,H){return q(),re.setUnfilteredPosition(x,H)}function R(){return v||(v=re.container()),v}function V(){return void 0===S&&(S=re.unfilteredDomOffset()),S}function F(){for(q();re.nextPosition();)if(q(),O())return!0;return!1}function W(){for(q();re.previousPosition();)if(q(),O())return!0;return!1}var v,S,E,A=core.PositionFilter.FilterResult.FILTER_ACCEPT,P=core.StepDirection.NEXT;this.isStep=O,this.setPosition=I,this.container=R,this.offset=V,this.nextStep=F,this.previousStep=W,this.advanceStep=function(x){return x===P?F():W()},this.roundToClosestStep=function(){var x,H,B=O();return B||(x=R(),H=V(),(B=W())||(I(x,H),B=F())),B},this.roundToPreviousStep=function(){var x=O();return x||(x=W()),x},this.roundToNextStep=function(){var x=O();return x||(x=F()),x},this.leftNode=function(){return re.leftNode()},this.snapshot=function(){return new core.StepIterator.StepSnapshot(R(),V())},this.restore=function(x){I(x.container,x.offset)}},core.StepIterator.StepSnapshot=function(z,re){this.container=z,this.offset=re},core.Utils=function(){function z(re,q){if(q&&Array.isArray(q)){if(re=re||[],!Array.isArray(re))throw"Destination is not an array.";re=re.concat(q.map(function(O){return z(null,O)}))}else if(q&&"object"==typeof q){if("object"!=typeof(re=re||{}))throw"Destination is not an object.";Object.keys(q).forEach(function(O){re[O]=z(re[O],q[O])})}else re=q;return re}this.hashString=function(re){var O,I,q=0;for(O=0,I=re.length;O<I;O+=1)q=(q<<5)-q+re.charCodeAt(O),q|=0;return q},this.mergeObjects=function(re,q){return Object.keys(q).forEach(function(O){re[O]=z(re[O],q[O])}),re}},core.Zip=function(z,re){function q(A,P){var v=F.file(A);v?P(null,v.asUint8Array()):P(A+" not found.",null)}function O(A,P){q(A,function(v,S){if(v||null===S)return P(v,null);var E=runtime.byteArrayToString(S,"utf8");P(null,E)})}function I(A,P){try{A(F.generate({type:"uint8array",compression:"STORE"}))}catch(v){P(v.message)}}function R(A,P){I(function(v){runtime.writeFile(A,v,P)},P)}var F,V=this,W=new core.Base64;this.load=q,this.save=function(A,P,v,S){F.file(A,P,{date:S,compression:v?"DEFLATE":"STORE"})},this.remove=function(A){var P=null!==F.file(A);return F.remove(A),P},this.write=function(A){R(z,A)},this.writeAs=R,this.createByteArray=I,this.loadContentXmlAsFragments=function(A,P){O(A,function(v,S){if(v)return P.rootElementReady(v);P.rootElementReady(null,S,!0)})},this.loadAsString=O,this.loadAsDOM=function(A,P){O(A,function(v,S){if(v||null===S)P(v,null);else{var E=(new DOMParser).parseFromString(S,"text/xml");P(null,E)}})},this.loadAsDataURL=function(A,P,v){q(A,function(S,E){if(S||!E)return v(S,null);var H,x=0;for(P||(P=80===E[1]&&78===E[2]&&71===E[3]?"image/png":255===E[0]&&216===E[1]&&255===E[2]?"image/jpeg":71===E[0]&&73===E[1]&&70===E[2]?"image/gif":""),H="data:"+P+";base64,";x<E.length;)H+=W.convertUTF8ArrayToBase64(E.subarray(x,Math.min(x+45e3,E.length))),x+=45e3;v(null,H)})},this.getEntries=function(){return Object.keys(F.files).map(function(A){return{filename:A,date:F.files[A].date}})},F=new externs.JSZip,null!==re&&runtime.readFile(z,"binary",function(A,P){if("string"==typeof P&&(A="file was read as a string. Should be Uint8Array."),A||!P||0===P.length)re("File '"+z+"' cannot be read. Err: "+(A||"[none]"),V);else try{F.load(P,{checkCRC32:!1}),re(null,V)}catch(v){re(v.message,V)}})},core.SimpleClientRect=null,gui.CommonConstraints={EDIT:{ANNOTATIONS:{ONLY_DELETE_OWN:"onlyDeleteOwn"},REVIEW_MODE:"reviewMode"}},gui.SessionConstraints=function(){function z(O){re.hasOwnProperty(O)||(re[O]=!1,q.register(O))}var re={},q=new core.EventNotifier;this.registerConstraint=z,this.subscribe=function(O,I){z(O),q.subscribe(O,I)},this.unsubscribe=function(O,I){q.unsubscribe(O,I)},this.setState=function(O,I){runtime.assert(!0===re.hasOwnProperty(O),"No such constraint"),re[O]!==I&&(re[O]=I,q.emit(O,I))},this.getState=function(O){return runtime.assert(!0===re.hasOwnProperty(O),"No such constraint"),re[O]}},gui.BlacklistNamespaceNodeFilter=function(z){var re={},q=NodeFilter.FILTER_REJECT,O=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(I){return!I||re.hasOwnProperty(I.namespaceURI)?q:O},z.forEach(function(I){re[I]=!0})},odf.Namespaces={namespaceMap:{config:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",db:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dc:"http://purl.org/dc/elements/1.1/",dr3d:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",draw:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chart:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fo:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",form:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",math:"http://www.w3.org/1998/Math/MathML",meta:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",number:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",office:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentation:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",style:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svg:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",table:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",text:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xforms:"http://www.w3.org/2002/xforms",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},prefixMap:{},configns:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",dbns:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dcns:"http://purl.org/dc/elements/1.1/",dr3dns:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",drawns:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chartns:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fons:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",formns:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",mathns:"http://www.w3.org/1998/Math/MathML",metans:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",numberns:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",officens:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentationns:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",stylens:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svgns:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",tablens:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",textns:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xformsns:"http://www.w3.org/2002/xforms",xlinkns:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/XML/1998/namespace"},function(){var q,z=odf.Namespaces.namespaceMap,re=odf.Namespaces.prefixMap;for(q in z)z.hasOwnProperty(q)&&(re[z[q]]=q)}(),odf.Namespaces.forEachPrefix=function(z){var q,re=odf.Namespaces.namespaceMap;for(q in re)re.hasOwnProperty(q)&&z(q,re[q])},odf.Namespaces.lookupNamespaceURI=function(z){var re=null;return odf.Namespaces.namespaceMap.hasOwnProperty(z)&&(re=odf.Namespaces.namespaceMap[z]),re},odf.Namespaces.lookupPrefix=function(z){var re=odf.Namespaces.prefixMap;return re.hasOwnProperty(z)?re[z]:null},odf.Namespaces.lookupNamespaceURI.lookupNamespaceURI=odf.Namespaces.lookupNamespaceURI,odf.OdfSchemaImpl=function(){var z=[["config:config-item","uncategorized"],["form:item","object"],["form:option","uncategorized"],["math:math","field"],["meta:user-defined","uncategorized"],["number:currency-symbol","uncategorized"],["number:embedded-text","uncategorized"],["number:text","uncategorized"],["presentation:date-time-decl","uncategorized"],["presentation:footer-decl","uncategorized"],["presentation:header-decl","uncategorized"],["svg:desc","text"],["svg:title","text"],["table:desc","uncategorized"],["table:title","uncategorized"],["text:a","text"],["text:author-initials","field"],["text:author-name","field"],["text:bibliography-mark","field"],["text:bookmark-ref","field"],["text:chapter","field"],["text:character-count","field"],["text:conditional-text","field"],["text:creation-date","field"],["text:creation-time","field"],["text:creator","field"],["text:database-display","field"],["text:database-name","field"],["text:database-row-number","field"],["text:date","field"],["text:dde-connection","field"],["text:description","field"],["text:editing-cycles","field"],["text:editing-duration","field"],["text:execute-macro","uncategorized"],["text:expression","uncategorized"],["text:file-name","field"],["text:h","text"],["text:hidden-paragraph","text"],["text:hidden-text","text"],["text:image-count","field"],["text:index-entry-span","uncategorized"],["text:index-title-template","uncategorized"],["text:initial-creator","field"],["text:keywords","field"],["text:linenumbering-separator","style"],["text:measure","uncategorized"],["text:meta","uncategorized"],["text:meta-field","uncategorized"],["text:modification-date","field"],["text:modification-time","field"],["text:note-citation","field"],["text:note-continuation-notice-backward","style"],["text:note-continuation-notice-forward","style"],["text:note-ref","field"],["text:object-count","field"],["text:p","text"],["text:page-continuation","uncategorized"],["text:page-count","field"],["text:page-number","field"],["text:page-variable-get","field"],["text:page-variable-set","field"],["text:paragraph-count","field"],["text:placeholder","field"],["text:print-date","field"],["text:print-time","field"],["text:printed-by","field"],["text:reference-ref","field"],["text:ruby-base","text"],["text:ruby-text","text"],["text:script","text"],["text:sender-city","field"],["text:sender-company","field"],["text:sender-country","field"],["text:sender-email","field"],["text:sender-fax","field"],["text:sender-firstname","field"],["text:sender-initials","field"],["text:sender-lastname","field"],["text:sender-phone-private","field"],["text:sender-phone-work","field"],["text:sender-position","field"],["text:sender-postal-code","field"],["text:sender-state-or-province","field"],["text:sender-street","field"],["text:sender-title","field"],["text:sequence","uncategorized"],["text:sequence-ref","uncategorized"],["text:sheet-name","uncategorized"],["text:span","text"],["text:subject","field"],["text:table-count","field"],["text:table-formula","deprecated"],["text:template-name","uncategorized"],["text:text-input","field"],["text:time","field"],["text:title","field"],["text:user-defined","field"],["text:user-field-get","field"],["text:user-field-input","field"],["text:variable-get","field"],["text:variable-input","field"],["text:variable-set","field"],["text:word-count","field"],["xforms:model","uncategorized"]],re={};this.isTextContainer=function(q,O){return"text"===re[q+":"+O]},this.isField=function(q,O){return"field"===re[q+":"+O]},this.getFields=function(){return z.filter(function(q){return"field"===q[1]}).map(function(q){return q[0]})},z.forEach(function(q){var O=q[1],I=q[0].split(":");q=I[0],I=I[1];var R=odf.Namespaces.lookupNamespaceURI(q);R?re[R+":"+I]=O:runtime.log("DEBUG: OdfSchema - unknown prefix '"+q+"'")})},odf.OdfSchema=new odf.OdfSchemaImpl,odf.OdfUtilsImpl=function(){function z(Ee){return"image"===(Ee&&Ee.localName)&&Ee.namespaceURI===Ae}function re(Ee){return null!==Ee&&Ee.nodeType===Node.ELEMENT_NODE&&"frame"===Ee.localName&&Ee.namespaceURI===Ae&&"as-char"===Ee.getAttributeNS(ve,"anchor-type")}function q(Ee){var Le;return(Le="annotation"===(Ee&&Ee.localName)&&Ee.namespaceURI===odf.Namespaces.officens)||(Le="div"===(Ee&&Ee.localName)&&"annotationWrapper"===Ee.className),Le}function O(Ee){return"a"===(Ee&&Ee.localName)&&Ee.namespaceURI===ve}function I(Ee){var Le=Ee&&Ee.localName;return("p"===Le||"h"===Le)&&Ee.namespaceURI===ve}function R(Ee,Le){for(Ee&&void 0!==Le&&!I(Ee)&&Ee.childNodes.item(Le)&&(Ee=Ee.childNodes.item(Le));Ee&&!I(Ee);)Ee=Ee.parentNode;return Ee}function V(Ee,Le){for(;Ee&&Ee!==Le;){if(Ee.namespaceURI===odf.Namespaces.officens&&"annotation"===Ee.localName)return Ee;Ee=Ee.parentNode}return null}function F(Ee){return/^[ \t\r\n]+$/.test(Ee)}function W(Ee){if(null===Ee||Ee.nodeType!==Node.ELEMENT_NODE)return!1;var Le=Ee.localName;return Rt.isTextContainer(Ee.namespaceURI,Le)||"span"===Le&&"webodf-annotationHighlight"===Ee.className}function A(Ee){return null!==Ee&&Ee.nodeType===Node.ELEMENT_NODE&&Rt.isField(Ee.namespaceURI,Ee.localName)}function P(Ee){var Le=Ee&&Ee.localName,ot=!1;return Le&&(Ee=Ee.namespaceURI)===ve&&(ot="s"===Le||"tab"===Le||"line-break"===Le),ot}function v(Ee){return P(Ee)||A(Ee)||re(Ee)||q(Ee)}function S(Ee){var Le=Ee&&Ee.localName,ot=!1;return Le&&(Ee=Ee.namespaceURI)===ve&&(ot="s"===Le),ot}function E(Ee){return-1!==ft.indexOf(Ee.namespaceURI)}function H(Ee){for(;null!==Ee.firstChild&&W(Ee);)Ee=Ee.firstChild;return Ee}function B(Ee){for(;null!==Ee.lastChild&&W(Ee);)Ee=Ee.lastChild;return Ee}function ae(Ee){for(;!I(Ee)&&null===Ee.previousSibling;)Ee=Ee.parentNode;return I(Ee)?null:B(Ee.previousSibling)}function he(Ee){for(;!I(Ee)&&null===Ee.nextSibling;)Ee=Ee.parentNode;return I(Ee)?null:H(Ee.nextSibling)}function de(Ee){for(var Le=!1;Ee;)if(Ee.nodeType===Node.TEXT_NODE){if(0!==Ee.length)return!F(Ee.data.substr(Ee.length-1,1));Ee=ae(Ee)}else v(Ee)?(Le=!1===S(Ee),Ee=null):Ee=ae(Ee);return Le}function G(Ee){var Le=!1;for(Ee=Ee&&H(Ee);Ee;){if(0<(Ee.nodeType===Node.TEXT_NODE?Ee.length:0)&&!F(Ee.data)){Le=!0;break}if(v(Ee)){Le=!0;break}Ee=he(Ee)}return Le}function U(Ee,Le){return!!F(Ee.data.substr(Le))&&!G(he(Ee))}function te(Ee,Le){var yt,ot=Ee.data;return!(!F(ot[Le])||v(Ee.parentNode)||(0<Le?F(ot[Le-1])||(yt=!0):de(ae(Ee))&&(yt=!0),!0!==yt||U(Ee,Le)))}function ne(Ee){return(Ee=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px)|(%))/.exec(Ee))?{value:parseFloat(Ee[1]),unit:Ee[3]}:null}function oe(Ee){return(Ee=ne(Ee))&&(0>Ee.value||"%"===Ee.unit)?null:Ee}function fe(Ee){return(Ee=ne(Ee))&&"%"!==Ee.unit?null:Ee}function Y(Ee){switch(Ee.namespaceURI){case odf.Namespaces.drawns:case odf.Namespaces.svgns:case odf.Namespaces.dr3dns:return!1;case odf.Namespaces.textns:switch(Ee.localName){case"note-body":case"ruby-text":return!1}break;case odf.Namespaces.officens:switch(Ee.localName){case"annotation":case"binary-data":case"event-listeners":return!1}break;default:switch(Ee.localName){case"cursor":case"editinfo":return!1}}return!0}function le(Ee){return Boolean(R(Ee)&&(!F(Ee.textContent)||te(Ee,0)))}function X(Ee,Le){for(;0<Le.length&&!Ye.rangeContainsNode(Ee,Le[0]);)Le.shift();for(;0<Le.length&&!Ye.rangeContainsNode(Ee,Le[Le.length-1]);)Le.pop()}function $(Ee,Le,ot){var yt;return yt=Ye.getNodesInRange(Ee,function(pt){var Ve=NodeFilter.FILTER_REJECT;return P(pt.parentNode)||A(pt.parentNode)||q(pt)?Ve=NodeFilter.FILTER_REJECT:pt.nodeType===Node.TEXT_NODE?(ot||le(pt))&&(Ve=NodeFilter.FILTER_ACCEPT):v(pt)?Ve=NodeFilter.FILTER_ACCEPT:(Y(pt)||W(pt))&&(Ve=NodeFilter.FILTER_SKIP),Ve},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),Le||X(Ee,yt),yt}function we(Ee,Le,ot){for(;Ee;){if(ot(Ee)){Le[0]!==Ee&&Le.unshift(Ee);break}if(q(Ee))break;Ee=Ee.parentNode}}var ve=odf.Namespaces.textns,Ae=odf.Namespaces.drawns,je=odf.Namespaces.xlinkns,Ye=core.DomUtils,ft=[odf.Namespaces.dbns,odf.Namespaces.dcns,odf.Namespaces.dr3dns,odf.Namespaces.drawns,odf.Namespaces.chartns,odf.Namespaces.formns,odf.Namespaces.numberns,odf.Namespaces.officens,odf.Namespaces.presentationns,odf.Namespaces.stylens,odf.Namespaces.svgns,odf.Namespaces.tablens,odf.Namespaces.textns],Rt=odf.OdfSchema;this.isImage=z,this.isCharacterFrame=re,this.isInlineRoot=q,this.isTextSpan=function(Ee){return"span"===(Ee&&Ee.localName)&&Ee.namespaceURI===ve},this.isHyperlink=O,this.getHyperlinkTarget=function(Ee){return Ee.getAttributeNS(je,"href")||""},this.isParagraph=I,this.getParagraphElement=R,this.getParentAnnotation=V,this.isWithinAnnotation=function(Ee,Le){return Boolean(V(Ee,Le))},this.getAnnotationCreator=function(Ee){return Ee.getElementsByTagNameNS(odf.Namespaces.dcns,"creator")[0].textContent},this.isListItem=function(Ee){return"list-item"===(Ee&&Ee.localName)&&Ee.namespaceURI===ve},this.isLineBreak=function(Ee){return"line-break"===(Ee&&Ee.localName)&&Ee.namespaceURI===ve},this.isODFWhitespace=F,this.isGroupingElement=W,this.isFieldElement=A,this.isCharacterElement=P,this.isAnchoredAsCharacterElement=v,this.isSpaceElement=S,this.isODFNode=E,this.hasNoODFContent=function x(Ee){if(P(Ee)||A(Ee))return!1;if(W(Ee.parentNode)&&Ee.nodeType===Node.TEXT_NODE)return 0===Ee.textContent.length;for(Ee=Ee.firstChild;Ee;){if(E(Ee)||!x(Ee))return!1;Ee=Ee.nextSibling}return!0},this.firstChild=H,this.lastChild=B,this.previousNode=ae,this.nextNode=he,this.scanLeftForNonSpace=de,this.lookLeftForCharacter=function(Ee){var Le,ot=Le=0;return Ee.nodeType===Node.TEXT_NODE&&(ot=Ee.length),0<ot?Le=F((Le=Ee.data).substr(ot-1,1))?1===ot?de(ae(Ee))?2:0:F(Le.substr(ot-2,1))?0:2:1:v(Ee)&&(Le=1),Le},this.lookRightForCharacter=function(Ee){var Le=!1,ot=0;return Ee&&Ee.nodeType===Node.TEXT_NODE&&(ot=Ee.length),0<ot?Le=!F(Ee.data.substr(0,1)):v(Ee)&&(Le=!0),Le},this.scanLeftForAnyCharacter=function(Ee){var Le=!1;for(Ee=Ee&&B(Ee);Ee;){if(0<(Ee.nodeType===Node.TEXT_NODE?Ee.length:0)&&!F(Ee.data)){Le=!0;break}if(v(Ee)){Le=!0;break}Ee=ae(Ee)}return Le},this.scanRightForAnyCharacter=G,this.isTrailingWhitespace=U,this.isSignificantWhitespace=te,this.isDowngradableSpaceElement=function(Ee){return!!S(Ee)&&de(ae(Ee))&&G(he(Ee))},this.parseLength=ne,this.parseNonNegativeLength=oe,this.parseFoFontSize=function(Ee){var Le;return(Le=(Le=ne(Ee))&&(0>=Le.value||"%"===Le.unit)?null:Le)||fe(Ee)},this.parseFoLineHeight=function(Ee){return oe(Ee)||fe(Ee)},this.isTextContentContainingNode=Y,this.getTextNodes=function(Ee,Le){var ot;return ot=Ye.getNodesInRange(Ee,function(yt){var pt=NodeFilter.FILTER_REJECT;return yt.nodeType===Node.TEXT_NODE?le(yt)&&(pt=NodeFilter.FILTER_ACCEPT):Y(yt)&&(pt=NodeFilter.FILTER_SKIP),pt},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),Le||X(Ee,ot),ot},this.getTextElements=$,this.getParagraphElements=function(Ee){var Le;return Le=Ye.getNodesInRange(Ee,function(ot){var yt=NodeFilter.FILTER_REJECT;return I(ot)?yt=NodeFilter.FILTER_ACCEPT:(Y(ot)||W(ot))&&(yt=NodeFilter.FILTER_SKIP),yt},NodeFilter.SHOW_ELEMENT),we(Ee.startContainer,Le,I),Le},this.getImageElements=function(Ee){var Le;return Le=Ye.getNodesInRange(Ee,function(ot){var yt=NodeFilter.FILTER_SKIP;return z(ot)&&(yt=NodeFilter.FILTER_ACCEPT),yt},NodeFilter.SHOW_ELEMENT),we(Ee.startContainer,Le,z),Le},this.getHyperlinkElements=function(Ee){var Le=[],ot=Ee.cloneRange();return Ee.collapsed&&Ee.endContainer.nodeType===Node.ELEMENT_NODE&&(Ee=function ue(Ee,Le){var ot=Ee;if(Le<ot.childNodes.length-1)ot=ot.childNodes[Le+1];else{for(;!ot.nextSibling;)ot=ot.parentNode;ot=ot.nextSibling}for(;ot.firstChild;)ot=ot.firstChild;return ot}(Ee.endContainer,Ee.endOffset),Ee.nodeType===Node.TEXT_NODE&&ot.setEnd(Ee,1)),$(ot,!0,!1).forEach(function(yt){for(yt=yt.parentNode;!I(yt);){if(O(yt)&&-1===Le.indexOf(yt)){Le.push(yt);break}yt=yt.parentNode}}),ot.detach(),Le},this.getNormalizedFontFamilyName=function(Ee){return/^(["'])(?:.|[\n\r])*?\1$/.test(Ee)||(Ee=Ee.replace(/^[ \t\r\n\f]*((?:.|[\n\r])*?)[ \t\r\n\f]*$/,"$1"),/[ \t\r\n\f]/.test(Ee)&&(Ee="'"+Ee.replace(/[ \t\r\n\f]+/g," ")+"'")),Ee}},odf.OdfUtils=new odf.OdfUtilsImpl,gui.OdfTextBodyNodeFilter=function(){var z=odf.OdfUtils,re=Node.TEXT_NODE,q=NodeFilter.FILTER_REJECT,O=NodeFilter.FILTER_ACCEPT,I=odf.Namespaces.textns;this.acceptNode=function(R){if(R.nodeType===re){if(!z.isGroupingElement(R.parentNode))return q}else if(R.namespaceURI===I&&"tracked-changes"===R.localName)return q;return O}},xmldom.LSSerializerFilter=function(){},xmldom.LSSerializerFilter.prototype.acceptNode=function(z){},odf.OdfNodeFilter=function(){this.acceptNode=function(z){return"http://www.w3.org/1999/xhtml"===z.namespaceURI?NodeFilter.FILTER_SKIP:z.namespaceURI&&z.namespaceURI.match(/^urn:webodf:/)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},xmldom.XPathIterator=function(){},xmldom.XPathIterator.prototype.next=function(){},xmldom.XPathIterator.prototype.reset=function(){},xmldom.XPath=createXPathSingleton(),odf.StyleInfo=function(){function z(Y,le){var X,$,we,ue,ve,Ae=0;for((X=oe[Y.localName])&&(we=X[Y.namespaceURI])&&(Ae=we.length),X=0;X<Ae;X+=1)($=Y.getAttributeNS(ue=($=we[X]).ns,ve=$.localname))&&Y.setAttributeNS(ue,te[ue]+ve,le+$);for(we=Y.firstElementChild;we;)z(we,le),we=we.nextElementSibling}function re(Y,le){var X,$,we,ue,ve,Ae=0;for((X=oe[Y.localName])&&(we=X[Y.namespaceURI])&&(Ae=we.length),X=0;X<Ae;X+=1)($=Y.getAttributeNS(ue=($=we[X]).ns,ve=$.localname))&&($=$.replace(le,""),Y.setAttributeNS(ue,te[ue]+ve,$));for(we=Y.firstElementChild;we;)re(we,le),we=we.nextElementSibling}function q(Y,le){var X,$,we,ue,ve,Ae=0;for((X=oe[Y.localName])&&(we=X[Y.namespaceURI])&&(Ae=we.length),X=0;X<Ae;X+=1)($=Y.getAttributeNS($=(ue=we[X]).ns,ve=ue.localname))&&((le=le||{}).hasOwnProperty(ue=ue.keyname)?le[ue][$]=1:((ve={})[$]=1,le[ue]=ve));return le}function O(Y,le){var X;for(q(Y,le),X=Y.firstChild;X;)X.nodeType===Node.ELEMENT_NODE&&O(X,le),X=X.nextSibling}function I(Y,le,X){this.key=Y,this.name=le,this.family=X,this.requires={}}function R(Y,le,X){var $=Y+'"'+le,we=X[$];return we||(we=X[$]=new I($,Y,le)),we}function V(Y,le,X){var $,we,ue,ve,je=0;if($=Y.getAttributeNS(de,"name"),ve=Y.getAttributeNS(de,"family"),$&&ve&&(le=R($,ve,X)),le)for(($=oe[Y.localName])&&(ue=$[Y.namespaceURI])&&(je=ue.length),$=0;$<je;$+=1)(we=Y.getAttributeNS(we=(ve=ue[$]).ns,ve.localname))&&(ve=R(we,ve=ve.keyname,X),le.requires[ve.key]=ve);for(Y=Y.firstElementChild;Y;)V(Y,le,X),Y=Y.nextElementSibling;return X}function F(Y,le){var X=le[Y.family];X||(X=le[Y.family]={}),X[Y.name]=1,Object.keys(Y.requires).forEach(function($){F(Y.requires[$],le)})}function W(Y,le){var X=V(Y,null,{});Object.keys(X).forEach(function($){var we=le[($=X[$]).family];we&&we.hasOwnProperty($.name)&&F($,le)})}var oe,v=odf.Namespaces.chartns,S=odf.Namespaces.dbns,E=odf.Namespaces.dr3dns,x=odf.Namespaces.drawns,H=odf.Namespaces.formns,B=odf.Namespaces.numberns,ae=odf.Namespaces.officens,he=odf.Namespaces.presentationns,de=odf.Namespaces.stylens,G=odf.Namespaces.tablens,U=odf.Namespaces.textns,te={"urn:oasis:names:tc:opendocument:xmlns:chart:1.0":"chart:","urn:oasis:names:tc:opendocument:xmlns:database:1.0":"db:","urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0":"dr3d:","urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":"draw:","urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":"fo:","urn:oasis:names:tc:opendocument:xmlns:form:1.0":"form:","urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":"number:","urn:oasis:names:tc:opendocument:xmlns:office:1.0":"office:","urn:oasis:names:tc:opendocument:xmlns:presentation:1.0":"presentation:","urn:oasis:names:tc:opendocument:xmlns:style:1.0":"style:","urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0":"svg:","urn:oasis:names:tc:opendocument:xmlns:table:1.0":"table:","urn:oasis:names:tc:opendocument:xmlns:text:1.0":"chart:","http://www.w3.org/XML/1998/namespace":"xml:"},ne={text:[{ens:de,en:"tab-stop",ans:de,a:"leader-text-style"},{ens:de,en:"drop-cap",ans:de,a:"style-name"},{ens:U,en:"notes-configuration",ans:U,a:"citation-body-style-name"},{ens:U,en:"notes-configuration",ans:U,a:"citation-style-name"},{ens:U,en:"a",ans:U,a:"style-name"},{ens:U,en:"alphabetical-index",ans:U,a:"style-name"},{ens:U,en:"linenumbering-configuration",ans:U,a:"style-name"},{ens:U,en:"list-level-style-number",ans:U,a:"style-name"},{ens:U,en:"ruby-text",ans:U,a:"style-name"},{ens:U,en:"span",ans:U,a:"style-name"},{ens:U,en:"a",ans:U,a:"visited-style-name"},{ens:de,en:"text-properties",ans:de,a:"text-line-through-text-style"},{ens:U,en:"alphabetical-index-source",ans:U,a:"main-entry-style-name"},{ens:U,en:"index-entry-bibliography",ans:U,a:"style-name"},{ens:U,en:"index-entry-chapter",ans:U,a:"style-name"},{ens:U,en:"index-entry-link-end",ans:U,a:"style-name"},{ens:U,en:"index-entry-link-start",ans:U,a:"style-name"},{ens:U,en:"index-entry-page-number",ans:U,a:"style-name"},{ens:U,en:"index-entry-span",ans:U,a:"style-name"},{ens:U,en:"index-entry-tab-stop",ans:U,a:"style-name"},{ens:U,en:"index-entry-text",ans:U,a:"style-name"},{ens:U,en:"index-title-template",ans:U,a:"style-name"},{ens:U,en:"list-level-style-bullet",ans:U,a:"style-name"},{ens:U,en:"outline-level-style",ans:U,a:"style-name"}],paragraph:[{ens:x,en:"caption",ans:x,a:"text-style-name"},{ens:x,en:"circle",ans:x,a:"text-style-name"},{ens:x,en:"connector",ans:x,a:"text-style-name"},{ens:x,en:"control",ans:x,a:"text-style-name"},{ens:x,en:"custom-shape",ans:x,a:"text-style-name"},{ens:x,en:"ellipse",ans:x,a:"text-style-name"},{ens:x,en:"frame",ans:x,a:"text-style-name"},{ens:x,en:"line",ans:x,a:"text-style-name"},{ens:x,en:"measure",ans:x,a:"text-style-name"},{ens:x,en:"path",ans:x,a:"text-style-name"},{ens:x,en:"polygon",ans:x,a:"text-style-name"},{ens:x,en:"polyline",ans:x,a:"text-style-name"},{ens:x,en:"rect",ans:x,a:"text-style-name"},{ens:x,en:"regular-polygon",ans:x,a:"text-style-name"},{ens:ae,en:"annotation",ans:x,a:"text-style-name"},{ens:H,en:"column",ans:H,a:"text-style-name"},{ens:de,en:"style",ans:de,a:"next-style-name"},{ens:G,en:"body",ans:G,a:"paragraph-style-name"},{ens:G,en:"even-columns",ans:G,a:"paragraph-style-name"},{ens:G,en:"even-rows",ans:G,a:"paragraph-style-name"},{ens:G,en:"first-column",ans:G,a:"paragraph-style-name"},{ens:G,en:"first-row",ans:G,a:"paragraph-style-name"},{ens:G,en:"last-column",ans:G,a:"paragraph-style-name"},{ens:G,en:"last-row",ans:G,a:"paragraph-style-name"},{ens:G,en:"odd-columns",ans:G,a:"paragraph-style-name"},{ens:G,en:"odd-rows",ans:G,a:"paragraph-style-name"},{ens:U,en:"notes-configuration",ans:U,a:"default-style-name"},{ens:U,en:"alphabetical-index-entry-template",ans:U,a:"style-name"},{ens:U,en:"bibliography-entry-template",ans:U,a:"style-name"},{ens:U,en:"h",ans:U,a:"style-name"},{ens:U,en:"illustration-index-entry-template",ans:U,a:"style-name"},{ens:U,en:"index-source-style",ans:U,a:"style-name"},{ens:U,en:"object-index-entry-template",ans:U,a:"style-name"},{ens:U,en:"p",ans:U,a:"style-name"},{ens:U,en:"table-index-entry-template",ans:U,a:"style-name"},{ens:U,en:"table-of-content-entry-template",ans:U,a:"style-name"},{ens:U,en:"table-index-entry-template",ans:U,a:"style-name"},{ens:U,en:"user-index-entry-template",ans:U,a:"style-name"},{ens:de,en:"page-layout-properties",ans:de,a:"register-truth-ref-style-name"}],chart:[{ens:v,en:"axis",ans:v,a:"style-name"},{ens:v,en:"chart",ans:v,a:"style-name"},{ens:v,en:"data-label",ans:v,a:"style-name"},{ens:v,en:"data-point",ans:v,a:"style-name"},{ens:v,en:"equation",ans:v,a:"style-name"},{ens:v,en:"error-indicator",ans:v,a:"style-name"},{ens:v,en:"floor",ans:v,a:"style-name"},{ens:v,en:"footer",ans:v,a:"style-name"},{ens:v,en:"grid",ans:v,a:"style-name"},{ens:v,en:"legend",ans:v,a:"style-name"},{ens:v,en:"mean-value",ans:v,a:"style-name"},{ens:v,en:"plot-area",ans:v,a:"style-name"},{ens:v,en:"regression-curve",ans:v,a:"style-name"},{ens:v,en:"series",ans:v,a:"style-name"},{ens:v,en:"stock-gain-marker",ans:v,a:"style-name"},{ens:v,en:"stock-loss-marker",ans:v,a:"style-name"},{ens:v,en:"stock-range-line",ans:v,a:"style-name"},{ens:v,en:"subtitle",ans:v,a:"style-name"},{ens:v,en:"title",ans:v,a:"style-name"},{ens:v,en:"wall",ans:v,a:"style-name"}],section:[{ens:U,en:"alphabetical-index",ans:U,a:"style-name"},{ens:U,en:"bibliography",ans:U,a:"style-name"},{ens:U,en:"illustration-index",ans:U,a:"style-name"},{ens:U,en:"index-title",ans:U,a:"style-name"},{ens:U,en:"object-index",ans:U,a:"style-name"},{ens:U,en:"section",ans:U,a:"style-name"},{ens:U,en:"table-of-content",ans:U,a:"style-name"},{ens:U,en:"table-index",ans:U,a:"style-name"},{ens:U,en:"user-index",ans:U,a:"style-name"}],ruby:[{ens:U,en:"ruby",ans:U,a:"style-name"}],table:[{ens:S,en:"query",ans:S,a:"style-name"},{ens:S,en:"table-representation",ans:S,a:"style-name"},{ens:G,en:"background",ans:G,a:"style-name"},{ens:G,en:"table",ans:G,a:"style-name"}],"table-column":[{ens:S,en:"column",ans:S,a:"style-name"},{ens:G,en:"table-column",ans:G,a:"style-name"}],"table-row":[{ens:S,en:"query",ans:S,a:"default-row-style-name"},{ens:S,en:"table-representation",ans:S,a:"default-row-style-name"},{ens:G,en:"table-row",ans:G,a:"style-name"}],"table-cell":[{ens:S,en:"column",ans:S,a:"default-cell-style-name"},{ens:G,en:"table-column",ans:G,a:"default-cell-style-name"},{ens:G,en:"table-row",ans:G,a:"default-cell-style-name"},{ens:G,en:"body",ans:G,a:"style-name"},{ens:G,en:"covered-table-cell",ans:G,a:"style-name"},{ens:G,en:"even-columns",ans:G,a:"style-name"},{ens:G,en:"covered-table-cell",ans:G,a:"style-name"},{ens:G,en:"even-columns",ans:G,a:"style-name"},{ens:G,en:"even-rows",ans:G,a:"style-name"},{ens:G,en:"first-column",ans:G,a:"style-name"},{ens:G,en:"first-row",ans:G,a:"style-name"},{ens:G,en:"last-column",ans:G,a:"style-name"},{ens:G,en:"last-row",ans:G,a:"style-name"},{ens:G,en:"odd-columns",ans:G,a:"style-name"},{ens:G,en:"odd-rows",ans:G,a:"style-name"},{ens:G,en:"table-cell",ans:G,a:"style-name"}],graphic:[{ens:E,en:"cube",ans:x,a:"style-name"},{ens:E,en:"extrude",ans:x,a:"style-name"},{ens:E,en:"rotate",ans:x,a:"style-name"},{ens:E,en:"scene",ans:x,a:"style-name"},{ens:E,en:"sphere",ans:x,a:"style-name"},{ens:x,en:"caption",ans:x,a:"style-name"},{ens:x,en:"circle",ans:x,a:"style-name"},{ens:x,en:"connector",ans:x,a:"style-name"},{ens:x,en:"control",ans:x,a:"style-name"},{ens:x,en:"custom-shape",ans:x,a:"style-name"},{ens:x,en:"ellipse",ans:x,a:"style-name"},{ens:x,en:"frame",ans:x,a:"style-name"},{ens:x,en:"g",ans:x,a:"style-name"},{ens:x,en:"line",ans:x,a:"style-name"},{ens:x,en:"measure",ans:x,a:"style-name"},{ens:x,en:"page-thumbnail",ans:x,a:"style-name"},{ens:x,en:"path",ans:x,a:"style-name"},{ens:x,en:"polygon",ans:x,a:"style-name"},{ens:x,en:"polyline",ans:x,a:"style-name"},{ens:x,en:"rect",ans:x,a:"style-name"},{ens:x,en:"regular-polygon",ans:x,a:"style-name"},{ens:ae,en:"annotation",ans:x,a:"style-name"}],presentation:[{ens:E,en:"cube",ans:he,a:"style-name"},{ens:E,en:"extrude",ans:he,a:"style-name"},{ens:E,en:"rotate",ans:he,a:"style-name"},{ens:E,en:"scene",ans:he,a:"style-name"},{ens:E,en:"sphere",ans:he,a:"style-name"},{ens:x,en:"caption",ans:he,a:"style-name"},{ens:x,en:"circle",ans:he,a:"style-name"},{ens:x,en:"connector",ans:he,a:"style-name"},{ens:x,en:"control",ans:he,a:"style-name"},{ens:x,en:"custom-shape",ans:he,a:"style-name"},{ens:x,en:"ellipse",ans:he,a:"style-name"},{ens:x,en:"frame",ans:he,a:"style-name"},{ens:x,en:"g",ans:he,a:"style-name"},{ens:x,en:"line",ans:he,a:"style-name"},{ens:x,en:"measure",ans:he,a:"style-name"},{ens:x,en:"page-thumbnail",ans:he,a:"style-name"},{ens:x,en:"path",ans:he,a:"style-name"},{ens:x,en:"polygon",ans:he,a:"style-name"},{ens:x,en:"polyline",ans:he,a:"style-name"},{ens:x,en:"rect",ans:he,a:"style-name"},{ens:x,en:"regular-polygon",ans:he,a:"style-name"},{ens:ae,en:"annotation",ans:he,a:"style-name"}],"drawing-page":[{ens:x,en:"page",ans:x,a:"style-name"},{ens:he,en:"notes",ans:x,a:"style-name"},{ens:de,en:"handout-master",ans:x,a:"style-name"},{ens:de,en:"master-page",ans:x,a:"style-name"}],"list-style":[{ens:U,en:"list",ans:U,a:"style-name"},{ens:U,en:"numbered-paragraph",ans:U,a:"style-name"},{ens:U,en:"list-item",ans:U,a:"style-override"},{ens:de,en:"style",ans:de,a:"list-style-name"}],data:[{ens:de,en:"style",ans:de,a:"data-style-name"},{ens:de,en:"style",ans:de,a:"percentage-data-style-name"},{ens:he,en:"date-time-decl",ans:de,a:"data-style-name"},{ens:U,en:"creation-date",ans:de,a:"data-style-name"},{ens:U,en:"creation-time",ans:de,a:"data-style-name"},{ens:U,en:"database-display",ans:de,a:"data-style-name"},{ens:U,en:"date",ans:de,a:"data-style-name"},{ens:U,en:"editing-duration",ans:de,a:"data-style-name"},{ens:U,en:"expression",ans:de,a:"data-style-name"},{ens:U,en:"meta-field",ans:de,a:"data-style-name"},{ens:U,en:"modification-date",ans:de,a:"data-style-name"},{ens:U,en:"modification-time",ans:de,a:"data-style-name"},{ens:U,en:"print-date",ans:de,a:"data-style-name"},{ens:U,en:"print-time",ans:de,a:"data-style-name"},{ens:U,en:"table-formula",ans:de,a:"data-style-name"},{ens:U,en:"time",ans:de,a:"data-style-name"},{ens:U,en:"user-defined",ans:de,a:"data-style-name"},{ens:U,en:"user-field-get",ans:de,a:"data-style-name"},{ens:U,en:"user-field-input",ans:de,a:"data-style-name"},{ens:U,en:"variable-get",ans:de,a:"data-style-name"},{ens:U,en:"variable-input",ans:de,a:"data-style-name"},{ens:U,en:"variable-set",ans:de,a:"data-style-name"}],"page-layout":[{ens:he,en:"notes",ans:de,a:"page-layout-name"},{ens:de,en:"handout-master",ans:de,a:"page-layout-name"},{ens:de,en:"master-page",ans:de,a:"page-layout-name"}]},fe=xmldom.XPath;this.collectUsedFontFaces=function A(Y,le){function X(ve){(ve=ue.getAttributeNS(de,ve))&&(Y[ve]=!0)}var we,ue,$=["font-name","font-name-asian","font-name-complex"];for(we=le&&le.firstElementChild;we;)ue=we,$.forEach(X),A(Y,ue),we=we.nextElementSibling},this.changeFontFaceNames=function P(Y,le){function X(ve){var Ae=ue.getAttributeNS(de,ve);Ae&&le.hasOwnProperty(Ae)&&ue.setAttributeNS(de,"style:"+ve,le[Ae])}var we,ue,$=["font-name","font-name-asian","font-name-complex"];for(we=Y&&Y.firstElementChild;we;)ue=we,$.forEach(X),P(ue,le),we=we.nextElementSibling},this.UsedStyleList=function(Y,le){var X={};this.uses=function($){var we=$.localName,ue=$.getAttributeNS(x,"name")||$.getAttributeNS(de,"name");return $="style"===we?$.getAttributeNS(de,"family"):$.namespaceURI===B?"data":we,!!($=X[$])&&0<$[ue]},O(Y,X),le&&W(le,X)},this.getStyleName=function(Y,le){var X,$,we=oe[le.localName];if(we&&(we=we[le.namespaceURI]))for($=0;$<we.length;$+=1)if(we[$].keyname===Y&&le.hasAttributeNS((we=we[$]).ns,we.localname)){X=le.getAttributeNS(we.ns,we.localname);break}return X},this.hasDerivedStyles=function(Y,le,X){var $=X.getAttributeNS(de,"name");return X=X.getAttributeNS(de,"family"),!!fe.getODFElementsWithXPath(Y,'//style:*[@style:parent-style-name="'+$+'"][@style:family="'+X+'"]',le).length},this.prefixStyleNames=function(Y,le,X){var $;if(Y){for($=Y.firstChild;$;){if($.nodeType===Node.ELEMENT_NODE){var we=$,ue=le,ve=we.getAttributeNS(x,"name"),Ae=void 0;ve?Ae=x:(ve=we.getAttributeNS(de,"name"))&&(Ae=de),Ae&&we.setAttributeNS(Ae,te[Ae]+"name",ue+ve)}$=$.nextSibling}z(Y,le),X&&z(X,le)}},this.removePrefixFromStyleNames=function(Y,le,X){var $=new RegExp("^"+le);if(Y){for(le=Y.firstChild;le;){if(le.nodeType===Node.ELEMENT_NODE){var we=le,ue=$,ve=we.getAttributeNS(x,"name"),Ae=void 0;ve?Ae=x:(ve=we.getAttributeNS(de,"name"))&&(Ae=de),Ae&&(ve=ve.replace(ue,""),we.setAttributeNS(Ae,te[Ae]+"name",ve))}le=le.nextSibling}re(Y,$),X&&re(X,$)}},this.determineStylesForNode=q,oe=function(){var Y,le,X,$,we,ve,Ae,je,Ye,ue={};for(X in ne)if(ne.hasOwnProperty(X))for(le=($=ne[X]).length,Y=0;Y<le;Y+=1)Ye=(we=$[Y]).ens,ue.hasOwnProperty(je=we.en)?ve=ue[je]:ue[je]=ve={},ve.hasOwnProperty(Ye)?Ae=ve[Ye]:ve[Ye]=Ae=[],Ae.push({ns:we.ans,localname:we.a,keyname:X});return ue}()},"function"!=typeof Object.create&&(Object.create=function(z){var re=function(){};return re.prototype=z,new re}),xmldom.LSSerializer=function(){function z(I){var R=I||{},V=function(P){var S,v={};for(S in P)P.hasOwnProperty(S)&&(v[P[S]]=S);return v}(I),F=[R],W=[V],A=0;this.push=function(){R=F[A+=1]=Object.create(R),V=W[A]=Object.create(V)},this.pop=function(){F.pop(),W.pop(),--A,R=F[A],V=W[A]},this.getLocalNamespaceDefinitions=function(){return V},this.getQName=function(P){var E,v=P.namespaceURI,S=0;if(!v)return P.localName;if(E=V[v])return E+":"+P.localName;do{if(E||!P.prefix?(E="ns"+S,S+=1):E=P.prefix,R[E]===v)break;if(!R[E]){R[E]=v,V[v]=E;break}E=null}while(null===E);return E+":"+P.localName}}function re(I){return I.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function q(I,R){var W,V="",F=O.filter?O.filter.acceptNode(R):NodeFilter.FILTER_ACCEPT;if(F===NodeFilter.FILTER_ACCEPT&&R.nodeType===Node.ELEMENT_NODE){I.push(),W=I.getQName(R);var A,v,S,E,P=R.attributes,x="";for(A="<"+W,v=P.length,S=0;S<v;S+=1)"http://www.w3.org/2000/xmlns/"!==(E=P.item(S)).namespaceURI&&(O.filter?O.filter.acceptNode(E):NodeFilter.FILTER_ACCEPT)===NodeFilter.FILTER_ACCEPT&&(x+=" "+I.getQName(E)+'="'+(E="string"==typeof E.value?re(E.value):E.value)+'"');for(S in v=I.getLocalNamespaceDefinitions())v.hasOwnProperty(S)&&((P=v[S])?"xmlns"!==P&&(A+=" xmlns:"+v[S]+'="'+S+'"'):A+=' xmlns="'+S+'"');V+=A+(x+">")}if(F===NodeFilter.FILTER_ACCEPT||F===NodeFilter.FILTER_SKIP){for(F=R.firstChild;F;)V+=q(I,F),F=F.nextSibling;R.nodeValue&&(V+=re(R.nodeValue))}return W&&(V+="</"+W+">",I.pop()),V}var O=this;this.filter=null,this.writeToString=function(I,R){return I?q(new z(R),I):""}},function(){function z(P){var v,S=F.length;for(v=0;v<S;v+=1)if("urn:oasis:names:tc:opendocument:xmlns:office:1.0"===P.namespaceURI&&P.localName===F[v])return v;return-1}function re(P,v){var S=new I.UsedStyleList(P,v),E=new odf.OdfNodeFilter;this.acceptNode=function(x){var H=E.acceptNode(x);return H===NodeFilter.FILTER_ACCEPT&&x.parentNode===v&&x.nodeType===Node.ELEMENT_NODE&&(H=S.uses(x)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT),H}}function q(P,v){var S=new re(P,v);this.acceptNode=function(E){var x=S.acceptNode(E);return x!==NodeFilter.FILTER_ACCEPT||!E.parentNode||E.parentNode.namespaceURI!==odf.Namespaces.textns||"s"!==E.parentNode.localName&&"tab"!==E.parentNode.localName||(x=NodeFilter.FILTER_REJECT),x}}function O(P,v){if(v){var E,S=z(v),x=P.firstChild;if(-1!==S){for(;x&&!(-1!==(E=z(x))&&E>S);)x=x.nextSibling;P.insertBefore(v,x)}}}var I=new odf.StyleInfo,R=core.DomUtils,V=odf.Namespaces.stylens,F="meta settings scripts font-face-decls styles automatic-styles master-styles body".split(" "),W=Date.now()+"_webodf_",A=new core.Base64;odf.ODFElement=function(){},odf.ODFDocumentElement=function(){},odf.ODFDocumentElement.prototype=new odf.ODFElement,odf.ODFDocumentElement.prototype.constructor=odf.ODFDocumentElement,odf.ODFDocumentElement.prototype.fontFaceDecls=null,odf.ODFDocumentElement.prototype.manifest=null,odf.ODFDocumentElement.prototype.settings=null,odf.ODFDocumentElement.namespaceURI="urn:oasis:names:tc:opendocument:xmlns:office:1.0",odf.ODFDocumentElement.localName="document",odf.AnnotationElement=function(){},odf.OdfPart=function(P,v,S,E){var x=this;this.size=0,this.type=null,this.name=P,this.container=S,this.url=null,this.mimetype=v,this.onstatereadychange=this.document=null,this.EMPTY=0,this.LOADING=1,this.DONE=2,this.state=this.EMPTY,this.data="",this.load=function(){null!==E&&(this.mimetype=v,E.loadAsDataURL(P,v,function(H,B){H&&runtime.log(H),x.url=B,x.onchange&&x.onchange(x),x.onstatereadychange&&x.onstatereadychange(x)}))}},odf.OdfPart.prototype.load=function(){},odf.OdfPart.prototype.getUrl=function(){return this.data?"data:;base64,"+A.toBase64(this.data):null},odf.OdfContainer=function P(v,S){function E(Me){for(var Fe,Oe=Me.firstChild;Oe;)Fe=Oe.nextSibling,Oe.nodeType===Node.ELEMENT_NODE?E(Oe):Oe.nodeType===Node.PROCESSING_INSTRUCTION_NODE&&Me.removeChild(Oe),Oe=Fe}function x(Me){var Fe,Ge,Oe={},kt=Me.ownerDocument.createNodeIterator(Me,NodeFilter.SHOW_ELEMENT,null,!1);for(Me=kt.nextNode();Me;)"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===Me.namespaceURI&&("annotation"===Me.localName?(Fe=Me.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))&&(Oe.hasOwnProperty(Fe)?runtime.log("Warning: annotation name used more than once with <office:annotation/>: '"+Fe+"'"):Oe[Fe]=Me):"annotation-end"===Me.localName&&((Fe=Me.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))?Oe.hasOwnProperty(Fe)?(Ge=Oe[Fe]).annotationEndElement?runtime.log("Warning: annotation name used more than once with <office:annotation-end/>: '"+Fe+"'"):Ge.annotationEndElement=Me:runtime.log("Warning: annotation end without an annotation start, name: '"+Fe+"'"):runtime.log("Warning: annotation end without a name found"))),Me=kt.nextNode()}function H(Me,Oe){for(var Fe=Me&&Me.firstChild;Fe;)Fe.nodeType===Node.ELEMENT_NODE&&Fe.setAttributeNS("urn:webodf:names:scope","scope",Oe),Fe=Fe.nextSibling}function B(Me,Oe){for(var Fe=(Fe=Ve.rootElement.meta)&&Fe.firstChild;Fe&&(Fe.namespaceURI!==Me||Fe.localName!==Oe);)Fe=Fe.nextSibling;for(Fe=Fe&&Fe.firstChild;Fe&&Fe.nodeType!==Node.TEXT_NODE;)Fe=Fe.nextSibling;return Fe?Fe.data:null}function ae(Me){var Oe={};for(Me=Me.firstChild;Me;)Me.nodeType===Node.ELEMENT_NODE&&Me.namespaceURI===V&&"font-face"===Me.localName&&(Oe[Me.getAttributeNS(V,"name")]=Me),Me=Me.nextSibling;return Oe}function he(Me,Oe){var Ge,kt,Ut,Fe=null;if(Me)for(Ge=(Fe=Me.cloneNode(!0)).firstElementChild;Ge;)kt=Ge.nextElementSibling,(Ut=Ge.getAttributeNS("urn:webodf:names:scope","scope"))&&Ut!==Oe&&Fe.removeChild(Ge),Ge=kt;return Fe}function de(Me,Oe){var Fe,Ge,kt,Ut=null,Lt={};if(Me)for(Oe.forEach(function(st){I.collectUsedFontFaces(Lt,st)}),Fe=(Ut=Me.cloneNode(!0)).firstElementChild;Fe;)Ge=Fe.nextElementSibling,kt=Fe.getAttributeNS(V,"name"),Lt[kt]||Ut.removeChild(Fe),Fe=Ge;return Ut}function G(Me){var Fe,Oe=Ve.rootElement.ownerDocument;if(Me){E(Me.documentElement);try{Fe=Oe.importNode(Me.documentElement,!0)}catch{}}return Fe}function U(Me){Ve.state=Me,Ve.onchange&&Ve.onchange(Ve),Ve.onstatereadychange&&Ve.onstatereadychange(Ve)}function te(Me){bt=null,Ve.rootElement=Me,Me.fontFaceDecls=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),Me.styles=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),Me.automaticStyles=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),Me.masterStyles=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),Me.body=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body"),Me.meta=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),Me.settings=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),Me.scripts=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","scripts"),x(Me)}function ne(Me){var Ge,Oe=G(Me),Fe=Ve.rootElement;Oe&&"document-styles"===Oe.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===Oe.namespaceURI?(Fe.fontFaceDecls=R.getDirectChild(Oe,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),O(Fe,Fe.fontFaceDecls),Ge=R.getDirectChild(Oe,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),Fe.styles=Ge||Me.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),O(Fe,Fe.styles),Ge=R.getDirectChild(Oe,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),Fe.automaticStyles=Ge||Me.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),H(Fe.automaticStyles,"document-styles"),O(Fe,Fe.automaticStyles),Oe=R.getDirectChild(Oe,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),Fe.masterStyles=Oe||Me.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),O(Fe,Fe.masterStyles),I.prefixStyleNames(Fe.automaticStyles,W,Fe.masterStyles)):U(P.INVALID)}function oe(Me){var Oe,Fe,Ge,kt;if((Me=G(Me))&&"document-content"===Me.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===Me.namespaceURI){if(Oe=Ve.rootElement,Ge=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),Oe.fontFaceDecls&&Ge){var Ut,Lt,st,Vt,Qt={};for(Fe=ae(kt=Oe.fontFaceDecls),Vt=ae(Ge),Ge=Ge.firstElementChild;Ge;){if(Ut=Ge.nextElementSibling,Ge.namespaceURI===V&&"font-face"===Ge.localName)if(Lt=Ge.getAttributeNS(V,"name"),Fe.hasOwnProperty(Lt)){if(!Ge.isEqualNode(Fe[Lt])){var Xt=Fe,Wt=Vt,Nt=0,Bt=void 0;for(Bt=st=(st=Lt).replace(/\d+$/,"");Xt.hasOwnProperty(Bt)||Wt.hasOwnProperty(Bt);)Bt=st+(Nt+=1);Ge.setAttributeNS(V,"style:name",st=Bt),kt.appendChild(Ge),Fe[st]=Ge,delete Vt[Lt],Qt[Lt]=st}}else kt.appendChild(Ge),Fe[Lt]=Ge,delete Vt[Lt];Ge=Ut}kt=Qt}else Ge&&(Oe.fontFaceDecls=Ge,O(Oe,Ge));if(H(Fe=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),"document-content"),kt&&I.changeFontFaceNames(Fe,kt),Oe.automaticStyles&&Fe)for(kt=Fe.firstChild;kt;)Oe.automaticStyles.appendChild(kt),kt=Fe.firstChild;else Fe&&(Oe.automaticStyles=Fe,O(Oe,Fe));if(null===(Me=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body")))throw"<office:body/> tag is mising.";Oe.body=Me,O(Oe,Oe.body)}else U(P.INVALID)}function fe(Me){var Oe;(Me=G(Me))&&"document-meta"===Me.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===Me.namespaceURI&&((Oe=Ve.rootElement).meta=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),O(Oe,Oe.meta))}function Y(Me){var Oe;(Me=G(Me))&&"document-settings"===Me.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===Me.namespaceURI&&((Oe=Ve.rootElement).settings=R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),O(Oe,Oe.settings))}function le(Me){var Oe;if((Me=G(Me))&&"manifest"===Me.localName&&"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"===Me.namespaceURI)for((Oe=Ve.rootElement).manifest=Me,Me=Oe.manifest.firstElementChild;Me;)"file-entry"===Me.localName&&"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"===Me.namespaceURI&&(We[Me.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","full-path")]=Me.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","media-type")),Me=Me.nextElementSibling}function X(Me,Oe,Fe){var Ge;for(Me=R.getElementsByTagName(Me,Oe),Ge=0;Ge<Me.length;Ge+=1)Fe.hasOwnProperty((Oe=Me[Ge]).namespaceURI)||Oe.parentNode.removeChild(Oe)}function $(Me){X(Me,"script",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:office:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:table:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:text:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":!0}),X(Me,"style",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:style:1.0":!0})}function we(Me){var Ge,kt,Ut,Oe=Me.firstElementChild,Fe=[],Lt=Me.attributes,st=Lt.length;for(Ge=0;Ge<st;Ge+=1)kt=(Ut=Lt.item(Ge)).localName.substr(0,2).toLowerCase(),null===Ut.namespaceURI&&"on"===kt&&Fe.push(Ut);for(st=Fe.length,Ge=0;Ge<st;Ge+=1)Me.removeAttributeNode(Fe[Ge]);for(;Oe;)we(Oe),Oe=Oe.nextElementSibling}function ue(Me){var Oe=Me.shift();Oe?et.loadAsDOM(Oe.path,function(Fe,Ge){Ge&&($(Ge),we(Ge.documentElement)),Oe.handler(Ge),Ve.state===P.INVALID?runtime.log(Fe?"ERROR: Unable to load "+Oe.path+" - "+Fe:"ERROR: Unable to load "+Oe.path):(Fe&&runtime.log("DEBUG: Unable to load "+Oe.path+" - "+Fe),ue(Me))}):(x(Ve.rootElement),U(P.DONE))}function ve(Me){var Oe="";return odf.Namespaces.forEachPrefix(function(Fe,Ge){Oe+=" xmlns:"+Fe+'="'+Ge+'"'}),'<?xml version="1.0" encoding="UTF-8"?><office:'+Me+" "+Oe+' office:version="1.2">'}function je(Me,Oe){var Fe=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:file-entry");return Fe.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:full-path",Me),Fe.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:media-type",Oe),Fe}function Le(Me,Oe){var Fe,Ge=(Fe=Ve.rootElement).meta;Ge||(Fe.meta=Ge=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),O(Fe,Ge)),Fe=Ge,Me&&R.mapKeyValObjOntoNode(Fe,Me,odf.Namespaces.lookupNamespaceURI),Oe&&R.removeKeyElementsFromNode(Fe,Oe,odf.Namespaces.lookupNamespaceURI)}function ot(Me,Oe){function Fe(Vt,Qt){var Xt;Qt||(Qt=Vt),Xt=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",Qt),Lt[Vt]=Xt,Lt.appendChild(Xt)}var Ge=new core.Zip("",null),kt="application/vnd.oasis.opendocument."+Me+(!0===Oe?"-template":""),Ut=runtime.byteArrayFromString(kt,"utf8"),Lt=Ve.rootElement,st=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",Me);return Ge.save("mimetype",Ut,!1,new Date),Fe("meta"),Fe("settings"),Fe("scripts"),Fe("fontFaceDecls","font-face-decls"),Fe("styles"),Fe("automaticStyles","automatic-styles"),Fe("masterStyles","master-styles"),Fe("body"),Lt.body.appendChild(st),We["/"]=kt,We["settings.xml"]="text/xml",We["meta.xml"]="text/xml",We["styles.xml"]="text/xml",We["content.xml"]="text/xml",U(P.DONE),Ge}function yt(){var Me,Oe=new Date,Fe="";Ve.rootElement.settings&&Ve.rootElement.settings.firstElementChild&&(Me=new xmldom.LSSerializer,Fe=ve("document-settings"),Me.filter=new odf.OdfNodeFilter,Fe+=Me.writeToString(Ve.rootElement.settings,odf.Namespaces.namespaceMap),Fe+="</office:document-settings>"),(Me=Fe)?(Me=runtime.byteArrayFromString(Me,"utf8"),et.save("settings.xml",Me,!0,Oe)):et.remove("settings.xml"),Fe=runtime.getWindow(),Me="WebODF/"+webodf.Version,Fe&&(Me=Me+" "+Fe.navigator.userAgent),Le({"meta:generator":Me},null),Me=runtime.byteArrayFromString(function Ae(){var Me=new xmldom.LSSerializer,Oe=ve("document-meta");return Me.filter=new odf.OdfNodeFilter,(Oe+=Me.writeToString(Ve.rootElement.meta,odf.Namespaces.namespaceMap))+"</office:document-meta>"}(),"utf8"),et.save("meta.xml",Me,!0,Oe),Me=runtime.byteArrayFromString(function ft(){var Me,Oe,Fe,Ge=odf.Namespaces.namespaceMap,kt=new xmldom.LSSerializer,Ut=ve("document-styles");return Oe=he(Ve.rootElement.automaticStyles,"document-styles"),Fe=Ve.rootElement.masterStyles.cloneNode(!0),Me=de(Ve.rootElement.fontFaceDecls,[Fe,Ve.rootElement.styles,Oe]),I.removePrefixFromStyleNames(Oe,W,Fe),kt.filter=new re(Fe,Oe),Ut+=kt.writeToString(Me,Ge),Ut+=kt.writeToString(Ve.rootElement.styles,Ge),Ut+=kt.writeToString(Oe,Ge),(Ut+=kt.writeToString(Fe,Ge))+"</office:document-styles>"}(),"utf8"),et.save("styles.xml",Me,!0,Oe),Me=runtime.byteArrayFromString(function Rt(){var Me,Oe,Fe=odf.Namespaces.namespaceMap,Ge=new xmldom.LSSerializer,kt=ve("document-content");return Oe=he(Ve.rootElement.automaticStyles,"document-content"),Me=de(Ve.rootElement.fontFaceDecls,[Oe]),Ge.filter=new q(Ve.rootElement.body,Oe),kt+=Ge.writeToString(Me,Fe),kt+=Ge.writeToString(Oe,Fe),(kt+=Ge.writeToString(Ve.rootElement.body,Fe))+"</office:document-content>"}(),"utf8"),et.save("content.xml",Me,!0,Oe),Me=runtime.byteArrayFromString(function Ye(){var Ge,Me=runtime.parseXML('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2"></manifest:manifest>'),Oe=Me.documentElement,Fe=new xmldom.LSSerializer;for(Ge in We)We.hasOwnProperty(Ge)&&Oe.appendChild(je(Ge,We[Ge]));return Fe.filter=new odf.OdfNodeFilter,'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n'+Fe.writeToString(Me,odf.Namespaces.namespaceMap)}(),"utf8"),et.save("META-INF/manifest.xml",Me,!0,Oe)}function pt(Me,Oe){yt(),et.writeAs(Me,function(Fe){Oe(Fe)})}var et,bt,Ve=this,We={},xt="";this.onstatereadychange=S,this.state=this.onchange=null,this.getMetadata=B,this.setRootElement=te,this.getContentElement=function(){var Me;if(bt||(bt=R.getDirectChild(Me=Ve.rootElement.body,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","text")||R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","presentation")||R.getDirectChild(Me,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","spreadsheet")),!bt)throw"Could not find content element in <office:body/>.";return bt},this.getDocumentType=function(){var Me=Ve.getContentElement();return Me&&Me.localName},this.isTemplate=function(){return"-template"===We["/"].substr(-9)},this.setIsTemplate=function(Me){var Oe=We["/"];Me!==("-template"===Oe.substr(-9))&&(Oe=Me?Oe+"-template":Oe.substr(0,Oe.length-9),We["/"]=Oe,Me=runtime.byteArrayFromString(Oe,"utf8"),et.save("mimetype",Me,!1,new Date))},this.getPart=function(Me){return new odf.OdfPart(Me,We[Me],Ve,et)},this.getPartData=function(Me,Oe){et.load(Me,Oe)},this.setMetadata=Le,this.incrementEditingCycles=function(){var Me=(Me=B(odf.Namespaces.metans,"editing-cycles"))?parseInt(Me,10):0;return isNaN(Me)&&(Me=0),Le({"meta:editing-cycles":Me+1},null),Me+1},this.createByteArray=function(Me,Oe){yt(),et.createByteArray(Me,Oe)},this.saveAs=pt,this.save=function(Me){pt(xt,Me)},this.getUrl=function(){return xt},this.setBlob=function(Me,Oe,Fe){Fe=A.convertBase64ToByteArray(Fe),et.save(Me,Fe,!1,new Date),We.hasOwnProperty(Me)&&runtime.log(Me+" has been overwritten."),We[Me]=Oe},this.removeBlob=function(Me){var Oe=et.remove(Me);runtime.assert(Oe,"file is not found: "+Me),delete We[Me]},this.state=P.LOADING,this.rootElement=function(Me){var Fe,Oe=document.createElementNS(Me.namespaceURI,Me.localName);for(Fe in Me=new Me.Type)Me.hasOwnProperty(Fe)&&(Oe[Fe]=Me[Fe]);return Oe}({Type:odf.ODFDocumentElement,namespaceURI:odf.ODFDocumentElement.namespaceURI,localName:odf.ODFDocumentElement.localName}),et=v===odf.OdfContainer.DocumentType.TEXT?ot("text"):v===odf.OdfContainer.DocumentType.TEXT_TEMPLATE?ot("text",!0):v===odf.OdfContainer.DocumentType.PRESENTATION?ot("presentation"):v===odf.OdfContainer.DocumentType.PRESENTATION_TEMPLATE?ot("presentation",!0):v===odf.OdfContainer.DocumentType.SPREADSHEET?ot("spreadsheet"):v===odf.OdfContainer.DocumentType.SPREADSHEET_TEMPLATE?ot("spreadsheet",!0):new core.Zip(xt=v,function(Me,Oe){et=Oe,Me?function Ee(Me,Oe){runtime.loadXML(Me,function(Fe,Ge){if(Fe)Oe(Fe);else if(Ge){$(Ge),we(Ge.documentElement);var kt=G(Ge);kt&&"document"===kt.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===kt.namespaceURI?(te(kt),U(P.DONE)):U(P.INVALID)}else Oe("No DOM was loaded.")})}(xt,function(Fe){Me&&(et.error=Me+"\n"+Fe,U(P.INVALID))}):ue([{path:"styles.xml",handler:ne},{path:"content.xml",handler:oe},{path:"meta.xml",handler:fe},{path:"settings.xml",handler:Y},{path:"META-INF/manifest.xml",handler:le}])})},odf.OdfContainer.EMPTY=0,odf.OdfContainer.LOADING=1,odf.OdfContainer.DONE=2,odf.OdfContainer.INVALID=3,odf.OdfContainer.SAVING=4,odf.OdfContainer.MODIFIED=5,odf.OdfContainer.getContainer=function(P){return new odf.OdfContainer(P,null)}}(),odf.OdfContainer.DocumentType={TEXT:1,TEXT_TEMPLATE:2,PRESENTATION:3,PRESENTATION_TEMPLATE:4,SPREADSHEET:5,SPREADSHEET_TEMPLATE:6},gui.AnnotatableCanvas=function(){},gui.AnnotatableCanvas.prototype.refreshSize=function(){},gui.AnnotatableCanvas.prototype.getZoomLevel=function(){},gui.AnnotatableCanvas.prototype.getSizer=function(){},gui.AnnotationViewManager=function(z,re,q,O){function I(E){var x=E.annotationEndElement,H=P.createRange(),B=E.getAttributeNS(odf.Namespaces.officens,"name");x&&(H.setStart(E,E.childNodes.length),H.setEnd(x,0),(E=v.getTextNodes(H,!1)).forEach(function(ae){var he;e:{for(he=ae.parentNode;he.namespaceURI!==odf.Namespaces.officens||"body"!==he.localName;){if("http://www.w3.org/1999/xhtml"===he.namespaceURI&&"webodf-annotationHighlight"===he.className&&he.getAttribute("annotation")===B){he=!0;break e}he=he.parentNode}he=!1}he||((he=P.createElement("span")).className="webodf-annotationHighlight",he.setAttribute("annotation",B),ae.parentNode.replaceChild(he,ae),he.appendChild(ae))})),H.detach()}function R(E){var x=z.getSizer();E?(q.style.display="inline-block",x.style.paddingRight=S.getComputedStyle(q).width):(q.style.display="none",x.style.paddingRight=0),z.refreshSize()}function F(){var E;for(E=0;E<A.length;E+=1){var x=(B=A[E]).parentNode,H=(ae=x.nextElementSibling).nextElementSibling,ne=x.parentNode,he=0,de=void(he=A[A.indexOf(B)-1]),B=z.getZoomLevel();x.style.left=(q.getBoundingClientRect().left-ne.getBoundingClientRect().left)/B+"px",x.style.width=q.getBoundingClientRect().width/B+"px",ae.style.width=parseFloat(x.style.left)-30+"px",he?(de=he.parentNode.getBoundingClientRect(),x.style.top=20>=(ne.getBoundingClientRect().top-de.bottom)/B?Math.abs(ne.getBoundingClientRect().top-de.bottom)/B+20+"px":"0px"):x.style.top="0px",H.style.left=ae.getBoundingClientRect().width/B+"px";var ae=H.style,U=(ne=H.getBoundingClientRect().left/B,he=H.getBoundingClientRect().top/B,0),te=0;U=(U=(de=x.getBoundingClientRect().left/B)-ne)*U,te=(te=x.getBoundingClientRect().top/B-he)*te,ne=Math.sqrt(U+te),ae.width=ne+"px",he=Math.asin((x.getBoundingClientRect().top-H.getBoundingClientRect().top)/(B*parseFloat(H.style.width))),H.style.transform="rotate("+he+"rad)",H.style.MozTransform="rotate("+he+"rad)",H.style.WebkitTransform="rotate("+he+"rad)",H.style.msTransform="rotate("+he+"rad)"}}function W(E){var x=A.indexOf(E);"div"===(H=E.parentNode.parentNode).localName&&(H.parentNode.insertBefore(E,H),H.parentNode.removeChild(H)),E=E.getAttributeNS(odf.Namespaces.officens,"name"),E=P.querySelectorAll('span.webodf-annotationHighlight[annotation="'+E+'"]');for(var B,H=0;H<E.length;H+=1){for(B=E.item(H);B.firstChild;)B.parentNode.insertBefore(B.firstChild,B);B.parentNode.removeChild(B)}-1!==x&&A.splice(x,1),0===A.length&&R(!1)}var A=[],P=re.ownerDocument,v=odf.OdfUtils,S=runtime.getWindow();runtime.assert(Boolean(S),"Expected to be run in an environment which has a global window, like a browser."),this.rerenderAnnotations=F,this.rehighlightAnnotations=function(){A.forEach(function(E){I(E)})},this.getMinimumHeightForAnnotationPane=function(){return"none"!==q.style.display&&0<A.length?(A[A.length-1].parentNode.getBoundingClientRect().bottom-q.getBoundingClientRect().top)/z.getZoomLevel()+"px":null},this.addAnnotations=function(E){0!==E.length&&(R(!0),E.forEach(function(x){A.push(x);var de,H=P.createElement("div"),B=P.createElement("div"),ae=P.createElement("div"),he=P.createElement("div");H.className="annotationWrapper",H.setAttribute("creator",v.getAnnotationCreator(x)),x.parentNode.insertBefore(H,x),B.className="annotationNote",B.appendChild(x),O&&((de=P.createElement("div")).className="annotationRemoveButton",B.appendChild(de)),ae.className="annotationConnector horizontal",he.className="annotationConnector angular",H.appendChild(B),H.appendChild(ae),H.appendChild(he),x.annotationEndElement&&I(x)}),function V(){A.sort(function(E,x){return 0!=(E.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING)?-1:1})}(),F())},this.forgetAnnotation=W,this.forgetAnnotations=function(){for(;A.length;)W(A[0])}},gui.Viewport=function(){},gui.Viewport.prototype.scrollIntoView=function(z,re){},gui.SingleScrollViewport=function(z){this.scrollIntoView=function(re,q){var O,I,R,V;V=z.offsetHeight-z.clientHeight,R=z.offsetWidth-z.clientWidth;var F=z.getBoundingClientRect();re&&F&&(O=F.left+5,I=F.top+5,R=F.right-(R+5),V=F.bottom-(V+5),q||re.top<I?z.scrollTop-=I-re.top:(re.top>V||re.bottom>V)&&(z.scrollTop=re.bottom-re.top<=V-I?z.scrollTop+(re.bottom-V):z.scrollTop+(re.top-I)),re.left<O?z.scrollLeft-=O-re.left:re.right>R&&(z.scrollLeft=re.right-re.left<=R-O?z.scrollLeft+(re.right-R):z.scrollLeft-(O-re.left)))}},function(){function z(I,R,V,F,W){var A,v,P=0;for(v in I)if(I.hasOwnProperty(v)){if(P===V){A=v;break}P+=1}A?R.getPartData(I[A].href,function(S,E){if(S)runtime.log(S);else if(E){var x="@font-face { font-family: "+(I[A].family||A)+"; src: url(data:application/x-font-ttf;charset=binary;base64,"+O.convertUTF8ArrayToBase64(E)+') format("truetype"); }';try{F.insertRule(x,F.cssRules.length)}catch(H){runtime.log("Problem inserting rule in CSS: "+runtime.toJson(H)+"\nRule: "+x)}}else runtime.log("missing font data for "+I[A].href);z(I,R,V+1,F,W)}):W&&W()}var re=xmldom.XPath,q=odf.OdfUtils,O=new core.Base64;odf.FontLoader=function(){this.loadFonts=function(I,R){for(var V=I.rootElement.fontFaceDecls;R.cssRules.length;)R.deleteRule(R.cssRules.length-1);if(V){var W,A,P,v,F={};if(V)for(V=re.getODFElementsWithXPath(V,"style:font-face[svg:font-face-src]",odf.Namespaces.lookupNamespaceURI),W=0;W<V.length;W+=1)P=(A=V[W]).getAttributeNS(odf.Namespaces.stylens,"name"),v=q.getNormalizedFontFamilyName(A.getAttributeNS(odf.Namespaces.svgns,"font-family")),0<(A=re.getODFElementsWithXPath(A,"svg:font-face-src/svg:font-face-uri",odf.Namespaces.lookupNamespaceURI)).length&&(A=A[0].getAttributeNS(odf.Namespaces.xlinkns,"href"),F[P]={href:A,family:v});z(F,I,0,R)}}}}(),odf.Formatting=function(){function z(ne){return(ne=te[ne])?G.mergeObjects({},ne):{}}function re(){for(var oe,fe,ne={},Y=(Y=v.rootElement.fontFaceDecls)&&Y.firstElementChild;Y;)(oe=Y.getAttributeNS(x,"name"))&&((fe=Y.getAttributeNS(E,"font-family"))||0<Y.getElementsByTagNameNS(E,"font-face-uri").length)&&(ne[oe]=fe),Y=Y.nextElementSibling;return ne}function q(ne){for(var oe=v.rootElement.styles.firstElementChild;oe;){if(oe.namespaceURI===x&&"default-style"===oe.localName&&oe.getAttributeNS(x,"family")===ne)return oe;oe=oe.nextElementSibling}return null}function O(ne,oe,fe){var Y,le,X;for(fe=fe||[v.rootElement.automaticStyles,v.rootElement.styles],X=0;X<fe.length;X+=1)for(Y=(Y=fe[X]).firstElementChild;Y;){if(le=Y.getAttributeNS(x,"name"),Y.namespaceURI===x&&"style"===Y.localName&&Y.getAttributeNS(x,"family")===oe&&le===ne||"list-style"===oe&&Y.namespaceURI===H&&"list-style"===Y.localName&&le===ne||"data"===oe&&Y.namespaceURI===B&&le===ne)return Y;Y=Y.nextElementSibling}return null}function I(ne){for(var oe,fe,Y,le,X={},$=ne.firstElementChild;$;){if($.namespaceURI===x)for(Y=X[$.nodeName]={},fe=$.attributes,oe=0;oe<fe.length;oe+=1)Y[(le=fe.item(oe)).name]=le.value;$=$.nextElementSibling}for(fe=ne.attributes,oe=0;oe<fe.length;oe+=1)X[(le=fe.item(oe)).name]=le.value;return X}function R(ne,oe){for(var Y,fe=v.rootElement.styles,le={},X=ne.getAttributeNS(x,"family"),$=ne;$;)Y=I($),le=G.mergeObjects(Y,le),$=(Y=$.getAttributeNS(x,"parent-style-name"))?O(Y,X,[fe]):null;return($=q(X))&&(Y=I($),le=G.mergeObjects(Y,le)),!1!==oe&&(Y=z(X),le=G.mergeObjects(Y,le)),le}function W(ne,oe){var fe={},Y=[];return oe||(oe={}),ne.forEach(function(le){!function V(ne,oe){for(var le,Y=ne.nodeType===Node.TEXT_NODE?ne.parentNode:ne,X=[],$="",we=!1;Y&&!he.isInlineRoot(Y)&&Y.parentNode!==v.rootElement;)!we&&he.isGroupingElement(Y)&&(we=!0),(le=S.determineStylesForNode(Y))&&X.push(le),Y=Y.parentNode;we&&(X.forEach(function fe(ue){Object.keys(ue).forEach(function(ve){Object.keys(ue[ve]).forEach(function(Ae){$+="|"+ve+":"+Ae+"|"})})}),oe&&(oe[$]=X))}(le,fe)}),Object.keys(fe).forEach(function(le){oe[le]||(oe[le]=function F(ne){var oe={orderedStyles:[],styleProperties:{}};return ne.forEach(function(fe){Object.keys(fe).forEach(function(Y){var $,le=Object.keys(fe[Y])[0],X={name:le,family:Y,displayName:void 0,isCommonStyle:!1};($=O(le,Y))?(Y=R($),oe.styleProperties=G.mergeObjects(Y,oe.styleProperties),X.displayName=$.getAttributeNS(x,"display-name")||void 0,X.isCommonStyle=$.parentNode===v.rootElement.styles):runtime.log("No style element found for '"+le+"' of family '"+Y+"'"),oe.orderedStyles.push(X)})}),oe}(fe[le])),Y.push(oe[le])}),Y}function A(ne){for(var oe=v.rootElement.masterStyles.firstElementChild;oe&&(oe.namespaceURI!==x||"master-page"!==oe.localName||oe.getAttributeNS(x,"name")!==ne);)oe=oe.nextElementSibling;return oe}function P(ne,oe){var fe;return ne&&(fe=U.convertMeasure(ne,"px")),void 0===fe&&oe&&(fe=U.convertMeasure(oe,"px")),fe}var v,S=new odf.StyleInfo,E=odf.Namespaces.svgns,x=odf.Namespaces.stylens,H=odf.Namespaces.textns,B=odf.Namespaces.numberns,ae=odf.Namespaces.fons,he=odf.OdfUtils,de=core.DomUtils,G=new core.Utils,U=new core.CSSUnits,te={paragraph:{"style:paragraph-properties":{"fo:text-align":"left"}}};this.getSystemDefaultStyleAttributes=z,this.setOdfContainer=function(ne){v=ne},this.getFontMap=re,this.getAvailableParagraphStyles=function(){for(var ne,oe,fe=[],Y=(Y=v.rootElement.styles)&&Y.firstElementChild;Y;)"style"===Y.localName&&Y.namespaceURI===x&&"paragraph"===(ne=Y.getAttributeNS(x,"family"))&&(ne=Y.getAttributeNS(x,"name"),oe=Y.getAttributeNS(x,"display-name")||ne,ne&&oe&&fe.push({name:ne,displayName:oe})),Y=Y.nextElementSibling;return fe},this.isStyleUsed=function(ne){var oe,fe=v.rootElement;return oe=S.hasDerivedStyles(fe,odf.Namespaces.lookupNamespaceURI,ne),ne=new S.UsedStyleList(fe.styles).uses(ne)||new S.UsedStyleList(fe.automaticStyles).uses(ne)||new S.UsedStyleList(fe.body).uses(ne),oe||ne},this.getDefaultStyleElement=q,this.getStyleElement=O,this.getStyleAttributes=I,this.getInheritedStyleAttributes=R,this.getFirstCommonParentStyleNameOrSelf=function(ne){var fe,oe=v.rootElement.styles;return(fe=O(ne,"paragraph",[v.rootElement.automaticStyles]))&&!(ne=fe.getAttributeNS(x,"parent-style-name"))?null:(fe=O(ne,"paragraph",[oe]))?ne:null},this.hasParagraphStyle=function(ne){return Boolean(O(ne,"paragraph"))},this.getAppliedStyles=W,this.getAppliedStylesForElement=function(ne,oe){return W([ne],oe)[0]},this.updateStyle=function(ne,oe){var fe,Y;de.mapObjOntoNode(ne,oe,odf.Namespaces.lookupNamespaceURI),(fe=(fe=oe["style:text-properties"])&&fe["style:font-name"])&&!re().hasOwnProperty(fe)&&((Y=ne.ownerDocument.createElementNS(x,"style:font-face")).setAttributeNS(x,"style:name",fe),Y.setAttributeNS(E,"svg:font-family",fe),v.rootElement.fontFaceDecls.appendChild(Y))},this.createDerivedStyleObject=function(ne,oe,fe){var Y=O(ne,oe);return runtime.assert(Boolean(Y),"No style element found for '"+ne+"' of family '"+oe+"'"),(ne=Y.parentNode===v.rootElement.styles?{"style:parent-style-name":ne}:I(Y))["style:family"]=oe,G.mergeObjects(ne,fe),ne},this.getDefaultTabStopDistance=function(){for(var oe,ne=(ne=q("paragraph"))&&ne.firstElementChild;ne;)ne.namespaceURI===x&&"paragraph-properties"===ne.localName&&(oe=ne.getAttributeNS(x,"tab-stop-distance")),ne=ne.nextElementSibling;return oe||(oe="1.25cm"),he.parseNonNegativeLength(oe)},this.getMasterPageElement=A,this.getContentSize=function(ne,oe){var fe,Y,le,X,$,we,ue,ve,Ae,je;e:{if(Y=O(ne,oe),runtime.assert("paragraph"===oe||"table"===oe,"styleFamily must be either paragraph or table"),Y&&((Y=Y.getAttributeNS(x,"master-page-name"))&&((fe=A(Y))||runtime.log("WARN: No master page definition found for "+Y)),fe||(fe=A("Standard")),fe||(fe=v.rootElement.masterStyles.getElementsByTagNameNS(x,"master-page")[0])||runtime.log("WARN: Document has no master pages defined"),fe))for(Y=fe.getAttributeNS(x,"page-layout-name"),le=v.rootElement.automaticStyles.getElementsByTagNameNS(x,"page-layout"),X=0;X<le.length;X+=1)if((fe=le.item(X)).getAttributeNS(x,"name")===Y)break e;fe=null}return fe||(fe=de.getDirectChild(v.rootElement.styles,x,"default-page-layout")),(fe=de.getDirectChild(fe,x,"page-layout-properties"))?("landscape"===fe.getAttributeNS(x,"print-orientation")?(Y="29.7cm",le="21.001cm"):(Y="21.001cm",le="29.7cm"),Y=P(fe.getAttributeNS(ae,"page-width"),Y),le=P(fe.getAttributeNS(ae,"page-height"),le),void 0===(X=P(fe.getAttributeNS(ae,"margin")))?(X=P(fe.getAttributeNS(ae,"margin-left"),"2cm"),$=P(fe.getAttributeNS(ae,"margin-right"),"2cm"),we=P(fe.getAttributeNS(ae,"margin-top"),"2cm"),ue=P(fe.getAttributeNS(ae,"margin-bottom"),"2cm")):X=$=we=ue=X,void 0===(ve=P(fe.getAttributeNS(ae,"padding")))?(ve=P(fe.getAttributeNS(ae,"padding-left"),"0cm"),Ae=P(fe.getAttributeNS(ae,"padding-right"),"0cm"),je=P(fe.getAttributeNS(ae,"padding-top"),"0cm"),fe=P(fe.getAttributeNS(ae,"padding-bottom"),"0cm")):ve=Ae=je=fe=ve):(Y=P("21.001cm"),le=P("29.7cm"),X=$=we=ue=X=P("2cm"),ve=Ae=je=fe=ve=P("0cm")),{width:Y-X-$-ve-Ae,height:le-we-ue-je-fe}}},function(){var z=odf.Namespaces.stylens,re=odf.Namespaces.textns,q={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"};odf.StyleTreeNode=function(O){this.derivedStyles={},this.element=O},odf.StyleTree=function(O,I){function R(P){var v,S,E,x={};if(!P)return x;for(P=P.firstElementChild;P;)(S=P.namespaceURI!==z||"style"!==P.localName&&"default-style"!==P.localName?P.namespaceURI===re&&"list-style"===P.localName?"list":P.namespaceURI!==z||"page-layout"!==P.localName&&"default-page-layout"!==P.localName?void 0:"page":P.getAttributeNS(z,"family"))&&((v=P.getAttributeNS(z,"name"))||(v=""),x.hasOwnProperty(S)?E=x[S]:x[S]=E={},E[v]=P),P=P.nextElementSibling;return x}function V(P,v){if(P.hasOwnProperty(v))return P[v];var x,S=null,E=Object.keys(P);for(x=0;x<E.length&&!(S=V(P[E[x]].derivedStyles,v));x+=1);return S}function F(P,v,S){var E,x,H;return v.hasOwnProperty(P)?(H=null,(x=(E=new odf.StyleTreeNode(v[P])).element.getAttributeNS(z,"parent-style-name"))&&(H=V(S,x)||F(x,v,S)),H?H.derivedStyles[P]=E:S[P]=E,delete v[P],E):null}function W(P,v){P&&Object.keys(P).forEach(function(S){F(S,P,v)})}var P,v,S,A={};this.getStyleTree=function(){return A},v=R(O),S=R(I),Object.keys(q).forEach(function(E){P=A[E]={},W(v[E],P),W(S[E],P)})}}(),function(){function z(W,A){try{W.insertRule(A,W.cssRules.length)}catch(P){runtime.log("cannot load rule: "+A+" - "+P)}}function re(W,A){this.listCounterCount=0,this.contentRules=W,this.counterIdStack=[],this.continuedCounterIdStack=A}function q(W){function A(E,x,H,B){var he=x.namespaceURI===R&&"list-item"===x.localName;if((ae=x.namespaceURI===R&&"list"===x.localName)||he){if(ae){var de,G,U,ae=H+=1;for(B.listCounterCount+=1,x.setAttributeNS("urn:webodf:names:helper","counter-id",he=E+"-level"+ae+"-"+B.listCounterCount),(de=B.continuedCounterIdStack.shift())||(v+=he+" 1 ",G='text|list[webodfhelper|counter-id="'+he+'"] > text|list-item:first-child > :not(text|list):first-child:before',G+="{",G+="counter-increment: "+(de=he)+" 0;",z(W,G+="}"));B.counterIdStack.length>=ae;)B.counterIdStack.pop();for(B.counterIdStack.push(de),U=B.contentRules[ae.toString()]||"",G=1;G<=ae;G+=1)U=U.replace(G+"webodf-listLevel",B.counterIdStack[G-1]);G='text|list[webodfhelper|counter-id="'+he+'"] > text|list-item > :not(text|list):first-child:before',G+="{",G+=U,G+="counter-increment: "+de+";",z(W,G+="}")}for(x=x.firstElementChild;x;)A(E,x,H,B),x=x.nextElementSibling}else B.continuedCounterIdStack=[]}var P=0,v="",S={};this.createCounterRules=function(E,x,H){var B=x.getAttributeNS(V,"id"),ae=[];H&&(H=H.getAttributeNS("urn:webodf:names:helper","counter-id"),ae=S[H].slice(0)),E=new re(E,ae),A(B=B?"Y"+B:"X"+(P+=1),x,0,E),S[B+"-level1-1"]=E.counterIdStack},this.initialiseCreatedCounters=function(){var E;E="office|document{counter-reset: "+v+";",z(W,E+="}")}}var O=odf.Namespaces.fons,I=odf.Namespaces.stylens,R=odf.Namespaces.textns,V=odf.Namespaces.xmlns,F={1:"decimal",a:"lower-latin",A:"upper-latin",i:"lower-roman",I:"upper-roman"};odf.ListStyleToCss=function(){function W(x){var H=E.parseLength(x);return H?S.convert(H.value,H.unit,"px"):(runtime.log("Could not parse value '"+x+"'."),0)}function A(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function P(x,H){var B;return x&&(B=x.getAttributeNS(R,"style-name")),B===H}var S=new core.CSSUnits,E=odf.OdfUtils;this.applyListStyles=function(x,H,B){var ae;(ae=H.list)&&Object.keys(ae).forEach(function(de){for(var G=ae[de].element.firstElementChild;G;){if(G.namespaceURI===R){var U=x,te=G,ne='text|list[text|style-name="'+de+'"]',oe=te.getAttributeNS(R,"level"),Ae=void 0,fe=void 0,ue=fe=void 0,ve=void 0,Y=void 0,le=Ae=void 0,X=void 0,$=void 0,we=void 0;for(ve=void 0,ue=(fe=te.getElementsByTagNameNS(I,"list-level-properties")[0])&&fe.getAttributeNS(R,"list-level-position-and-space-mode"),ve=fe&&fe.getElementsByTagNameNS(I,"list-level-label-alignment")[0],Ae=oe=oe&&parseInt(oe,10);1<Ae;)ne+=" > text|list-item > text|list",--Ae;switch(Ae=fe&&fe.getAttributeNS(O,"text-align")||"left"){case"end":Ae="right";break;case"start":Ae="left"}"label-alignment"===ue?(Y=ve&&ve.getAttributeNS(O,"margin-left")||"0px",$=ve&&ve.getAttributeNS(O,"text-indent")||"0px",we=ve&&ve.getAttributeNS(R,"label-followed-by"),ve=W(Y)):(Y=fe&&fe.getAttributeNS(R,"space-before")||"0px",le=fe&&fe.getAttributeNS(R,"min-label-width")||"0px",X=fe&&fe.getAttributeNS(R,"min-label-distance")||"0px",ve=W(Y)+W(le)),fe=ne+" > text|list-item",fe+="{",fe+="margin-left: "+ve+"px;",z(U,fe+="}"),fe=ne+" > text|list-item > text|list",fe+="{",fe+="margin-left: "+-ve+"px;",z(U,fe+="}"),fe=ne+" > text|list-item > :not(text|list):first-child:before",fe+="{",fe+="text-align: "+Ae+";",fe+="display: inline-block;","label-alignment"===ue?(fe+="margin-left: "+$+";","listtab"===we&&(fe+="padding-right: 0.2cm;")):(fe+="min-width: "+le+";",fe+="margin-left: "+(0===parseFloat(le)?"":"-")+le+";",fe+="padding-right: "+X+";"),z(U,fe+="}")}G=G.nextElementSibling}}),function v(x,H,B){H=H.getElementsByTagNameNS(R,"list"),x=new q(x);var ae,he,de,G,U,te,oe,ne={};for(oe=0;oe<H.length;oe+=1)if(te=(ae=H.item(oe)).getAttributeNS(R,"style-name")){de=ae.getAttributeNS(R,"continue-numbering"),G=ae.getAttributeNS(R,"continue-list"),(U=ae.getAttributeNS(V,"id"))&&(ne[U]=ae),U=B[te].element.firstElementChild;for(var fe=void 0,Y={};U;){fe=(fe=U.getAttributeNS(R,"level"))&&parseInt(fe,10);var le=U,X="",$=void 0,we=void 0,ue=$=void 0;if("list-level-style-number"===le.localName){X=(je=le).getAttributeNS(I,"num-format"),$=je.getAttributeNS(I,"num-suffix")||"",we=je.getAttributeNS(I,"num-prefix")||"";var ve="",Ae=je.getAttributeNS(R,"level"),je=je.getAttributeNS(R,"display-levels");if(we&&(ve+='"'+A(we)+'"\n'),F.hasOwnProperty(X))for(Ae=Ae?parseInt(Ae,10):1,je=je?parseInt(je,10):1;0<je;)ve+=" counter("+(Ae-je+1)+"webodf-listLevel,"+F[X]+")",1<je&&(ve+='"."'),--je;else ve=X?ve+' "'+X+'"':ve+' ""';X="content:"+ve+' "'+A($)+'"'}else"list-level-style-image"===le.localName?X="content: none":"list-level-style-bullet"===le.localName&&(X='content: "'+A(X=le.getAttributeNS(R,"bullet-char"))+'"');($=le.getElementsByTagNameNS(I,"list-level-properties")[0])&&"label-alignment"===(we=$.getAttributeNS(R,"list-level-position-and-space-mode"))&&(($=$.getElementsByTagNameNS(I,"list-level-label-alignment")[0])&&(ue=$.getAttributeNS(R,"label-followed-by")),"space"===ue&&(X+=' "\\a0"')),Y[fe]="\n"+X+";\n",U=U.nextElementSibling}U=Y,de&&!G&&P(he,te)?x.createCounterRules(U,ae,he):G&&P(ne[G],te)?x.createCounterRules(U,ae,ne[G]):x.createCounterRules(U,ae),he=ae}x.initialiseCreatedCounters()}(x,B,ae)}}}(),odf.LazyStyleProperties=function(z,re){var q={};this.value=function(O){var I;return q.hasOwnProperty(O)?I=q[O]:(void 0===(I=re[O]())&&z&&(I=z.value(O)),q[O]=I),I},this.reset=function(O){z=O,q={}}},odf.StyleParseUtils=function(){function z(q){var O,I;return"px"===(I=(q=(q=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px))/.exec(q))?{value:parseFloat(q[1]),unit:q[3]}:null)&&q.unit)?O=q.value:"cm"===I?O=q.value/2.54*96:"mm"===I?O=q.value/25.4*96:"in"===I?O=96*q.value:"pt"===I?O=q.value/.75:"pc"===I&&(O=16*q.value),O}var re=odf.Namespaces.stylens;this.parseLength=z,this.parsePositiveLengthOrPercent=function(q,O,I){var R,V;return q&&(R=parseFloat(q.substr(0,q.indexOf("%"))),isNaN(R)&&(R=void 0)),void 0!==R?(I&&(V=I.value(O)),R=void 0===V?void 0:V/100*R):R=z(q),R},this.getPropertiesElement=function(q,O,I){for(O=I?I.nextElementSibling:O.firstElementChild;null!==O&&(O.localName!==q||O.namespaceURI!==re);)O=O.nextElementSibling;return O},this.parseAttributeList=function(q){return q&&(q=q.replace(/^\s*(.*?)\s*$/g,"$1")),q&&0<q.length?q.split(/\s+/):[]}},odf.Style2CSS=function(){function z(Ee,Le,ot){var yt=[];ot=ot.derivedStyles;var pt,et,Ve=ae[Ee];for(pt in void 0===Ve?Le=null:(et=Le?"["+Ve+'|style-name="'+Le+'"]':"","presentation"===Ve&&(Ve="draw",et=Le?'[presentation|style-name="'+Le+'"]':""),Le=Ve+"|"+he[Ee].join(et+","+Ve+"|")+et),null!==Le&&yt.push(Le),ot)ot.hasOwnProperty(pt)&&(Le=z(Ee,pt,ot[pt]),yt=yt.concat(Le));return yt}function re(Ee){var ot="",Le="";return ot=null,"default-style"===Ee.localName?null:(ot=Ee.getAttributeNS(P,"parent-style-name"),Le=Ee.getAttributeNS(P,"family"),ot=ft.getODFElementsWithXPath(je,ot?"//style:*[@style:name='"+ot+"'][@style:family='"+Le+"']":"//style:default-style[@style:family='"+Le+"']",odf.Namespaces.lookupNamespaceURI)[0])}function q(Ee,Le){var yt,pt,Ve,ot="";for(yt=0;yt<Le.length;yt+=1)if(Ve=Ee.getAttributeNS((pt=Le[yt])[0],pt[1])){if(Ve=Ve.trim(),$.hasOwnProperty(pt[1])){var et=Ve,bt=void 0;Ve=void 0,-1!==(We=et.indexOf(" "))?(bt=et.substring(0,We),Ve=et.substring(We)):(bt=et,Ve=""),(bt=ve.parseLength(bt))&&"pt"===bt.unit&&.75>bt.value&&(et="0.75pt"+Ve),Ve=et}else if(we.hasOwnProperty(pt[1])){et=Ee;var We=pt[0],xt=(bt=pt[1],ve.parseLength(Ve)),Me=void 0,Oe=void 0,Ge=void 0,Fe=void 0;if(Ge=void 0,xt&&"%"===xt.unit){for(Me=xt.value/100,Oe=re(et.parentNode),Fe="0";Oe;){if((Ge=H.getDirectChild(Oe,P,"paragraph-properties"))&&(Ge=ve.parseLength(Ge.getAttributeNS(We,bt)))){if("%"!==Ge.unit){Fe=Ge.value*Me+Ge.unit;break}Me*=Ge.value/100}Oe=re(Oe)}Ve=Fe}}pt[2]&&(ot+=pt[2]+":"+Ve+";")}return ot}function O(Ee,Le,ot,yt){return Le+Le+ot+ot+yt+yt}function I(Ee,Le){var ot=[Ee],yt=Le.derivedStyles;return Object.keys(yt).forEach(function(pt){pt=I(pt,yt[pt]),ot=ot.concat(pt)}),ot}function R(Ee,Le,ot,yt){function pt(bt,xt){var Oe,Me=[];bt.forEach(function(Fe){Ve.forEach(function(Ge){Me.push('draw|page[webodfhelper|page-style-name="'+Ge+'"] draw|frame[presentation|class="'+Fe+'"]')})}),0<Me.length&&(Oe=Me.join(",")+"{visibility:"+xt+";}",Ee.insertRule(Oe,Ee.cssRules.length))}var Ve=I(Le,yt),et=[],We=[];["page-number","date-time","header","footer"].forEach(function(bt){var xt;"true"===(xt=ot.getAttributeNS(x,"display-"+bt))?et.push(bt):"false"===xt&&We.push(bt)}),pt(et,"visible"),pt(We,"hidden")}function V(Ee,Le,ot,yt){var pt,Ve;if("page"===Le){var bt,xt,Me,et=yt.element,We="";if(xt=bt="",ot=H.getDirectChild(et,P,"page-layout-properties"))if(Me=et.getAttributeNS(P,"name"),We+=q(ot,le),(bt=H.getDirectChild(ot,P,"background-image"))&&(xt=bt.getAttributeNS(E,"href"))&&(We=We+"background-image: url('odfkit:"+xt+"');"+q(bt,G)),"presentation"===Ae)for(et=(et=H.getDirectChild(et.parentNode.parentNode,A,"master-styles"))&&et.firstElementChild;et;)et.namespaceURI===P&&"master-page"===et.localName&&et.getAttributeNS(P,"page-layout-name")===Me&&(bt='draw|page[draw|master-page-name="'+(xt=et.getAttributeNS(P,"name"))+'"] {'+We+"}",xt='office|body, draw|page[draw|master-page-name="'+xt+'"] {'+q(ot,X)+" }",Ee.insertRule(bt,Ee.cssRules.length),Ee.insertRule(xt,Ee.cssRules.length)),et=et.nextElementSibling;else"text"===Ae&&(bt="office|text {"+We+"}",xt="office|body {width: "+ot.getAttributeNS(W,"page-width")+";}",Ee.insertRule(bt,Ee.cssRules.length),Ee.insertRule(xt,Ee.cssRules.length))}else{if(We=z(Le,ot,yt).join(","),Me="",et=H.getDirectChild(yt.element,P,"text-properties")){var Oe=et,Fe=Ve="";switch(bt="",xt=1,et=""+q(Oe,de),"solid"===(pt=Oe.getAttributeNS(P,"text-underline-style"))&&(Ve+=" underline"),"solid"===(pt=Oe.getAttributeNS(P,"text-line-through-style"))&&(Ve+=" line-through"),Ve.length&&(et=et+"text-decoration:"+Ve+";\ntext-decoration-line:"+Ve+";\n",et+="-moz-text-decoration-line:"+Ve+";\n"),pt=Oe.getAttributeNS(P,"text-line-through-type")){case"double":Fe+=" double";break;case"single":Fe+=" single"}if(Fe&&(et+="text-decoration-style:"+Fe+";\n",et+="-moz-text-decoration-style:"+Fe+";\n"),(Ve=Oe.getAttributeNS(P,"font-name")||Oe.getAttributeNS(W,"font-family"))&&(et+="font-family: "+((pt=ue[Ve])||Ve)+";"),(pt=Oe.getAttributeNS(P,"text-position"))&&(et+="vertical-align: "+(pt=(Ve=B.parseAttributeList(pt))[0])+"\n; ",(Ve=Ve[1])&&(xt=parseFloat(Ve)/100)),Oe.hasAttributeNS(W,"font-size")||1!==xt){for(Oe=Oe.parentNode;Oe;){if(pt=(pt=H.getDirectChild(Oe,P,"text-properties"))?ve.parseFoFontSize(pt.getAttributeNS(W,"font-size")):null){if("%"!==pt.unit){bt="font-size: "+pt.value*xt+pt.unit+";";break}xt*=pt.value/100}Oe=re(Oe)}bt||(bt="font-size: "+parseFloat(Ye)*xt+Rt.getUnits(Ye)+";")}Me+=et+=bt}(et=H.getDirectChild(yt.element,P,"paragraph-properties"))&&(et=""+q(bt=et,U),(xt=H.getDirectChild(bt,P,"background-image"))&&(Oe=xt.getAttributeNS(E,"href"))&&(et=et+"background-image: url('odfkit:"+Oe+"');"+q(xt,G)),(bt=bt.getAttributeNS(W,"line-height"))&&"normal"!==bt&&(et="%"!==(bt=ve.parseFoLineHeight(bt)).unit?et+"line-height: "+bt.value+bt.unit+";":et+"line-height: "+bt.value/100+";"),Me+=et),(et=H.getDirectChild(yt.element,P,"graphic-properties"))&&(et=""+q(Oe=et,te),bt=Oe.getAttributeNS(F,"opacity"),xt=Oe.getAttributeNS(F,"fill"),Oe=Oe.getAttributeNS(F,"fill-color"),"solid"===xt||"hatch"===xt?Oe&&"none"!==Oe?(bt=isNaN(parseFloat(bt))?1:parseFloat(bt)/100,xt=Oe.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,O),(Oe=(xt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(xt))?{r:parseInt(xt[1],16),g:parseInt(xt[2],16),b:parseInt(xt[3],16)}:null)&&(et+="background-color: rgba("+Oe.r+","+Oe.g+","+Oe.b+","+bt+");")):et+="background: none;":"none"===xt&&(et+="background: none;"),Me+=et),(et=H.getDirectChild(yt.element,P,"drawing-page-properties"))&&(xt=""+q(bt=et,te),"true"===bt.getAttributeNS(x,"background-visible")&&(xt+="background: none;"),Me+=xt,R(Ee,ot,et,yt)),(et=H.getDirectChild(yt.element,P,"table-cell-properties"))&&(Me=(ot=Me)+(Me=""+q(et,ne))),(et=H.getDirectChild(yt.element,P,"table-row-properties"))&&(Me=(ot=Me)+(Me=""+q(et,fe))),(et=H.getDirectChild(yt.element,P,"table-column-properties"))&&(Me=(ot=Me)+(Me=""+q(et,oe))),(et=H.getDirectChild(yt.element,P,"table-properties"))&&(ot=Me,Me=""+q(et,Y),"collapsing"===(et=et.getAttributeNS(S,"border-model"))?Me+="border-collapse:collapse;":"separating"===et&&(Me+="border-collapse:separate;"),Me=ot+Me),0!==Me.length&&Ee.insertRule(We+"{"+Me+"}",Ee.cssRules.length)}for(var Ge in yt.derivedStyles)yt.derivedStyles.hasOwnProperty(Ge)&&V(Ee,Le,Ge,yt.derivedStyles[Ge])}var Ae,je,Ye,F=odf.Namespaces.drawns,W=odf.Namespaces.fons,A=odf.Namespaces.officens,P=odf.Namespaces.stylens,v=odf.Namespaces.svgns,S=odf.Namespaces.tablens,E=odf.Namespaces.xlinkns,x=odf.Namespaces.presentationns,H=core.DomUtils,B=new odf.StyleParseUtils,ae={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"},he={graphic:"circle connected control custom-shape ellipse frame g line measure page page-thumbnail path polygon polyline rect regular-polygon".split(" "),paragraph:"alphabetical-index-entry-template h illustration-index-entry-template index-source-style object-index-entry-template p table-index-entry-template table-of-content-entry-template user-index-entry-template".split(" "),presentation:"caption circle connector control custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),"drawing-page":"caption circle connector control page custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),ruby:["ruby","ruby-text"],section:"alphabetical-index bibliography illustration-index index-title object-index section table-of-content table-index user-index".split(" "),table:["background","table"],"table-cell":"body covered-table-cell even-columns even-rows first-column first-row last-column last-row odd-columns odd-rows table-cell".split(" "),"table-column":["table-column"],"table-row":["table-row"],text:"a index-entry-chapter index-entry-link-end index-entry-link-start index-entry-page-number index-entry-span index-entry-tab-stop index-entry-text index-title-template linenumbering-configuration list-level-style-number list-level-style-bullet outline-level-style span".split(" "),list:["list-item"]},de=[[W,"color","color"],[W,"background-color","background-color"],[W,"font-weight","font-weight"],[W,"font-style","font-style"]],G=[[P,"repeat","background-repeat"]],U=[[W,"background-color","background-color"],[W,"text-align","text-align"],[W,"text-indent","text-indent"],[W,"padding","padding"],[W,"padding-left","padding-left"],[W,"padding-right","padding-right"],[W,"padding-top","padding-top"],[W,"padding-bottom","padding-bottom"],[W,"border-left","border-left"],[W,"border-right","border-right"],[W,"border-top","border-top"],[W,"border-bottom","border-bottom"],[W,"margin","margin"],[W,"margin-left","margin-left"],[W,"margin-right","margin-right"],[W,"margin-top","margin-top"],[W,"margin-bottom","margin-bottom"],[W,"border","border"]],te=[[W,"background-color","background-color"],[W,"min-height","min-height"],[F,"stroke","border"],[v,"stroke-color","border-color"],[v,"stroke-width","border-width"],[W,"border","border"],[W,"border-left","border-left"],[W,"border-right","border-right"],[W,"border-top","border-top"],[W,"border-bottom","border-bottom"]],ne=[[W,"background-color","background-color"],[W,"border-left","border-left"],[W,"border-right","border-right"],[W,"border-top","border-top"],[W,"border-bottom","border-bottom"],[W,"border","border"]],oe=[[P,"column-width","width"]],fe=[[P,"row-height","height"],[W,"keep-together",null]],Y=[[P,"width","width"],[W,"margin-left","margin-left"],[W,"margin-right","margin-right"],[W,"margin-top","margin-top"],[W,"margin-bottom","margin-bottom"]],le=[[W,"background-color","background-color"],[W,"padding","padding"],[W,"padding-left","padding-left"],[W,"padding-right","padding-right"],[W,"padding-top","padding-top"],[W,"padding-bottom","padding-bottom"],[W,"border","border"],[W,"border-left","border-left"],[W,"border-right","border-right"],[W,"border-top","border-top"],[W,"border-bottom","border-bottom"],[W,"margin","margin"],[W,"margin-left","margin-left"],[W,"margin-right","margin-right"],[W,"margin-top","margin-top"],[W,"margin-bottom","margin-bottom"]],X=[[W,"page-width","width"],[W,"page-height","height"]],$={border:!0,"border-left":!0,"border-right":!0,"border-top":!0,"border-bottom":!0,"stroke-width":!0},we={margin:!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"margin-bottom":!0},ue={},ve=odf.OdfUtils,ft=xmldom.XPath,Rt=new core.CSSUnits;this.style2css=function(Ee,Le,ot,yt,pt){function Ve(xt,Me){et="@namespace "+xt+" url("+Me+");";try{ot.insertRule(et,ot.cssRules.length)}catch{}}var et,We,bt;for(je=Le;ot.cssRules.length;)ot.deleteRule(ot.cssRules.length-1);for(bt in odf.Namespaces.forEachPrefix(Ve),Ve("webodfhelper","urn:webodf:names:helper"),ue=yt,Ae=Ee,Ye=runtime.getWindow().getComputedStyle(document.body,null).getPropertyValue("font-size")||"12pt",ae)if(ae.hasOwnProperty(bt))for(We in Ee=pt[bt])Ee.hasOwnProperty(We)&&V(ot,bt,We,Ee[We])}},function(){function z(re,q){var O=this;this.getDistance=function(I){var R=O.x-I.x;return I=O.y-I.y,Math.sqrt(R*R+I*I)},this.getCenter=function(I){return new z((O.x+I.x)/2,(O.y+I.y)/2)},O.x=re,O.y=q}gui.ZoomHelper=function(){function re(fe,Y,le,X){S.style.WebkitTransform=fe=X?"translate3d("+fe+"px, "+Y+"px, 0) scale3d("+le+", "+le+", 1)":"translate("+fe+"px, "+Y+"px) scale("+le+")",S.style.MozTransform=fe,S.style.msTransform=fe,S.style.OTransform=fe,S.style.transform=fe}function q(fe){fe?re(-E.x,-E.y,B,!0):(re(0,0,B,!0),re(0,0,B,!1))}function O(fe){if(he&&ne){var Y=he.style.overflow,le=he.classList.contains("webodf-customScrollbars");fe&&le||!fe&&!le||(fe?(he.classList.add("webodf-customScrollbars"),he.style.overflow="hidden",runtime.requestAnimationFrame(function(){he.style.overflow=Y})):he.classList.remove("webodf-customScrollbars"))}}function I(){re(-E.x,-E.y,B,!0),he.scrollLeft=0,he.scrollTop=0,oe=de.style.overflow,de.style.overflow="visible",O(!1)}function R(){re(0,0,B,!0),he.scrollLeft=E.x,he.scrollTop=E.y,de.style.overflow=oe||"",O(!0)}function V(fe){return new z(fe.pageX-S.offsetLeft,fe.pageY-S.offsetTop)}function F(fe){if(x){E.x-=fe.x-x.x,E.y-=fe.y-x.y;var Y=E;E=new z(Math.min(Math.max(Y.x,S.offsetLeft),(S.offsetLeft+S.offsetWidth)*B-he.clientWidth),Math.min(Math.max(Y.y,S.offsetTop),(S.offsetTop+S.offsetHeight)*B-he.clientHeight))}x=fe}function W(fe){var Y=fe.touches.length,le=0<Y?V(fe.touches[0]):null;fe=1<Y?V(fe.touches[1]):null,le&&fe?(H=le.getDistance(fe),ae=B,x=le.getCenter(fe),I(),te=U.PINCH):le&&(x=le,te=U.SCROLL)}function A(fe){var Y=0<(le=fe.touches.length)?V(fe.touches[0]):null,le=1<le?V(fe.touches[1]):null;if(Y&&le)if(fe.preventDefault(),te===U.SCROLL)te=U.PINCH,I(),H=Y.getDistance(le);else{fe=Y.getCenter(le),Y=Y.getDistance(le)/H,F(fe),le=B;var X=Math.min(4,S.offsetParent.clientWidth/S.offsetWidth);B=ae*Y,B=Math.min(Math.max(B,X),4),E.x+=((Y=B/le)-1)*(fe.x+E.x),E.y+=(Y-1)*(fe.y+E.y),q(!0)}else Y&&(te===U.PINCH?(te=U.SCROLL,R()):F(Y))}function P(){te===U.PINCH&&(G.emit(gui.ZoomHelper.signalZoomChanged,B),R(),q(!1)),te=U.NONE}function v(){he&&(he.removeEventListener("touchstart",W,!1),he.removeEventListener("touchmove",A,!1),he.removeEventListener("touchend",P,!1))}var S,E,x,H,B,ae,he,de,G=new core.EventNotifier([gui.ZoomHelper.signalZoomChanged]),U={NONE:0,SCROLL:1,PINCH:2},te=U.NONE,ne=runtime.getWindow().hasOwnProperty("ontouchstart"),oe="";this.subscribe=function(fe,Y){G.subscribe(fe,Y)},this.unsubscribe=function(fe,Y){G.unsubscribe(fe,Y)},this.getZoomLevel=function(){return B},this.setZoomLevel=function(fe){S&&(B=fe,q(!1),G.emit(gui.ZoomHelper.signalZoomChanged,B))},this.destroy=function(fe){v(),O(!1),fe()},this.setZoomableElement=function(fe){v(),he=(S=fe).offsetParent,de=S.parentNode,q(!1),he&&(he.addEventListener("touchstart",W,!1),he.addEventListener("touchmove",A,!1),he.addEventListener("touchend",P,!1)),O(!0)},ae=B=1,E=new z(0,0)},gui.ZoomHelper.signalZoomChanged="zoomChanged"}(),ops.Canvas=function(){},ops.Canvas.prototype.getZoomLevel=function(){},ops.Canvas.prototype.getElement=function(){},ops.Canvas.prototype.getSizer=function(){},ops.Canvas.prototype.getZoomHelper=function(){},function(){function z(){function X(ue){we=!0,runtime.setTimeout(function(){try{ue()}catch(ve){runtime.log(String(ve)+"\n"+ve.stack)}we=!1,0<$.length&&X($.pop())},10)}var $=[],we=!1;this.clearQueue=function(){$.length=0},this.addToQueue=function(ue){if(0===$.length&&!we)return X(ue);$.push(ue)}}function re(X){function $(){for(;0<we.cssRules.length;)we.deleteRule(0);we.insertRule("#shadowContent draw|page {display:none;}",0),we.insertRule("office|presentation draw|page {display:none;}",1),we.insertRule("#shadowContent draw|page:nth-of-type("+ue+") {display:block;}",2),we.insertRule("office|presentation draw|page:nth-of-type("+ue+") {display:block;}",3)}var we=X.sheet,ue=1;this.showFirstPage=function(){ue=1,$()},this.showNextPage=function(){ue+=1,$()},this.showPreviousPage=function(){1<ue&&(--ue,$())},this.showPage=function(ve){0<ve&&(ue=ve,$())},this.css=X,this.destroy=function(ve){X.parentNode.removeChild(X),ve()}}function q(X){for(var $=(X=X.sheet).cssRules;$.length;)X.deleteRule($.length-1)}function O(X,$,we){var ue=new odf.Style2CSS,ve=new odf.ListStyleToCss;we=we.sheet;var Ae=new odf.StyleTree(X.rootElement.styles,X.rootElement.automaticStyles).getStyleTree();ue.style2css(X.getDocumentType(),X.rootElement,we,$.getFontMap(),Ae),ve.applyListStyles(we,Ae,X.rootElement.body)}function R(X,$,we){var ve,ue=null;if(X=X.rootElement.body.getElementsByTagNameNS(fe,we+"-decl"),(we=$.getAttributeNS(fe,"use-"+we+"-name"))&&0<X.length)for($=0;$<X.length;$+=1)if((ve=X[$]).getAttributeNS(fe,"name")===we){ue=ve.textContent;break}return ue}function V(X,$,we,ue){var ve=X.ownerDocument;for($=le.getElementsByTagNameNS(X,$,we),X=0;X<$.length;X+=1)le.removeAllChildNodes($[X]),ue&&(we=$[X]).appendChild(ve.createTextNode(ue))}function F(X,$,we){$.setAttributeNS("urn:webodf:names:helper","styleid",X);var ue,ve=$.getAttributeNS(ne,"anchor-type"),Ae=$.getAttributeNS(U,"x"),je=$.getAttributeNS(U,"y"),Ye=$.getAttributeNS(U,"width"),ft=$.getAttributeNS(U,"height"),Rt=$.getAttributeNS(he,"min-height"),Ee=$.getAttributeNS(he,"min-width");"as-char"===ve?ue="display: inline-block;":ve||Ae||je?ue="position: absolute;":(Ye||ft||Rt||Ee)&&(ue="display: block;"),Ae&&(ue+="left: "+Ae+";"),je&&(ue+="top: "+je+";"),Ye&&(ue+="width: "+Ye+";"),ft&&(ue+="height: "+ft+";"),Rt&&(ue+="min-height: "+Rt+";"),Ee&&(ue+="min-width: "+Ee+";"),ue&&we.insertRule(ue="draw|"+$.localName+'[webodfhelper|styleid="'+X+'"] {'+ue+"}",we.cssRules.length)}function W(X){for(X=X.firstChild;X;){if(X.namespaceURI===de&&"binary-data"===X.localName)return"data:image/png;base64,"+X.textContent.replace(/[\r\n\s]/g,"");X=X.nextSibling}return""}function A(X,$,we,ue){function ve(ft){ft&&ue.insertRule(ft='draw|image[webodfhelper|styleid="'+X+'"] {background-image: url('+ft+");}",ue.cssRules.length)}we.setAttributeNS("urn:webodf:names:helper","styleid",X);var Ye,je=we.getAttributeNS(oe,"href");if(je)try{(Ye=$.getPart(je)).onchange=function Ae(ft){ve(ft.url)},Ye.load()}catch(ft){runtime.log("slight problem: "+String(ft))}else ve(je=W(we))}function B(X){var $=X.getElementsByTagName("head")[0],we=X.createElementNS($.namespaceURI,"style"),ue="";return we.setAttribute("type","text/css"),we.setAttribute("media","screen, print, handheld, projection"),odf.Namespaces.forEachPrefix(function(ve,Ae){ue+="@namespace "+ve+" url("+Ae+");\n"}),we.appendChild(X.createTextNode(ue+="@namespace webodfhelper url(urn:webodf:names:helper);\n")),$.appendChild(we),we}var ae=odf.Namespaces.drawns,he=odf.Namespaces.fons,de=odf.Namespaces.officens,G=odf.Namespaces.stylens,U=odf.Namespaces.svgns,te=odf.Namespaces.tablens,ne=odf.Namespaces.textns,oe=odf.Namespaces.xlinkns,fe=odf.Namespaces.presentationns,Y=xmldom.XPath,le=core.DomUtils;odf.OdfCanvas=function(X,$){function ve(){var Nt;Nt=pt.firstChild;var Bt=Xt.getZoomLevel();Nt&&(pt.style.WebkitTransformOrigin="0% 0%",pt.style.MozTransformOrigin="0% 0%",pt.style.msTransformOrigin="0% 0%",pt.style.OTransformOrigin="0% 0%",pt.style.transformOrigin="0% 0%",bt&&((Nt=bt.getMinimumHeightForAnnotationPane())?pt.style.minHeight=Nt:pt.style.removeProperty("min-height")),X.style.width=Math.round(Bt*pt.offsetWidth)+"px",X.style.height=Math.round(Bt*pt.offsetHeight)+"px",X.style.display="inline-block")}function Ae(Nt,Bt){var ln=Fe.sheet;le.removeAllChildNodes(X),(pt=Ee.createElementNS(X.namespaceURI,"div")).style.display="inline-block",pt.style.background="white",pt.style.setProperty("float","left","important"),pt.appendChild(Bt),X.appendChild(pt),(Ve=Ee.createElementNS(X.namespaceURI,"div")).id="annotationsPane",(Ge=Ee.createElementNS(X.namespaceURI,"div")).id="shadowContent",Ge.style.position="absolute",Ge.style.top=0,Ge.style.left=0,Nt.getContentElement().appendChild(Ge);var nn,Mt,Ft=Bt.body,Et=[];for(nn=Ft.firstElementChild;nn&&nn!==Ft;)if(nn.namespaceURI===ae&&(Et[Et.length]=nn),nn.firstElementChild)nn=nn.firstElementChild;else{for(;nn&&nn!==Ft&&!nn.nextElementSibling;)nn=nn.parentNode;nn&&nn.nextElementSibling&&(nn=nn.nextElementSibling)}for(Mt=0;Mt<Et.length;Mt+=1)nn=Et[Mt],F("frame"+String(Mt),nn,ln);for(Et=Y.getODFElementsWithXPath(Ft,".//*[*[@text:anchor-type='paragraph']]",odf.Namespaces.lookupNamespaceURI),nn=0;nn<Et.length;nn+=1)(Ft=Et[nn]).setAttributeNS&&Ft.setAttributeNS("urn:webodf:names:helper","containsparagraphanchor",!0);Ft=ot,nn=Ge;var Tn,Un,Dn,dt,mt,He=0;if(Mt=Nt.rootElement.ownerDocument,(Et=Bt.body.firstElementChild)&&Et.namespaceURI===de&&("presentation"===Et.localName||"drawing"===Et.localName))for(Et=Et.firstElementChild;Et;){if(Tn=(Tn=Et.getAttributeNS(ae,"master-page-name"))?Ft.getMasterPageElement(Tn):null){for(Un=Et.getAttributeNS("urn:webodf:names:helper","styleid"),Dn=Mt.createElementNS(ae,"draw:page"),mt=Tn.firstElementChild,He=0;mt;)"true"!==mt.getAttributeNS(fe,"placeholder")&&(dt=mt.cloneNode(!0),Dn.appendChild(dt)),mt=mt.nextElementSibling,He+=1;mt=dt=He=void 0;var Ce=le.getElementsByTagNameNS(Dn,ae,"frame");for(He=0;He<Ce.length;He+=1)(mt=(dt=Ce[He]).getAttributeNS(fe,"class"))&&!/^(date-time|footer|header|page-number)$/.test(mt)&&dt.parentNode.removeChild(dt);for(dt=le.getElementsByTagNameNS(Dn,ae,"*"),He=0;He<dt.length;He+=1)F(Un+"_"+He,dt[He],ln);nn.appendChild(Dn),He=String(nn.getElementsByTagNameNS(ae,"page").length),V(Dn,ne,"page-number",He),V(Dn,fe,"header",R(Nt,Et,"header")),V(Dn,fe,"footer",R(Nt,Et,"footer")),F(Un,Dn,ln),Dn.setAttributeNS("urn:webodf:names:helper","page-style-name",Et.getAttributeNS(ae,"style-name")),Dn.setAttributeNS(ae,"draw:master-page-name",Tn.getAttributeNS(G,"name"))}Et=Et.nextElementSibling}for(Ft=X.namespaceURI,Et=le.getElementsByTagNameNS(Bt.body,te,"table-cell"),nn=0;nn<Et.length;nn+=1)(Mt=Et[nn]).hasAttributeNS(te,"number-columns-spanned")&&Mt.setAttributeNS(Ft,"colspan",Mt.getAttributeNS(te,"number-columns-spanned")),Mt.hasAttributeNS(te,"number-rows-spanned")&&Mt.setAttributeNS(Ft,"rowspan",Mt.getAttributeNS(te,"number-rows-spanned"));(function P(X){var $=X.ownerDocument;le.getElementsByTagNameNS(X,ne,"line-break").forEach(function(we){we.hasChildNodes()||we.appendChild($.createElement("br"))})})(Bt.body),function v(X){var $=X.ownerDocument;le.getElementsByTagNameNS(X,ne,"s").forEach(function(we){var ue,ve;if(le.removeAllChildNodes(we),we.appendChild($.createTextNode(" ")),1<(ve=parseInt(we.getAttributeNS(ne,"c"),10)))for(we.removeAttributeNS(ne,"c"),ue=1;ue<ve;ue+=1)we.parentNode.insertBefore(we.cloneNode(!0),we)})}(Bt.body),function S(X){le.getElementsByTagNameNS(X,ne,"tab").forEach(function($){$.textContent="\t"})}(Bt.body),function we(Nt,Bt,ln){function Ft(Mt,Tn,Un,Dn){Qt.addToQueue(function(){A(Mt,Tn,Un,Dn)})}var nn,Et;for(nn=Bt.getElementsByTagNameNS(ae,"image"),Bt=0;Bt<nn.length;Bt+=1)Et=nn.item(Bt),Ft("image"+String(Bt),Nt,Et,ln)}(Nt,Bt.body,ln),function ue(Nt,Bt){function ln(Mt,Tn){Qt.addToQueue(function(){!function E(X,$){function we(Rt,Ee){var Le=Ye.documentElement.namespaceURI;"video/"===Ee.substr(0,6)?((ve=Ye.createElementNS(Le,"video")).setAttribute("controls","controls"),Ae=Ye.createElementNS(Le,"source"),Rt&&Ae.setAttribute("src",Rt),Ae.setAttribute("type",Ee),ve.appendChild(Ae),$.parentNode.appendChild(ve)):$.innerHtml="Unrecognised Plugin"}var ve,Ae,je,ft,Ye=$.ownerDocument;if(je=$.getAttributeNS(oe,"href"))try{(ft=X.getPart(je)).onchange=function ue(Rt){we(Rt.url,Rt.mimetype)},ft.load()}catch(Rt){runtime.log("slight problem: "+String(Rt))}else runtime.log("using MP4 data fallback"),we(je=W($),"video/mp4")}(Mt,Tn)})}var Ft,nn;for(nn=Bt.getElementsByTagNameNS(ae,"plugin"),Ft=0;Ft<nn.length;Ft+=1)ln(Nt,nn.item(Ft))}(Nt,Bt.body),pt.insertBefore(Ge,pt.firstChild),Xt.setZoomableElement(pt)}function je(Nt){et?(Ve.parentNode||pt.appendChild(Ve),bt&&bt.forgetAnnotations(),bt=new gui.AnnotationViewManager(Rt,Nt.body,Ve,We),Nt=le.getElementsByTagNameNS(Nt.body,de,"annotation"),bt.addAnnotations(Nt),ve()):Ve.parentNode&&(pt.removeChild(Ve),bt.forgetAnnotations(),ve())}function Ye(Nt){function Bt(){q(Me),q(Oe),q(Fe),le.removeAllChildNodes(X),X.style.display="inline-block";var ln=Le.rootElement;X.ownerDocument.importNode(ln,!0),ot.setOdfContainer(Le),function I(X,$){(new odf.FontLoader).loadFonts(X,$.sheet)}(Le,Me),O(Le,ot,Oe),Ae(Le,ln),je(ln),Nt||Qt.addToQueue(function(){var Ft=[Le];if(kt.hasOwnProperty("statereadychange")){var Et,nn=kt.statereadychange;for(Et=0;Et<nn.length;Et+=1)nn[Et].apply(null,Ft)}})}Le.state===odf.OdfContainer.DONE?Bt():(runtime.log("WARNING: refreshOdf called but ODF was not DONE."),Ut=runtime.setTimeout(function ln(){Le.state===odf.OdfContainer.DONE?Bt():(runtime.log("will be back later..."),Ut=runtime.setTimeout(ln,500))},100))}runtime.assert(null!=X,"odf.OdfCanvas constructor needs DOM element"),runtime.assert(null!=X.ownerDocument,"odf.OdfCanvas constructor needs DOM");var Le,yt,xt,Me,Oe,Fe,Ge,Ut,Lt,Rt=this,Ee=X.ownerDocument,ot=new odf.Formatting,pt=null,Ve=null,et=!1,We=!1,bt=null,kt={},st=!1,Vt=!1,Qt=new z,Xt=new gui.ZoomHelper,Wt=$||new gui.SingleScrollViewport(X.parentNode);this.refreshCSS=function(){st=!0,Lt.trigger()},this.refreshSize=function(){Lt.trigger()},this.odfContainer=function(){return Le},this.setOdfContainer=function(Nt,Bt){Le=Nt,Ye(!0===Bt)},this.load=this.load=function ft(Nt){Qt.clearQueue(),le.removeAllChildNodes(X),X.appendChild(X.ownerDocument.createTextNode(runtime.tr("Loading")+Nt+"...")),X.removeAttribute("style"),Le=new odf.OdfContainer(Nt,function(Bt){Le=Bt,Ye(!1)})},this.save=function(Nt){Le.save(Nt)},this.addListener=function(Nt,Bt){if("click"===Nt){var ln=Nt;X.addEventListener?X.addEventListener(ln,Bt,!1):X.attachEvent?X.attachEvent("on"+ln,Bt):X["on"+ln]=Bt}else ln=kt.hasOwnProperty(Nt)?kt[Nt]:kt[Nt]=[],Bt&&-1===ln.indexOf(Bt)&&ln.push(Bt)},this.getFormatting=function(){return ot},this.getAnnotationViewManager=function(){return bt},this.refreshAnnotations=function(){je(Le.rootElement)},this.rerenderAnnotations=function(){bt&&(Vt=!0,Lt.trigger())},this.getSizer=function(){return pt},this.enableAnnotations=function(Nt,Bt){Nt!==et&&(et=Nt,We=Bt,Le&&je(Le.rootElement))},this.addAnnotation=function(Nt){bt&&(bt.addAnnotations([Nt]),ve())},this.forgetAnnotation=function(Nt){bt&&(bt.forgetAnnotation(Nt),ve())},this.getZoomHelper=function(){return Xt},this.setZoomLevel=function(Nt){Xt.setZoomLevel(Nt)},this.getZoomLevel=function(){return Xt.getZoomLevel()},this.fitToContainingElement=function(Nt,Bt){var Ft=Xt.getZoomLevel(),ln=X.offsetHeight/Ft;Bt/ln<(Ft=Nt/(X.offsetWidth/Ft))&&(Ft=Bt/ln),Xt.setZoomLevel(Ft)},this.fitToWidth=function(Nt){var Bt=X.offsetWidth/Xt.getZoomLevel();Xt.setZoomLevel(Nt/Bt)},this.fitSmart=function(Nt,Bt){var ln,Ft;Ft=Xt.getZoomLevel(),ln=X.offsetWidth/Ft,Ft=X.offsetHeight/Ft,ln=Nt/ln,void 0!==Bt&&Bt/Ft<ln&&(ln=Bt/Ft),Xt.setZoomLevel(Math.min(1,ln))},this.fitToHeight=function(Nt){var Bt=X.offsetHeight/Xt.getZoomLevel();Xt.setZoomLevel(Nt/Bt)},this.showFirstPage=function(){yt.showFirstPage()},this.showNextPage=function(){yt.showNextPage()},this.showPreviousPage=function(){yt.showPreviousPage()},this.showPage=function(Nt){yt.showPage(Nt),ve()},this.getElement=function(){return X},this.getViewport=function(){return Wt},this.addCssForFrameWithImage=function(Nt){var Bt=Nt.getAttributeNS(ae,"name"),ln=Nt.firstElementChild;F(Bt,Nt,Fe.sheet),ln&&A(Bt+"img",Le,ln,Fe.sheet)},this.destroy=function(Nt){var Bt=Ee.getElementsByTagName("head")[0],ln=[yt.destroy,Lt.destroy];runtime.clearTimeout(Ut),Ve&&Ve.parentNode&&Ve.parentNode.removeChild(Ve),Xt.destroy(function(){pt&&(X.removeChild(pt),pt=null)}),function H(X){var $=parseInt(X.getAttribute("webodfcss"),10);1===$?X.parentNode.removeChild(X):X.setAttribute("count",$-1)}(xt),Bt.removeChild(Me),Bt.removeChild(Oe),Bt.removeChild(Fe),core.Async.destroyAll(ln,Nt)},xt=function x(X){var we,ue,$=X.getElementsByTagName("head")[0];for(we=X.styleSheets.length,ue=$.firstElementChild;ue&&("style"!==ue.localName||!ue.hasAttribute("webodfcss"));)ue=ue.nextElementSibling;return ue?(we=parseInt(ue.getAttribute("webodfcss"),10),ue.setAttribute("webodfcss",we+1),ue):("string"===String(typeof webodf_css)?we=webodf_css:(ue="webodf.css",runtime.currentDirectory&&(0<(ue=runtime.currentDirectory()).length&&"/"!==ue.substr(-1)&&(ue+="/"),ue+="../webodf.css"),we=runtime.readFileSync(ue,"utf-8")),(ue=X.createElementNS($.namespaceURI,"style")).setAttribute("media","screen, print, handheld, projection"),ue.setAttribute("type","text/css"),ue.setAttribute("webodfcss","1"),ue.appendChild(X.createTextNode(we)),$.appendChild(ue),ue)}(Ee),yt=new re(B(Ee)),Me=B(Ee),Oe=B(Ee),Fe=B(Ee),Lt=core.Task.createRedrawTask(function(){st&&(O(Le,ot,Oe),st=!1),Vt&&(bt&&bt.rerenderAnnotations(),Vt=!1),ve()}),Xt.subscribe(gui.ZoomHelper.signalZoomChanged,ve)}}(),odf.StepUtils=function(){this.getContentBounds=function(z){var q,O,re=z.container();return runtime.assert(z.isStep(),"Step iterator must be on a step"),re.nodeType===Node.TEXT_NODE&&0<z.offset()?q=z.offset():(re=z.leftNode())&&re.nodeType===Node.TEXT_NODE&&(q=re.length),re&&(re.nodeType===Node.TEXT_NODE?(runtime.assert(0<q,"Empty text node found"),O={container:re,startOffset:q-1,endOffset:q}):O={container:re,startOffset:0,endOffset:re.childNodes.length}),O}},ops.MemberProperties=function(){},ops.Member=function(z,re){var q=new ops.MemberProperties;this.getMemberId=function(){return z},this.getProperties=function(){return q},this.setProperties=function(O){Object.keys(O).forEach(function(I){q[I]=O[I]})},this.removeProperties=function(O){Object.keys(O).forEach(function(I){"fullName"!==I&&"color"!==I&&"imageUrl"!==I&&q.hasOwnProperty(I)&&delete q[I]})},runtime.assert(Boolean(z),"No memberId was supplied!"),re.fullName||(re.fullName=runtime.tr("Unknown Author")),re.color||(re.color="black"),re.imageUrl||(re.imageUrl="avatar-joe.png"),q=re},ops.Document=function(){},ops.Document.prototype.getMemberIds=function(){},ops.Document.prototype.removeCursor=function(z){},ops.Document.prototype.getDocumentElement=function(){},ops.Document.prototype.getRootNode=function(){},ops.Document.prototype.getDOMDocument=function(){},ops.Document.prototype.cloneDocumentElement=function(){},ops.Document.prototype.setDocumentElement=function(z){},ops.Document.prototype.subscribe=function(z,re){},ops.Document.prototype.unsubscribe=function(z,re){},ops.Document.prototype.getCanvas=function(){},ops.Document.prototype.createRootFilter=function(z){},ops.Document.prototype.createPositionIterator=function(z){},ops.Document.prototype.hasCursor=function(z){},ops.Document.signalCursorAdded="cursor/added",ops.Document.signalCursorRemoved="cursor/removed",ops.Document.signalCursorMoved="cursor/moved",ops.Document.signalMemberAdded="member/added",ops.Document.signalMemberUpdated="member/updated",ops.Document.signalMemberRemoved="member/removed",ops.OdtCursor=function(z,re){var I,R,q=this,O={},V=new core.EventNotifier([ops.OdtCursor.signalCursorUpdated]);this.removeFromDocument=function(){R.remove()},this.subscribe=function(F,W){V.subscribe(F,W)},this.unsubscribe=function(F,W){V.unsubscribe(F,W)},this.getMemberId=function(){return z},this.getNode=function(){return R.getNode()},this.getAnchorNode=function(){return R.getAnchorNode()},this.getSelectedRange=function(){return R.getSelectedRange()},this.setSelectedRange=function(F,W){R.setSelectedRange(F,W),V.emit(ops.OdtCursor.signalCursorUpdated,q)},this.hasForwardSelection=function(){return R.hasForwardSelection()},this.getDocument=function(){return re},this.getSelectionType=function(){return I},this.setSelectionType=function(F){O.hasOwnProperty(F)?I=F:runtime.log("Invalid selection type: "+F)},this.resetSelectionType=function(){q.setSelectionType(ops.OdtCursor.RangeSelection)},R=new core.Cursor(re.getDOMDocument(),z),O[ops.OdtCursor.RangeSelection]=!0,O[ops.OdtCursor.RegionSelection]=!0,q.resetSelectionType()},ops.OdtCursor.RangeSelection="Range",ops.OdtCursor.RegionSelection="Region",ops.OdtCursor.signalCursorUpdated="cursorUpdated",function(){var z=0;ops.StepsCache=function(re,q,O){function I(G,U){var te=this;this.nodeId=G,this.steps=-1,this.node=U,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function(ne){ne.setPositionBeforeElement(U),O(te.steps,ne)}}function V(G,U){var te="["+G.nodeId;return U&&(te+=" => "+U.nodeId),te+"]"}function F(){if(!0===ops.StepsCache.ENABLE_CACHE_VERIFICATION){for(var U,te,ne,G=B,oe=new core.LoopWatchDog(0,1e5),fe={};G;)oe.check(),(U=G.previousBookmark)?runtime.assert(U.nextBookmark===G,"Broken bookmark link to previous @"+V(U,G)):(runtime.assert(G===B,"Broken bookmark link @"+V(G)),runtime.assert(void 0===ae||B==B||B.steps<=ae,"Base point is damaged @"+V(G))),(te=G.nextBookmark)&&runtime.assert(te.previousBookmark===G,"Broken bookmark link to next @"+V(G,te)),(void 0===ae||G===B||G.steps<=ae)&&(runtime.assert(H.containsNode(re,G.node),"Disconnected node is being reported as undamaged @"+V(G)),U&&(ne=G.node.compareDocumentPosition(U.node),runtime.assert(0===ne||0!=(ne&de),"Bookmark order with previous does not reflect DOM order @"+V(U,G))),te&&H.containsNode(re,te.node)&&(ne=G.node.compareDocumentPosition(te.node),runtime.assert(0===ne||0!=(ne&he),"Bookmark order with next does not reflect DOM order @"+V(G,te)))),G=G.nextBookmark;Object.keys(E).forEach(function(Y){var le=E[Y];(void 0===ae||Y<=ae)&&runtime.assert(le.steps<=Y,"Bookmark step of "+le.steps+" exceeds cached step lookup for "+Y+" @"+V(le)),runtime.assert(!1===fe.hasOwnProperty(le.nodeId),"Bookmark "+V(le)+" appears twice in cached step lookup at steps "+fe[le.nodeId]+" and "+Y),fe[le.nodeId]=Y})}}function W(G){var U="";return G.nodeType===Node.ELEMENT_NODE&&(U=G.getAttributeNS("urn:webodf:names:steps","nodeId")||""),U}function A(G){var U=z.toString();return G.setAttributeNS("urn:webodf:names:steps","nodeId",U),z+=1,U}function P(G){var U,te,ne=new core.LoopWatchDog(0,1e4);for(void 0!==ae&&G>ae&&(G=ae),U=Math.floor(G/q)*q;!te&&0<=U;)te=E[U],U-=q;for(te=te||B;te.nextBookmark&&te.nextBookmark.steps<=G;)ne.check(),te=te.nextBookmark;return runtime.assert(-1===G||te.steps<=G,"Bookmark @"+V(te)+" at step "+te.steps+" exceeds requested step of "+G),te}function v(G){G.previousBookmark&&(G.previousBookmark.nextBookmark=G.nextBookmark),G.nextBookmark&&(G.nextBookmark.previousBookmark=G.previousBookmark)}function S(G){for(var U,te=null;!te&&G&&G!==re;)(U=W(G))&&(te=x[U])&&te.node!==G&&(runtime.log("Cloned node detected. Creating new bookmark"),te=null,G.removeAttributeNS("urn:webodf:names:steps","nodeId")),G=G.parentNode;return te}var B,ae,G,E={},x={},H=core.DomUtils,he=Node.DOCUMENT_POSITION_FOLLOWING,de=Node.DOCUMENT_POSITION_PRECEDING;this.updateBookmark=function(G,U){var te,oe,fe,Y,ne=Math.ceil(G/q)*q;if(void 0!==ae&&ae<G){for(fe=(oe=P(ae)).nextBookmark;fe&&fe.steps<=G;)te=fe.nextBookmark,Y=Math.ceil(fe.steps/q)*q,E[Y]===fe&&delete E[Y],H.containsNode(re,fe.node)?fe.steps=G+1:(v(fe),delete x[fe.nodeId]),fe=te;ae=G}else oe=P(G);if(fe=W(U)||A(U),(te=x[fe])?te.node!==U&&(runtime.log("Cloned node detected. Creating new bookmark"),fe=A(U),te=x[fe]=new I(fe,U)):te=x[fe]=new I(fe,U),(fe=te).steps!==G&&((te=Math.ceil(fe.steps/q)*q)!==ne&&E[te]===fe&&delete E[te],fe.steps=G),oe!==fe&&oe.nextBookmark!==fe){if(oe.steps===fe.steps)for(;0!=(fe.node.compareDocumentPosition(oe.node)&he)&&oe!==B;)oe=oe.previousBookmark;oe!==fe&&oe.nextBookmark!==fe&&(v(fe),te=oe.nextBookmark,fe.nextBookmark=oe.nextBookmark,fe.previousBookmark=oe,oe.nextBookmark=fe,te&&(te.previousBookmark=fe))}(!(oe=E[ne])||fe.steps>oe.steps)&&(E[ne]=fe),F()},this.setToClosestStep=function(G,U){var te;return F(),(te=P(G)).setIteratorPosition(U),te.steps},this.setToClosestDomPoint=function(G,U,te){var ne,oe;if(F(),G===re&&0===U)ne=B;else if(G===re&&U===re.childNodes.length)for(oe in ne=B,E)E.hasOwnProperty(oe)&&(G=E[oe]).steps>ne.steps&&(ne=G);else if(!(ne=S(G.childNodes.item(U)||G)))for(te.setUnfilteredPosition(G,U);!ne&&te.previousNode();)ne=S(te.getCurrentNode());return ne=ne||B,void 0!==ae&&ne.steps>ae&&(ne=P(ae)),ne.setIteratorPosition(te),ne.steps},this.damageCacheAfterStep=function(G){0>G&&(G=-1),(void 0===ae||G<ae)&&(ae=G),F()},G=W(re)||A(re),B=new function R(G,U,te){var ne=this;this.nodeId=G,this.steps=U,this.node=te,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function(oe){oe.setUnfilteredPosition(te,0),O(ne.steps,oe)}}(G,0,re)},ops.StepsCache.ENABLE_CACHE_VERIFICATION=!1,ops.StepsCache.Bookmark=function(){},ops.StepsCache.Bookmark.prototype.setIteratorPosition=function(re){}}(),ops.OdtStepsTranslator=function(z,re,q,O){function I(S,E,x){var H=E.getCurrentNode();E.isBeforeNode()&&F.isParagraph(H)&&(x||(S+=1),V.updateBookmark(S,H))}var V,F=odf.OdfUtils,W=core.DomUtils,A=core.PositionFilter.FilterResult.FILTER_ACCEPT,P=core.StepDirection.PREVIOUS,v=core.StepDirection.NEXT;this.convertStepsToDomPoint=function(S){var E,x;if(isNaN(S))throw new TypeError("Requested steps is not numeric ("+S+")");if(0>S)throw new RangeError("Requested steps is negative ("+S+")");for(E=V.setToClosestStep(S,re);E<S&&re.nextPosition();)(x=q.acceptPosition(re)===A)&&(E+=1),I(E,re,x);if(E!==S)throw new RangeError("Requested steps ("+S+") exceeds available steps ("+E+")");return{node:re.container(),offset:re.unfilteredDomOffset()}},this.convertDomPointToSteps=function(S,E,x){var H;if(W.containsNode(z,S)||(E=0>W.comparePoints(z,0,S,E),S=z,E=E?0:z.childNodes.length),re.setUnfilteredPosition(S,E),function R(S,E){if(!E||q.acceptPosition(S)===A)return!0;for(;S.previousPosition();)if(q.acceptPosition(S)===A){if(E(P,S.container(),S.unfilteredDomOffset()))return!0;break}for(;S.nextPosition();)if(q.acceptPosition(S)===A){if(E(v,S.container(),S.unfilteredDomOffset()))return!0;break}return!1}(re,x)||re.setUnfilteredPosition(S,E),x=re.container(),E=re.unfilteredDomOffset(),S=V.setToClosestDomPoint(x,E,re),0>W.comparePoints(re.container(),re.unfilteredDomOffset(),x,E))return 0<S?S-1:S;for(;(re.container()!==x||re.unfilteredDomOffset()!==E)&&re.nextPosition();)(H=q.acceptPosition(re)===A)&&(S+=1),I(S,re,H);return S+0},this.prime=function(){var S,E;for(S=V.setToClosestStep(0,re);re.nextPosition();)(E=q.acceptPosition(re)===A)&&(S+=1),I(S,re,E)},this.handleStepsInserted=function(S){V.damageCacheAfterStep(S.position)},this.handleStepsRemoved=function(S){V.damageCacheAfterStep(S.position-1)},V=new ops.StepsCache(z,O,function(S,E){do{if(q.acceptPosition(E)===A){I(S,E,!0);break}I(S-1,E,!1)}while(E.nextPosition())})},ops.Operation=function(){},ops.Operation.prototype.init=function(z){},ops.Operation.prototype.execute=function(z){},ops.Operation.prototype.spec=function(){},ops.TextPositionFilter=function(){function re(F,W,A,P){var v;if(W){if(q.isInlineRoot(W)&&q.isGroupingElement(A))return V;if(1===(P=q.lookLeftForCharacter(W))||2===P&&(q.scanRightForAnyCharacter(A)||q.scanRightForAnyCharacter(q.nextNode(F))))return R}else if(q.isGroupingElement(F)&&q.isInlineRoot(function z(F,W){for(;F&&W(F)!==R;)F=F.previousSibling;return F}(F.previousSibling,P)))return R;return P=null===W&&q.isParagraph(F),v=q.lookRightForCharacter(A),P?v?R:q.scanRightForAnyCharacter(A)?V:R:v?(W=W||q.previousNode(F),q.scanLeftForAnyCharacter(W)?V:R):V}var q=odf.OdfUtils,O=Node.ELEMENT_NODE,I=Node.TEXT_NODE,R=core.PositionFilter.FilterResult.FILTER_ACCEPT,V=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(F){var P,v,S,W=F.container(),A=W.nodeType;if(A!==O&&A!==I)return V;if(A===I){if(A=F.unfilteredDomOffset(),runtime.assert(A!==(P=W.data).length,"Unexpected offset."),0<A){if(!q.isODFWhitespace(F=P[A-1]))return R;if(1<A)if(q.isODFWhitespace(F=P[A-2])){if(!q.isODFWhitespace(P.substr(0,A)))return V}else S=R;else v=q.previousNode(W),q.scanLeftForNonSpace(v)&&(S=R);return S===R?q.isTrailingWhitespace(W,A)?V:R:q.isODFWhitespace(F=P[A])||q.scanLeftForAnyCharacter(q.previousNode(W))?V:R}v=F.leftNode(),S=W,S=re(W=W.parentNode,v,S,F.getNodeFilter())}else S=q.isGroupingElement(W)?re(W,v=F.leftNode(),S=F.rightNode(),F.getNodeFilter()):V;return S}},ops.OdtDocument=function(z){function re(Y){return new core.PositionIterator(Y,te,fe,!1)}function q(){var Y=z.odfContainer().getContentElement(),le=Y&&Y.localName;return runtime.assert("text"===le,"Unsupported content element type '"+le+"' for OdtDocument"),Y}function O(){return v.getDocumentElement().ownerDocument}function I(Y){for(;Y&&!(Y.namespaceURI===odf.Namespaces.officens&&"text"===Y.localName||Y.namespaceURI===odf.Namespaces.officens&&"annotation"===Y.localName);)Y=Y.parentNode;return Y}function R(Y,le,X,$){var we;return $=re($),1===X.length?we=X[0]:(we=new core.PositionFilterChain,X.forEach(we.addFilter)),(X=new core.StepIterator(we,$)).setPosition(Y,le),X}function V(Y){var le=re(q());return Y=G.convertStepsToDomPoint(Y),le.setUnfilteredPosition(Y.node,Y.offset),le}function F(Y){return Y===he}function A(Y){var le,$,X=[],we=2;runtime.assert(Y.isStep(),"positionIterator is not at a step");do{if((le=S.getContentBounds(Y))&&E.isDowngradableSpaceElement(le=le.container)){for($=le.lastChild;le.firstChild;)X.push(le.firstChild),le.parentNode.insertBefore(le.firstChild,le);le.parentNode.removeChild(le),Y.setPosition($,$.nodeType===Node.TEXT_NODE?$.length:$.childNodes.length),Y.roundToPreviousStep()}--we}while(0<we&&Y.nextStep());X.forEach(x.normalizeTextNodes)}function P(Y,le,X){return Y=Y.childNodes.item(le)||Y,(Y=E.getParagraphElement(Y))&&x.containsNode(X,Y)?Y:X}var S,de,G,U,Y,v=this,E=odf.OdfUtils,x=core.DomUtils,H={},B={},ae=new core.EventNotifier([ops.Document.signalMemberAdded,ops.Document.signalMemberUpdated,ops.Document.signalMemberRemoved,ops.Document.signalCursorAdded,ops.Document.signalCursorRemoved,ops.Document.signalCursorMoved,ops.OdtDocument.signalParagraphChanged,ops.OdtDocument.signalParagraphStyleModified,ops.OdtDocument.signalCommonStyleCreated,ops.OdtDocument.signalCommonStyleDeleted,ops.OdtDocument.signalTableAdded,ops.OdtDocument.signalOperationStart,ops.OdtDocument.signalOperationEnd,ops.OdtDocument.signalProcessingBatchStart,ops.OdtDocument.signalProcessingBatchEnd,ops.OdtDocument.signalUndoStackChanged,ops.OdtDocument.signalStepsInserted,ops.OdtDocument.signalStepsRemoved,ops.OdtDocument.signalMetadataUpdated,ops.OdtDocument.signalAnnotationAdded]),he=core.StepDirection.NEXT,te=NodeFilter.SHOW_ALL,ne=new gui.BlacklistNamespaceNodeFilter(["urn:webodf:names:cursor","urn:webodf:names:editinfo"]),oe=new gui.OdfTextBodyNodeFilter,fe=new core.NodeFilterChain([ne,oe]);this.createPositionIterator=re,this.getDocumentElement=function(){return z.odfContainer().rootElement},this.cloneDocumentElement=function(){var Y=v.getDocumentElement(),le=z.getAnnotationViewManager();return le&&le.forgetAnnotations(),Y=Y.cloneNode(!0),z.refreshAnnotations(),v.fixCursorPositions(),Y},this.setDocumentElement=function(Y){var le=z.odfContainer();ae.unsubscribe(ops.OdtDocument.signalStepsInserted,G.handleStepsInserted),ae.unsubscribe(ops.OdtDocument.signalStepsRemoved,G.handleStepsRemoved),le.setRootElement(Y),z.setOdfContainer(le,!0),z.refreshCSS(),Y=q(),G=new ops.OdtStepsTranslator(Y,re(Y),de,500),ae.subscribe(ops.OdtDocument.signalStepsInserted,G.handleStepsInserted),ae.subscribe(ops.OdtDocument.signalStepsRemoved,G.handleStepsRemoved)},this.getDOMDocument=O,this.getRootElement=I,this.createStepIterator=R,this.getIteratorAtPosition=V,this.convertCursorStepToDomPoint=function(Y){return G.convertStepsToDomPoint(Y)},this.convertDomPointToCursorStep=function(Y,le,X){var $;return X===he&&($=F),G.convertDomPointToSteps(Y,le,$)},this.convertDomToCursorRange=function(Y){var le;return{position:le=G.convertDomPointToSteps(Y.anchorNode,Y.anchorOffset),length:(Y=Y.anchorNode===Y.focusNode&&Y.anchorOffset===Y.focusOffset?le:G.convertDomPointToSteps(Y.focusNode,Y.focusOffset))-le}},this.convertCursorToDomRange=function(Y,le){var $,we,X=O().createRange();return $=G.convertStepsToDomPoint(Y),le?(we=G.convertStepsToDomPoint(Y+le),0<le?(X.setStart($.node,$.offset),X.setEnd(we.node,we.offset)):(X.setStart(we.node,we.offset),X.setEnd($.node,$.offset))):X.setStart($.node,$.offset),X},this.upgradeWhitespacesAtPosition=function(Y){var X,le=V(Y),$=(le=new core.StepIterator(de,le),2);runtime.assert(le.isStep(),"positionIterator is not at a step (requested step: "+Y+")");do{if((X=S.getContentBounds(le))&&(Y=X.container,X=X.startOffset,Y.nodeType===Node.TEXT_NODE&&E.isSignificantWhitespace(Y,X))){runtime.assert(" "===Y.data[X],"upgradeWhitespaceToElement: textNode.data[offset] should be a literal space");var we=Y.ownerDocument.createElementNS(odf.Namespaces.textns,"text:s"),ue=Y.parentNode,ve=Y;we.appendChild(Y.ownerDocument.createTextNode(" ")),1===Y.length?ue.replaceChild(we,Y):(Y.deleteData(X,1),0<X&&(X<Y.length&&Y.splitText(X),ve=Y.nextSibling),ue.insertBefore(we,ve)),le.setPosition(Y=we,Y.childNodes.length),le.roundToPreviousStep()}--$}while(0<$&&le.nextStep())},this.downgradeWhitespaces=A,this.downgradeWhitespacesAtPosition=function(Y){Y=V(Y),A(Y=new core.StepIterator(de,Y))},this.getTextNodeAtStep=function(Y,le){var we,X=V(Y),$=X.container(),ue=0,ve=null;if($.nodeType===Node.TEXT_NODE?(we=$,ue=X.unfilteredDomOffset(),0<we.length&&(0<ue&&(we=we.splitText(ue)),we.parentNode.insertBefore(O().createTextNode(""),we),we=we.previousSibling,ue=0)):(we=O().createTextNode(""),ue=0,$.insertBefore(we,X.rightNode())),le){if(H[le]&&v.getCursorPosition(le)===Y){for(ve=H[le].getNode();ve.nextSibling&&"cursor"===ve.nextSibling.localName;)ve.parentNode.insertBefore(ve.nextSibling,ve);0<we.length&&we.nextSibling!==ve&&(we=O().createTextNode(""),ue=0),ve.parentNode.insertBefore(we,ve)}}else for(;we.nextSibling&&"cursor"===we.nextSibling.localName;)we.parentNode.insertBefore(we.nextSibling,we);for(;we.previousSibling&&we.previousSibling.nodeType===Node.TEXT_NODE;)(X=we.previousSibling).appendData(we.data),ue=X.length,(we=X).parentNode.removeChild(we.nextSibling);for(;we.nextSibling&&we.nextSibling.nodeType===Node.TEXT_NODE;)we.appendData((X=we.nextSibling).data),we.parentNode.removeChild(X);return{textNode:we,offset:ue}},this.fixCursorPositions=function(){Object.keys(H).forEach(function(Y){var we,ue,ve,le=H[Y],X=I(le.getNode()),$=v.createRootFilter(X),Ae=!1;we=P((ve=le.getSelectedRange()).startContainer,ve.startOffset,X),ue=R(ve.startContainer,ve.startOffset,[de,$],we),ve.collapsed?X=ue:(we=P(ve.endContainer,ve.endOffset,X),X=R(ve.endContainer,ve.endOffset,[de,$],we)),ue.isStep()&&X.isStep()?ue.container()!==X.container()||ue.offset()!==X.offset()||ve.collapsed&&le.getAnchorNode()===le.getNode()||(Ae=!0,ve.setStart(ue.container(),ue.offset()),ve.collapse(!0)):(Ae=!0,runtime.assert(ue.roundToClosestStep(),"No walkable step found for cursor owned by "+Y),ve.setStart(ue.container(),ue.offset()),runtime.assert(X.roundToClosestStep(),"No walkable step found for cursor owned by "+Y),ve.setEnd(X.container(),X.offset())),Ae&&(le.setSelectedRange(ve,le.hasForwardSelection()),v.emit(ops.Document.signalCursorMoved,le))})},this.getCursorPosition=function(Y){return(Y=H[Y])?G.convertDomPointToSteps(Y.getNode(),0):0},this.getCursorSelection=function(Y){var le=0,X=0;return(Y=H[Y])&&(le=G.convertDomPointToSteps(Y.getNode(),0),X=G.convertDomPointToSteps(Y.getAnchorNode(),0)),{position:X,length:le-X}},this.getPositionFilter=function(){return de},this.getOdfCanvas=function(){return z},this.getCanvas=function(){return z},this.getRootNode=q,this.addMember=function(Y){runtime.assert(void 0===B[Y.getMemberId()],"This member already exists"),B[Y.getMemberId()]=Y},this.getMember=function(Y){return B.hasOwnProperty(Y)?B[Y]:null},this.removeMember=function(Y){delete B[Y]},this.getCursor=function(Y){return H[Y]},this.hasCursor=function(Y){return H.hasOwnProperty(Y)},this.getMemberIds=function(){return Object.keys(B)},this.addCursor=function(Y){runtime.assert(Boolean(Y),"OdtDocument::addCursor without cursor");var le=Y.getMemberId(),X=v.convertCursorToDomRange(0,0);runtime.assert("string"==typeof le,"OdtDocument::addCursor has cursor without memberid"),runtime.assert(!H[le],"OdtDocument::addCursor is adding a duplicate cursor with memberid "+le),Y.setSelectedRange(X,!0),H[le]=Y},this.removeCursor=function(Y){var le=H[Y];return!!le&&(le.removeFromDocument(),delete H[Y],v.emit(ops.Document.signalCursorRemoved,Y),!0)},this.moveCursor=function(Y,le,X,$){Y=H[Y],le=v.convertCursorToDomRange(le,X),Y&&(Y.setSelectedRange(le,0<=X),Y.setSelectionType($||ops.OdtCursor.RangeSelection))},this.getFormatting=function(){return z.getFormatting()},this.emit=function(Y,le){ae.emit(Y,le)},this.subscribe=function(Y,le){ae.subscribe(Y,le)},this.unsubscribe=function(Y,le){ae.unsubscribe(Y,le)},this.createRootFilter=function(Y){return new RootFilter(Y,H,I)},this.close=function(Y){Y()},this.destroy=function(Y){Y()},Y=q(),de=new ops.TextPositionFilter,S=new odf.StepUtils,G=new ops.OdtStepsTranslator(Y,re(Y),de,500),ae.subscribe(ops.OdtDocument.signalStepsInserted,G.handleStepsInserted),ae.subscribe(ops.OdtDocument.signalStepsRemoved,G.handleStepsRemoved),ae.subscribe(ops.OdtDocument.signalOperationEnd,function W(Y){var le=($=Y.spec()).memberid,X=new Date($.timestamp).toISOString(),$=z.odfContainer();Y.isEdit&&(le=v.getMember(le).getProperties().fullName,$.setMetadata({"dc:creator":le,"dc:date":X},null),le={setProperties:{"dc:creator":le,"dc:date":X},removedProperties:[]},U||(le.setProperties["meta:editing-cycles"]=$.incrementEditingCycles(),$.setMetadata(null,["meta:editing-duration","meta:document-statistic"])),U=Y,v.emit(ops.OdtDocument.signalMetadataUpdated,le))}),ae.subscribe(ops.OdtDocument.signalProcessingBatchEnd,core.Task.processTasks)},ops.OdtDocument.signalParagraphChanged="paragraph/changed",ops.OdtDocument.signalTableAdded="table/added",ops.OdtDocument.signalCommonStyleCreated="style/created",ops.OdtDocument.signalCommonStyleDeleted="style/deleted",ops.OdtDocument.signalParagraphStyleModified="paragraphstyle/modified",ops.OdtDocument.signalOperationStart="operation/start",ops.OdtDocument.signalOperationEnd="operation/end",ops.OdtDocument.signalProcessingBatchStart="router/batchstart",ops.OdtDocument.signalProcessingBatchEnd="router/batchend",ops.OdtDocument.signalUndoStackChanged="undo/changed",ops.OdtDocument.signalStepsInserted="steps/inserted",ops.OdtDocument.signalStepsRemoved="steps/removed",ops.OdtDocument.signalMetadataUpdated="metadata/updated",ops.OdtDocument.signalAnnotationAdded="annotation/added",ops.OpAddAnnotation=function(){function z(F,W,A){var P=F.getTextNodeAtStep(A,re);P&&(A=(F=P.textNode).parentNode,P.offset!==F.length&&F.splitText(P.offset),A.insertBefore(W,F.nextSibling),0===F.length&&A.removeChild(F))}var re,q,O,I,R,V;this.init=function(F){re=F.memberid,q=parseInt(F.timestamp,10),O=parseInt(F.position,10),I=void 0!==F.length?parseInt(F.length,10)||0:void 0,R=F.name},this.isEdit=!0,this.group=void 0,this.execute=function(F){var A,P,W=F.getCursor(re);V=F.getDOMDocument();var S,E,x,v=new Date(q);return(S=V.createElementNS(odf.Namespaces.officens,"office:annotation")).setAttributeNS(odf.Namespaces.officens,"office:name",R),(A=V.createElementNS(odf.Namespaces.dcns,"dc:creator")).setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",re),A.textContent=F.getMember(re).getProperties().fullName,(P=V.createElementNS(odf.Namespaces.dcns,"dc:date")).appendChild(V.createTextNode(v.toISOString())),v=V.createElementNS(odf.Namespaces.textns,"text:list"),E=V.createElementNS(odf.Namespaces.textns,"text:list-item"),x=V.createElementNS(odf.Namespaces.textns,"text:p"),E.appendChild(x),v.appendChild(E),S.appendChild(A),S.appendChild(P),S.appendChild(v),void 0!==I&&((A=V.createElementNS(odf.Namespaces.officens,"office:annotation-end")).setAttributeNS(odf.Namespaces.officens,"office:name",R),S.annotationEndElement=A,z(F,A,O+I)),z(F,S,O),F.emit(ops.OdtDocument.signalStepsInserted,{position:O}),W&&(A=V.createRange(),P=S.getElementsByTagNameNS(odf.Namespaces.textns,"p")[0],A.selectNodeContents(P),W.setSelectedRange(A,!1),W.setSelectionType(ops.OdtCursor.RangeSelection),F.emit(ops.Document.signalCursorMoved,W)),F.getOdfCanvas().addAnnotation(S),F.fixCursorPositions(),F.emit(ops.OdtDocument.signalAnnotationAdded,{memberId:re,annotation:S}),!0},this.spec=function(){return{optype:"AddAnnotation",memberid:re,timestamp:q,position:O,length:I,name:R}}},ops.OpAddCursor=function(){var z,re;this.init=function(q){z=q.memberid,re=q.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(q){var O=q.getCursor(z);return!O&&(O=new ops.OdtCursor(z,q),q.addCursor(O),q.emit(ops.Document.signalCursorAdded,O),!0)},this.spec=function(){return{optype:"AddCursor",memberid:z,timestamp:re}}},ops.OpAddMember=function(){var z,re,q;this.init=function(O){z=O.memberid,re=parseInt(O.timestamp,10),q=O.setProperties},this.isEdit=!1,this.group=void 0,this.execute=function(O){var I;return!O.getMember(z)&&(I=new ops.Member(z,q),O.addMember(I),O.emit(ops.Document.signalMemberAdded,I),!0)},this.spec=function(){return{optype:"AddMember",memberid:z,timestamp:re,setProperties:q}}},ops.OpAddStyle=function(){var z,re,q,O,I,R,V=odf.Namespaces.stylens;this.init=function(F){z=F.memberid,re=F.timestamp,q=F.styleName,O=F.styleFamily,I="true"===F.isAutomaticStyle||!0===F.isAutomaticStyle,R=F.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(F){var W=F.getOdfCanvas().odfContainer(),A=F.getFormatting(),P=F.getDOMDocument().createElementNS(V,"style:style");return!!P&&(R&&A.updateStyle(P,R),P.setAttributeNS(V,"style:family",O),P.setAttributeNS(V,"style:name",q),I?W.rootElement.automaticStyles.appendChild(P):W.rootElement.styles.appendChild(P),F.getOdfCanvas().refreshCSS(),I||F.emit(ops.OdtDocument.signalCommonStyleCreated,{name:q,family:O}),!0)},this.spec=function(){return{optype:"AddStyle",memberid:z,timestamp:re,styleName:q,styleFamily:O,isAutomaticStyle:I,setProperties:R}}},odf.ObjectNameGenerator=function(z,re){function q(E,x){var H={};this.generateName=function(){var he,B=x(),ae=0;do{he=E+ae,ae+=1}while(H[he]||B[he]);return H[he]=!0,he}}var I=odf.Namespaces.stylens,R=odf.Namespaces.drawns,V=odf.Namespaces.xlinkns,F=(new core.Utils).hashString(re),W=null,A=null,P=null,v={},S={};this.generateStyleName=function(){return null===W&&(W=new q("auto"+F+"_",function(){return function O(){var E={};return[z.rootElement.automaticStyles,z.rootElement.styles].forEach(function(x){for(x=x.firstElementChild;x;)x.namespaceURI===I&&"style"===x.localName&&(E[x.getAttributeNS(I,"name")]=!0),x=x.nextElementSibling}),E}()})),W.generateName()},this.generateFrameName=function(){var E,x,H;if(null===A){for(x=z.rootElement.body.getElementsByTagNameNS(R,"frame"),E=0;E<x.length;E+=1)H=x.item(E),v[H.getAttributeNS(R,"name")]=!0;A=new q("fr"+F+"_",function(){return v})}return A.generateName()},this.generateImageName=function(){var E,x,H;if(null===P){for(H=z.rootElement.body.getElementsByTagNameNS(R,"image"),E=0;E<H.length;E+=1)x=(x=(x=H.item(E)).getAttributeNS(V,"href")).substring(9,x.lastIndexOf(".")),S[x]=!0;P=new q("img"+F+"_",function(){return S})}return P.generateName()}},odf.TextStyleApplicator=function(z,re,q){function O(A){function P(S,E){return"object"==typeof S&&"object"==typeof E?Object.keys(S).every(function(x){return P(S[x],E[x])}):S===E}var v={};this.isStyleApplied=function(S){return S=re.getAppliedStylesForElement(S,v).styleProperties,P(A,S)}}function I(A){var P={};this.applyStyleToContainer=function(v){var S;S=v.getAttributeNS(F,"style-name");var E=v.ownerDocument;if(!P.hasOwnProperty(S=S||"")){var H,x=S;H=S?re.createDerivedStyleObject(S,"text",A):A,E=E.createElementNS(W,"style:style"),re.updateStyle(E,H),E.setAttributeNS(W,"style:name",z.generateStyleName()),E.setAttributeNS(W,"style:family","text"),E.setAttributeNS("urn:webodf:names:scope","scope","document-content"),q.appendChild(E),P[x]=E}S=P[S].getAttributeNS(W,"name"),v.setAttributeNS(F,"text:style-name",S)}}var V=core.DomUtils,F=odf.Namespaces.textns,W=odf.Namespaces.stylens;this.applyStyle=function(A,P,v){var x,H,B,S={};runtime.assert(v&&v.hasOwnProperty("style:text-properties"),"applyStyle without any text properties"),S["style:text-properties"]=v["style:text-properties"],H=new I(S),B=new O(S),A.forEach(function(ae){!1===B.isStyleApplied(ae)&&(x=function R(A,P){var E,x,H,v=A.ownerDocument,S=A.parentNode,B=new core.LoopWatchDog(1e4);for((x=[]).push(A),H=A.nextSibling;H&&V.rangeContainsNode(P,H);)B.check(),x.push(H),H=H.nextSibling;if("span"!==S.localName||S.namespaceURI!==F?(E=v.createElementNS(F,"text:span"),S.insertBefore(E,A),v=!1):(A.previousSibling&&!V.rangeContainsNode(P,S.firstChild)?(E=S.cloneNode(!1),S.parentNode.insertBefore(E,S.nextSibling)):E=S,v=!0),x.forEach(function(ae){ae.parentNode!==E&&E.appendChild(ae)}),H&&v)for(x=E.cloneNode(!1),E.parentNode.insertBefore(x,E.nextSibling);H;)B.check(),v=H.nextSibling,x.appendChild(H),H=v;return E}(ae,P),H.applyStyleToContainer(x))})}},ops.OpApplyDirectStyling=function(){var re,q,O,I,R,V=odf.OdfUtils,F=core.DomUtils;this.init=function(W){re=W.memberid,q=W.timestamp,O=parseInt(W.position,10),I=parseInt(W.length,10),R=W.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(W){var A=W.convertCursorToDomRange(O,I),P=V.getParagraphElements(A);return function z(W,A,P){var v=W.getOdfCanvas().odfContainer(),S=F.splitBoundaries(A),E=V.getTextNodes(A,!1);new odf.TextStyleApplicator(new odf.ObjectNameGenerator(v,re),W.getFormatting(),v.rootElement.automaticStyles).applyStyle(E,A,P),S.forEach(F.normalizeTextNodes)}(W,A,R),A.detach(),W.getOdfCanvas().refreshCSS(),W.fixCursorPositions(),P.forEach(function(v){W.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:v,memberId:re,timeStamp:q})}),W.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"ApplyDirectStyling",memberid:re,timestamp:q,position:O,length:I,setProperties:R}}},ops.OpApplyHyperlink=function(){var re,q,O,I,R,V=core.DomUtils,F=odf.OdfUtils;this.init=function(W){re=W.memberid,q=W.timestamp,O=W.position,I=W.length,R=W.hyperlink},this.isEdit=!0,this.group=void 0,this.execute=function(W){var A=W.getDOMDocument(),P=W.convertCursorToDomRange(O,I),v=V.splitBoundaries(P),S=[],E=F.getTextNodes(P,!1);return 0!==E.length&&(E.forEach(function(x){var H=F.getParagraphElement(x);runtime.assert(!1===function z(W){for(;W;){if(F.isHyperlink(W))return!0;W=W.parentNode}return!1}(x),"The given range should not contain any link.");var B=R,ae=A.createElementNS(odf.Namespaces.textns,"text:a");ae.setAttributeNS(odf.Namespaces.xlinkns,"xlink:type","simple"),ae.setAttributeNS(odf.Namespaces.xlinkns,"xlink:href",B),x.parentNode.insertBefore(ae,x),ae.appendChild(x),-1===S.indexOf(H)&&S.push(H)}),v.forEach(V.normalizeTextNodes),P.detach(),W.fixCursorPositions(),W.getOdfCanvas().refreshSize(),W.getOdfCanvas().rerenderAnnotations(),S.forEach(function(x){W.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:x,memberId:re,timeStamp:q})}),!0)},this.spec=function(){return{optype:"ApplyHyperlink",memberid:re,timestamp:q,position:O,length:I,hyperlink:R}}},ops.OpInsertImage=function(){var z,re,q,O,I,R,V,F,W=odf.Namespaces.drawns,A=odf.Namespaces.svgns,P=odf.Namespaces.textns,v=odf.Namespaces.xlinkns,S=odf.OdfUtils;this.init=function(E){z=E.memberid,re=E.timestamp,q=E.position,O=E.filename,I=E.frameWidth,R=E.frameHeight,V=E.frameStyleName,F=E.frameName},this.isEdit=!0,this.group=void 0,this.execute=function(E){var H,B,x=E.getOdfCanvas();if(!(ae=E.getTextNodeAtStep(q,z)))return!1;B=S.getParagraphElement(H=ae.textNode);var ae=ae.offset!==H.length?H.splitText(ae.offset):H.nextSibling,he=(de=E.getDOMDocument()).createElementNS(W,"draw:image"),de=de.createElementNS(W,"draw:frame");return he.setAttributeNS(v,"xlink:href",O),he.setAttributeNS(v,"xlink:type","simple"),he.setAttributeNS(v,"xlink:show","embed"),he.setAttributeNS(v,"xlink:actuate","onLoad"),de.setAttributeNS(W,"draw:style-name",V),de.setAttributeNS(W,"draw:name",F),de.setAttributeNS(P,"text:anchor-type","as-char"),de.setAttributeNS(A,"svg:width",I),de.setAttributeNS(A,"svg:height",R),de.appendChild(he),H.parentNode.insertBefore(de,ae),E.emit(ops.OdtDocument.signalStepsInserted,{position:q}),0===H.length&&H.parentNode.removeChild(H),x.addCssForFrameWithImage(de),x.refreshCSS(),E.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:B,memberId:z,timeStamp:re}),x.rerenderAnnotations(),!0},this.spec=function(){return{optype:"InsertImage",memberid:z,timestamp:re,filename:O,position:q,frameWidth:I,frameHeight:R,frameStyleName:V,frameName:F}}},ops.OpInsertTable=function(){function z(v,S){var E;if(1===A.length)E=A[0];else if(3===A.length)switch(v){case 0:E=A[0];break;case O-1:E=A[2];break;default:E=A[1]}else E=A[v];if(1===E.length)return E[0];if(3===E.length)switch(S){case 0:return E[0];case I-1:return E[2];default:return E[1]}return E[S]}var re,q,O,I,R,V,F,W,A,P=odf.OdfUtils;this.init=function(v){re=v.memberid,q=v.timestamp,R=v.position,O=v.initialRows,I=v.initialColumns,V=v.tableName,F=v.tableStyleName,W=v.tableColumnStyleName,A=v.tableCellStyleMatrix},this.isEdit=!0,this.group=void 0,this.execute=function(v){var S=v.getTextNodeAtStep(R),E=v.getRootNode();if(S){var ae,he,de,G,x=v.getDOMDocument(),H=x.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table"),B=x.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-column");for(F&&H.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",F),V&&H.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:name",V),B.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:number-columns-repeated",I),W&&B.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",W),H.appendChild(B),de=0;de<O;de+=1){for(B=x.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-row"),G=0;G<I;G+=1)ae=x.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-cell"),(he=z(de,G))&&ae.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",he),he=x.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:p"),ae.appendChild(he),B.appendChild(ae);H.appendChild(B)}return S=P.getParagraphElement(S.textNode),E.insertBefore(H,S.nextSibling),v.emit(ops.OdtDocument.signalStepsInserted,{position:R}),v.getOdfCanvas().refreshSize(),v.emit(ops.OdtDocument.signalTableAdded,{tableElement:H,memberId:re,timeStamp:q}),v.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertTable",memberid:re,timestamp:q,position:R,initialRows:O,initialColumns:I,tableName:V,tableStyleName:F,tableColumnStyleName:W,tableCellStyleMatrix:A}}},ops.OpInsertText=function(){function z(F){return"\t"!==F&&V.isODFWhitespace(F)}var re,q,O,I,R,V=odf.OdfUtils;this.init=function(F){re=F.memberid,q=F.timestamp,O=F.position,R=F.text,I="true"===F.moveCursor||!0===F.moveCursor},this.isEdit=!0,this.group=void 0,this.execute=function(F){var W,A,P,E,H,ae,v=null,S=F.getDOMDocument(),x=0,B=F.getCursor(re);if(F.upgradeWhitespacesAtPosition(O),W=F.getTextNodeAtStep(O)){for(v=(A=W.textNode).nextSibling,P=A.parentNode,E=V.getParagraphElement(A),ae=0;ae<R.length;ae+=1){if(!(H="\t"===R[ae])){var he=ae;H=z((H=R)[he])&&(0===he||he===H.length-1||z(H[he-1]))}H&&(0===x?(W.offset!==A.length&&(v=A.splitText(W.offset)),0<ae&&A.appendData(R.substring(0,ae))):x<ae&&(x=R.substring(x,ae),P.insertBefore(S.createTextNode(x),v)),x=ae+1,"\t"===R[ae]?(H=S.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:tab")).appendChild(S.createTextNode("\t")):(" "!==R[ae]&&runtime.log("WARN: InsertText operation contains non-tab, non-space whitespace character (character code "+R.charCodeAt(ae)+")"),(H=S.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:s")).appendChild(S.createTextNode(" "))),P.insertBefore(H,v))}return 0===x?A.insertData(W.offset,R):x<R.length&&(W=R.substring(x),P.insertBefore(S.createTextNode(W),v)),v=A.nextSibling,(P=A.parentNode).removeChild(A),P.insertBefore(A,v),0===A.length&&A.parentNode.removeChild(A),F.emit(ops.OdtDocument.signalStepsInserted,{position:O}),B&&I&&(F.moveCursor(re,O+R.length,0),F.emit(ops.Document.signalCursorMoved,B)),F.downgradeWhitespacesAtPosition(O),F.downgradeWhitespacesAtPosition(O+R.length),F.getOdfCanvas().refreshSize(),F.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:E,memberId:re,timeStamp:q}),F.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertText",memberid:re,timestamp:q,position:O,text:R,moveCursor:I}}},odf.CollapsingRules=function(z){function re(R){return O.isODFNode(R)||"br"===R.localName&&O.isLineBreak(R.parentNode)||R.nodeType===Node.TEXT_NODE&&O.isODFNode(R.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}var O=odf.OdfUtils,I=core.DomUtils;this.mergeChildrenIntoParent=function q(R){var V;return R.nodeType===Node.TEXT_NODE?(V=R.parentNode).removeChild(R):V=I.removeUnwantedNodes(R,re),(R=V)&&(R=!O.isParagraph(R=V)&&R!==z&&O.hasNoODFContent(R)),R?q(V):V}},ops.OpMergeParagraph=function(){function z(E){return odf.OdfUtils.isInlineRoot(E)?NodeFilter.FILTER_SKIP:P.isGroupingElement(E)&&P.hasNoODFContent(E)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}function re(E){if(E.nodeType===Node.TEXT_NODE){if(0===E.length)return runtime.log("WARN: Empty text node found during merge operation"),!0;if(P.isODFWhitespace(E.data)&&!1===P.isSignificantWhitespace(E,0))return!0;E="#text"}else E=(E.prefix?E.prefix+":":"")+E.localName;return runtime.log("WARN: Unexpected text element found near paragraph boundary ["+E+"]"),!1}function q(E){E.collapsed||(v.splitBoundaries(E),(E=P.getTextElements(E,!1,!0).filter(re)).forEach(function(x){x.parentNode.removeChild(x)}))}function O(E,x,H){E=E.convertCursorStepToDomPoint(x);var B=P.getParagraphElement(E.node,E.offset);return runtime.assert(Boolean(B),"Paragraph not found at step "+x),H&&H.setPosition(E.node,E.offset),B}var I,R,V,F,W,A,P=odf.OdfUtils,v=core.DomUtils,S=odf.Namespaces.textns;this.init=function(E){I=E.memberid,R=E.timestamp,V=E.moveCursor,F=E.paragraphStyleName,W=parseInt(E.sourceStartPosition,10),A=parseInt(E.destinationStartPosition,10)},this.isEdit=!0,this.group=void 0,this.execute=function(E){var x,H,B=E.getCursor(I);x=E.getRootNode();var de,ae=new odf.CollapsingRules(x),he=E.createStepIterator(x,0,[E.getPositionFilter()],x);runtime.assert(A<W,"Destination paragraph ("+A+") must be before source paragraph ("+W+")"),H=O(E,A),x=O(E,W,he),he.previousStep(),runtime.assert(v.containsNode(H,he.container()),"Destination paragraph must be adjacent to the source paragraph"),de=H.ownerDocument.createRange(),he.setPosition(H,H.childNodes.length),he.roundToPreviousStep(),de.setStart(he.container(),he.offset()),de.setEnd(H,H.childNodes.length),q(de),de=H.childNodes.length;var G=x.ownerDocument.createRange();for(he.setPosition(x,0),he.roundToNextStep(),G.setStart(x,0),G.setEnd(he.container(),he.offset()),q(G),G=x.firstChild;G;)"editinfo"===G.localName?x.removeChild(G):(H.appendChild(G),v.removeUnwantedNodes(G,z)),G=x.firstChild;return runtime.assert(0===x.childNodes.length,"Source paragraph should be empty before it is removed"),ae.mergeChildrenIntoParent(x),E.emit(ops.OdtDocument.signalStepsRemoved,{position:W-1}),he.setPosition(H,de),he.roundToClosestStep(),he.previousStep()||he.roundToNextStep(),E.downgradeWhitespaces(he),F?H.setAttributeNS(S,"text:style-name",F):H.removeAttributeNS(S,"style-name"),B&&V&&(E.moveCursor(I,W-1,0),E.emit(ops.Document.signalCursorMoved,B)),E.fixCursorPositions(),E.getOdfCanvas().refreshSize(),E.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:H,memberId:I,timeStamp:R}),E.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"MergeParagraph",memberid:I,timestamp:R,moveCursor:V,paragraphStyleName:F,sourceStartPosition:W,destinationStartPosition:A}}},ops.OpMoveCursor=function(){var z,re,q,O,I;this.init=function(R){z=R.memberid,re=R.timestamp,q=R.position,O=R.length||0,I=R.selectionType||ops.OdtCursor.RangeSelection},this.isEdit=!1,this.group=void 0,this.execute=function(R){var F,V=R.getCursor(z);return!!V&&(F=R.convertCursorToDomRange(q,O),V.setSelectedRange(F,0<=O),V.setSelectionType(I),R.emit(ops.Document.signalCursorMoved,V),!0)},this.spec=function(){return{optype:"MoveCursor",memberid:z,timestamp:re,position:q,length:O,selectionType:I}}},ops.OpRemoveAnnotation=function(){var z,re,q,O,I=core.DomUtils;this.init=function(R){z=R.memberid,re=R.timestamp,q=parseInt(R.position,10),O=parseInt(R.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(R){function V(A){W.parentNode.insertBefore(A,W)}for(var W,F=R.getIteratorAtPosition(q).container();F.namespaceURI!==odf.Namespaces.officens||"annotation"!==F.localName;)F=F.parentNode;return null!==F&&(F=(W=F).annotationEndElement,R.getOdfCanvas().forgetAnnotation(W),I.getElementsByTagNameNS(W,"urn:webodf:names:cursor","cursor").forEach(V),I.getElementsByTagNameNS(W,"urn:webodf:names:cursor","anchor").forEach(V),W.parentNode.removeChild(W),F&&F.parentNode.removeChild(F),R.emit(ops.OdtDocument.signalStepsRemoved,{position:0<q?q-1:q}),R.getOdfCanvas().rerenderAnnotations(),R.fixCursorPositions(),!0)},this.spec=function(){return{optype:"RemoveAnnotation",memberid:z,timestamp:re,position:q,length:O}}},ops.OpRemoveBlob=function(){var z,re,q;this.init=function(O){z=O.memberid,re=O.timestamp,q=O.filename},this.isEdit=!0,this.group=void 0,this.execute=function(O){return O.getOdfCanvas().odfContainer().removeBlob(q),!0},this.spec=function(){return{optype:"RemoveBlob",memberid:z,timestamp:re,filename:q}}},ops.OpRemoveCursor=function(){var z,re;this.init=function(q){z=q.memberid,re=q.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(q){return!!q.removeCursor(z)},this.spec=function(){return{optype:"RemoveCursor",memberid:z,timestamp:re}}},ops.OpRemoveHyperlink=function(){var z,re,q,O,I=core.DomUtils,R=odf.OdfUtils;this.init=function(V){z=V.memberid,re=V.timestamp,q=V.position,O=V.length},this.isEdit=!0,this.group=void 0,this.execute=function(V){var F=V.convertCursorToDomRange(q,O),W=R.getHyperlinkElements(F);return runtime.assert(1===W.length,"The given range should only contain a single link."),W=I.mergeIntoParent(W[0]),F.detach(),V.fixCursorPositions(),V.getOdfCanvas().refreshSize(),V.getOdfCanvas().rerenderAnnotations(),V.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:R.getParagraphElement(W),memberId:z,timeStamp:re}),!0},this.spec=function(){return{optype:"RemoveHyperlink",memberid:z,timestamp:re,position:q,length:O}}},ops.OpRemoveMember=function(){var z,re;this.init=function(q){z=q.memberid,re=parseInt(q.timestamp,10)},this.isEdit=!1,this.group=void 0,this.execute=function(q){return!!q.getMember(z)&&(q.removeMember(z),q.emit(ops.Document.signalMemberRemoved,z),!0)},this.spec=function(){return{optype:"RemoveMember",memberid:z,timestamp:re}}},ops.OpRemoveStyle=function(){var z,re,q,O;this.init=function(I){z=I.memberid,re=I.timestamp,q=I.styleName,O=I.styleFamily},this.isEdit=!0,this.group=void 0,this.execute=function(I){var R=I.getFormatting().getStyleElement(q,O);return!!R&&(R.parentNode.removeChild(R),I.getOdfCanvas().refreshCSS(),I.emit(ops.OdtDocument.signalCommonStyleDeleted,{name:q,family:O}),!0)},this.spec=function(){return{optype:"RemoveStyle",memberid:z,timestamp:re,styleName:q,styleFamily:O}}},ops.OpRemoveText=function(){var z,re,q,O,I=odf.OdfUtils,R=core.DomUtils;this.init=function(V){runtime.assert(0<=V.length,"OpRemoveText only supports positive lengths"),z=V.memberid,re=V.timestamp,q=parseInt(V.position,10),O=parseInt(V.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(V){var F,W,A,P=V.getCursor(z),v=new odf.CollapsingRules(V.getRootNode());return V.upgradeWhitespacesAtPosition(q),V.upgradeWhitespacesAtPosition(q+O),F=V.convertCursorToDomRange(q,O),R.splitBoundaries(F),W=I.getTextElements(F,!1,!0),A=I.getParagraphElement(F.startContainer,F.startOffset),runtime.assert(void 0!==A,"Attempting to remove text outside a paragraph element"),F.detach(),W.forEach(function(S){S.parentNode?(runtime.assert(R.containsNode(A,S),"RemoveText only supports removing elements within the same paragraph"),v.mergeChildrenIntoParent(S)):runtime.log("WARN: text element has already been removed from it's container")}),V.emit(ops.OdtDocument.signalStepsRemoved,{position:q}),V.downgradeWhitespacesAtPosition(q),V.fixCursorPositions(),V.getOdfCanvas().refreshSize(),V.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:A,memberId:z,timeStamp:re}),P&&(P.resetSelectionType(),V.emit(ops.Document.signalCursorMoved,P)),V.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"RemoveText",memberid:z,timestamp:re,position:q,length:O}}},ops.OpSetBlob=function(){var z,re,q,O,I;this.init=function(R){z=R.memberid,re=R.timestamp,q=R.filename,O=R.mimetype,I=R.content},this.isEdit=!0,this.group=void 0,this.execute=function(R){return R.getOdfCanvas().odfContainer().setBlob(q,O,I),!0},this.spec=function(){return{optype:"SetBlob",memberid:z,timestamp:re,filename:q,mimetype:O,content:I}}},ops.OpSetParagraphStyle=function(){var re,q,O,I,R=odf.OdfUtils;this.init=function(V){re=V.memberid,q=V.timestamp,O=V.position,I=V.styleName},this.isEdit=!0,this.group=void 0,this.execute=function(V){var F,W;return F=V.getIteratorAtPosition(O),!!(W=R.getParagraphElement(F.container()))&&(runtime.assert(function z(V,F,W){var A=[V.getPositionFilter()],P=W.container();return W=W.unfilteredDomOffset(),!1===V.createStepIterator(P,W,A,F).previousStep()}(V,W,F),"SetParagraphStyle position should be the first position in the paragraph"),I?W.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:style-name",I):W.removeAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","style-name"),V.getOdfCanvas().refreshSize(),V.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:W,timeStamp:q,memberId:re}),V.getOdfCanvas().rerenderAnnotations(),!0)},this.spec=function(){return{optype:"SetParagraphStyle",memberid:re,timestamp:q,position:O,styleName:I}}},ops.OpSplitParagraph=function(){var z,re,q,O,I,R,V=odf.OdfUtils,F=odf.Namespaces.textns;this.init=function(W){z=W.memberid,re=W.timestamp,O=W.position,q=W.sourceParagraphPosition,R=W.paragraphStyleName,I="true"===W.moveCursor||!0===W.moveCursor},this.isEdit=!0,this.group=void 0,this.execute=function(W){var A,P,v,S,E,x,H,B=W.getCursor(z);if(W.upgradeWhitespacesAtPosition(O),!(A=W.getTextNodeAtStep(O))||!(P=V.getParagraphElement(A.textNode)))return!1;for(v=V.isListItem(P.parentNode)?P.parentNode:P,0===A.offset?(H=A.textNode.previousSibling,x=null):(H=A.textNode,x=A.offset>=A.textNode.length?null:A.textNode.splitText(A.offset)),S=A.textNode;S!==v;){if(E=(S=S.parentNode).cloneNode(!1),x&&E.appendChild(x),H)for(;H&&H.nextSibling;)E.appendChild(H.nextSibling);else for(;S.firstChild;)E.appendChild(S.firstChild);S.parentNode.insertBefore(E,S.nextSibling),H=S,x=E}return V.isListItem(x)&&(x=x.childNodes.item(0)),R?x.setAttributeNS(F,"text:style-name",R):x.removeAttributeNS(F,"style-name"),0===A.textNode.length&&A.textNode.parentNode.removeChild(A.textNode),W.emit(ops.OdtDocument.signalStepsInserted,{position:O}),B&&I&&(W.moveCursor(z,O+1,0),W.emit(ops.Document.signalCursorMoved,B)),W.fixCursorPositions(),W.getOdfCanvas().refreshSize(),W.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:P,memberId:z,timeStamp:re}),W.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:x,memberId:z,timeStamp:re}),W.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"SplitParagraph",memberid:z,timestamp:re,position:O,sourceParagraphPosition:q,paragraphStyleName:R,moveCursor:I}}},ops.OpUpdateMember=function(){var re,q,O,I;this.init=function(R){re=R.memberid,q=parseInt(R.timestamp,10),O=R.setProperties,I=R.removedProperties},this.isEdit=!1,this.group=void 0,this.execute=function(R){var V=R.getMember(re);return!!V&&(I&&V.removeProperties(I),O&&(V.setProperties(O),O.fullName&&function z(R){var V="//dc:creator[@editinfo:memberid='"+re+"']";for(R=xmldom.XPath.getODFElementsWithXPath(R.getRootNode(),V,function(F){return"editinfo"===F?"urn:webodf:names:editinfo":odf.Namespaces.lookupNamespaceURI(F)}),V=0;V<R.length;V+=1)R[V].textContent=O.fullName}(R)),R.emit(ops.Document.signalMemberUpdated,V),!0)},this.spec=function(){return{optype:"UpdateMember",memberid:re,timestamp:q,setProperties:O,removedProperties:I}}},ops.OpUpdateMetadata=function(){var z,re,q,O;this.init=function(I){z=I.memberid,re=parseInt(I.timestamp,10),q=I.setProperties,O=I.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(I){var R=I.getOdfCanvas().odfContainer(),V=null;return O&&(V=O.attributes.split(",")),R.setMetadata(q,V),I.emit(ops.OdtDocument.signalMetadataUpdated,{setProperties:null!==q?q:{},removedProperties:null!==V?V:[]}),!0},this.spec=function(){return{optype:"UpdateMetadata",memberid:z,timestamp:re,setProperties:q,removedProperties:O}}},ops.OpUpdateParagraphStyle=function(){function z(F,W){var A,P,v=W?W.split(","):[];for(A=0;A<v.length;A+=1)P=v[A].split(":"),F.removeAttributeNS(odf.Namespaces.lookupNamespaceURI(P[0]),P[1])}var re,q,O,I,R,V=odf.Namespaces.stylens;this.init=function(F){re=F.memberid,q=F.timestamp,O=F.styleName,I=F.setProperties,R=F.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(F){var A,P,v,W=F.getFormatting();return!!(A=""!==O?W.getStyleElement(O,"paragraph"):W.getDefaultStyleElement("paragraph"))&&(P=A.getElementsByTagNameNS(V,"paragraph-properties").item(0),v=A.getElementsByTagNameNS(V,"text-properties").item(0),I&&W.updateStyle(A,I),R&&(W=R["style:paragraph-properties"],P&&W&&(z(P,W.attributes),0===P.attributes.length&&A.removeChild(P)),W=R["style:text-properties"],v&&W&&(z(v,W.attributes),0===v.attributes.length&&A.removeChild(v)),z(A,R.attributes)),F.getOdfCanvas().refreshCSS(),F.emit(ops.OdtDocument.signalParagraphStyleModified,O),F.getOdfCanvas().rerenderAnnotations(),!0)},this.spec=function(){return{optype:"UpdateParagraphStyle",memberid:re,timestamp:q,styleName:O,setProperties:I,removedProperties:R}}},ops.OperationFactory=function(){function z(q){return function(O){return new q}}var re;this.register=function(q,O){re[q]=O},this.create=function(q){var O=null,I=re[q.optype];return I&&(O=I(q)).init(q),O},re={AddMember:z(ops.OpAddMember),UpdateMember:z(ops.OpUpdateMember),RemoveMember:z(ops.OpRemoveMember),AddCursor:z(ops.OpAddCursor),ApplyDirectStyling:z(ops.OpApplyDirectStyling),SetBlob:z(ops.OpSetBlob),RemoveBlob:z(ops.OpRemoveBlob),InsertImage:z(ops.OpInsertImage),InsertTable:z(ops.OpInsertTable),InsertText:z(ops.OpInsertText),RemoveText:z(ops.OpRemoveText),MergeParagraph:z(ops.OpMergeParagraph),SplitParagraph:z(ops.OpSplitParagraph),SetParagraphStyle:z(ops.OpSetParagraphStyle),UpdateParagraphStyle:z(ops.OpUpdateParagraphStyle),AddStyle:z(ops.OpAddStyle),RemoveStyle:z(ops.OpRemoveStyle),MoveCursor:z(ops.OpMoveCursor),RemoveCursor:z(ops.OpRemoveCursor),AddAnnotation:z(ops.OpAddAnnotation),RemoveAnnotation:z(ops.OpRemoveAnnotation),UpdateMetadata:z(ops.OpUpdateMetadata),ApplyHyperlink:z(ops.OpApplyHyperlink),RemoveHyperlink:z(ops.OpRemoveHyperlink)}},ops.OperationRouter=function(){},ops.OperationRouter.prototype.setOperationFactory=function(z){},ops.OperationRouter.prototype.setPlaybackFunction=function(z){},ops.OperationRouter.prototype.push=function(z){},ops.OperationRouter.prototype.close=function(z){},ops.OperationRouter.prototype.subscribe=function(z,re){},ops.OperationRouter.prototype.unsubscribe=function(z,re){},ops.OperationRouter.prototype.hasLocalUnsyncedOps=function(){},ops.OperationRouter.prototype.hasSessionHostConnection=function(){},ops.OperationRouter.signalProcessingBatchStart="router/batchstart",ops.OperationRouter.signalProcessingBatchEnd="router/batchend",ops.TrivialOperationRouter=function(){var re,q,z=new core.EventNotifier([ops.OperationRouter.signalProcessingBatchStart,ops.OperationRouter.signalProcessingBatchEnd]),O=0;this.setOperationFactory=function(I){re=I},this.setPlaybackFunction=function(I){q=I},this.push=function(I){O+=1,z.emit(ops.OperationRouter.signalProcessingBatchStart,{}),I.forEach(function(R){(R=R.spec()).timestamp=Date.now(),(R=re.create(R)).group="g"+O,q(R)}),z.emit(ops.OperationRouter.signalProcessingBatchEnd,{})},this.close=function(I){I()},this.subscribe=function(I,R){z.subscribe(I,R)},this.unsubscribe=function(I,R){z.unsubscribe(I,R)},this.hasLocalUnsyncedOps=function(){return!1},this.hasSessionHostConnection=function(){return!0}},ops.Session=function(z){function re(V){I.emit(ops.OdtDocument.signalProcessingBatchStart,V)}function q(V){I.emit(ops.OdtDocument.signalProcessingBatchEnd,V)}var O=new ops.OperationFactory,I=new ops.OdtDocument(z),R=null;this.setOperationFactory=function(V){O=V,R&&R.setOperationFactory(O)},this.setOperationRouter=function(V){R&&(R.unsubscribe(ops.OperationRouter.signalProcessingBatchStart,re),R.unsubscribe(ops.OperationRouter.signalProcessingBatchEnd,q)),(R=V).subscribe(ops.OperationRouter.signalProcessingBatchStart,re),R.subscribe(ops.OperationRouter.signalProcessingBatchEnd,q),V.setPlaybackFunction(function(F){return I.emit(ops.OdtDocument.signalOperationStart,F),!!F.execute(I)&&(I.emit(ops.OdtDocument.signalOperationEnd,F),!0)}),V.setOperationFactory(O)},this.getOperationFactory=function(){return O},this.getOdtDocument=function(){return I},this.enqueue=function(V){R.push(V)},this.close=function(V){R.close(function(F){F?V(F):I.close(V)})},this.destroy=function(V){I.destroy(V)},this.setOperationRouter(new ops.TrivialOperationRouter)},gui.AnnotationController=function(z,re,q){function O(){var S,E=!1;(S=(S=F.getCursor(q))&&S.getNode())&&(E=!P.isWithinAnnotation(S,F.getRootNode())),E!==W&&A.emit(gui.AnnotationController.annotatableChanged,W=E)}function I(S){S.getMemberId()===q&&O()}function R(S){S===q&&O()}function V(S){S.getMemberId()===q&&O()}var F=z.getOdtDocument(),W=!1,A=new core.EventNotifier([gui.AnnotationController.annotatableChanged]),P=odf.OdfUtils,v=core.StepDirection.NEXT;this.isAnnotatable=function(){return W},this.addAnnotation=function(){var S=new ops.OpAddAnnotation,E=(x=F.getCursorSelection(q)).length,x=x.position;W&&(0===E?E=void 0:(x=0<=E?x:x+E,E=Math.abs(E)),S.init({memberid:q,position:x,length:E,name:q+Date.now()}),z.enqueue([S]))},this.removeAnnotation=function(S){var E,x;E=F.getMember(q).getProperties().fullName,(!0!==re.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)||E===P.getAnnotationCreator(S))&&(E=F.convertDomPointToCursorStep(S,0,v),x=F.convertDomPointToCursorStep(S,S.childNodes.length),(S=new ops.OpRemoveAnnotation).init({memberid:q,position:E,length:x-E}),(x=new ops.OpMoveCursor).init({memberid:q,position:0<E?E-1:E,length:0}),z.enqueue([S,x]))},this.subscribe=function(S,E){A.subscribe(S,E)},this.unsubscribe=function(S,E){A.unsubscribe(S,E)},this.destroy=function(S){F.unsubscribe(ops.Document.signalCursorAdded,I),F.unsubscribe(ops.Document.signalCursorRemoved,R),F.unsubscribe(ops.Document.signalCursorMoved,V),S()},re.registerConstraint(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN),F.subscribe(ops.Document.signalCursorAdded,I),F.subscribe(ops.Document.signalCursorRemoved,R),F.subscribe(ops.Document.signalCursorMoved,V),O()},gui.AnnotationController.annotatableChanged="annotatable/changed",gui.Avatar=function(z,re){var O,I,R,V,q=this;this.setColor=function(V){I.style.borderColor=V},this.setImageUrl=function(V){q.isVisible()?I.src=V:R=V},this.isVisible=function(){return"block"===O.style.display},this.show=function(){R&&(I.src=R,R=void 0),O.style.display="block"},this.hide=function(){O.style.display="none"},this.markAsFocussed=function(V){V?O.classList.add("active"):O.classList.remove("active")},this.destroy=function(V){z.removeChild(O),V()},O=(V=z.ownerDocument).createElement("div"),I=V.createElement("img"),O.appendChild(I),O.style.display=re?"block":"none",O.className="handle",z.appendChild(O)},gui.StepInfo=function(){},gui.StepInfo.VisualDirection={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1},gui.StepInfo.prototype.container=function(){},gui.StepInfo.prototype.offset=function(){},gui.VisualStepScanner=function(){},gui.VisualStepScanner.prototype.process=function(z,re,q){},gui.GuiStepUtils=function(){function z(F){var W,A=null;return(F=q.getContentBounds(F))&&(F.container.nodeType===Node.TEXT_NODE?((W=F.container.ownerDocument.createRange()).setStart(F.container,F.startOffset),W.setEnd(F.container,F.endOffset),(A=0<W.getClientRects().length?W.getBoundingClientRect():null)&&" "===F.container.data.substring(F.startOffset,F.endOffset)&&1>=A.width&&(A=null),W.detach()):(re.isCharacterElement(F.container)||re.isCharacterFrame(F.container))&&(A=O.getBoundingClientRect(F.container))),A}var re=odf.OdfUtils,q=new odf.StepUtils,O=core.DomUtils,I=core.StepDirection.NEXT,R=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT,V=gui.StepInfo.VisualDirection.RIGHT_TO_LEFT;this.getContentRect=z,this.moveToFilteredStep=function(F,W,A){function P(de,G){return G.process(he,x,H)&&(de=!0,!B&&G.token&&(B=G.token)),de}var S,E,x,H,B,he,v=W===I,ae=F.snapshot();S=!1;do{S=z(F),he={token:F.snapshot(),container:F.container,offset:F.offset,direction:W,visualDirection:W===I?R:V},E=F.nextStep()?z(F):null,F.restore(he.token),v?(x=S,H=E):(x=E,H=S),S=A.reduce(P,!1)}while(!S&&F.advanceStep(W));return S||A.forEach(function(de){!B&&de.token&&(B=de.token)}),F.restore(B||ae),Boolean(B)}},gui.Caret=function(z,re,q,O){function R(){return H.selectNodeContents(x),H.getBoundingClientRect()}function V(le){return Y[le]!==fe[le]}function A(le){P.parentNode.removeChild(P),x.parentNode.removeChild(x),le()}var P,v,S,E,x,H,de,G,U,le,X,$,B=z.getDocument().getCanvas(),ae=core.DomUtils,he=new gui.GuiStepUtils,te=!1,ne=!1,oe=!1,fe={isFocused:!1,isShown:!0,visibility:"hidden"},Y={isFocused:!fe.isFocused,isShown:!fe.isShown,visibility:"hidden"};this.handleUpdate=function(){oe=!0,G.trigger()},this.refreshCursorBlinking=function(){te=!0,G.trigger()},this.setFocus=function(){fe.isFocused=!0,G.trigger()},this.removeFocus=function(){fe.isFocused=!1,G.trigger()},this.show=function(){fe.isShown=!0,G.trigger()},this.hide=function(){fe.isShown=!1,G.trigger()},this.setAvatarImageUrl=function(le){S.setImageUrl(le)},this.setColor=function(le){v.style.borderColor=le,S.setColor(le)},this.getCursor=function(){return z},this.getFocusElement=function(){return v},this.toggleHandleVisibility=function(){S.isVisible()?S.hide():S.show()},this.showHandle=function(){S.show()},this.hideHandle=function(){S.hide()},this.setOverlayElement=function(le){E=le,P.appendChild(le),oe=!0,G.trigger()},this.ensureVisible=function(){ne=!0,G.trigger()},this.getBoundingClientRect=function(){return ae.getBoundingClientRect(P)},this.destroy=function(le){core.Async.destroyAll([G.destroy,U.destroy,S.destroy,A],le)},X=[(le=z.getDocument()).createRootFilter(z.getMemberId()),le.getPositionFilter()],$=le.getDOMDocument(),H=$.createRange(),(x=$.createElement("span")).className="webodf-caretSizer",x.textContent="|",z.getNode().appendChild(x),(P=$.createElement("div")).setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",z.getMemberId()),P.className="webodf-caretOverlay",(v=$.createElement("div")).className="caret",P.appendChild(v),S=new gui.Avatar(P,q),B.getSizer().appendChild(P),de=le.createStepIterator(z.getNode(),0,X,le.getRootNode()),G=core.Task.createRedrawTask(function W(){if(!1===fe.isShown||z.getSelectionType()!==ops.OdtCursor.RangeSelection||!O&&!z.getSelectedRange().collapsed?(fe.visibility="hidden",v.style.visibility="hidden",U.cancel()):(fe.visibility="visible",v.style.visibility="visible",!1===fe.isFocused?(v.style.opacity="1",U.cancel()):((te||V("visibility"))&&(v.style.opacity="1",U.cancel()),U.trigger())),oe||ne){var le;le=z.getNode();var X,$,we=ae.getBoundingClientRect(B.getSizer()),ue=!1,ve=0;if(le.removeAttributeNS("urn:webodf:names:cursor","caret-sizer-active"),0<le.getClientRects().length)ve=($=R()).left-ae.getBoundingClientRect(le).left,ue=!0;else if(de.setPosition(le,0),!($=he.getContentRect(de))&&de.nextStep()&&(X=he.getContentRect(de))&&($=X,ue=!0),$||(le.setAttributeNS("urn:webodf:names:cursor","caret-sizer-active","true"),$=R(),ue=!0),!$)for(runtime.log("WARN: No suitable client rectangle found for visual caret for "+z.getMemberId());le;){if(0<le.getClientRects().length){$=ae.getBoundingClientRect(le),ue=!0;break}le=le.parentNode}8>(le={top:($=ae.translateRect($,we,B.getZoomLevel())).top,height:$.height,right:ue?$.left:$.right,width:ae.adaptRangeDifferenceToZoomLevel(ve,B.getZoomLevel())}).height&&(le={top:le.top-(8-le.height)/2,height:8,right:le.right}),P.style.height=le.height+"px",P.style.top=le.top+"px",P.style.left=le.right-le.width+"px",P.style.width=le.width?le.width+"px":"",E&&((le=runtime.getWindow().getComputedStyle(z.getNode(),null)).font?E.style.font=le.font:(E.style.fontStyle=le.fontStyle,E.style.fontVariant=le.fontVariant,E.style.fontWeight=le.fontWeight,E.style.fontSize=le.fontSize,E.style.lineHeight=le.lineHeight,E.style.fontFamily=le.fontFamily))}fe.isShown&&ne&&re.scrollIntoView(v.getBoundingClientRect()),V("isFocused")&&S.markAsFocussed(fe.isFocused),function F(){Object.keys(fe).forEach(function(le){Y[le]=fe[le]})}(),oe=ne=te=!1}),U=core.Task.createTimeoutTask(function I(){v.style.opacity="0"===v.style.opacity?"1":"0",U.trigger()},500),G.triggerImmediate()},odf.TextSerializer=function(){function z(O){var F,I="",R=re.filter?re.filter.acceptNode(O):NodeFilter.FILTER_ACCEPT,V=O.nodeType;if((R===NodeFilter.FILTER_ACCEPT||R===NodeFilter.FILTER_SKIP)&&q.isTextContentContainingNode(O))for(F=O.firstChild;F;)I+=z(F),F=F.nextSibling;return R===NodeFilter.FILTER_ACCEPT&&(V===Node.ELEMENT_NODE&&q.isParagraph(O)?I+="\n":V===Node.TEXT_NODE&&O.textContent&&(I+=O.textContent)),I}var re=this,q=odf.OdfUtils;this.filter=null,this.writeToString=function(O){return O?("\n"===(O=z(O))[O.length-1]&&(O=O.substr(0,O.length-1)),O):""}},gui.MimeDataExporter=function(){var z;this.exportRangeToDataTransfer=function(re,q){var O;(O=q.startContainer.ownerDocument.createElement("span")).appendChild(q.cloneContents()),O=z.writeToString(O);try{re.setData("text/plain",O)}catch{re.setData("Text",O)}},(z=new odf.TextSerializer).filter=new odf.OdfNodeFilter},gui.Clipboard=function(z){this.setDataFromRange=function(re,q){var O,I=re.clipboardData;return O=runtime.getWindow(),!I&&O&&(I=O.clipboardData),I?(O=!0,z.exportRangeToDataTransfer(I,q),re.preventDefault()):O=!1,O}},gui.SessionContext=function(z,re){var q=z.getOdtDocument(),O=odf.OdfUtils;this.isLocalCursorWithinOwnAnnotation=function(){var R,I=q.getCursor(re);return!(!I||(R=I&&I.getNode(),I=q.getMember(re).getProperties().fullName,!(R=O.getParentAnnotation(R,q.getRootNode()))||O.getAnnotationCreator(R)!==I))}},gui.StyleSummary=function(z){function re(R,V){var W,F=R+"|"+V;return I.hasOwnProperty(F)||(W=[],z.forEach(function(A){A=(A=A.styleProperties[R])&&A[V],-1===W.indexOf(A)&&W.push(A)}),I[F]=W),I[F]}function q(R,V,F){return function(){var W=re(R,V);return F.length>=W.length&&W.every(function(A){return-1!==F.indexOf(A)})}}function O(R,V){var F=re(R,V);return 1===F.length?F[0]:void 0}var I={};this.getPropertyValues=re,this.getCommonValue=O,this.isBold=q("style:text-properties","fo:font-weight",["bold"]),this.isItalic=q("style:text-properties","fo:font-style",["italic"]),this.hasUnderline=q("style:text-properties","style:text-underline-style",["solid"]),this.hasStrikeThrough=q("style:text-properties","style:text-line-through-style",["solid"]),this.fontSize=function(){var R=O("style:text-properties","fo:font-size");return R&&parseFloat(R)},this.fontName=function(){return O("style:text-properties","style:font-name")},this.isAlignedLeft=q("style:paragraph-properties","fo:text-align",["left","start"]),this.isAlignedCenter=q("style:paragraph-properties","fo:text-align",["center"]),this.isAlignedRight=q("style:paragraph-properties","fo:text-align",["right","end"]),this.isAlignedJustified=q("style:paragraph-properties","fo:text-align",["justify"]),this.text={isBold:this.isBold,isItalic:this.isItalic,hasUnderline:this.hasUnderline,hasStrikeThrough:this.hasStrikeThrough,fontSize:this.fontSize,fontName:this.fontName},this.paragraph={isAlignedLeft:this.isAlignedLeft,isAlignedCenter:this.isAlignedCenter,isAlignedRight:this.isAlignedRight,isAlignedJustified:this.isAlignedJustified}},gui.DirectFormattingController=function(z,re,q,O,I,R,V){function F(){return pt.value().styleSummary}function W(){return pt.value().enabledFeatures}function A(Ve){var et;return Ve.collapsed?((et=Ve.startContainer).hasChildNodes()&&Ve.startOffset<et.childNodes.length&&(et=et.childNodes.item(Ve.startOffset)),Ve=[et]):Ve=ft.getTextElements(Ve,!0,!1),Ve}function v(Ve,et){var We={};return Object.keys(Ve).forEach(function(bt){var xt=Ve[bt](),Me=et[bt]();xt!==Me&&(We[bt]=Me)}),We}function S(){var Ve,et;et=yt.styleSummary;var We=pt.value(),bt=We.styleSummary,xt=yt.enabledFeatures,Me=We.enabledFeatures;Ve=v(et.text,bt.text),et=v(et.paragraph,bt.paragraph),yt=We,(xt=!(Me.directTextStyling===xt.directTextStyling&&Me.directParagraphStyling===xt.directParagraphStyling))&&Rt.emit(gui.DirectFormattingController.enabledChanged,Me),0<Object.keys(Ve).length&&Rt.emit(gui.DirectFormattingController.textStylingChanged,Ve),0<Object.keys(et).length&&Rt.emit(gui.DirectFormattingController.paragraphStylingChanged,et)}function E(){pt.reset(),S()}function x(Ve){("string"==typeof Ve?Ve:Ve.getMemberId())===O&&pt.reset()}function H(){pt.reset()}function B(Ve){var et=je.getCursor(O);Ve=Ve.paragraphElement,et&&ft.getParagraphElement(et.getNode())===Ve&&pt.reset()}function ae(Ve,et){return et(!Ve()),!0}function he(Ve){if(W().directTextStyling){var et=je.getCursorSelection(O),We={"style:text-properties":Ve};0!==et.length?((Ve=new ops.OpApplyDirectStyling).init({memberid:O,position:et.position,length:et.length,setProperties:We}),z.enqueue([Ve])):(ot=Ye.mergeObjects(ot||{},We),pt.reset())}}function de(Ve,et){var We={};We[Ve]=et,he(We)}function G(Ve){Ve=Ve.spec(),ot&&Ve.memberid===O&&"SplitParagraph"!==Ve.optype&&(ot=null,pt.reset())}function U(Ve){de("fo:font-weight",Ve?"bold":"normal")}function te(Ve){de("fo:font-style",Ve?"italic":"normal")}function ne(Ve){de("style:text-underline-style",Ve?"solid":"none")}function oe(Ve){de("style:text-line-through-style",Ve?"solid":"none")}function fe(Ve){if(W().directParagraphStyling){var Me,et=je.getCursor(O).getSelectedRange(),We=(et=ft.getParagraphElements(et),je.getFormatting()),bt=[],xt={};et.forEach(function(Oe){var kt,Fe=je.convertDomPointToCursorStep(Oe,0,Le),Ge=Oe.getAttributeNS(odf.Namespaces.textns,"style-name");(Oe=Ge?xt.hasOwnProperty(Ge)?xt[Ge]:void 0:Me)||(Oe=I.generateStyleName(),Ge?(xt[Ge]=Oe,kt=We.createDerivedStyleObject(Ge,"paragraph",{})):(Me=Oe,kt={}),kt=Ve(kt),(Ge=new ops.OpAddStyle).init({memberid:O,styleName:Oe.toString(),styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:kt}),bt.push(Ge)),(Ge=new ops.OpSetParagraphStyle).init({memberid:O,styleName:Oe.toString(),position:Fe}),bt.push(Ge)}),z.enqueue(bt)}}function le(Ve){!function Y(Ve){fe(function(et){return Ye.mergeObjects(et,Ve)})}({"style:paragraph-properties":{"fo:text-align":Ve}})}function X(Ve,et){var xt,We=je.getFormatting().getDefaultTabStopDistance(),bt=et["style:paragraph-properties"];return bt&&(xt=ft.parseLength(bt=bt["fo:margin-left"])),Ye.mergeObjects(et,{"style:paragraph-properties":{"fo:margin-left":xt&&xt.unit===We.unit?xt.value+Ve*We.value+xt.unit:Ve*We.value+We.unit}})}function we(){}function ue(){return!1}function ve(){return!1}var yt,pt,Ae=this,je=z.getOdtDocument(),Ye=new core.Utils,ft=odf.OdfUtils,Rt=new core.EventNotifier([gui.DirectFormattingController.enabledChanged,gui.DirectFormattingController.textStylingChanged,gui.DirectFormattingController.paragraphStylingChanged]),Ee=odf.Namespaces.textns,Le=core.StepDirection.NEXT,ot=null;this.enabledFeatures=W,this.formatTextSelection=he,this.createCursorStyleOp=function(Ve,et,We){var bt=null,xt=ot;return We&&(xt=(We=pt.value().appliedStyles[0])&&We.styleProperties),xt&&xt["style:text-properties"]&&((bt=new ops.OpApplyDirectStyling).init({memberid:O,position:Ve,length:et,setProperties:{"style:text-properties":xt["style:text-properties"]}}),ot=null,pt.reset()),bt},this.setBold=U,this.setItalic=te,this.setHasUnderline=ne,this.setHasStrikethrough=oe,this.setFontSize=function(Ve){de("fo:font-size",Ve+"pt")},this.setFontName=function(Ve){de("style:font-name",Ve)},this.getAppliedStyles=function(){return pt.value().appliedStyles},this.toggleBold=ae.bind(Ae,function(){return F().isBold()},U),this.toggleItalic=ae.bind(Ae,function(){return F().isItalic()},te),this.toggleUnderline=ae.bind(Ae,function(){return F().hasUnderline()},ne),this.toggleStrikethrough=ae.bind(Ae,function(){return F().hasStrikeThrough()},oe),this.isBold=function(){return F().isBold()},this.isItalic=function(){return F().isItalic()},this.hasUnderline=function(){return F().hasUnderline()},this.hasStrikeThrough=function(){return F().hasStrikeThrough()},this.fontSize=function(){return F().fontSize()},this.fontName=function(){return F().fontName()},this.isAlignedLeft=function(){return F().isAlignedLeft()},this.isAlignedCenter=function(){return F().isAlignedCenter()},this.isAlignedRight=function(){return F().isAlignedRight()},this.isAlignedJustified=function(){return F().isAlignedJustified()},this.alignParagraphLeft=function(){return le("left"),!0},this.alignParagraphCenter=function(){return le("center"),!0},this.alignParagraphRight=function(){return le("right"),!0},this.alignParagraphJustified=function(){return le("justify"),!0},this.indent=function(){return fe(X.bind(null,1)),!0},this.outdent=function(){return fe(X.bind(null,-1)),!0},this.createParagraphStyleOps=function(Ve){if(!W().directParagraphStyling)return[];var xt,Me,et=je.getCursor(O),We=et.getSelectedRange(),bt=[];et.hasForwardSelection()?(xt=et.getAnchorNode(),Me=et.getNode()):(xt=et.getNode(),Me=et.getAnchorNode()),et=ft.getParagraphElement(Me),runtime.assert(Boolean(et),"DirectFormattingController: Cursor outside paragraph");var Oe=et,Fe=[je.getPositionFilter(),je.createRootFilter(O)];return!1!==je.createStepIterator(We.endContainer,We.endOffset,Fe,Oe).nextStep()||(Me!==xt&&(et=ft.getParagraphElement(xt)),!ot&&!function $(Ve,et){var We=0===(We=A(Ve)).length?[Ve.startContainer]:We,bt=0<(We=je.getFormatting().getAppliedStyles(We)).length?We[0].styleProperties:void 0,xt=je.getFormatting().getAppliedStylesForElement(et).styleProperties;return!(!bt||"text"!==bt["style:family"]||!bt["style:text-properties"]||xt&&xt["style:text-properties"]&&(bt=bt["style:text-properties"],xt=xt["style:text-properties"],Object.keys(bt).every(function(Me){return bt[Me]===xt[Me]})))}(We,et))||!(We=(We=pt.value().appliedStyles[0])&&We.styleProperties)||((et=et.getAttributeNS(Ee,"style-name"))&&(We={"style:text-properties":We["style:text-properties"]},We=je.getFormatting().createDerivedStyleObject(et,"paragraph",We)),xt=I.generateStyleName(),(et=new ops.OpAddStyle).init({memberid:O,styleName:xt,styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:We}),bt.push(et),(et=new ops.OpSetParagraphStyle).init({memberid:O,styleName:xt,position:Ve}),bt.push(et)),bt},this.subscribe=function(Ve,et){Rt.subscribe(Ve,et)},this.unsubscribe=function(Ve,et){Rt.unsubscribe(Ve,et)},this.destroy=function(Ve){je.unsubscribe(ops.Document.signalCursorAdded,x),je.unsubscribe(ops.Document.signalCursorRemoved,x),je.unsubscribe(ops.Document.signalCursorMoved,x),je.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,H),je.unsubscribe(ops.OdtDocument.signalParagraphChanged,B),je.unsubscribe(ops.OdtDocument.signalOperationEnd,G),je.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,S),re.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),Ve()},je.subscribe(ops.Document.signalCursorAdded,x),je.subscribe(ops.Document.signalCursorRemoved,x),je.subscribe(ops.Document.signalCursorMoved,x),je.subscribe(ops.OdtDocument.signalParagraphStyleModified,H),je.subscribe(ops.OdtDocument.signalParagraphChanged,B),je.subscribe(ops.OdtDocument.signalOperationEnd,G),je.subscribe(ops.OdtDocument.signalProcessingBatchEnd,S),re.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),pt=new core.LazyProperty(function P(){var Ve=je.getCursor(O),et=Ve&&Ve.getSelectedRange(),We=[],bt=(We=[],!0),xt={directTextStyling:!0,directParagraphStyling:!0};return et&&(0===(We=A(et)).length&&(We=[et.startContainer,et.endContainer],bt=!1),We=je.getFormatting().getAppliedStyles(We)),void 0!==We[0]&&ot&&(We[0].styleProperties=Ye.mergeObjects(We[0].styleProperties,ot)),!0===re.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(xt.directTextStyling=xt.directParagraphStyling=q.isLocalCursorWithinOwnAnnotation()),xt.directTextStyling&&(xt.directTextStyling=bt&&void 0!==Ve&&Ve.getSelectionType()===ops.OdtCursor.RangeSelection),{enabledFeatures:xt,appliedStyles:We,styleSummary:new gui.StyleSummary(We)}}),yt=pt.value(),R||(Ae.formatTextSelection=we,Ae.setBold=we,Ae.setItalic=we,Ae.setHasUnderline=we,Ae.setHasStrikethrough=we,Ae.setFontSize=we,Ae.setFontName=we,Ae.toggleBold=ve,Ae.toggleItalic=ve,Ae.toggleUnderline=ve,Ae.toggleStrikethrough=ve),V||(Ae.alignParagraphCenter=ue,Ae.alignParagraphJustified=ue,Ae.alignParagraphLeft=ue,Ae.alignParagraphRight=ue,Ae.createParagraphStyleOps=function(){return[]},Ae.indent=ue,Ae.outdent=ue)},gui.DirectFormattingController.enabledChanged="enabled/changed",gui.DirectFormattingController.textStylingChanged="textStyling/changed",gui.DirectFormattingController.paragraphStylingChanged="paragraphStyling/changed",gui.DirectFormattingController.SelectionInfo=function(){},gui.KeyboardHandler=function(){function z(I,R){switch(R||(R=re.None),I){case gui.KeyboardHandler.KeyCode.LeftMeta:case gui.KeyboardHandler.KeyCode.RightMeta:case gui.KeyboardHandler.KeyCode.MetaInMozilla:R|=re.Meta;break;case gui.KeyboardHandler.KeyCode.Ctrl:R|=re.Ctrl;break;case gui.KeyboardHandler.KeyCode.Alt:R|=re.Alt;break;case gui.KeyboardHandler.KeyCode.Shift:R|=re.Shift}return I+":"+R}var re=gui.KeyboardHandler.Modifier,q=null,O={};this.setDefault=function(I){q=I},this.bind=function(I,R,V,F){I=z(I,R),runtime.assert(F||!1===O.hasOwnProperty(I),"tried to overwrite the callback handler of key combo: "+I),O[I]=V},this.unbind=function(I,R){var V=z(I,R);delete O[V]},this.reset=function(){q=null,O={}},this.handleEvent=function(I){var R=I.keyCode,V=re.None;I.metaKey&&(V|=re.Meta),I.ctrlKey&&(V|=re.Ctrl),I.altKey&&(V|=re.Alt),I.shiftKey&&(V|=re.Shift),R=z(R,V),V=!1,(R=O[R])?V=R():null!==q&&(V=q(I)),V&&(I.preventDefault?I.preventDefault():I.returnValue=!1)}},gui.KeyboardHandler.Modifier={None:0,Meta:1,Ctrl:2,Alt:4,CtrlAlt:6,Shift:8,MetaShift:9,CtrlShift:10,AltShift:12},gui.KeyboardHandler.KeyCode={Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Ctrl:17,Alt:18,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Delete:46,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LeftMeta:91,RightMeta:93,MetaInMozilla:224},gui.HyperlinkClickHandler=function(z,re,q){function O(){var x=z();runtime.assert(Boolean(x.classList),"Document container has no classList element"),x.classList.remove("webodf-inactiveLinks")}function I(){var x=z();runtime.assert(Boolean(x.classList),"Document container has no classList element"),x.classList.add("webodf-inactiveLinks")}function R(){v.removeEventListener("focus",I,!1),E.forEach(function(x){re.unbind(x.keyCode,x.modifier),q.unbind(x.keyCode,x.modifier)}),E.length=0}var F=gui.KeyboardHandler.Modifier,W=gui.KeyboardHandler.KeyCode,A=xmldom.XPath,P=odf.OdfUtils,v=runtime.getWindow(),S=F.None,E=[];runtime.assert(null!==v,"Expected to be run in an environment which has a global window, like a browser."),this.handleClick=function(x){var B,ae,H=x.target||x.srcElement;if(x.ctrlKey?B=F.Ctrl:x.metaKey&&(B=F.Meta),S===F.None||S===B){e:{for(;null!==H;){if(P.isHyperlink(H))break e;if(P.isParagraph(H))break;H=H.parentNode}H=null}H&&""!==(H=P.getHyperlinkTarget(H))&&("#"===H[0]?(H=H.substring(1),B=z(),0===(ae=A.getODFElementsWithXPath(B,"//text:bookmark-start[@text:name='"+H+"']",odf.Namespaces.lookupNamespaceURI)).length&&(ae=A.getODFElementsWithXPath(B,"//text:bookmark[@text:name='"+H+"']",odf.Namespaces.lookupNamespaceURI)),0<ae.length&&ae[0].scrollIntoView(!0)):/^\s*(javascript|data):/.test(H)?runtime.log("WARN:","potentially malicious URL ignored"):v.open(H),x.preventDefault?x.preventDefault():x.returnValue=!1)}},this.setModifier=function(x){S!==x&&(runtime.assert(x===F.None||x===F.Ctrl||x===F.Meta,"Unsupported KeyboardHandler.Modifier value: "+x),(S=x)!==F.None?I():O(),function V(x){if(R(),x!==F.None){switch(v.addEventListener("focus",I,!1),x){case F.Ctrl:E.push({keyCode:W.Ctrl,modifier:F.None});break;case F.Meta:E.push({keyCode:W.LeftMeta,modifier:F.None}),E.push({keyCode:W.RightMeta,modifier:F.None}),E.push({keyCode:W.MetaInMozilla,modifier:F.None})}E.forEach(function(H){re.bind(H.keyCode,H.modifier,O),q.bind(H.keyCode,H.modifier,I)})}}(S))},this.getModifier=function(){return S},this.destroy=function(x){I(),R(),x()}},gui.EventManager=function(z){function re(X){function $(Ye,ft,Rt){var Ee,Le=!1;Ee="on"+ft,Ye.attachEvent&&(Ye.attachEvent(Ee,Rt),Le=!0),!Le&&Ye.addEventListener&&(Ye.addEventListener(ft,Rt,!1),Le=!0),Le&&!G[ft]||!Ye.hasOwnProperty(Ee)||(Ye[Ee]=Rt)}function we(Ye,ft,Rt){var Ee="on"+ft;Ye.detachEvent&&Ye.detachEvent(Ee,Rt),Ye.removeEventListener&&Ye.removeEventListener(ft,Rt,!1),Ye[Ee]===Rt&&(Ye[Ee]=null)}function ue(Ye){if(-1===Ae.indexOf(Ye)){if(Ae.push(Ye),ve.filters.every(function(ft){return ft(Ye)}))try{je.emit(X,Ye)}catch(ft){runtime.log("Error occurred while processing "+X+":\n"+ft.message+"\n"+ft.stack)}runtime.setTimeout(function(){Ae.splice(Ae.indexOf(Ye),1)},0)}}var ve=this,Ae=[],je=new core.EventNotifier([X]);this.filters=[],this.subscribe=function(Ye){je.subscribe(X,Ye)},this.unsubscribe=function(Ye){je.unsubscribe(X,Ye)},this.destroy=function(){we(de,X,ue),we(oe,X,ue),we(fe,X,ue)},U[X]&&$(de,X,ue),$(oe,X,ue),$(fe,X,ue)}function q(X,$,we){function ue(je){we(je,ve,function(Ye){Ye.type=X,Ae.emit(X,Ye)})}var ve={},Ae=new core.EventNotifier([X]);this.subscribe=function(je){Ae.subscribe(X,je)},this.unsubscribe=function(je){Ae.unsubscribe(X,je)},this.destroy=function(){$.forEach(function(je){Y.unsubscribe(je,ue)})},$.forEach(function(je){Y.subscribe(je,ue)})}function O(X){runtime.clearTimeout(X),delete le[X]}function W(){fe.classList.add("webodf-touchEnabled"),Y.unsubscribe("touchstart",W)}function A(X){var $=X.scrollX,we=X.scrollY;this.restore=function(){X.scrollX===$&&X.scrollY===we||X.scrollTo($,we)}}function P(X){var $=X.scrollTop,we=X.scrollLeft;this.restore=function(){(X.scrollTop!==$||X.scrollLeft!==we)&&(X.scrollTop=$,X.scrollLeft=we)}}function v(X,$){var we=ne[X]||te[X]||null;return!we&&$&&(we=ne[X]=new re(X)),we}function S(X,$){v(X,!0).subscribe($)}function E(X,$){var we=v(X,!1);we&&we.unsubscribe($)}function x(){return z.getDOMDocument().activeElement===oe}function H(){x()&&oe.blur(),oe.setAttribute("disabled","true")}function B(){oe.removeAttribute("disabled")}function he(){var X;x()||(X=function ae(X){for(var $=[];X;)(X.scrollWidth>X.clientWidth||X.scrollHeight>X.clientHeight)&&$.push(new P(X)),X=X.parentNode;return $.push(new A(de)),$}(oe),B(),oe.focus(),X.forEach(function($){$.restore()}))}var oe,X,$,de=runtime.getWindow(),G={beforecut:!0,beforepaste:!0,longpress:!0,drag:!0,dragstop:!0},U={mousedown:!0,mouseup:!0,focus:!0},te={},ne={},fe=z.getCanvas().getElement(),Y=this,le={};this.addFilter=function(X,$){v(X,!0).filters.push($)},this.removeFilter=function(X,$){var we=v(X,!0),ue=we.filters.indexOf($);-1!==ue&&we.filters.splice(ue,1)},this.subscribe=S,this.unsubscribe=E,this.hasFocus=x,this.focus=he,this.getEventTrap=function(){return oe},this.setEditing=function(X){var $=x();$&&oe.blur(),X?oe.removeAttribute("readOnly"):oe.setAttribute("readOnly","true"),$&&he()},this.destroy=function(X){E("touchstart",W),Object.keys(le).forEach(function($){O(parseInt($,10))}),le.length=0,Object.keys(te).forEach(function($){te[$].destroy()}),te={},E("mousedown",H),E("mouseup",B),E("contextmenu",B),Object.keys(ne).forEach(function($){ne[$].destroy()}),ne={},oe.parentNode.removeChild(oe),X()},$=(X=z.getOdfCanvas().getSizer()).ownerDocument,runtime.assert(Boolean(de),"EventManager requires a window object to operate correctly"),(oe=$.createElement("textarea")).id="eventTrap",oe.setAttribute("tabindex","-1"),oe.setAttribute("readOnly","true"),oe.setAttribute("rows","1"),X.appendChild(oe),S("mousedown",H),S("mouseup",B),S("contextmenu",B),te.longpress=new q("longpress",["touchstart","touchmove","touchend"],function R(X,$,we){var ue=X.touches.length,ve=X.touches[0],Ae=$.timer;"touchmove"===X.type||"touchend"===X.type?Ae&&O(Ae):"touchstart"===X.type&&(1!==ue?runtime.clearTimeout(Ae):Ae=function I(X,$){var we=runtime.setTimeout(function(){X(),O(we)},$);return le[we]=!0,we}(function(){we({clientX:ve.clientX,clientY:ve.clientY,pageX:ve.pageX,pageY:ve.pageY,target:X.target||X.srcElement||null,detail:1})},400)),$.timer=Ae}),te.drag=new q("drag",["touchstart","touchmove","touchend"],function V(X,$,we){var ue=X.touches[0],ve=X.target||X.srcElement||null,Ae=$.target;1!==X.touches.length||"touchend"===X.type?Ae=null:"touchstart"===X.type&&"webodf-draggable"===ve.getAttribute("class")?Ae=ve:"touchmove"===X.type&&Ae&&(X.preventDefault(),X.stopPropagation(),we({clientX:ue.clientX,clientY:ue.clientY,pageX:ue.pageX,pageY:ue.pageY,target:Ae,detail:1})),$.target=Ae}),te.dragstop=new q("dragstop",["drag","touchend"],function F(X,$,we){var ue=X.target||X.srcElement||null,ve=$.dragging;"drag"===X.type?ve=!0:"touchend"===X.type&&ve&&(ve=!1,we({clientX:(X=X.changedTouches[0]).clientX,clientY:X.clientY,pageX:X.pageX,pageY:X.pageY,target:ue,detail:1})),$.dragging=ve}),S("touchstart",W)},gui.IOSSafariSupport=function(z){function re(){q.innerHeight!==q.outerHeight&&(O.style.display="none",runtime.requestAnimationFrame(function(){O.style.display="block"}))}var q=runtime.getWindow(),O=z.getEventTrap();this.destroy=function(I){z.unsubscribe("focus",re),O.removeAttribute("autocapitalize"),O.style.WebkitTransform="",I()},z.subscribe("focus",re),O.setAttribute("autocapitalize","off"),O.style.WebkitTransform="translateX(-10000px)"},gui.HyperlinkController=function(z,re,q,O){function I(){var P=!0;!0===re.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(P=q.isLocalCursorWithinOwnAnnotation()),P!==A&&W.emit(gui.HyperlinkController.enabledChanged,A=P)}function R(P){P.getMemberId()===O&&I()}var V=odf.OdfUtils,F=z.getOdtDocument(),W=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),A=!1;this.isEnabled=function(){return A},this.subscribe=function(P,v){W.subscribe(P,v)},this.unsubscribe=function(P,v){W.unsubscribe(P,v)},this.addHyperlink=function(P,v){if(A){var S=F.getCursorSelection(O),E=new ops.OpApplyHyperlink,x=[];(0===S.length||v)&&(v=v||P,(E=new ops.OpInsertText).init({memberid:O,position:S.position,text:v}),S.length=v.length,x.push(E)),(E=new ops.OpApplyHyperlink).init({memberid:O,position:S.position,length:S.length,hyperlink:P}),x.push(E),z.enqueue(x)}},this.removeHyperlinks=function(){if(A){var B,ae,P=F.createPositionIterator(F.getRootNode()),v=F.getCursor(O).getSelectedRange(),S=V.getHyperlinkElements(v),E=v.collapsed&&1===S.length,x=F.getDOMDocument().createRange(),H=[];0!==S.length&&(S.forEach(function(he){x.selectNodeContents(he),B=F.convertDomToCursorRange({anchorNode:x.startContainer,anchorOffset:x.startOffset,focusNode:x.endContainer,focusOffset:x.endOffset}),(ae=new ops.OpRemoveHyperlink).init({memberid:O,position:B.position,length:B.length}),H.push(ae)}),E||(-1===v.comparePoint(E=S[0],0)&&(x.setStart(E,0),x.setEnd(v.startContainer,v.startOffset),0<(B=F.convertDomToCursorRange({anchorNode:x.startContainer,anchorOffset:x.startOffset,focusNode:x.endContainer,focusOffset:x.endOffset})).length&&((ae=new ops.OpApplyHyperlink).init({memberid:O,position:B.position,length:B.length,hyperlink:V.getHyperlinkTarget(E)}),H.push(ae))),P.moveToEndOfNode(S=S[S.length-1]),P=P.unfilteredDomOffset(),1===v.comparePoint(S,P)&&(x.setStart(v.endContainer,v.endOffset),x.setEnd(S,P),0<(B=F.convertDomToCursorRange({anchorNode:x.startContainer,anchorOffset:x.startOffset,focusNode:x.endContainer,focusOffset:x.endOffset})).length&&((ae=new ops.OpApplyHyperlink).init({memberid:O,position:B.position,length:B.length,hyperlink:V.getHyperlinkTarget(S)}),H.push(ae)))),z.enqueue(H),x.detach())}},this.destroy=function(P){F.unsubscribe(ops.Document.signalCursorMoved,R),re.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,I),P()},F.subscribe(ops.Document.signalCursorMoved,R),re.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,I),I()},gui.HyperlinkController.enabledChanged="enabled/changed",gui.ImageController=function(z,re,q,O,I){function R(){var x=!0;!0===re.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(x=q.isLocalCursorWithinOwnAnnotation()),x!==E&&S.emit(gui.ImageController.enabledChanged,E=x)}function V(x){x.getMemberId()===O&&R()}var F={"image/gif":".gif","image/jpeg":".jpg","image/png":".png"},W=odf.Namespaces.textns,A=z.getOdtDocument(),P=odf.OdfUtils,v=A.getFormatting(),S=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),E=!1;this.isEnabled=function(){return E},this.subscribe=function(x,H){S.subscribe(x,H)},this.unsubscribe=function(x,H){S.unsubscribe(x,H)},this.insertImage=function(x,H,B,ae){if(E){var U,he=new core.CSSUnits;if(runtime.assert(0<B&&0<ae,"Both width and height of the image should be greater than 0px."),ae={width:B,height:ae},B=P.getParagraphElement(A.getCursor(O).getNode()).getAttributeNS(W,"style-name")){B=v.getContentSize(B,"paragraph");var G=1,de=1;ae.width>B.width&&(G=B.width/ae.width),ae.height>B.height&&(de=B.height/ae.height),B=Math.min(G,de),ae={width:ae.width*B,height:ae.height*B}}B=he.convert(ae.width,"px","cm")+"cm",he=he.convert(ae.height,"px","cm")+"cm",de=A.getOdfCanvas().odfContainer().rootElement.styles,ae=x.toLowerCase(),G=F.hasOwnProperty(ae)?F[ae]:null,ae=[],runtime.assert(null!==G,"Image type is not supported: "+x),G="Pictures/"+I.generateImageName()+G,(U=new ops.OpSetBlob).init({memberid:O,filename:G,mimetype:x,content:H}),ae.push(U),v.getStyleElement("Graphics","graphic",[de])||((x=new ops.OpAddStyle).init({memberid:O,styleName:"Graphics",styleFamily:"graphic",isAutomaticStyle:!1,setProperties:{"style:graphic-properties":{"text:anchor-type":"paragraph","svg:x":"0cm","svg:y":"0cm","style:wrap":"dynamic","style:number-wrapped-paragraphs":"no-limit","style:wrap-contour":"false","style:vertical-pos":"top","style:vertical-rel":"paragraph","style:horizontal-pos":"center","style:horizontal-rel":"paragraph"}}}),ae.push(x)),x=I.generateStyleName(),(H=new ops.OpAddStyle).init({memberid:O,styleName:x,styleFamily:"graphic",isAutomaticStyle:!0,setProperties:{"style:parent-style-name":"Graphics","style:graphic-properties":{"style:vertical-pos":"top","style:vertical-rel":"baseline","style:horizontal-pos":"center","style:horizontal-rel":"paragraph","fo:background-color":"transparent","style:background-transparency":"100%","style:shadow":"none","style:mirror":"none","fo:clip":"rect(0cm, 0cm, 0cm, 0cm)","draw:luminance":"0%","draw:contrast":"0%","draw:red":"0%","draw:green":"0%","draw:blue":"0%","draw:gamma":"100%","draw:color-inversion":"false","draw:image-opacity":"100%","draw:color-mode":"standard"}}}),ae.push(H),(U=new ops.OpInsertImage).init({memberid:O,position:A.getCursorPosition(O),filename:G,frameWidth:B,frameHeight:he,frameStyleName:x,frameName:I.generateFrameName()}),ae.push(U),z.enqueue(ae)}},this.destroy=function(x){A.unsubscribe(ops.Document.signalCursorMoved,V),re.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,R),x()},A.subscribe(ops.Document.signalCursorMoved,V),re.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,R),R()},gui.ImageController.enabledChanged="enabled/changed",gui.ImageSelector=function(z){var q=odf.Namespaces.svgns,O="topLeft topRight bottomRight bottomLeft topMiddle rightMiddle bottomMiddle leftMiddle".split(" "),I=z.getElement().ownerDocument,R=!1;this.select=function(V){var F,W,A=I.getElementById("imageSelector");A||(A=function re(){var V=z.getSizer(),F=I.createElement("div");return F.id="imageSelector",F.style.borderWidth="1px",V.appendChild(F),O.forEach(function(W){var A=I.createElement("div");A.className=W,F.appendChild(A)}),F}()),R=!0,F=A.parentNode,W=V.getBoundingClientRect();var P=F.getBoundingClientRect(),v=z.getZoomLevel();F=(W.left-P.left)/v-1,W=(W.top-P.top)/v-1,A.style.display="block",A.style.left=F+"px",A.style.top=W+"px",A.style.width=V.getAttributeNS(q,"width"),A.style.height=V.getAttributeNS(q,"height")},this.clearSelection=function(){var V;R&&(V=I.getElementById("imageSelector"))&&(V.style.display="none"),R=!1},this.isSelectorElement=function(V){var F=I.getElementById("imageSelector");return!!F&&(V===F||V.parentNode===F)}},function(){function z(re){function q(F){return V=F.which&&String.fromCharCode(F.which)===R,R=void 0,!1===V}function O(){V=!1}function I(F){R=F.data,V=!1}var R,V=!1;this.destroy=function(F){re.unsubscribe("textInput",O),re.unsubscribe("compositionend",I),re.removeFilter("keypress",q),F()},re.subscribe("textInput",O),re.subscribe("compositionend",I),re.addFilter("keypress",q)}gui.InputMethodEditor=function(re,q){function O(oe){v&&(oe?v.getNode().setAttributeNS("urn:webodf:names:cursor","composing","true"):(v.getNode().removeAttributeNS("urn:webodf:names:cursor","composing"),x.textContent=""))}function I(){B&&(B=!1,O(!1),he.emit(gui.InputMethodEditor.signalCompositionEnd,{data:ae}),ae="")}function R(){ne||(ne=!0,I(),S.value=v&&v.getSelectedRange().collapsed?"":G.writeToString(v.getSelectedRange().cloneContents()),S.setSelectionRange(0,S.value.length),ne=!1)}function V(){q.hasFocus()&&H.trigger()}function F(){de=void 0,H.cancel(),O(!0),B||he.emit(gui.InputMethodEditor.signalCompositionStart,{data:""})}function W(oe){oe=de=oe.data,B=!0,ae+=oe,H.trigger()}function A(oe){oe.data!==de&&(B=!0,ae+=oe=oe.data,H.trigger()),de=void 0}function P(){x.textContent=S.value}var x,H,de,G,te,v=null,S=q.getEventTrap(),E=S.ownerDocument,B=!1,ae="",he=new core.EventNotifier([gui.InputMethodEditor.signalCompositionStart,gui.InputMethodEditor.signalCompositionEnd]),U=[],ne=!1;this.subscribe=he.subscribe,this.unsubscribe=he.unsubscribe,this.registerCursor=function(oe){oe.getMemberId()===re&&((v=oe).getNode().appendChild(x),oe.subscribe(ops.OdtCursor.signalCursorUpdated,V),q.subscribe("input",P),q.subscribe("compositionupdate",P))},this.removeCursor=function(oe){v&&oe===re&&(v.getNode().removeChild(x),v.unsubscribe(ops.OdtCursor.signalCursorUpdated,V),q.unsubscribe("input",P),q.unsubscribe("compositionupdate",P),v=null)},this.destroy=function(oe){q.unsubscribe("compositionstart",F),q.unsubscribe("compositionend",W),q.unsubscribe("textInput",A),q.unsubscribe("keypress",I),q.unsubscribe("focus",R),core.Async.destroyAll(te,oe)},(G=new odf.TextSerializer).filter=new odf.OdfNodeFilter,q.subscribe("compositionstart",F),q.subscribe("compositionend",W),q.subscribe("textInput",A),q.subscribe("keypress",I),q.subscribe("focus",R),U.push(new z(q)),te=U.map(function(oe){return oe.destroy}),(x=E.createElement("span")).setAttribute("id","composer"),H=core.Task.createTimeoutTask(R,1),te.push(H.destroy)},gui.InputMethodEditor.signalCompositionStart="input/compositionstart",gui.InputMethodEditor.signalCompositionEnd="input/compositionend"}(),gui.MetadataController=function(z,re){function q(F){R.emit(gui.MetadataController.signalMetadataChanged,F)}function O(F){var W=-1===V.indexOf(F);return W||runtime.log("Setting "+F+" is restricted."),W}var I=z.getOdtDocument(),R=new core.EventNotifier([gui.MetadataController.signalMetadataChanged]),V=["dc:creator","dc:date","meta:editing-cycles","meta:editing-duration","meta:document-statistic"];this.setMetadata=function(F,W){var v,A={},P="";F&&Object.keys(F).filter(O).forEach(function(S){A[S]=F[S]}),W&&(P=W.filter(O).join(",")),(0<P.length||0<Object.keys(A).length)&&((v=new ops.OpUpdateMetadata).init({memberid:re,setProperties:A,removedProperties:0<P.length?{attributes:P}:null}),z.enqueue([v]))},this.getMetadata=function(F){var W;return runtime.assert("string"==typeof F,"Property must be a string"),W=F.split(":"),runtime.assert(2===W.length,"Property must be a namespace-prefixed string"),F=odf.Namespaces.lookupNamespaceURI(W[0]),runtime.assert(Boolean(F),"Prefix must be for an ODF namespace."),I.getOdfCanvas().odfContainer().getMetadata(F,W[1])},this.subscribe=function(F,W){R.subscribe(F,W)},this.unsubscribe=function(F,W){R.unsubscribe(F,W)},this.destroy=function(F){I.unsubscribe(ops.OdtDocument.signalMetadataUpdated,q),F()},I.subscribe(ops.OdtDocument.signalMetadataUpdated,q)},gui.MetadataController.signalMetadataChanged="metadata/changed",gui.PasteController=function(z,re,q,O){function I(){F=!0!==re.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)||q.isLocalCursorWithinOwnAnnotation()}function R(v){v.getMemberId()===O&&I()}var V=z.getOdtDocument(),F=!1,W=odf.Namespaces.textns,A=core.StepDirection.NEXT,P=odf.OdfUtils;this.isEnabled=function(){return F},this.paste=function(v){if(F){var S=V.getCursorPosition(O),E=V.getCursor(O).getNode(),x=(E=P.getParagraphElement(E)).getAttributeNS(W,"style-name")||"",H=S,B=[],ae=V.convertDomPointToCursorStep(E,0,A);v.replace(/\r/g,"").split("\n").forEach(function(he){var de=new ops.OpInsertText,G=new ops.OpSplitParagraph;de.init({memberid:O,position:H,text:he,moveCursor:!0}),B.push(de),G.init({memberid:O,position:H+=he.length,paragraphStyleName:x,sourceParagraphPosition:ae,moveCursor:!0}),B.push(G),ae=H+=1}),B.pop(),z.enqueue(B)}},this.destroy=function(v){V.unsubscribe(ops.Document.signalCursorMoved,R),re.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,I),v()},V.subscribe(ops.Document.signalCursorMoved,R),re.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,I),I()},gui.ClosestXOffsetScanner=function(z){function re(V){return null!==V&&void 0!==I&&Math.abs(V-z)>I}function q(V){null!==V&&!1===re(V)&&(I=Math.abs(V-z))}var I,O=this,R=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT;this.token=void 0,this.process=function(V,F,W){var A,P;return V.visualDirection===R?(A=F&&F.right,P=W&&W.left):(A=F&&F.left,P=W&&W.right),!(!re(A)&&!re(P)&&((F||W)&&(q(A),q(P),O.token=V.token),1))}},gui.LineBoundaryScanner=function(){var z=this,re=null;this.token=void 0,this.process=function(q,O,I){var R;if(R=I)if(re){var F=re;R=Math.min(F.bottom-F.top,I.bottom-I.top);var V=Math.max(F.top,I.top);F=Math.min(F.bottom,I.bottom)-V,R=.4>=(0<R?F/R:0)}else R=!1;return!O||I&&!R||(z.token=q.token),!!R||(re=(q=re)&&O?{left:Math.min(q.left,O.left),right:Math.max(q.right,O.right),top:Math.min(q.top,O.top),bottom:Math.min(q.bottom,O.bottom)}:q||O,!1)}},gui.ParagraphBoundaryScanner=function(){var q,z=this,re=!1,O=odf.OdfUtils;this.token=void 0,this.process=function(I){var R=O.getParagraphElement(I.container());return re||(q=R,re=!0),q!==R||(z.token=I.token,!1)}},odf.WordBoundaryFilter=function(z,re){function q(x,H,B){for(var de,ae=null,he=z.getRootNode();x!==he&&null!==x&&null===ae;)B(de=0>H?x.previousSibling:x.nextSibling)===NodeFilter.FILTER_ACCEPT&&(ae=de),x=x.parentNode;return ae}function O(x,H){var B;return null===x?E.NO_NEIGHBOUR:V.isCharacterElement(x)?E.SPACE_CHAR:x.nodeType===I||V.isTextSpan(x)||V.isHyperlink(x)?(B=x.textContent.charAt(H()),W.test(B)?E.SPACE_CHAR:F.test(B)?E.PUNCTUATION_CHAR:E.WORD_CHAR):E.OTHER}var I=Node.TEXT_NODE,R=Node.ELEMENT_NODE,V=odf.OdfUtils,F=/[!-#%-*,-\/:-;?-@\[-\]_{}\u00a1\u00ab\u00b7\u00bb\u00bf;\u00b7\u055a-\u055f\u0589-\u058a\u05be\u05c0\u05c3\u05c6\u05f3-\u05f4\u0609-\u060a\u060c-\u060d\u061b\u061e-\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0964-\u0965\u0970\u0df4\u0e4f\u0e5a-\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u104a-\u104f\u10fb\u1361-\u1368\u166d-\u166e\u169b-\u169c\u16eb-\u16ed\u1735-\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944-\u1945\u19de-\u19df\u1a1e-\u1a1f\u1b5a-\u1b60\u1c3b-\u1c3f\u1c7e-\u1c7f\u2000-\u206e\u207d-\u207e\u208d-\u208e\u3008-\u3009\u2768-\u2775\u27c5-\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc-\u29fd\u2cf9-\u2cfc\u2cfe-\u2cff\u2e00-\u2e7e\u3000-\u303f\u30a0\u30fb\ua60d-\ua60f\ua673\ua67e\ua874-\ua877\ua8ce-\ua8cf\ua92e-\ua92f\ua95f\uaa5c-\uaa5f\ufd3e-\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a-\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a-\uff1b\uff1f-\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]|\ud800[\udd00-\udd01\udf9f\udfd0]|\ud802[\udd1f\udd3f\ude50-\ude58]|\ud809[\udc00-\udc7e]/,W=/\s/,A=core.PositionFilter.FilterResult.FILTER_ACCEPT,P=core.PositionFilter.FilterResult.FILTER_REJECT,v=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,S=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,E={NO_NEIGHBOUR:0,SPACE_CHAR:1,PUNCTUATION_CHAR:2,WORD_CHAR:3,OTHER:4};this.acceptPosition=function(x){var H=x.container(),B=x.leftNode(),ae=x.rightNode(),he=x.unfilteredDomOffset,de=function(){return x.unfilteredDomOffset()-1};return H.nodeType===R&&(null===ae&&(ae=q(H,1,x.getNodeFilter())),null===B&&(B=q(H,-1,x.getNodeFilter()))),H!==ae&&(he=function(){return 0}),H!==B&&null!==B&&(de=function(){return B.textContent.length-1}),H=O(B,de),ae=O(ae,he),H===E.WORD_CHAR&&ae===E.WORD_CHAR||H===E.PUNCTUATION_CHAR&&ae===E.PUNCTUATION_CHAR||re===v&&H!==E.NO_NEIGHBOUR&&ae===E.SPACE_CHAR||re===S&&H===E.SPACE_CHAR&&ae!==E.NO_NEIGHBOUR?P:A}},odf.WordBoundaryFilter.IncludeWhitespace={None:0,TRAILING:1,LEADING:2},gui.SelectionController=function(z,re){function q($){var we=$.spec();($.isEdit||we.memberid===re)&&(ne=void 0,oe.cancel())}function O(){var $=B.getCursor(re).getNode();return B.createStepIterator($,0,[de,U],B.getRootElement($))}function I($,we,ue){ue=new odf.WordBoundaryFilter(B,ue);var ve=B.getRootElement($)||B.getRootNode(),Ae=B.createRootFilter(ve);return B.createStepIterator($,we,[de,Ae,ue],ve)}function R($,we){return we?{anchorNode:$.startContainer,anchorOffset:$.startOffset,focusNode:$.endContainer,focusOffset:$.endOffset}:{anchorNode:$.endContainer,anchorOffset:$.endOffset,focusNode:$.startContainer,focusOffset:$.startOffset}}function V($,we,ue){var ve=new ops.OpMoveCursor;return ve.init({memberid:re,position:$,length:we||0,selectionType:ue}),ve}function F($,we,ue){var ve;(ve=R((ve=B.getCursor(re)).getSelectedRange(),ve.hasForwardSelection())).focusNode=$,ve.focusOffset=we,ue||(ve.anchorNode=ve.focusNode,ve.anchorOffset=ve.focusOffset),$=B.convertDomToCursorRange(ve),z.enqueue([V($.position,$.length)])}function W($){var we;(we=I($.startContainer,$.startOffset,fe)).roundToPreviousStep()&&$.setStart(we.container(),we.offset()),(we=I($.endContainer,$.endOffset,Y)).roundToNextStep()&&$.setEnd(we.container(),we.offset())}function A($){var we=(ue=he.getParagraphElements($))[0],ue=ue[ue.length-1];we&&$.setStart(we,0),ue&&(he.isParagraph($.endContainer)&&0===$.endOffset?$.setEndBefore(ue):$.setEnd(ue,ue.childNodes.length))}function P($,we,ue,ve){var Ae,je;ve?(Ae=ue.startContainer,je=ue.startOffset):(Ae=ue.endContainer,je=ue.endOffset),ae.containsNode($,Ae)||(je=0>ae.comparePoints($,0,Ae,je)?0:$.childNodes.length,Ae=$),($=B.createStepIterator(Ae,je,we,he.getParagraphElement(Ae)||$)).roundToClosestStep()||runtime.assert(!1,"No step found in requested range"),ve?ue.setStart($.container(),$.offset()):ue.setEnd($.container(),$.offset())}function v($,we){var ue=O();ue.advanceStep($)&&F(ue.container(),ue.offset(),we)}function S($,we){var ue,ve=ne,Ae=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];void 0===ve&&te&&(ve=te()),isNaN(ve)||(ue=O(),G.moveToFilteredStep(ue,$,Ae)&&ue.advanceStep($)&&(Ae=[new gui.ClosestXOffsetScanner(ve),new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner],G.moveToFilteredStep(ue,$,Ae)&&(F(ue.container(),ue.offset(),we),ne=ve,oe.restart())))}function E($,we){var ue=O(),ve=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];G.moveToFilteredStep(ue,$,ve)&&F(ue.container(),ue.offset(),we)}function x($,we){var ue;(ue=I((ue=R((ue=B.getCursor(re)).getSelectedRange(),ue.hasForwardSelection())).focusNode,ue.focusOffset,fe)).advanceStep($)&&F(ue.container(),ue.offset(),we)}function H($,we,ue){var Ae=!1,ve=R((ve=B.getCursor(re)).getSelectedRange(),ve.hasForwardSelection());Ae=B.getRootElement(ve.focusNode),runtime.assert(Boolean(Ae),"SelectionController: Cursor outside root"),(ve=B.createStepIterator(ve.focusNode,ve.focusOffset,[de,U],Ae)).roundToClosestStep(),ve.advanceStep($)&&(ue=ue(ve.container()))&&($===le?(ve.setPosition(ue,0),Ae=ve.roundToNextStep()):(ve.setPosition(ue,ue.childNodes.length),Ae=ve.roundToPreviousStep()),Ae&&F(ve.container(),ve.offset(),we))}var ne,oe,B=z.getOdtDocument(),ae=core.DomUtils,he=odf.OdfUtils,de=B.getPositionFilter(),G=new gui.GuiStepUtils,U=B.createRootFilter(re),te=null,fe=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,Y=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,le=core.StepDirection.PREVIOUS,X=core.StepDirection.NEXT;this.selectionToRange=function($){var we=0<=ae.comparePoints($.anchorNode,$.anchorOffset,$.focusNode,$.focusOffset),ue=$.focusNode.ownerDocument.createRange();return we?(ue.setStart($.anchorNode,$.anchorOffset),ue.setEnd($.focusNode,$.focusOffset)):(ue.setStart($.focusNode,$.focusOffset),ue.setEnd($.anchorNode,$.anchorOffset)),{range:ue,hasForwardSelection:we}},this.rangeToSelection=R,this.selectImage=function($){var ve,ue=B.getRootElement($),we=B.createRootFilter(ue);(ue=B.createStepIterator($,0,[we,B.getPositionFilter()],ue)).roundToPreviousStep()||runtime.assert(!1,"No walkable position before frame"),we=ue.container(),ve=ue.offset(),ue.setPosition($,$.childNodes.length),ue.roundToNextStep()||runtime.assert(!1,"No walkable position after frame"),$=V(($=B.convertDomToCursorRange({anchorNode:we,anchorOffset:ve,focusNode:ue.container(),focusOffset:ue.offset()})).position,$.length,ops.OdtCursor.RegionSelection),z.enqueue([$])},this.expandToWordBoundaries=W,this.expandToParagraphBoundaries=A,this.selectRange=function($,we,ue){var Ae,ve=B.getOdfCanvas().getElement(),je=[de];Ae=ae.containsNode(ve,$.startContainer),ve=ae.containsNode(ve,$.endContainer),(Ae||ve)&&(Ae&&ve&&(2===ue?W($):3<=ue&&A($)),(ue=B.getRootElement(we?$.startContainer:$.endContainer))||(ue=B.getRootNode()),je.push(B.createRootFilter(ue)),P(ue,je,$,!0),P(ue,je,$,!1),$=R($,we),we=B.convertDomToCursorRange($),$=B.getCursorSelection(re),(we.position!==$.position||we.length!==$.length)&&($=V(we.position,we.length,ops.OdtCursor.RangeSelection),z.enqueue([$])))},this.moveCursorToLeft=function(){return v(le,!1),!0},this.moveCursorToRight=function(){return v(X,!1),!0},this.extendSelectionToLeft=function(){return v(le,!0),!0},this.extendSelectionToRight=function(){return v(X,!0),!0},this.setCaretXPositionLocator=function($){te=$},this.moveCursorUp=function(){return S(le,!1),!0},this.moveCursorDown=function(){return S(X,!1),!0},this.extendSelectionUp=function(){return S(le,!0),!0},this.extendSelectionDown=function(){return S(X,!0),!0},this.moveCursorBeforeWord=function(){return x(le,!1),!0},this.moveCursorPastWord=function(){return x(X,!1),!0},this.extendSelectionBeforeWord=function(){return x(le,!0),!0},this.extendSelectionPastWord=function(){return x(X,!0),!0},this.moveCursorToLineStart=function(){return E(le,!1),!0},this.moveCursorToLineEnd=function(){return E(X,!1),!0},this.extendSelectionToLineStart=function(){return E(le,!0),!0},this.extendSelectionToLineEnd=function(){return E(X,!0),!0},this.extendSelectionToParagraphStart=function(){return H(le,!0,he.getParagraphElement),!0},this.extendSelectionToParagraphEnd=function(){return H(X,!0,he.getParagraphElement),!0},this.moveCursorToParagraphStart=function(){return H(le,!1,he.getParagraphElement),!0},this.moveCursorToParagraphEnd=function(){return H(X,!1,he.getParagraphElement),!0},this.moveCursorToDocumentStart=function(){return H(le,!1,B.getRootElement),!0},this.moveCursorToDocumentEnd=function(){return H(X,!1,B.getRootElement),!0},this.extendSelectionToDocumentStart=function(){return H(le,!0,B.getRootElement),!0},this.extendSelectionToDocumentEnd=function(){return H(X,!0,B.getRootElement),!0},this.extendSelectionToEntireDocument=function(){var we,ue,ve,$=B.getCursor(re);return $=B.getRootElement($.getNode()),runtime.assert(Boolean($),"SelectionController: Cursor outside root"),(ve=B.createStepIterator($,0,[de,U],$)).roundToClosestStep(),we=ve.container(),ue=ve.offset(),ve.setPosition($,$.childNodes.length),ve.roundToClosestStep(),$=B.convertDomToCursorRange({anchorNode:we,anchorOffset:ue,focusNode:ve.container(),focusOffset:ve.offset()}),z.enqueue([V($.position,$.length)]),!0},this.destroy=function($){B.unsubscribe(ops.OdtDocument.signalOperationStart,q),core.Async.destroyAll([oe.destroy],$)},oe=core.Task.createTimeoutTask(function(){ne=void 0},2e3),B.subscribe(ops.OdtDocument.signalOperationStart,q)},gui.TextController=function(z,re,q,O,I,R){function V(){H=!0!==re.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)||q.isLocalCursorWithinOwnAnnotation()}function F(he){he.getMemberId()===O&&V()}function W(he,de,G){var U=[S.getPositionFilter()];return G&&U.push(S.createRootFilter(he.startContainer)),(G=S.createStepIterator(he.startContainer,he.startOffset,U,de)).roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range start"),de=S.convertDomPointToCursorStep(G.container(),G.offset()),he.collapsed?he=de:(G.setPosition(he.endContainer,he.endOffset),G.roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range end"),he=S.convertDomPointToCursorStep(G.container(),G.offset())),{position:de,length:he-de}}function A(he){var de,G,U,te=E.getParagraphElements(he),ne=he.cloneRange(),oe=[];return de=te[0],1<te.length&&(E.hasNoODFContent(de)&&(de=te[te.length-1]),G=de.getAttributeNS(odf.Namespaces.textns,"style-name")||""),te.forEach(function(fe,Y){var le,X;ne.setStart(fe,0),ne.collapse(!0),le=W(ne,fe,!1).position,0<Y&&((X=new ops.OpMergeParagraph).init({memberid:O,paragraphStyleName:G,destinationStartPosition:U,sourceStartPosition:le,moveCursor:1===Y}),oe.unshift(X)),U=le,ne.selectNodeContents(fe),(le=x.rangeIntersection(ne,he))&&0<(le=W(le,fe,!0)).length&&((X=new ops.OpRemoveText).init({memberid:O,position:le.position,length:le.length}),oe.unshift(X))}),oe}function P(he){return 0>he.length&&(he.position+=he.length,he.length=-he.length),he}function v(he){if(!H)return!1;var de,te,G=S.getCursor(O).getSelectedRange().cloneRange(),U=P(S.getCursorSelection(O));if(0===U.length){U=void 0,de=S.getCursor(O).getNode(),te=S.getRootElement(de);var ne=[S.getPositionFilter(),S.createRootFilter(te)];(te=S.createStepIterator(de,0,ne,te)).roundToClosestStep()&&(he?te.nextStep():te.previousStep())&&(U=P(S.convertDomToCursorRange({anchorNode:de,anchorOffset:0,focusNode:te.container(),focusOffset:te.offset()})),he?(G.setStart(de,0),G.setEnd(te.container(),te.offset())):(G.setStart(te.container(),te.offset()),G.setEnd(de,0)))}return U&&z.enqueue(A(G)),void 0!==U}var S=z.getOdtDocument(),E=odf.OdfUtils,x=core.DomUtils,H=!1,B=odf.Namespaces.textns,ae=core.StepDirection.NEXT;this.isEnabled=function(){return H},this.enqueueParagraphSplittingOps=function(){if(!H)return!1;var U,he=(U=S.getCursor(O)).getSelectedRange(),de=P(S.getCursorSelection(O)),G=[],te=(U=E.getParagraphElement(U.getNode())).getAttributeNS(B,"style-name")||"";return 0<de.length&&(G=G.concat(A(he))),(he=new ops.OpSplitParagraph).init({memberid:O,position:de.position,paragraphStyleName:te,sourceParagraphPosition:S.convertDomPointToCursorStep(U,0,ae),moveCursor:!0}),G.push(he),R&&(de=R(de.position+1),G=G.concat(de)),z.enqueue(G),!0},this.removeTextByBackspaceKey=function(){return v(!1)},this.removeTextByDeleteKey=function(){return v(!0)},this.removeCurrentSelection=function(){if(!H)return!1;var he=S.getCursor(O).getSelectedRange();return z.enqueue(A(he)),!0},this.insertText=function(he){if(H){var de=S.getCursor(O).getSelectedRange(),G=P(S.getCursorSelection(O)),U=[],te=!1;0<G.length&&(U=U.concat(A(de)),te=!0),(de=new ops.OpInsertText).init({memberid:O,position:G.position,text:he,moveCursor:!0}),U.push(de),I&&(he=I(G.position,he.length,te))&&U.push(he),z.enqueue(U)}},this.destroy=function(he){S.unsubscribe(ops.Document.signalCursorMoved,F),re.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,V),he()},S.subscribe(ops.Document.signalCursorMoved,F),re.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,V),V()},gui.UndoManager=function(){},gui.UndoManager.prototype.subscribe=function(z,re){},gui.UndoManager.prototype.unsubscribe=function(z,re){},gui.UndoManager.prototype.setDocument=function(z){},gui.UndoManager.prototype.setInitialState=function(){},gui.UndoManager.prototype.initialize=function(){},gui.UndoManager.prototype.purgeInitialState=function(){},gui.UndoManager.prototype.setPlaybackFunction=function(z){},gui.UndoManager.prototype.hasUndoStates=function(){},gui.UndoManager.prototype.hasRedoStates=function(){},gui.UndoManager.prototype.moveForward=function(z){},gui.UndoManager.prototype.moveBackward=function(z){},gui.UndoManager.prototype.onOperationExecuted=function(z){},gui.UndoManager.prototype.isDocumentModified=function(){},gui.UndoManager.prototype.setDocumentModified=function(z){},gui.UndoManager.signalUndoStackChanged="undoStackChanged",gui.UndoManager.signalUndoStateCreated="undoStateCreated",gui.UndoManager.signalUndoStateModified="undoStateModified",gui.UndoManager.signalDocumentModifiedChanged="documentModifiedChanged",gui.SessionControllerOptions=function(){this.annotationsEnabled=this.directParagraphStylingEnabled=this.directTextStylingEnabled=!1},function(){var z=core.PositionFilter.FilterResult.FILTER_ACCEPT;gui.SessionController=function(re,q,O,I){function R(dt,He){var mt=ve.getDOMDocument(),Ce=null;return mt.caretRangeFromPoint?Ce={container:(mt=mt.caretRangeFromPoint(dt,He)).startContainer,offset:mt.startOffset}:mt.caretPositionFromPoint&&(mt=mt.caretPositionFromPoint(dt,He))&&mt.offsetNode&&(Ce={container:mt.offsetNode,offset:mt.offset}),Ce}function V(dt){var He=ve.getCursor(q).getSelectedRange();He.collapsed?dt.preventDefault():Ee.setDataFromRange(dt,He)?kt.removeCurrentSelection():runtime.log("Cut operation failed")}function F(){return!1!==ve.getCursor(q).getSelectedRange().collapsed}function W(dt){var He=ve.getCursor(q).getSelectedRange();He.collapsed?dt.preventDefault():Ee.setDataFromRange(dt,He)||runtime.log("Copy operation failed")}function A(dt){var He;ue.clipboardData&&ue.clipboardData.getData?He=ue.clipboardData.getData("Text"):dt.clipboardData&&dt.clipboardData.getData&&(He=dt.clipboardData.getData("text/plain")),He&&(kt.removeCurrentSelection(),Xt.paste(He)),dt.preventDefault?dt.preventDefault():dt.returnValue=!1}function P(){return!1}function v(dt){xt&&xt.onOperationExecuted(dt)}function S(dt){ve.emit(ops.OdtDocument.signalUndoStackChanged,dt)}function E(){var dt;return!!xt&&(dt=Me.hasFocus(),xt.moveBackward(1),dt&&Me.focus(),!0)}function x(){var dt;return!!xt&&(dt=Me.hasFocus(),xt.moveForward(1),dt&&Me.focus(),!0)}function H(dt){var He=ve.getCursor(q).getSelectedRange(),mt=(dt.target||dt.srcElement||null).getAttribute("end");He&&mt&&(dt=R(dt.clientX,dt.clientY))&&(st.setUnfilteredPosition(dt.container,dt.offset),We.acceptPosition(st)===z&&(He=He.cloneRange(),"left"===mt?He.setStart(st.container(),st.unfilteredDomOffset()):He.setEnd(st.container(),st.unfilteredDomOffset()),O.setSelectedRange(He,"right"===mt),ve.emit(ops.Document.signalCursorMoved,O)))}function B(){Ft.selectRange(O.getSelectedRange(),O.hasForwardSelection(),1)}function ae(){var dt=ue.getSelection(),He=0<dt.rangeCount&&Ft.selectionToRange(dt);pt&&He&&(et=!0,Lt.clearSelection(),st.setUnfilteredPosition(dt.focusNode,dt.focusOffset),We.acceptPosition(st)===z&&(2===Nt?Ft.expandToWordBoundaries(He.range):3<=Nt&&Ft.expandToParagraphBoundaries(He.range),O.setSelectedRange(He.range,He.hasForwardSelection),ve.emit(ops.Document.signalCursorMoved,O)))}function he(dt){var He=dt.target||dt.srcElement||null,mt=ve.getCursor(q);(pt=null!==He&&Ye.containsNode(ve.getOdfCanvas().getElement(),He))&&(et=!1,He=ve.getRootElement(He)||ve.getRootNode(),We=ve.createRootFilter(He),Nt=0===dt.button?dt.detail:0,mt&&dt.shiftKey?ue.getSelection().collapse(mt.getAnchorNode(),0):(dt=ue.getSelection(),He=mt.getSelectedRange(),dt.extend?mt.hasForwardSelection()?(dt.collapse(He.startContainer,He.startOffset),dt.extend(He.endContainer,He.endOffset)):(dt.collapse(He.endContainer,He.endOffset),dt.extend(He.startContainer,He.startOffset)):(dt.removeAllRanges(),dt.addRange(He.cloneRange()))),1<Nt&&ae())}function de(dt){var mt=ve.getRootElement(dt),He=ve.createRootFilter(mt);return(mt=ve.createStepIterator(dt,0,[He,ve.getPositionFilter()],mt)).setPosition(dt,dt.childNodes.length),mt.roundToNextStep()?{container:mt.container(),offset:mt.offset()}:null}function G(dt){var He;He=(He=ue.getSelection())?{anchorNode:He.anchorNode,anchorOffset:He.anchorOffset,focusNode:He.focusNode,focusOffset:He.focusOffset}:null;var Ce,at,mt=ue.getSelection().isCollapsed;He.anchorNode||He.focusNode||!(Ce=R(dt.clientX,dt.clientY))||(He.anchorNode=Ce.container,He.anchorOffset=Ce.offset,He.focusNode=He.anchorNode,He.focusOffset=He.anchorOffset),ft.isImage(He.focusNode)&&0===He.focusOffset&&ft.isCharacterFrame(He.focusNode.parentNode)?(Ce=(at=He.focusNode.parentNode).getBoundingClientRect(),dt.clientX>Ce.left&&(Ce=de(at))&&(He.focusNode=Ce.container,He.focusOffset=Ce.offset,mt&&(He.anchorNode=He.focusNode,He.anchorOffset=He.focusOffset))):ft.isImage(He.focusNode.firstChild)&&1===He.focusOffset&&ft.isCharacterFrame(He.focusNode)&&(Ce=de(He.focusNode))&&(He.anchorNode=He.focusNode=Ce.container,He.anchorOffset=He.focusOffset=Ce.offset),He.anchorNode&&He.focusNode&&(He=Ft.selectionToRange(He),Ft.selectRange(He.range,He.hasForwardSelection,0===dt.button?dt.detail:0)),Me.focus()}function U(dt){var He;(He=R(dt.clientX,dt.clientY))&&(dt=Ft.selectionToRange(dt={anchorNode:dt=He.container,anchorOffset:He=He.offset,focusNode:dt,focusOffset:He}),Ft.selectRange(dt.range,dt.hasForwardSelection,2),Me.focus())}function te(dt){var mt,Ce,at,He=dt.target||dt.srcElement||null;Vt.processRequests(),pt&&(ft.isImage(He)&&ft.isCharacterFrame(He.parentNode)&&ue.getSelection().isCollapsed?(Ft.selectImage(He.parentNode),Me.focus()):Lt.isSelectorElement(He)?Me.focus():et?(Ce=(He=O.getSelectedRange()).collapsed,ft.isImage(He.endContainer)&&0===He.endOffset&&ft.isCharacterFrame(He.endContainer.parentNode)&&(at=de(at=He.endContainer.parentNode))&&(He.setEnd(at.container,at.offset),Ce&&He.collapse(!1)),Ft.selectRange(He,O.hasForwardSelection(),0===dt.button?dt.detail:0),Me.focus()):Un?G(dt):(mt=Ye.cloneEvent(dt),bt=runtime.setTimeout(function(){G(mt)},0)),Nt=0,et=pt=!1)}function ne(dt){var He=ve.getCursor(q).getSelectedRange();He.collapsed||Rt.exportRangeToDataTransfer(dt.dataTransfer,He)}function oe(){pt&&Me.focus(),Nt=0,et=pt=!1}function fe(dt){te(dt)}function Y(dt){var He=dt.target||dt.srcElement||null,mt=null;"annotationRemoveButton"===He.className?(runtime.assert(Oe,"Remove buttons are displayed on annotations while annotation editing is disabled in the controller."),mt=He.parentNode.getElementsByTagNameNS(odf.Namespaces.officens,"annotation").item(0),Fe.removeAnnotation(mt),Me.focus()):"webodf-draggable"!==He.getAttribute("class")&&te(dt)}function le(dt){(dt=dt.data)&&(-1===dt.indexOf("\n")?kt.insertText(dt):Xt.paste(dt))}function $(dt){return function(He){return ve.getCursor(q).getSelectionType()!==ops.OdtCursor.RangeSelection||dt(He)}}function we(dt){Me.unsubscribe("keydown",Le.handleEvent),Me.unsubscribe("keypress",ot.handleEvent),Me.unsubscribe("keyup",yt.handleEvent),Me.unsubscribe("copy",W),Me.unsubscribe("mousedown",he),Me.unsubscribe("mousemove",Vt.trigger),Me.unsubscribe("mouseup",Y),Me.unsubscribe("contextmenu",fe),Me.unsubscribe("dragstart",ne),Me.unsubscribe("dragend",oe),Me.unsubscribe("click",Bt.handleClick),Me.unsubscribe("longpress",U),Me.unsubscribe("drag",H),Me.unsubscribe("dragstop",B),ve.unsubscribe(ops.OdtDocument.signalOperationEnd,Qt.trigger),ve.unsubscribe(ops.Document.signalCursorAdded,Wt.registerCursor),ve.unsubscribe(ops.Document.signalCursorRemoved,Wt.removeCursor),ve.unsubscribe(ops.OdtDocument.signalOperationEnd,v),dt()}var bt,Vt,Qt,Dn,ue=runtime.getWindow(),ve=re.getOdtDocument(),Ae=new gui.SessionConstraints,je=new gui.SessionContext(re,q),Ye=core.DomUtils,ft=odf.OdfUtils,Rt=new gui.MimeDataExporter,Ee=new gui.Clipboard(Rt),Le=new gui.KeyboardHandler,ot=new gui.KeyboardHandler,yt=new gui.KeyboardHandler,pt=!1,Ve=new odf.ObjectNameGenerator(ve.getOdfCanvas().odfContainer(),q),et=!1,We=null,xt=null,Me=new gui.EventManager(ve),Oe=I.annotationsEnabled,Fe=new gui.AnnotationController(re,Ae,q),Ge=new gui.DirectFormattingController(re,Ae,je,q,Ve,I.directTextStylingEnabled,I.directParagraphStylingEnabled),kt=new gui.TextController(re,Ae,je,q,Ge.createCursorStyleOp,Ge.createParagraphStyleOps),Ut=new gui.ImageController(re,Ae,je,q,Ve),Lt=new gui.ImageSelector(ve.getOdfCanvas()),st=ve.createPositionIterator(ve.getRootNode()),Xt=new gui.PasteController(re,Ae,je,q),Wt=new gui.InputMethodEditor(q,Me),Nt=0,Bt=new gui.HyperlinkClickHandler(ve.getOdfCanvas().getElement,Le,yt),ln=new gui.HyperlinkController(re,Ae,je,q),Ft=new gui.SelectionController(re,q),nn=new gui.MetadataController(re,q),Et=gui.KeyboardHandler.Modifier,Mt=gui.KeyboardHandler.KeyCode,Tn=-1!==ue.navigator.appVersion.toLowerCase().indexOf("mac"),Un=-1!==["iPad","iPod","iPhone"].indexOf(ue.navigator.platform);runtime.assert(null!==ue,"Expected to be run in an environment which has a global window, like a browser."),this.undo=E,this.redo=x,this.insertLocalCursor=function(){runtime.assert(void 0===re.getOdtDocument().getCursor(q),"Inserting local cursor a second time.");var dt=new ops.OpAddCursor;dt.init({memberid:q}),re.enqueue([dt]),Me.focus()},this.removeLocalCursor=function(){runtime.assert(void 0!==re.getOdtDocument().getCursor(q),"Removing local cursor without inserting before.");var dt=new ops.OpRemoveCursor;dt.init({memberid:q}),re.enqueue([dt])},this.startEditing=function(){Wt.subscribe(gui.InputMethodEditor.signalCompositionStart,kt.removeCurrentSelection),Wt.subscribe(gui.InputMethodEditor.signalCompositionEnd,le),Me.subscribe("beforecut",F),Me.subscribe("cut",V),Me.subscribe("beforepaste",P),Me.subscribe("paste",A),xt&&xt.initialize(),Me.setEditing(!0),Bt.setModifier(Tn?Et.Meta:Et.Ctrl),Le.bind(Mt.Backspace,Et.None,function X(dt){return function(){return dt(),!0}}(kt.removeTextByBackspaceKey),!0),Le.bind(Mt.Delete,Et.None,kt.removeTextByDeleteKey),Le.bind(Mt.Tab,Et.None,$(function(){return kt.insertText("\t"),!0})),Tn?(Le.bind(Mt.Clear,Et.None,kt.removeCurrentSelection),Le.bind(Mt.B,Et.Meta,$(Ge.toggleBold)),Le.bind(Mt.I,Et.Meta,$(Ge.toggleItalic)),Le.bind(Mt.U,Et.Meta,$(Ge.toggleUnderline)),Le.bind(Mt.L,Et.MetaShift,$(Ge.alignParagraphLeft)),Le.bind(Mt.E,Et.MetaShift,$(Ge.alignParagraphCenter)),Le.bind(Mt.R,Et.MetaShift,$(Ge.alignParagraphRight)),Le.bind(Mt.J,Et.MetaShift,$(Ge.alignParagraphJustified)),Oe&&Le.bind(Mt.C,Et.MetaShift,Fe.addAnnotation),Le.bind(Mt.Z,Et.Meta,E),Le.bind(Mt.Z,Et.MetaShift,x)):(Le.bind(Mt.B,Et.Ctrl,$(Ge.toggleBold)),Le.bind(Mt.I,Et.Ctrl,$(Ge.toggleItalic)),Le.bind(Mt.U,Et.Ctrl,$(Ge.toggleUnderline)),Le.bind(Mt.L,Et.CtrlShift,$(Ge.alignParagraphLeft)),Le.bind(Mt.E,Et.CtrlShift,$(Ge.alignParagraphCenter)),Le.bind(Mt.R,Et.CtrlShift,$(Ge.alignParagraphRight)),Le.bind(Mt.J,Et.CtrlShift,$(Ge.alignParagraphJustified)),Oe&&Le.bind(Mt.C,Et.CtrlAlt,Fe.addAnnotation),Le.bind(Mt.Z,Et.Ctrl,E),Le.bind(Mt.Z,Et.CtrlShift,x)),ot.setDefault($(function(dt){var He;return!(!(He=null==dt.which?String.fromCharCode(dt.keyCode):0!==dt.which&&0!==dt.charCode?String.fromCharCode(dt.which):null)||dt.altKey||dt.ctrlKey||dt.metaKey||(kt.insertText(He),0))})),ot.bind(Mt.Enter,Et.None,$(kt.enqueueParagraphSplittingOps))},this.endEditing=function(){Wt.unsubscribe(gui.InputMethodEditor.signalCompositionStart,kt.removeCurrentSelection),Wt.unsubscribe(gui.InputMethodEditor.signalCompositionEnd,le),Me.unsubscribe("cut",V),Me.unsubscribe("beforecut",F),Me.unsubscribe("paste",A),Me.unsubscribe("beforepaste",P),Me.setEditing(!1),Bt.setModifier(Et.None),Le.bind(Mt.Backspace,Et.None,function(){return!0},!0),Le.unbind(Mt.Delete,Et.None),Le.unbind(Mt.Tab,Et.None),Tn?(Le.unbind(Mt.Clear,Et.None),Le.unbind(Mt.B,Et.Meta),Le.unbind(Mt.I,Et.Meta),Le.unbind(Mt.U,Et.Meta),Le.unbind(Mt.L,Et.MetaShift),Le.unbind(Mt.E,Et.MetaShift),Le.unbind(Mt.R,Et.MetaShift),Le.unbind(Mt.J,Et.MetaShift),Oe&&Le.unbind(Mt.C,Et.MetaShift),Le.unbind(Mt.Z,Et.Meta),Le.unbind(Mt.Z,Et.MetaShift)):(Le.unbind(Mt.B,Et.Ctrl),Le.unbind(Mt.I,Et.Ctrl),Le.unbind(Mt.U,Et.Ctrl),Le.unbind(Mt.L,Et.CtrlShift),Le.unbind(Mt.E,Et.CtrlShift),Le.unbind(Mt.R,Et.CtrlShift),Le.unbind(Mt.J,Et.CtrlShift),Oe&&Le.unbind(Mt.C,Et.CtrlAlt),Le.unbind(Mt.Z,Et.Ctrl),Le.unbind(Mt.Z,Et.CtrlShift)),ot.setDefault(null),ot.unbind(Mt.Enter,Et.None)},this.getInputMemberId=function(){return q},this.getSession=function(){return re},this.getSessionConstraints=function(){return Ae},this.setUndoManager=function(dt){xt&&xt.unsubscribe(gui.UndoManager.signalUndoStackChanged,S),(xt=dt)&&(xt.setDocument(ve),xt.setPlaybackFunction(re.enqueue),xt.subscribe(gui.UndoManager.signalUndoStackChanged,S))},this.getUndoManager=function(){return xt},this.getMetadataController=function(){return nn},this.getAnnotationController=function(){return Fe},this.getDirectFormattingController=function(){return Ge},this.getHyperlinkClickHandler=function(){return Bt},this.getHyperlinkController=function(){return ln},this.getImageController=function(){return Ut},this.getSelectionController=function(){return Ft},this.getTextController=function(){return kt},this.getEventManager=function(){return Me},this.getKeyboardHandlers=function(){return{keydown:Le,keypress:ot}},this.destroy=function(dt){var He=[Vt.destroy,Qt.destroy,Ge.destroy,Wt.destroy,Me.destroy,Bt.destroy,ln.destroy,nn.destroy,Ft.destroy,kt.destroy,we];Dn&&He.unshift(Dn.destroy),runtime.clearTimeout(bt),core.Async.destroyAll(He,dt)},Vt=core.Task.createRedrawTask(ae),Qt=core.Task.createRedrawTask(function(){var dt=ve.getCursor(q);dt&&dt.getSelectionType()===ops.OdtCursor.RegionSelection&&(dt=ft.getImageElements(dt.getSelectedRange())[0])?Lt.select(dt.parentNode):Lt.clearSelection()}),Le.bind(Mt.Left,Et.None,$(Ft.moveCursorToLeft)),Le.bind(Mt.Right,Et.None,$(Ft.moveCursorToRight)),Le.bind(Mt.Up,Et.None,$(Ft.moveCursorUp)),Le.bind(Mt.Down,Et.None,$(Ft.moveCursorDown)),Le.bind(Mt.Left,Et.Shift,$(Ft.extendSelectionToLeft)),Le.bind(Mt.Right,Et.Shift,$(Ft.extendSelectionToRight)),Le.bind(Mt.Up,Et.Shift,$(Ft.extendSelectionUp)),Le.bind(Mt.Down,Et.Shift,$(Ft.extendSelectionDown)),Le.bind(Mt.Home,Et.None,$(Ft.moveCursorToLineStart)),Le.bind(Mt.End,Et.None,$(Ft.moveCursorToLineEnd)),Le.bind(Mt.Home,Et.Ctrl,$(Ft.moveCursorToDocumentStart)),Le.bind(Mt.End,Et.Ctrl,$(Ft.moveCursorToDocumentEnd)),Le.bind(Mt.Home,Et.Shift,$(Ft.extendSelectionToLineStart)),Le.bind(Mt.End,Et.Shift,$(Ft.extendSelectionToLineEnd)),Le.bind(Mt.Up,Et.CtrlShift,$(Ft.extendSelectionToParagraphStart)),Le.bind(Mt.Down,Et.CtrlShift,$(Ft.extendSelectionToParagraphEnd)),Le.bind(Mt.Home,Et.CtrlShift,$(Ft.extendSelectionToDocumentStart)),Le.bind(Mt.End,Et.CtrlShift,$(Ft.extendSelectionToDocumentEnd)),Tn?(Le.bind(Mt.Left,Et.Alt,$(Ft.moveCursorBeforeWord)),Le.bind(Mt.Right,Et.Alt,$(Ft.moveCursorPastWord)),Le.bind(Mt.Left,Et.Meta,$(Ft.moveCursorToLineStart)),Le.bind(Mt.Right,Et.Meta,$(Ft.moveCursorToLineEnd)),Le.bind(Mt.Home,Et.Meta,$(Ft.moveCursorToDocumentStart)),Le.bind(Mt.End,Et.Meta,$(Ft.moveCursorToDocumentEnd)),Le.bind(Mt.Left,Et.AltShift,$(Ft.extendSelectionBeforeWord)),Le.bind(Mt.Right,Et.AltShift,$(Ft.extendSelectionPastWord)),Le.bind(Mt.Left,Et.MetaShift,$(Ft.extendSelectionToLineStart)),Le.bind(Mt.Right,Et.MetaShift,$(Ft.extendSelectionToLineEnd)),Le.bind(Mt.Up,Et.AltShift,$(Ft.extendSelectionToParagraphStart)),Le.bind(Mt.Down,Et.AltShift,$(Ft.extendSelectionToParagraphEnd)),Le.bind(Mt.Up,Et.MetaShift,$(Ft.extendSelectionToDocumentStart)),Le.bind(Mt.Down,Et.MetaShift,$(Ft.extendSelectionToDocumentEnd)),Le.bind(Mt.A,Et.Meta,$(Ft.extendSelectionToEntireDocument))):(Le.bind(Mt.Left,Et.Ctrl,$(Ft.moveCursorBeforeWord)),Le.bind(Mt.Right,Et.Ctrl,$(Ft.moveCursorPastWord)),Le.bind(Mt.Left,Et.CtrlShift,$(Ft.extendSelectionBeforeWord)),Le.bind(Mt.Right,Et.CtrlShift,$(Ft.extendSelectionPastWord)),Le.bind(Mt.A,Et.Ctrl,$(Ft.extendSelectionToEntireDocument))),Un&&(Dn=new gui.IOSSafariSupport(Me)),Me.subscribe("keydown",Le.handleEvent),Me.subscribe("keypress",ot.handleEvent),Me.subscribe("keyup",yt.handleEvent),Me.subscribe("copy",W),Me.subscribe("mousedown",he),Me.subscribe("mousemove",Vt.trigger),Me.subscribe("mouseup",Y),Me.subscribe("contextmenu",fe),Me.subscribe("dragstart",ne),Me.subscribe("dragend",oe),Me.subscribe("click",Bt.handleClick),Me.subscribe("longpress",U),Me.subscribe("drag",H),Me.subscribe("dragstop",B),ve.subscribe(ops.OdtDocument.signalOperationEnd,Qt.trigger),ve.subscribe(ops.Document.signalCursorAdded,Wt.registerCursor),ve.subscribe(ops.Document.signalCursorRemoved,Wt.removeCursor),ve.subscribe(ops.OdtDocument.signalOperationEnd,v)}}(),gui.CaretManager=function(z,re){function q(A){return R.hasOwnProperty(A)?R[A]:null}function O(){return Object.keys(R).map(function(A){return R[A]})}function I(A){var P=R[A];P&&(delete R[A],A===z.getInputMemberId()?(F.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,P.ensureVisible),F.unsubscribe(ops.Document.signalCursorMoved,P.refreshCursorBlinking),W.unsubscribe("compositionupdate",P.handleUpdate),W.unsubscribe("compositionend",P.handleUpdate),W.unsubscribe("focus",P.setFocus),W.unsubscribe("blur",P.removeFocus),V.removeEventListener("focus",P.show,!1),V.removeEventListener("blur",P.hide,!1)):F.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,P.handleUpdate),P.destroy(function(){}))}var R={},V=runtime.getWindow(),F=z.getSession().getOdtDocument(),W=z.getEventManager();this.registerCursor=function(A,P,v){var S=A.getMemberId();return A=new gui.Caret(A,re,P,v),R[S]=A,S===z.getInputMemberId()?(runtime.log("Starting to track input on new cursor of "+S),F.subscribe(ops.OdtDocument.signalProcessingBatchEnd,A.ensureVisible),F.subscribe(ops.Document.signalCursorMoved,A.refreshCursorBlinking),W.subscribe("compositionupdate",A.handleUpdate),W.subscribe("compositionend",A.handleUpdate),W.subscribe("focus",A.setFocus),W.subscribe("blur",A.removeFocus),V.addEventListener("focus",A.show,!1),V.addEventListener("blur",A.hide,!1),A.setOverlayElement(W.getEventTrap())):F.subscribe(ops.OdtDocument.signalProcessingBatchEnd,A.handleUpdate),A},this.getCaret=q,this.getCarets=O,this.destroy=function(A){var P=O().map(function(v){return v.destroy});z.getSelectionController().setCaretXPositionLocator(null),F.unsubscribe(ops.Document.signalCursorRemoved,I),R={},core.Async.destroyAll(P,A)},z.getSelectionController().setCaretXPositionLocator(function(){var P,A=q(z.getInputMemberId());return A&&(P=A.getBoundingClientRect()),P?P.right:void 0}),F.subscribe(ops.Document.signalCursorRemoved,I)},gui.EditInfoHandle=function(z){var q,re=[],O=z.ownerDocument,I=O.documentElement.namespaceURI;this.setEdits=function(R){var V,F,W,A;for(re=R,core.DomUtils.removeAllChildNodes(q),R=0;R<re.length;R+=1)(V=O.createElementNS(I,"div")).className="editInfo",(F=O.createElementNS(I,"span")).className="editInfoColor",F.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",re[R].memberid),(W=O.createElementNS(I,"span")).className="editInfoAuthor",W.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",re[R].memberid),(A=O.createElementNS(I,"span")).className="editInfoTime",A.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",re[R].memberid),A.appendChild(O.createTextNode(re[R].time.toString())),V.appendChild(F),V.appendChild(W),V.appendChild(A),q.appendChild(V)},this.show=function(){q.style.display="block"},this.hide=function(){q.style.display="none"},this.destroy=function(R){z.removeChild(q),R()},(q=O.createElementNS(I,"div")).setAttribute("class","editInfoHandle"),q.style.display="none",z.appendChild(q)},ops.EditInfo=function(z,re){var O,I={};this.getNode=function(){return O},this.getOdtDocument=function(){return re},this.getEdits=function(){return I},this.getSortedEdits=function(){return function q(){var V,R=[];for(V in I)I.hasOwnProperty(V)&&R.push({memberid:V,time:I[V].time});return R.sort(function(F,W){return F.time-W.time}),R}()},this.addEdit=function(R,V){I[R]={time:V}},this.clearEdits=function(){I={}},this.destroy=function(R){z.parentNode&&z.removeChild(O),R()},O=re.getDOMDocument().createElementNS("urn:webodf:names:editinfo","editinfo"),z.insertBefore(O,z.firstChild)},gui.EditInfoMarker=function(z,re){function q(P,v){return runtime.setTimeout(function(){V.style.opacity=P},v)}var I,R,V,F,W,A,P,O=this;this.addEdit=function(P,v){var S=Date.now()-v;z.addEdit(P,v),R.setEdits(z.getSortedEdits()),V.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",P),runtime.clearTimeout(W),runtime.clearTimeout(A),1e4>S?(F=q(1,0),W=q(.5,1e4-S),A=q(.2,2e4-S)):1e4<=S&&2e4>S?(F=q(.5,0),A=q(.2,2e4-S)):F=q(.2,0)},this.getEdits=function(){return z.getEdits()},this.clearEdits=function(){z.clearEdits(),R.setEdits([]),V.hasAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")&&V.removeAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")},this.getEditInfo=function(){return z},this.show=function(){V.style.display="block"},this.hide=function(){O.hideHandle(),V.style.display="none"},this.showHandle=function(){R.show()},this.hideHandle=function(){R.hide()},this.destroy=function(P){runtime.clearTimeout(F),runtime.clearTimeout(W),runtime.clearTimeout(A),I.removeChild(V),R.destroy(function(v){v?P(v):z.destroy(P)})},P=z.getOdtDocument().getDOMDocument(),(V=P.createElementNS(P.documentElement.namespaceURI,"div")).setAttribute("class","editInfoMarker"),V.onmouseover=function(){O.showHandle()},V.onmouseout=function(){O.hideHandle()},(I=z.getNode()).appendChild(V),R=new gui.EditInfoHandle(I),re||O.hide()},gui.HyperlinkTooltipView=function(z,re){var R,V,F,W,q=core.DomUtils,O=odf.OdfUtils,I=runtime.getWindow();runtime.assert(null!==I,"Expected to be run in an environment which has a global window, like a browser."),this.showTooltip=function(W){var S,A=W.target||W.srcElement,P=z.getSizer(),v=z.getZoomLevel();e:{for(;A;){if(O.isHyperlink(A))break e;if(O.isParagraph(A)||O.isInlineRoot(A))break;A=A.parentNode}A=null}if(A){var E;switch(q.containsNode(P,F)||P.appendChild(F),S=V,re()){case gui.KeyboardHandler.Modifier.Ctrl:E=runtime.tr("Ctrl-click to follow link");break;case gui.KeyboardHandler.Modifier.Meta:E=runtime.tr("\u2318-click to follow link");break;default:E=""}S.textContent=E,R.textContent=O.getHyperlinkTarget(A),F.style.display="block",A=W.clientX>(S=I.innerWidth-F.offsetWidth-15)?S:W.clientX+15,W=((W=W.clientY>(S=I.innerHeight-F.offsetHeight-10)?S:W.clientY+10)-(P=P.getBoundingClientRect()).top)/v,F.style.left=(A=(A-P.left)/v)+"px",F.style.top=W+"px"}},this.hideTooltip=function(){F.style.display="none"},this.destroy=function(W){F.parentNode&&F.parentNode.removeChild(F),W()},W=z.getElement().ownerDocument,R=W.createElement("span"),V=W.createElement("span"),R.className="webodf-hyperlinkTooltipLink",V.className="webodf-hyperlinkTooltipText",(F=W.createElement("div")).className="webodf-hyperlinkTooltip",F.appendChild(R),F.appendChild(V),z.getElement().appendChild(F)},gui.OdfFieldView=function(z){var q,I,R,V,O=z.getElement().ownerDocument;this.showFieldHighlight=function(){q.appendChild(O.createTextNode(function re(){var R;return(R=odf.OdfSchema.getFields().map(function(V){return V.replace(":","|")})).join(",\n")+"\n{ background-color: #D0D0D0; }\n\n"+R.map(function(V){return V+":empty::after"}).join(",\n")+"\n{ content:' '; white-space: pre; }\n"}()))},this.hideFieldHighlight=function(){for(var I=q.sheet,R=I.cssRules;R.length;)I.deleteRule(R.length-1)},this.destroy=function(I){q.parentNode&&q.parentNode.removeChild(q),I()},I=O.getElementsByTagName("head").item(0),R=O.createElement("style"),V="",R.type="text/css",R.media="screen, print, handheld, projection",odf.Namespaces.forEachPrefix(function(F,W){V+="@namespace "+F+" url("+W+");\n"}),R.appendChild(O.createTextNode(V)),I.appendChild(R),q=R},gui.ShadowCursor=function(z){var re=z.getDOMDocument().createRange(),q=!0;this.removeFromDocument=function(){},this.getMemberId=function(){return gui.ShadowCursor.ShadowCursorMemberId},this.getSelectedRange=function(){return re},this.setSelectedRange=function(O,I){re=O,q=!1!==I},this.hasForwardSelection=function(){return q},this.getDocument=function(){return z},this.getSelectionType=function(){return ops.OdtCursor.RangeSelection},re.setStart(z.getRootNode(),0)},gui.ShadowCursor.ShadowCursorMemberId="",gui.SelectionView=function(z){},gui.SelectionView.prototype.rerender=function(){},gui.SelectionView.prototype.show=function(){},gui.SelectionView.prototype.hide=function(){},gui.SelectionView.prototype.destroy=function(z){},gui.SelectionViewManager=function(z){function re(){return Object.keys(q).map(function(O){return q[O]})}var q={};this.getSelectionView=function(O){return q.hasOwnProperty(O)?q[O]:null},this.getSelectionViews=re,this.removeSelectionView=function(O){q.hasOwnProperty(O)&&(q[O].destroy(function(){}),delete q[O])},this.hideSelectionView=function(O){q.hasOwnProperty(O)&&q[O].hide()},this.showSelectionView=function(O){q.hasOwnProperty(O)&&q[O].show()},this.rerenderSelectionViews=function(){Object.keys(q).forEach(function(O){q[O].rerender()})},this.registerCursor=function(O,I){var R=O.getMemberId(),V=new z(O);return I?V.show():V.hide(),q[R]=V},this.destroy=function(O){var R=re();!function I(V,F){F?O(F):V<R.length?R[V].destroy(function(W){I(V+1,W)}):O()}(0,void 0)}},gui.SessionViewOptions=function(){this.caretBlinksOnRangeSelect=this.caretAvatarsInitiallyVisible=this.editInfoMarkersInitiallyVisible=!0},function(){function z(re,q){return void 0!==re?Boolean(re):q}gui.SessionView=function(re,q,O,I,R,V){function F(X){X.memberId===q&&ne.getViewport().scrollIntoView(X.annotation.getBoundingClientRect())}function W(){var X=document.getElementsByTagName("head").item(0),$=document.createElement("style");return $.type="text/css",$.media="screen, print, handheld, projection",X.appendChild($),$}function P(X){var $,we;for(we in U)U.hasOwnProperty(we)&&($=U[we],X?$.show():$.hide())}function v(X){R.getCarets().forEach(function($){X?$.showHandle():$.hideHandle()})}function S(X){!function A(X,$,we){function ue(ve,Ae,je){Ae=ve+'[editinfo|memberid="'+X+'"]'+je+Ae;e:{var Ye=de.firstChild;for(ve=ve+'[editinfo|memberid="'+X+'"]'+je+"{";Ye;){if(Ye.nodeType===Node.TEXT_NODE&&0===Ye.data.indexOf(ve)){ve=Ye;break e}Ye=Ye.nextSibling}ve=null}ve?ve.data=Ae:de.appendChild(document.createTextNode(Ae))}ue("div.editInfoMarker","{ background-color: "+we+"; }",""),ue("span.editInfoColor","{ background-color: "+we+"; }",""),ue("span.editInfoAuthor",'{ content: "'+$+'"; }',":before"),ue("dc|creator","{ background-color: "+we+"; }",""),ue(".webodf-selectionOverlay","{ fill: "+we+"; stroke: "+we+";}",""),X===q&&(ue(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"),X=gui.ShadowCursor.ShadowCursorMemberId,ue(".webodf-selectionOverlay","{ fill: "+we+"; stroke: "+we+";}",""),ue(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"))}(X.getMemberId(),(X=X.getProperties()).fullName,X.color)}function E(X){var $=X.getMemberId(),we=O.getOdtDocument().getMember($).getProperties();R.registerCursor(X,Y,le),V.registerCursor(X,!0),(X=R.getCaret($))&&(X.setAvatarImageUrl(we.imageUrl),X.setColor(we.color)),runtime.log("+++ View here +++ eagerly created an Caret for '"+$+"'! +++")}function x(X){X=X.getMemberId();var $=V.getSelectionView(q),we=V.getSelectionView(gui.ShadowCursor.ShadowCursorMemberId),ue=R.getCaret(q);X===q?(we.hide(),$&&$.show(),ue&&ue.show()):X===gui.ShadowCursor.ShadowCursorMemberId&&(we.show(),$&&$.hide(),ue&&ue.hide())}function H(X){V.removeSelectionView(X)}function B(X){var $=X.paragraphElement,we=X.memberId;X=X.timeStamp;var ue,ve="",Ae=$.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0);Ae?(ve=Ae.getAttributeNS("urn:webodf:names:editinfo","id"),ue=U[ve]):(ve=Math.random().toString(),ue=new ops.EditInfo($,O.getOdtDocument()),ue=new gui.EditInfoMarker(ue,fe),(Ae=$.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0)).setAttributeNS("urn:webodf:names:editinfo","id",ve),U[ve]=ue),ue.addEdit(we,new Date(X)),oe.trigger()}function ae(){var X;G.hasChildNodes()&&core.DomUtils.removeAllChildNodes(G),!0===I.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)&&(X=O.getOdtDocument().getMember(q))&&(X=X.getProperties().fullName,G.appendChild(document.createTextNode(".annotationWrapper:not([creator = '"+X+"']) .annotationRemoveButton { display: none; }")))}function he(X){var $=Object.keys(U).map(function(we){return U[we]});te.unsubscribe(ops.Document.signalMemberAdded,S),te.unsubscribe(ops.Document.signalMemberUpdated,S),te.unsubscribe(ops.Document.signalCursorAdded,E),te.unsubscribe(ops.Document.signalCursorRemoved,H),te.unsubscribe(ops.OdtDocument.signalParagraphChanged,B),te.unsubscribe(ops.Document.signalCursorMoved,x),te.unsubscribe(ops.OdtDocument.signalParagraphChanged,V.rerenderSelectionViews),te.unsubscribe(ops.OdtDocument.signalTableAdded,V.rerenderSelectionViews),te.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,V.rerenderSelectionViews),I.unsubscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,ae),te.unsubscribe(ops.Document.signalMemberAdded,ae),te.unsubscribe(ops.Document.signalMemberUpdated,ae),de.parentNode.removeChild(de),G.parentNode.removeChild(G),function we(ue,ve){ve?X(ve):ue<$.length?$[ue].destroy(function(Ae){we(ue+1,Ae)}):X()}(0,void 0)}var de,G,te,ne,oe,U={},fe=z(re.editInfoMarkersInitiallyVisible,!0),Y=z(re.caretAvatarsInitiallyVisible,!0),le=z(re.caretBlinksOnRangeSelect,!0);this.showEditInfoMarkers=function(){fe||P(fe=!0)},this.hideEditInfoMarkers=function(){fe&&P(fe=!1)},this.showCaretAvatars=function(){Y||v(Y=!0)},this.hideCaretAvatars=function(){Y&&v(Y=!1)},this.getSession=function(){return O},this.getCaret=function(X){return R.getCaret(X)},this.destroy=function(X){var $=[oe.destroy,he];te.unsubscribe(ops.OdtDocument.signalAnnotationAdded,F),core.Async.destroyAll($,X)},te=O.getOdtDocument(),ne=te.getOdfCanvas(),te.subscribe(ops.OdtDocument.signalAnnotationAdded,F),te.subscribe(ops.Document.signalMemberAdded,S),te.subscribe(ops.Document.signalMemberUpdated,S),te.subscribe(ops.Document.signalCursorAdded,E),te.subscribe(ops.Document.signalCursorRemoved,H),te.subscribe(ops.OdtDocument.signalParagraphChanged,B),te.subscribe(ops.Document.signalCursorMoved,x),te.subscribe(ops.OdtDocument.signalParagraphChanged,V.rerenderSelectionViews),te.subscribe(ops.OdtDocument.signalTableAdded,V.rerenderSelectionViews),te.subscribe(ops.OdtDocument.signalParagraphStyleModified,V.rerenderSelectionViews),I.subscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,ae),te.subscribe(ops.Document.signalMemberAdded,ae),te.subscribe(ops.Document.signalMemberUpdated,ae),(de=W()).appendChild(document.createTextNode("@namespace editinfo url(urn:webodf:names:editinfo);")),de.appendChild(document.createTextNode("@namespace dc url(http://purl.org/dc/elements/1.1/);")),G=W(),ae(),oe=core.Task.createRedrawTask(function(){var X=ne.getAnnotationViewManager();X&&(X.rehighlightAnnotations(),te.fixCursorPositions())})}}(),gui.SvgSelectionView=function(z){function re(){var X=S.getRootNode();E!==X&&(E=X,(x=S.getCanvas().getSizer()).appendChild(B),B.setAttribute("class","webodf-selectionOverlay"),he.setAttribute("class","webodf-draggable"),de.setAttribute("class","webodf-draggable"),he.setAttribute("end","left"),de.setAttribute("end","right"),he.setAttribute("r",8),de.setAttribute("r",8),B.appendChild(ae),B.appendChild(he),B.appendChild(de))}function q(X){return X=X.getBoundingClientRect(),Boolean(X&&0!==X.height)}function I(X,$){var we={};return we.top=Math.min(X.top,$.top),we.left=Math.min(X.left,$.left),we.right=Math.max(X.right,$.right),we.bottom=Math.max(X.bottom,$.bottom),we.width=we.right-we.left,we.height=we.bottom-we.top,we}function R(X,$){return $&&0<$.width&&0<$.height&&(X=X?I(X,$):$),X}function F(X,$){var we=X.getBoundingClientRect(),ue={width:0};return ue.top=we.top,ue.bottom=we.bottom,ue.height=we.height,ue.left=ue.right=$?we.right:we.left,ue}function A(X){ne&&X===z&&le.trigger()}function P(X){he.setAttribute("r",X=8/X),de.setAttribute("r",X)}function v(X){x.removeChild(B),x.classList.remove("webodf-virtualSelections"),z.getDocument().unsubscribe(ops.Document.signalCursorMoved,A),te.unsubscribe(gui.ZoomHelper.signalZoomChanged,P),X()}var E,x,le,X,S=z.getDocument(),H=S.getDOMDocument(),B=H.createElementNS("http://www.w3.org/2000/svg","svg"),ae=H.createElementNS("http://www.w3.org/2000/svg","polygon"),he=H.createElementNS("http://www.w3.org/2000/svg","circle"),de=H.createElementNS("http://www.w3.org/2000/svg","circle"),G=odf.OdfUtils,U=core.DomUtils,te=S.getCanvas().getZoomHelper(),ne=!0,oe=z.getDocument().createPositionIterator(S.getRootNode()),fe=NodeFilter.FILTER_ACCEPT,Y=NodeFilter.FILTER_REJECT;this.rerender=function(){ne&&le.trigger()},this.show=function(){ne=!0,le.trigger()},this.hide=function(){ne=!1,le.trigger()},this.destroy=function(X){core.Async.destroyAll([le.destroy,v],X)},X=z.getMemberId(),le=core.Task.createRedrawTask(function W(){var $,X=z.getSelectedRange();if($=ne&&z.getSelectionType()===ops.OdtCursor.RangeSelection&&!X.collapsed){re();var ve,Ae,je,Ye,ft,Rt,we=U.getBoundingClientRect(x),ue=te.getZoomLevel();if(X=function O(X){var ve,$=G.getTextElements(X,!0,!1),we=X.cloneRange(),ue=X.cloneRange();if(X=X.cloneRange(),!$.length)return null;e:{var Ae=$[ve=0],je=we.startContainer===Ae?we.startOffset:0,Ye=je;for(we.setStart(Ae,je),we.setEnd(Ae,Ye);!q(we);){if(Ae.nodeType===Node.ELEMENT_NODE&&Ye<Ae.childNodes.length)Ye=Ae.childNodes.length;else if(Ae.nodeType===Node.TEXT_NODE&&Ye<Ae.length)Ye+=1;else{if(!$[ve]){ve=!1;break e}Ae=$[ve],ve+=1,je=Ye=0}we.setStart(Ae,je),we.setEnd(Ae,Ye)}ve=!0}if(!ve)return null;e:{for(Ye=je=ue.endContainer===(Ae=$[ve=$.length-1])?ue.endOffset:Ae.nodeType===Node.TEXT_NODE?Ae.length:Ae.childNodes.length,ue.setStart(Ae,je),ue.setEnd(Ae,Ye);!q(ue);){if(Ae.nodeType===Node.ELEMENT_NODE&&0<je)je=0;else if(Ae.nodeType===Node.TEXT_NODE&&0<je)--je;else{if(!$[ve]){$=!1;break e}Ae=$[ve],--ve,je=Ye=Ae.length||Ae.childNodes.length}ue.setStart(Ae,je),ue.setEnd(Ae,Ye)}$=!0}return $?(X.setStart(we.startContainer,we.startOffset),X.setEnd(ue.endContainer,ue.endOffset),{firstRange:we,lastRange:ue,fillerRange:X}):null}(X),X){var Ee;for(ve=X.lastRange,Ae=X.fillerRange,je=U.translateRect(F($=X.firstRange,!1),we,ue),ft=U.translateRect(F(ve,!0),we,ue),Ye=(Ye=function V(X){function $(et){return oe.setUnfilteredPosition(et,0),pt.acceptNode(et)===fe&&yt.acceptPosition(oe)===fe?fe:Y}var ft,Rt,yt,Ve,et,We,ue=X.commonAncestorContainer,ve=X.startContainer,Ae=X.endContainer,je=X.startOffset,Ye=X.endOffset,Ee=null,ot=H.createRange(),pt=new odf.OdfNodeFilter;if(ve===ue||Ae===ue)return Ee=(ot=X.cloneRange()).getBoundingClientRect(),ot.detach(),Ee;for(X=ve;X.parentNode!==ue;)X=X.parentNode;for(Rt=Ae;Rt.parentNode!==ue;)Rt=Rt.parentNode;for(yt=S.createRootFilter(ve),ue=X.nextSibling;ue&&ue!==Rt;)We=void 0,We=null,$(et=ue)===fe&&(We=U.getBoundingClientRect(et)),Ee=R(Ee,We),ue=ue.nextSibling;if(G.isParagraph(X))Ee=R(Ee,U.getBoundingClientRect(X));else if(X.nodeType===Node.TEXT_NODE)ot.setStart(ue=X,je),ot.setEnd(ue,ue===Rt?Ye:ue.length),Ee=R(Ee,ot.getBoundingClientRect());else for(ue=(Ve=H.createTreeWalker(X,NodeFilter.SHOW_TEXT,$,!1)).currentNode=ve;ue&&ue!==Ae;)ot.setStart(ue,je),ot.setEnd(ue,ue.length),Ee=R(Ee,ot.getBoundingClientRect()),ft=ue,je=0,ue=Ve.nextNode();if(ft||(ft=ve),G.isParagraph(Rt))Ee=R(Ee,U.getBoundingClientRect(Rt));else if(Rt.nodeType===Node.TEXT_NODE)ot.setStart(ue=Rt,ue===X?je:0),ot.setEnd(ue,Ye),Ee=R(Ee,ot.getBoundingClientRect());else for(ue=(Ve=H.createTreeWalker(Rt,NodeFilter.SHOW_TEXT,$,!1)).currentNode=Ae;ue&&ue!==ft;)ot.setStart(ue,0),ot.setEnd(ue,Ye),Ee=R(Ee,ot.getBoundingClientRect()),(ue=Ve.previousNode())&&(Ye=ue.length);return Ee}(Ae))?U.translateRect(Ye,we,ue):I(je,ft),Rt=Ye.left,Ye=je.left+Math.max(0,Ye.width-(je.left-Ye.left)),we=Math.min(je.top,ft.top),Rt=[{x:je.left,y:we+je.height},{x:je.left,y:we},{x:Ye,y:we},{x:Ye,y:(ue=ft.top+ft.height)-ft.height},{x:ft.right,y:ue-ft.height},{x:ft.right,y:ue},{x:Rt,y:ue},{x:Rt,y:we+je.height},{x:je.left,y:we+je.height}],Ye="",Ee=0;Ee<Rt.length;Ee+=1)Ye+=Rt[Ee].x+","+Rt[Ee].y+" ";ae.setAttribute("points",Ye),he.setAttribute("cx",je.left),he.setAttribute("cy",we+je.height/2),de.setAttribute("cx",ft.right),de.setAttribute("cy",ue-ft.height/2),$.detach(),ve.detach(),Ae.detach()}$=Boolean(X)}B.style.display=$?"block":"none"}),re(),B.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",X),x.classList.add("webodf-virtualSelections"),z.getDocument().subscribe(ops.Document.signalCursorMoved,A),te.subscribe(gui.ZoomHelper.signalZoomChanged,P),P(te.getZoomLevel())},gui.UndoStateRules=function(){function z(I,R){var V=I.length;this.previous=function(){for(--V;0<=V;--V)if(R(I[V]))return I[V];return null}}function re(I){var R;return(I=I.spec()).hasOwnProperty("position")&&(R=I.position),R}function q(I){return I.isEdit}function O(I,R,V){return V?(I=re(I))-(R=re(R))==R-(V=re(V)):0==(V=re(I)-re(R))||1===Math.abs(V)}this.isEditOperation=q,this.isPartOfOperationSet=function(I,R){var F,V=void 0!==I.group;if(!I.isEdit||0===R.length||(F=R[R.length-1],V&&I.group===F.group))return!0;e:switch(I.spec().optype){case"RemoveText":case"InsertText":F=!0;break e;default:F=!1}if(F&&R.some(q)){if(V){var W;V=I.spec().optype;var v,S,A=(F=new z(R,q)).previous(),P=null;for(runtime.assert(Boolean(A),"No edit operations found in state"),runtime.assert(void 0!==(S=A.group),"Operation has no group"),v=1;A&&A.group===S;){if(V===A.spec().optype){W=A;break}A=F.previous()}if(W){for(A=F.previous();A;){if(A.group!==S){if(2===v)break;S=A.group,v+=1}if(V===A.spec().optype){P=A;break}A=F.previous()}W=O(I,W,P)}else W=!1;return W}return W=I.spec().optype,F=(V=new z(R,q)).previous(),runtime.assert(Boolean(F),"No edit operations found in state"),W===F.spec().optype&&O(I,F,V.previous())}return!1}},function(){function z(O,I){this.mainId=void 0!==O?O:-1,this.subId=void 0!==I?I:-1}function re(O,I,R){var F,W,A;this.addOperation=function(P){O.isEditOperation(P)&&(A+=1),W.push(P)},this.isNextStateId=function(P){return P.mainId===F&&P.subId===A},this.getNextStateId=function(){return new z(F,A)},this.getOperations=function(){return W},F=q+=1,W=I||[],A=I&&R?I.reduce(function V(P,v){return P+(O.isEditOperation(v)?1:0)},0):0}var q=0;gui.TrivialUndoManager=function(O){function I(){return!0!==G.isNextStateId(de)}function R(Y){0<(Y=Y.getOperations()).length&&(fe=!0,ae(Y),fe=!1)}function V(){ne.emit(gui.UndoManager.signalUndoStackChanged,{undoAvailable:E.hasUndoStates(),redoAvailable:E.hasRedoStates()})}function F(Y){var le=I();Y!==le&&ne.emit(gui.UndoManager.signalDocumentModifiedChanged,le)}function W(){G!==B&&G!==U[U.length-1]&&U.push(G)}function A(Y){var le=Y.previousSibling||Y.nextSibling;Y.parentNode.removeChild(Y),x.normalizeTextNodes(le)}function P(Y){return Object.keys(Y).map(function(le){return Y[le]})}function S(){var Y=I(),le=H=he.cloneDocumentElement();x.getElementsByTagNameNS(le,"urn:webodf:names:cursor","cursor").forEach(A),x.getElementsByTagNameNS(le,"urn:webodf:names:cursor","anchor").forEach(A),W(),G=B=function v(Y){function le(Ae){var je=Ae.spec();if(we[je.memberid])switch(je.optype){case"AddCursor":X[je.memberid]||(X[je.memberid]=Ae,delete we[je.memberid],--ue);break;case"MoveCursor":$[je.memberid]||($[je.memberid]=Ae)}}var ue,ve,X={},$={},we={};for(ve=Y.pop(),he.getMemberIds().forEach(function(Ae){we[Ae]=!0}),ue=Object.keys(we).length;ve&&0<ue;)(ve=ve.getOperations()).reverse(),ve.forEach(le),ve=Y.pop();return new re(oe,P(X).concat(P($)))}([B].concat(U)),U.length=0,te.length=0,Y||(de=G.getNextStateId()),V(),F(Y)}var H,B,ae,he,de,G,E=this,x=core.DomUtils,U=[],te=[],ne=new core.EventNotifier([gui.UndoManager.signalUndoStackChanged,gui.UndoManager.signalUndoStateCreated,gui.UndoManager.signalUndoStateModified,gui.UndoManager.signalDocumentModifiedChanged,gui.TrivialUndoManager.signalDocumentRootReplaced]),oe=O||new gui.UndoStateRules,fe=!1;this.subscribe=function(Y,le){ne.subscribe(Y,le)},this.unsubscribe=function(Y,le){ne.unsubscribe(Y,le)},this.isDocumentModified=I,this.setDocumentModified=function(Y){I()!==Y&&(de=Y?new z:G.getNextStateId(),ne.emit(gui.UndoManager.signalDocumentModifiedChanged,Y))},this.hasUndoStates=function(){return 0<U.length},this.hasRedoStates=function(){return 0<te.length},this.setDocument=function(Y){he=Y},this.purgeInitialState=function(){var Y=I();U.length=0,te.length=0,G=B=new re(oe),de=G.getNextStateId(),H=null,V(),F(Y)},this.setInitialState=S,this.initialize=function(){H||S()},this.setPlaybackFunction=function(Y){ae=Y},this.onOperationExecuted=function(Y){if(!fe){var le=I();oe.isEditOperation(Y)&&(G===B||0<te.length)||!oe.isPartOfOperationSet(Y,G.getOperations())?(te.length=0,W(),G=new re(oe,[Y],!0),U.push(G),ne.emit(gui.UndoManager.signalUndoStateCreated,{operations:G.getOperations()}),V()):(G.addOperation(Y),ne.emit(gui.UndoManager.signalUndoStateModified,{operations:G.getOperations()})),F(le)}},this.moveForward=function(Y){for(var $,le=0,X=I();Y&&te.length;)$=te.pop(),U.push($),R($),--Y,le+=1;return le&&(G=U[U.length-1],V(),F(X)),le},this.moveBackward=function(Y){for(var le=0,X=I();Y&&U.length;)te.push(U.pop()),--Y,le+=1;return le&&(he.getMemberIds().forEach(function($){he.hasCursor($)&&he.removeCursor($)}),he.setDocumentElement(H.cloneNode(!0)),ne.emit(gui.TrivialUndoManager.signalDocumentRootReplaced,{}),R(B),U.forEach(R),G=U[U.length-1]||B,V(),F(X)),le},G=B=new re(oe),de=G.getNextStateId()},gui.TrivialUndoManager.signalDocumentRootReplaced="documentRootReplaced"}(),odf.GraphicProperties=function(z,re,q){var O=this,I=odf.Namespaces.stylens,R=odf.Namespaces.svgns;this.verticalPos=function(){return O.data.value("verticalPos")},this.verticalRel=function(){return O.data.value("verticalRel")},this.horizontalPos=function(){return O.data.value("horizontalPos")},this.horizontalRel=function(){return O.data.value("horizontalRel")},this.strokeWidth=function(){return O.data.value("strokeWidth")},O.data=new odf.LazyStyleProperties(void 0===q?void 0:q.data,{verticalPos:function(){var V=z.getAttributeNS(I,"vertical-pos");return""===V?void 0:V},verticalRel:function(){var V=z.getAttributeNS(I,"vertical-rel");return""===V?void 0:V},horizontalPos:function(){var V=z.getAttributeNS(I,"horizontal-pos");return""===V?void 0:V},horizontalRel:function(){var V=z.getAttributeNS(I,"horizontal-rel");return""===V?void 0:V},strokeWidth:function(){var V=z.getAttributeNS(R,"stroke-width");return re.parseLength(V)}})},odf.ComputedGraphicProperties=function(){var z;this.setGraphicProperties=function(re){z=re},this.verticalPos=function(){return z&&z.verticalPos()||"from-top"},this.verticalRel=function(){return z&&z.verticalRel()||"page"},this.horizontalPos=function(){return z&&z.horizontalPos()||"from-left"},this.horizontalRel=function(){return z&&z.horizontalRel()||"page"}},odf.PageLayoutProperties=function(z,re,q){var O=this,I=odf.Namespaces.fons;this.pageHeight=function(){return O.data.value("pageHeight")||1123},this.pageWidth=function(){return O.data.value("pageWidth")||794},O.data=new odf.LazyStyleProperties(void 0===q?void 0:q.data,{pageHeight:function(){var R;return z&&(R=z.getAttributeNS(I,"page-height"),R=re.parseLength(R)),R},pageWidth:function(){var R;return z&&(R=z.getAttributeNS(I,"page-width"),R=re.parseLength(R)),R}})},odf.PageLayout=function(z,re,q){var O=null;z&&(O=re.getPropertiesElement("page-layout-properties",z)),this.pageLayout=new odf.PageLayoutProperties(O,re,q&&q.pageLayout)},odf.PageLayoutCache=function(){},odf.PageLayoutCache.prototype.getPageLayout=function(z){},odf.PageLayoutCache.prototype.getDefaultPageLayout=function(){},odf.ParagraphProperties=function(z,re,q){var O=this,I=odf.Namespaces.fons;this.marginTop=function(){return O.data.value("marginTop")},O.data=new odf.LazyStyleProperties(void 0===q?void 0:q.data,{marginTop:function(){var R=z.getAttributeNS(I,"margin-top");return re.parsePositiveLengthOrPercent(R,"marginTop",q&&q.data)}})},odf.ComputedParagraphProperties=function(){var z={},re=[];this.setStyleChain=function(q){re=q,z={}},this.marginTop=function(){var q,O;if(z.hasOwnProperty("marginTop"))q=z.marginTop;else{for(O=0;void 0===q&&O<re.length;O+=1)q=re[O].marginTop();z.marginTop=q}return q||0}},odf.TextProperties=function(z,re,q){var O=this,I=odf.Namespaces.fons;this.fontSize=function(){return O.data.value("fontSize")},O.data=new odf.LazyStyleProperties(void 0===q?void 0:q.data,{fontSize:function(){var R=z.getAttributeNS(I,"font-size");return re.parsePositiveLengthOrPercent(R,"fontSize",q&&q.data)}})},odf.ComputedTextProperties=function(){var z={},re=[];this.setStyleChain=function(q){re=q,z={}},this.fontSize=function(){var q,O;if(z.hasOwnProperty("fontSize"))q=z.fontSize;else{for(O=0;void 0===q&&O<re.length;O+=1)q=re[O].fontSize();z.fontSize=q}return q||12}},odf.MasterPage=function(z,re){var q;z?(q=z.getAttributeNS(odf.Namespaces.stylens,"page-layout-name"),this.pageLayout=re.getPageLayout(q)):this.pageLayout=re.getDefaultPageLayout()},odf.MasterPageCache=function(){},odf.MasterPageCache.prototype.getMasterPage=function(z){},odf.StylePileEntry=function(z,re,q,O){var I,R,V;this.masterPage=function(){var I=z.getAttributeNS(odf.Namespaces.stylens,"master-page-name"),R=null;return I&&(R=q.getMasterPage(I)),R},I=this,V=null,("graphic"===(R=z.getAttributeNS(odf.Namespaces.stylens,"family"))||"chart"===R)&&(I.graphic=void 0===O?void 0:O.graphic,null!==(V=re.getPropertiesElement("graphic-properties",z,V))&&(I.graphic=new odf.GraphicProperties(V,re,I.graphic))),("paragraph"===R||"table-cell"===R||"graphic"===R||"presentation"===R||"chart"===R)&&(I.paragraph=void 0===O?void 0:O.paragraph,null!==(V=re.getPropertiesElement("paragraph-properties",z,V))&&(I.paragraph=new odf.ParagraphProperties(V,re,I.paragraph))),("text"===R||"paragraph"===R||"table-cell"===R||"graphic"===R||"presentation"===R||"chart"===R)&&(I.text=void 0===O?void 0:O.text,null!==(V=re.getPropertiesElement("text-properties",z,V))&&(I.text=new odf.TextProperties(V,re,I.text)))},odf.StylePile=function(z,re){function q(P,v){var S,E;return P.hasAttributeNS(O,"parent-style-name")&&(E=P.getAttributeNS(O,"parent-style-name"),-1===v.indexOf(E)&&(S=A(E,v))),new odf.StylePileEntry(P,z,re,S)}var V,A,O=odf.Namespaces.stylens,I={},R={},F={},W={};A=function(P,v){var E,S=F[P];return!S&&(E=I[P])&&(v.push(P),S=q(E,v),F[P]=S),S},this.getStyle=function(P){var S,v=W[P]||F[P],E=[];return v||((S=R[P])||(S=I[P])&&E.push(P),S&&(v=q(S,E))),v},this.addCommonStyle=function(P){var v;P.hasAttributeNS(O,"name")&&(v=P.getAttributeNS(O,"name"),I.hasOwnProperty(v)||(I[v]=P))},this.addAutomaticStyle=function(P){var v;P.hasAttributeNS(O,"name")&&(v=P.getAttributeNS(O,"name"),R.hasOwnProperty(v)||(R[v]=P))},this.setDefaultStyle=function(P){void 0===V&&(V=q(P,[]))},this.getDefaultStyle=function(){return V}},odf.ComputedGraphicStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties,this.graphic=new odf.ComputedGraphicProperties},odf.ComputedParagraphStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties},odf.ComputedTextStyle=function(){this.text=new odf.ComputedTextProperties},odf.StyleCache=function(z){function re(oe,fe,Y,le){var X;if(fe=Y.getAttributeNS(fe,"class-names"))for(fe=fe.split(" "),X=0;X<fe.length;X+=1)(Y=fe[X])&&(le.push(oe),le.push(Y))}function q(oe,fe){var Y=B.getStyleName("paragraph",oe);return void 0!==Y&&(fe.push("paragraph"),fe.push(Y)),oe.namespaceURI!==x||"h"!==oe.localName&&"p"!==oe.localName||re("paragraph",x,oe,fe),fe}function O(oe,fe,Y){var X,$,ue,le=[];for(X=0;X<oe.length;X+=2)void 0!==(ue=F[oe[X]].getStyle(ue=oe[X+1]))&&void 0!==(ue=ue[fe])&&ue!==$&&(le.push(ue),$=ue);return(ue=F[Y].getDefaultStyle())&&void 0!==(ue=ue[fe])&&ue!==$&&le.push(ue),le}function I(oe,fe){var Y=B.getStyleName("text",oe),le=oe.parentNode;return void 0!==Y&&(fe.push("text"),fe.push(Y)),"span"===oe.localName&&oe.namespaceURI===x&&re("text",x,oe,fe),!le||le===z||(le.namespaceURI!==x||"p"!==le.localName&&"h"!==le.localName?I(le,fe):q(le,fe)),fe}function R(oe){return oe=oe.getAttributeNS(H,"family"),F[oe]}var F,W,A,P,v,S,E,he,de,G,U,te,ne,V=this,x=odf.Namespaces.textns,H=odf.Namespaces.stylens,B=new odf.StyleInfo,ae=new odf.StyleParseUtils;this.getComputedGraphicStyle=function(oe){var fe=[];void 0!==(oe=B.getStyleName("graphic",oe))&&(fe.push("graphic"),fe.push(oe)),oe=fe.join("/");var Y=P[oe];return runtime.assert(fe.length%2==0,"Invalid style chain."),void 0===Y&&((Y=new odf.ComputedGraphicStyle).graphic.setGraphicProperties(O(fe,"graphic","graphic")[0]),Y.text.setStyleChain(O(fe,"text","graphic")),Y.paragraph.setStyleChain(O(fe,"paragraph","graphic")),P[oe]=Y),Y},this.getComputedParagraphStyle=function(oe){var fe=(oe=q(oe,[])).join("/"),Y=A[fe];return runtime.assert(oe.length%2==0,"Invalid style chain."),void 0===Y&&((Y=new odf.ComputedParagraphStyle).text.setStyleChain(O(oe,"text","paragraph")),Y.paragraph.setStyleChain(O(oe,"paragraph","paragraph")),A[fe]=Y),Y},this.getComputedTextStyle=function(oe){var fe=(oe=I(oe,[])).join("/"),Y=W[fe];return runtime.assert(oe.length%2==0,"Invalid style chain."),void 0===Y&&((Y=new odf.ComputedTextStyle).text.setStyleChain(O(oe,"text","text")),W[fe]=Y),Y},this.getPageLayout=function(oe){var fe=ne[oe];return fe||((fe=te[oe])?(fe=new odf.PageLayout(fe,ae,U),ne[oe]=fe):fe=U),fe},this.getDefaultPageLayout=function(){return U},this.getMasterPage=function(oe){var fe=de[oe];return void 0===fe&&((fe=he[oe])?(fe=new odf.MasterPage(fe,V),de[oe]=fe):fe=null),fe},this.getDefaultMasterPage=function(){return G},this.update=function(){var oe,fe,Y=null,le=null;for(W={},A={},P={},he={},de={},ne={},te={},v=new odf.StylePile(ae,V),S=new odf.StylePile(ae,V),E=new odf.StylePile(ae,V),F={text:v,paragraph:S,graphic:E},oe=z.styles.firstElementChild;oe;)oe.namespaceURI===H&&((fe=R(oe))?"style"===oe.localName?fe.addCommonStyle(oe):"default-style"===oe.localName&&fe.setDefaultStyle(oe):"default-page-layout"===oe.localName&&(Y=oe)),oe=oe.nextElementSibling;for(U=new odf.PageLayout(Y,ae),oe=z.automaticStyles.firstElementChild;oe;)oe.namespaceURI===H&&((fe=R(oe))&&"style"===oe.localName?fe.addAutomaticStyle(oe):"page-layout"===oe.localName&&(te[oe.getAttributeNS(H,"name")]=oe)),oe=oe.nextElementSibling;for(oe=z.masterStyles.firstElementChild;oe;)oe.namespaceURI===H&&"master-page"===oe.localName&&(le=le||oe,0<(Y=(fe=oe).getAttributeNS(H,"name")).length&&!he.hasOwnProperty(Y)&&(he[Y]=fe)),oe=oe.nextElementSibling;G=new odf.MasterPage(le,V)}},ops.OperationTransformMatrix=function(){function z(v){v.position+=v.length,v.length*=-1}function re(v){var S=0>v.length;return S&&z(v),S}function q(v,S){var x=[];return v&&["style:parent-style-name","style:next-style-name"].forEach(function E(H){v[H]===S&&x.push(H)}),x}function O(v,S){v&&["style:parent-style-name","style:next-style-name"].forEach(function E(x){v[x]===S&&delete v[x]})}function I(v){var S={};return Object.keys(v).forEach(function(E){S[E]="object"==typeof v[E]?I(v[E]):v[E]}),S}function R(v,S,E,x){var H,he,B=!1,ae=!1,de=[];if(x&&x.attributes&&(de=x.attributes.split(",")),v&&(E||0<de.length)&&Object.keys(v).forEach(function(G){var te,U=v[G];"object"!=typeof U&&(E&&(te=E[G]),void 0!==te?(delete v[G],ae=!0,te===U&&(delete E[G],B=!0)):-1!==de.indexOf(G)&&(delete v[G],ae=!0))}),S&&S.attributes&&(E||0<de.length)){for(he=S.attributes.split(","),x=0;x<he.length;x+=1)H=he[x],(E&&void 0!==E[H]||de&&-1!==de.indexOf(H))&&(he.splice(x,1),--x,ae=!0);0<he.length?S.attributes=he.join(","):delete S.attributes}return{majorChanged:B,minorChanged:ae}}function V(v){for(var S in v)if(v.hasOwnProperty(S))return!0;return!1}function F(v){for(var S in v)if(v.hasOwnProperty(S)&&("attributes"!==S||0<v.attributes.length))return!0;return!1}function W(v,S,E,x,H){var G,B=v?v[H]:null,ae=S?S[H]:null,he=E?E[H]:null,de=x?x[H]:null;return G=R(B,ae,he,de),B&&!V(B)&&delete v[H],ae&&!F(ae)&&delete S[H],he&&!V(he)&&delete E[H],de&&!F(de)&&delete x[H],G}function A(v,S){return{opSpecsA:[v],opSpecsB:[S]}}var P;P={AddAnnotation:{AddAnnotation:function(v,S,E){var x;return v.position<S.position?(x=v,E=S):S.position<v.position?(x=S,E=v):(x=E?v:S,E=E?S:v),E.position<x.position+x.length&&(x.length+=2),E.position+=2,{opSpecsA:[v],opSpecsB:[S]}},AddCursor:A,AddMember:A,AddStyle:A,ApplyDirectStyling:function(v,S){return v.position<=S.position?S.position+=2:v.position<=S.position+S.length&&(S.length+=2),{opSpecsA:[v],opSpecsB:[S]}},InsertText:function(v,S){return S.position<=v.position?v.position+=S.text.length:(void 0!==v.length&&S.position<=v.position+v.length&&(v.length+=S.text.length),S.position+=2),{opSpecsA:[v],opSpecsB:[S]}},MergeParagraph:function(v,S){return S.sourceStartPosition<=v.position?--v.position:(void 0!==v.length&&S.sourceStartPosition<=v.position+v.length&&--v.length,S.sourceStartPosition+=2,v.position<S.destinationStartPosition&&(S.destinationStartPosition+=2)),{opSpecsA:[v],opSpecsB:[S]}},MoveCursor:function(v,S){var E=re(S);return v.position<S.position?S.position+=2:v.position<S.position+S.length&&(S.length+=2),E&&z(S),{opSpecsA:[v],opSpecsB:[S]}},RemoveAnnotation:function(v,S){return v.position<S.position?(S.position<v.position+v.length&&(v.length-=S.length+2),S.position+=2):v.position-=S.length+2,{opSpecsA:[v],opSpecsB:[S]}},RemoveCursor:A,RemoveMember:A,RemoveStyle:A,RemoveText:function(v,S){var H,E=S.position,x=S.position+S.length,B=[v],ae=[S];return v.position<=S.position?S.position+=2:v.position<x&&(S.length=v.position-S.position,ae.unshift(H={optype:"RemoveText",memberid:S.memberid,timestamp:S.timestamp,position:v.position+2,length:x-v.position})),S.position+S.length<=v.position?(v.position-=S.length,void 0!==v.length&&H&&(v.length=H.length>=v.length?0:v.length-H.length)):void 0!==v.length&&(x<=(H=v.position+v.length)?v.length-=S.length:E<H&&(v.length=E-v.position)),{opSpecsA:B,opSpecsB:ae}},SetParagraphStyle:function(v,S){return v.position<S.position&&(S.position+=2),{opSpecsA:[v],opSpecsB:[S]}},SplitParagraph:function(v,S){return v.position<S.sourceParagraphPosition&&(S.sourceParagraphPosition+=2),S.position<=v.position?v.position+=1:(void 0!==v.length&&S.position<=v.position+v.length&&(v.length+=1),S.position+=2),{opSpecsA:[v],opSpecsB:[S]}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},AddCursor:{AddCursor:A,AddMember:A,AddStyle:A,ApplyDirectStyling:A,InsertText:A,MergeParagraph:A,MoveCursor:A,RemoveAnnotation:A,RemoveCursor:A,RemoveMember:A,RemoveStyle:A,RemoveText:A,SetParagraphStyle:A,SplitParagraph:A,UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},AddMember:{AddStyle:A,ApplyDirectStyling:A,InsertText:A,MergeParagraph:A,MoveCursor:A,RemoveAnnotation:A,RemoveCursor:A,RemoveStyle:A,RemoveText:A,SetParagraphStyle:A,SplitParagraph:A,UpdateMetadata:A,UpdateParagraphStyle:A},AddStyle:{AddStyle:A,ApplyDirectStyling:A,InsertText:A,MergeParagraph:A,MoveCursor:A,RemoveAnnotation:A,RemoveCursor:A,RemoveMember:A,RemoveStyle:function(v,S){var E,x=[v],H=[S];return v.styleFamily===S.styleFamily&&(0<(E=q(v.setProperties,S.styleName)).length&&(E={optype:"UpdateParagraphStyle",memberid:S.memberid,timestamp:S.timestamp,styleName:v.styleName,removedProperties:{attributes:E.join(",")}},H.unshift(E)),O(v.setProperties,S.styleName)),{opSpecsA:x,opSpecsB:H}},RemoveText:A,SetParagraphStyle:A,SplitParagraph:A,UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},ApplyDirectStyling:{ApplyDirectStyling:function(v,S,E){var x,H,B,ae,he,de,G,U;return ae=[v],B=[S],v.position+v.length<=S.position||v.position>=S.position+S.length||(x=E?v:S,H=E?S:v,(v.position!==S.position||v.length!==S.length)&&(de=I(x),G=I(H)),((S=W(H.setProperties,null,x.setProperties,null,"style:text-properties")).majorChanged||S.minorChanged)&&(B=[],v=[],ae=x.position+x.length,he=H.position+H.length,H.position<x.position?S.minorChanged&&((U=I(G)).length=x.position-H.position,v.push(U),H.position=x.position,H.length=he-H.position):x.position<H.position&&S.majorChanged&&((U=I(de)).length=H.position-x.position,B.push(U),x.position=H.position,x.length=ae-x.position),he>ae?S.minorChanged&&((de=G).position=ae,de.length=he-ae,v.push(de),H.length=ae-H.position):ae>he&&S.majorChanged&&(de.position=he,de.length=ae-he,B.push(de),x.length=he-x.position),x.setProperties&&V(x.setProperties)&&B.push(x),H.setProperties&&V(H.setProperties)&&v.push(H),E?(ae=B,B=v):ae=v)),{opSpecsA:ae,opSpecsB:B}},InsertText:function(v,S){return S.position<=v.position?v.position+=S.text.length:S.position<=v.position+v.length&&(v.length+=S.text.length),{opSpecsA:[v],opSpecsB:[S]}},MergeParagraph:function(v,S){var E=v.position,x=v.position+v.length;return E>=S.sourceStartPosition&&--E,x>=S.sourceStartPosition&&--x,v.position=E,v.length=x-E,{opSpecsA:[v],opSpecsB:[S]}},MoveCursor:A,RemoveAnnotation:function(v,S){var E=v.position,x=v.position+v.length,H=S.position+S.length,B=[v],ae=[S];return S.position<=E&&x<=H?B=[]:(H<E&&(E-=S.length+2),H<x&&(x-=S.length+2),v.position=E,v.length=x-E),{opSpecsA:B,opSpecsB:ae}},RemoveCursor:A,RemoveMember:A,RemoveStyle:A,RemoveText:function(v,S){var E=v.position+v.length,x=S.position+S.length,H=[v],B=[S];return x<=v.position?v.position-=S.length:S.position<E&&(v.position<S.position?v.length=x<E?v.length-S.length:S.position-v.position:(v.position=S.position,x<E?v.length=E-x:H=[])),{opSpecsA:H,opSpecsB:B}},SetParagraphStyle:A,SplitParagraph:function(v,S){return S.position<v.position?v.position+=1:S.position<v.position+v.length&&(v.length+=1),{opSpecsA:[v],opSpecsB:[S]}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},InsertText:{InsertText:function(v,S,E){return v.position<S.position?S.position+=v.text.length:v.position>S.position?v.position+=S.text.length:E?S.position+=v.text.length:v.position+=S.text.length,{opSpecsA:[v],opSpecsB:[S]}},MergeParagraph:function(v,S){return v.position>=S.sourceStartPosition?--v.position:(v.position<S.sourceStartPosition&&(S.sourceStartPosition+=v.text.length),v.position<S.destinationStartPosition&&(S.destinationStartPosition+=v.text.length)),{opSpecsA:[v],opSpecsB:[S]}},MoveCursor:function(v,S){var E=re(S);return v.position<S.position?S.position+=v.text.length:v.position<S.position+S.length&&(S.length+=v.text.length),E&&z(S),{opSpecsA:[v],opSpecsB:[S]}},RemoveAnnotation:function(v,S){var E=v.position,x=S.position+S.length,H=[v],B=[S];return S.position<=E&&E<=x?(H=[],S.length+=v.text.length):x<v.position?v.position-=S.length+2:S.position+=v.text.length,{opSpecsA:H,opSpecsB:B}},RemoveCursor:A,RemoveMember:A,RemoveStyle:A,RemoveText:function(v,S){var E,x=[v],H=[S];return(E=S.position+S.length)<=v.position?v.position-=S.length:v.position<=S.position?S.position+=v.text.length:(S.length=v.position-S.position,H.unshift(E={optype:"RemoveText",memberid:S.memberid,timestamp:S.timestamp,position:v.position+v.text.length,length:E-v.position}),v.position=S.position),{opSpecsA:x,opSpecsB:H}},SetParagraphStyle:function(v,S){return S.position>v.position&&(S.position+=v.text.length),{opSpecsA:[v],opSpecsB:[S]}},SplitParagraph:function(v,S){return v.position<S.sourceParagraphPosition&&(S.sourceParagraphPosition+=v.text.length),v.position<=S.position?S.position+=v.text.length:v.position+=1,{opSpecsA:[v],opSpecsB:[S]}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},MergeParagraph:{MergeParagraph:function(v,S,E){var x=[v],H=[S];return v.destinationStartPosition===S.destinationStartPosition?(x=[],H=[],v.moveCursor&&x.push({optype:"MoveCursor",memberid:v.memberid,timestamp:v.timestamp,position:v.sourceStartPosition-1}),S.moveCursor&&H.push({optype:"MoveCursor",memberid:S.memberid,timestamp:S.timestamp,position:S.sourceStartPosition-1}),v={optype:"SetParagraphStyle",memberid:(v=E?v:S).memberid,timestamp:v.timestamp,position:v.destinationStartPosition,styleName:v.paragraphStyleName},E?x.push(v):H.push(v)):S.sourceStartPosition===v.destinationStartPosition?(v.destinationStartPosition=S.destinationStartPosition,--v.sourceStartPosition,v.paragraphStyleName=S.paragraphStyleName):v.sourceStartPosition===S.destinationStartPosition?(S.destinationStartPosition=v.destinationStartPosition,--S.sourceStartPosition,S.paragraphStyleName=v.paragraphStyleName):v.destinationStartPosition<S.destinationStartPosition?(--S.destinationStartPosition,--S.sourceStartPosition):(--v.destinationStartPosition,--v.sourceStartPosition),{opSpecsA:x,opSpecsB:H}},MoveCursor:function(v,S){var H=S.position,E=S.position+S.length,x=Math.min(H,E);return H=Math.max(H,E),x>=v.sourceStartPosition&&--x,H>=v.sourceStartPosition&&--H,0<=S.length?(S.position=x,S.length=H-x):(S.position=H,S.length=x-H),{opSpecsA:[v],opSpecsB:[S]}},RemoveAnnotation:function(v,S){var E=S.position+S.length,x=[v],H=[S];return S.position<=v.destinationStartPosition&&v.sourceStartPosition<=E?(x=[],--S.length):v.sourceStartPosition<S.position?--S.position:(E<v.destinationStartPosition&&(v.destinationStartPosition-=S.length+2),E<v.sourceStartPosition&&(v.sourceStartPosition-=S.length+2)),{opSpecsA:x,opSpecsB:H}},RemoveCursor:A,RemoveMember:A,RemoveStyle:A,RemoveText:function(v,S){return S.position>=v.sourceStartPosition?--S.position:(S.position<v.destinationStartPosition&&(v.destinationStartPosition-=S.length),S.position<v.sourceStartPosition&&(v.sourceStartPosition-=S.length)),{opSpecsA:[v],opSpecsB:[S]}},SetParagraphStyle:function(v,S){var E=[v],x=[S];return S.position>v.sourceStartPosition?--S.position:(S.position===v.destinationStartPosition||S.position===v.sourceStartPosition)&&(S.position=v.destinationStartPosition,v.paragraphStyleName=S.styleName),{opSpecsA:E,opSpecsB:x}},SplitParagraph:function(v,S){var x=[v],H=[S];return S.position<v.destinationStartPosition?(v.destinationStartPosition+=1,v.sourceStartPosition+=1):S.position>=v.destinationStartPosition&&S.position<v.sourceStartPosition?(S.paragraphStyleName=v.paragraphStyleName,x.push({optype:"SetParagraphStyle",memberid:v.memberid,timestamp:v.timestamp,position:v.destinationStartPosition,styleName:v.paragraphStyleName}),S.position===v.sourceStartPosition-1&&v.moveCursor&&x.push({optype:"MoveCursor",memberid:v.memberid,timestamp:v.timestamp,position:S.position,length:0}),v.destinationStartPosition=S.position+1,v.sourceStartPosition+=1):S.position>=v.sourceStartPosition&&(--S.position,--S.sourceParagraphPosition),{opSpecsA:x,opSpecsB:H}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},MoveCursor:{MoveCursor:A,RemoveAnnotation:function(v,S){var E=re(v),x=v.position+v.length,H=S.position+S.length;return S.position<=v.position&&x<=H?(v.position=S.position-1,v.length=0):(H<v.position?v.position-=S.length+2:H<x&&(v.length-=S.length+2),E&&z(v)),{opSpecsA:[v],opSpecsB:[S]}},RemoveCursor:function(v,S){return{opSpecsA:v.memberid===S.memberid?[]:[v],opSpecsB:[S]}},RemoveMember:A,RemoveStyle:A,RemoveText:function(v,S){var E=re(v),x=v.position+v.length,H=S.position+S.length;return H<=v.position?v.position-=S.length:S.position<x&&(v.position<S.position?v.length=H<x?v.length-S.length:S.position-v.position:(v.position=S.position,v.length=H<x?x-H:0)),E&&z(v),{opSpecsA:[v],opSpecsB:[S]}},SetParagraphStyle:A,SplitParagraph:function(v,S){var E=re(v);return S.position<v.position?v.position+=1:S.position<v.position+v.length&&(v.length+=1),E&&z(v),{opSpecsA:[v],opSpecsB:[S]}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},RemoveAnnotation:{RemoveAnnotation:function(v,S){var E=[v],x=[S];return v.position===S.position&&v.length===S.length?(E=[],x=[]):v.position<S.position?S.position-=v.length+2:v.position-=S.length+2,{opSpecsA:E,opSpecsB:x}},RemoveCursor:A,RemoveMember:A,RemoveStyle:A,RemoveText:function(v,S){var x=S.position+S.length,H=[v],B=[S];return v.position<=S.position&&x<=v.position+v.length?(B=[],v.length-=S.length):x<v.position?v.position-=S.length:S.position<v.position?(v.position=S.position+1,S.length-=v.length+2):S.position-=v.length+2,{opSpecsA:H,opSpecsB:B}},SetParagraphStyle:function(v,S){var E=S.position,x=v.position+v.length,H=[v],B=[S];return v.position<=E&&E<=x?B=[]:x<E&&(S.position-=v.length+2),{opSpecsA:H,opSpecsB:B}},SplitParagraph:function(v,S){var E=S.position,x=v.position+v.length,H=[v],B=[S];return v.position<=E&&E<=x?(B=[],v.length+=1):(x<S.sourceParagraphPosition&&(S.sourceParagraphPosition-=v.length+2),x<E?S.position-=v.length+2:v.position+=1),{opSpecsA:H,opSpecsB:B}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},RemoveCursor:{RemoveCursor:function(v,S){var E=v.memberid===S.memberid;return{opSpecsA:E?[]:[v],opSpecsB:E?[]:[S]}},RemoveMember:A,RemoveStyle:A,RemoveText:A,SetParagraphStyle:A,SplitParagraph:A,UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},RemoveMember:{RemoveStyle:A,RemoveText:A,SetParagraphStyle:A,SplitParagraph:A,UpdateMetadata:A,UpdateParagraphStyle:A},RemoveStyle:{RemoveStyle:function(v,S){var E=v.styleName===S.styleName&&v.styleFamily===S.styleFamily;return{opSpecsA:E?[]:[v],opSpecsB:E?[]:[S]}},RemoveText:A,SetParagraphStyle:function(v,S){var x=[v],H=[S];return"paragraph"===v.styleFamily&&v.styleName===S.styleName&&(x.unshift({optype:"SetParagraphStyle",memberid:v.memberid,timestamp:v.timestamp,position:S.position,styleName:""}),S.styleName=""),{opSpecsA:x,opSpecsB:H}},SplitParagraph:A,UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:function(v,S){var E,x=[v],H=[S];return"paragraph"===v.styleFamily&&(0<(E=q(S.setProperties,v.styleName)).length&&(E={optype:"UpdateParagraphStyle",memberid:v.memberid,timestamp:v.timestamp,styleName:S.styleName,removedProperties:{attributes:E.join(",")}},x.unshift(E)),v.styleName===S.styleName?H=[]:O(S.setProperties,v.styleName)),{opSpecsA:x,opSpecsB:H}}},RemoveText:{RemoveText:function(v,S){var E=v.position+v.length,x=S.position+S.length,H=[v],B=[S];return x<=v.position?v.position-=S.length:E<=S.position?S.position-=v.length:S.position<E&&(v.position<S.position?(v.length=x<E?v.length-S.length:S.position-v.position,E<x?(S.position=v.position,S.length=x-E):B=[]):(E<x?S.length-=v.length:S.position<v.position?S.length=v.position-S.position:B=[],x<E?(v.position=S.position,v.length=E-x):H=[])),{opSpecsA:H,opSpecsB:B}},SetParagraphStyle:function(v,S){return v.position<S.position&&(S.position-=v.length),{opSpecsA:[v],opSpecsB:[S]}},SplitParagraph:function(v,S){var E=v.position+v.length,x=[v],H=[S];return S.position<=v.position?v.position+=1:S.position<E&&(v.length=S.position-v.position,x.unshift(E={optype:"RemoveText",memberid:v.memberid,timestamp:v.timestamp,position:S.position+1,length:E-S.position})),v.position+v.length<=S.position?S.position-=v.length:v.position<S.position&&(S.position=v.position),v.position+v.length<S.sourceParagraphPosition&&(S.sourceParagraphPosition-=v.length),{opSpecsA:x,opSpecsB:H}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},SetParagraphStyle:{SetParagraphStyle:function(v,S,E){return v.position===S.position&&(E?S.styleName=v.styleName:v.styleName=S.styleName),{opSpecsA:[v],opSpecsB:[S]}},SplitParagraph:function(v,S){var H,E=[v],x=[S];return v.position>S.position?v.position+=1:v.position===S.sourceParagraphPosition&&(S.paragraphStyleName=v.styleName,(H=I(v)).position=S.position+1,E.push(H)),{opSpecsA:E,opSpecsB:x}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},SplitParagraph:{SplitParagraph:function(v,S,E){var x,H;return v.position<S.position?x=!0:S.position<v.position?H=!0:v.position===S.position&&(E?x=!0:H=!0),x?(S.position+=1,S.sourceParagraphPosition=v.position<S.sourceParagraphPosition?S.sourceParagraphPosition+1:v.position+1):H&&(v.position+=1,v.sourceParagraphPosition=S.position<S.sourceParagraphPosition?v.sourceParagraphPosition+1:S.position+1),{opSpecsA:[v],opSpecsB:[S]}},UpdateMember:A,UpdateMetadata:A,UpdateParagraphStyle:A},UpdateMember:{UpdateMetadata:A,UpdateParagraphStyle:A},UpdateMetadata:{UpdateMetadata:function(v,S,E){var x,H=[v],B=[S];return x=E?v:S,R((v=E?S:v).setProperties||null,v.removedProperties||null,x.setProperties||null,x.removedProperties||null),x.setProperties&&V(x.setProperties)||x.removedProperties&&F(x.removedProperties)||(E?H=[]:B=[]),v.setProperties&&V(v.setProperties)||v.removedProperties&&F(v.removedProperties)||(E?B=[]:H=[]),{opSpecsA:H,opSpecsB:B}},UpdateParagraphStyle:A},UpdateParagraphStyle:{UpdateParagraphStyle:function(v,S,E){var x,H=[v],B=[S];return v.styleName===S.styleName&&(x=E?v:S,W((v=E?S:v).setProperties,v.removedProperties,x.setProperties,x.removedProperties,"style:paragraph-properties"),W(v.setProperties,v.removedProperties,x.setProperties,x.removedProperties,"style:text-properties"),R(v.setProperties||null,v.removedProperties||null,x.setProperties||null,x.removedProperties||null),x.setProperties&&V(x.setProperties)||x.removedProperties&&F(x.removedProperties)||(E?H=[]:B=[]),v.setProperties&&V(v.setProperties)||v.removedProperties&&F(v.removedProperties)||(E?B=[]:H=[])),{opSpecsA:H,opSpecsB:B}}}},this.passUnchanged=A,this.extendTransformations=function(v){Object.keys(v).forEach(function(S){var x,E=v[S],H=P.hasOwnProperty(S);runtime.log((H?"Extending":"Adding")+" map for optypeA: "+S),H||(P[S]={}),x=P[S],Object.keys(E).forEach(function(B){var ae=x.hasOwnProperty(B);runtime.assert(S<=B,"Wrong order:"+S+", "+B),runtime.log("  "+(ae?"Overwriting":"Adding")+" entry for optypeB: "+B),x[B]=E[B]})})},this.transformOpspecVsOpspec=function(v,S){var x,E=v.optype<=S.optype;return runtime.log("Crosstransforming:"),runtime.log(runtime.toJson(v)),runtime.log(runtime.toJson(S)),E||(x=v,v=S,S=x),(x=(x=P[v.optype])&&x[S.optype])?(x=x(v,S,!E),E||null===x||(x={opSpecsA:x.opSpecsB,opSpecsB:x.opSpecsA})):x=null,runtime.log("result:"),x?(runtime.log(runtime.toJson(x.opSpecsA)),runtime.log(runtime.toJson(x.opSpecsB))):runtime.log("null"),x}},ops.OperationTransformer=function(){function z(q,O){for(var I,R,V=[],F=[];0<q.length&&O;){if(I=q.shift(),!(I=re.transformOpspecVsOpspec(I,O)))return null;if(V=V.concat(I.opSpecsA),0===I.opSpecsB.length){V=V.concat(q),O=null;break}for(;1<I.opSpecsB.length;){if(!(R=z(q,I.opSpecsB.shift())))return null;F=F.concat(R.opSpecsB),q=R.opSpecsA}O=I.opSpecsB.pop()}return O&&F.push(O),{opSpecsA:V,opSpecsB:F}}var re=new ops.OperationTransformMatrix;this.getOperationTransformMatrix=function(){return re},this.transform=function(q,O){for(var I,R=[];0<O.length;){if(!(I=z(q,O.shift())))return null;q=I.opSpecsA,R=R.concat(I.opSpecsB)}return{opSpecsA:q,opSpecsB:R}}};var webodf_css='@namespace draw url(urn:oasis:names:tc:opendocument:xmlns:drawing:1.0);@namespace fo url(urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0);@namespace office url(urn:oasis:names:tc:opendocument:xmlns:office:1.0);@namespace presentation url(urn:oasis:names:tc:opendocument:xmlns:presentation:1.0);@namespace style url(urn:oasis:names:tc:opendocument:xmlns:style:1.0);@namespace svg url(urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0);@namespace table url(urn:oasis:names:tc:opendocument:xmlns:table:1.0);@namespace text url(urn:oasis:names:tc:opendocument:xmlns:text:1.0);@namespace webodfhelper url(urn:webodf:names:helper);@namespace cursor url(urn:webodf:names:cursor);@namespace editinfo url(urn:webodf:names:editinfo);@namespace annotation url(urn:webodf:names:annotation);@namespace dc url(http://purl.org/dc/elements/1.1/);@namespace svgns url(http://www.w3.org/2000/svg);office|document > *, office|document-content > * {display: none;}office|body, office|document {display: inline-block;position: relative;}text|p, text|h {display: block;padding: 0;margin: 0;line-height: normal;position: relative;}text|p::after, text|h::after {content: "\\200B";white-space: pre;}*[webodfhelper|containsparagraphanchor] {position: relative;}text|s {white-space: pre;}text|tab {display: inline;white-space: pre;}text|tracked-changes {display: none;}office|binary-data {display: none;}office|text {display: block;text-align: left;overflow: visible;word-wrap: break-word;}office|text::selection {background: transparent;}.webodf-virtualSelections *::selection {background: transparent;}.webodf-virtualSelections *::-moz-selection {background: transparent;}office|text * draw|text-box {display: block;border: 1px solid #d3d3d3;}office|text draw|frame {z-index: 1;}office|spreadsheet {display: block;border-collapse: collapse;empty-cells: show;font-family: sans-serif;font-size: 10pt;text-align: left;page-break-inside: avoid;overflow: hidden;}office|presentation {display: inline-block;text-align: left;}#shadowContent {display: inline-block;text-align: left;}draw|page {display: block;position: relative;overflow: hidden;}presentation|notes, presentation|footer-decl, presentation|date-time-decl {display: none;}@media print {draw|page {border: 1pt solid black;page-break-inside: avoid;}presentation|notes {}}office|spreadsheet text|p {border: 0px;padding: 1px;margin: 0px;}office|spreadsheet table|table {margin: 3px;}office|spreadsheet table|table:after {}office|spreadsheet table|table-row {counter-increment: row;}office|spreadsheet table|table-row:before {width: 3em;background: #cccccc;border: 1px solid black;text-align: center;content: counter(row);display: table-cell;}office|spreadsheet table|table-cell {border: 1px solid #cccccc;}table|table {display: table;}draw|frame table|table {width: 100%;height: 100%;background: white;}table|table-header-rows {display: table-header-group;}table|table-row {display: table-row;}table|table-column {display: table-column;}table|table-cell {width: 0.889in;display: table-cell;word-break: break-all;}draw|frame {display: block;}draw|image {display: block;width: 100%;height: 100%;top: 0px;left: 0px;background-repeat: no-repeat;background-size: 100% 100%;-moz-background-size: 100% 100%;}draw|frame > draw|image:nth-of-type(n+2) {display: none;}text|list:before {display: none;content:"";}text|list {display: block;}text|list-item {display: block;}text|number {display:none;}text|a {color: blue;text-decoration: underline;cursor: pointer;}.webodf-inactiveLinks text|a {cursor: text;}text|note-citation {vertical-align: super;font-size: smaller;}text|note-body {display: none;}text|note:hover text|note-citation {background: #dddddd;}text|note:hover text|note-body {display: block;left:1em;max-width: 80%;position: absolute;background: #ffffaa;}text|bibliography-source {display: none;}svg|title, svg|desc {display: none;}video {width: 100%;height: 100%}cursor|anchor {display: none;}cursor|cursor {display: none;}.webodf-caretOverlay {position: absolute;top: 5%;height: 1em;z-index: 10;padding-left: 1px;pointer-events: none;}.webodf-caretOverlay .caret {position: absolute;border-left: 2px solid black;top: 0;bottom: 0;right: 0;}.webodf-caretOverlay .handle {position: absolute;margin-top: 5px;padding-top: 3px;margin-left: auto;margin-right: auto;width: 64px;height: 68px;border-radius: 5px;opacity: 0.3;text-align: center;background-color: black;box-shadow: 0px 0px 5px rgb(90, 90, 90);border: 1px solid black;top: -85px;right: -32px;}.webodf-caretOverlay .handle > img {box-shadow: 0px 0px 5px rgb(90, 90, 90) inset;background-color: rgb(200, 200, 200);border-radius: 5px;border: 2px solid;height: 60px;width: 60px;display: block;margin: auto;}.webodf-caretOverlay .handle.active {opacity: 0.8;}.webodf-caretOverlay .handle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 43%;}.webodf-caretSizer {display: inline-block;width: 0;visibility: hidden;}#eventTrap {display: block;position: absolute;bottom: 0;left: 0;outline: none;opacity: 0;color: rgba(255, 255, 255, 0);pointer-events: none;white-space: pre;overflow: hidden;}cursor|cursor > #composer {text-decoration: underline;}cursor|cursor[cursor|caret-sizer-active="true"],cursor|cursor[cursor|composing="true"] {display: inline;}editinfo|editinfo {display: inline-block;}.editInfoMarker {position: absolute;width: 10px;height: 100%;left: -20px;opacity: 0.8;top: 0;border-radius: 5px;background-color: transparent;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);}.editInfoMarker:hover {box-shadow: 0px 0px 8px rgba(0, 0, 0, 1);}.editInfoHandle {position: absolute;background-color: black;padding: 5px;border-radius: 5px;opacity: 0.8;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);bottom: 100%;margin-bottom: 10px;z-index: 3;left: -25px;}.editInfoHandle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 5px;}.editInfo {font-family: sans-serif;font-weight: normal;font-style: normal;text-decoration: none;color: white;width: 100%;height: 12pt;}.editInfoColor {float: left;width: 10pt;height: 10pt;border: 1px solid white;}.editInfoAuthor {float: left;margin-left: 5pt;font-size: 10pt;text-align: left;height: 12pt;line-height: 12pt;}.editInfoTime {float: right;margin-left: 30pt;font-size: 8pt;font-style: italic;color: yellow;height: 12pt;line-height: 12pt;}.annotationWrapper {display: inline;position: relative;}.annotationRemoveButton:before {content: "\xd7";color: white;padding: 5px;line-height: 1em;}.annotationRemoveButton {width: 20px;height: 20px;border-radius: 10px;background-color: black;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);position: absolute;top: -10px;left: -10px;z-index: 3;text-align: center;font-family: sans-serif;font-style: normal;font-weight: normal;text-decoration: none;font-size: 15px;}.annotationRemoveButton:hover {cursor: pointer;box-shadow: 0px 0px 5px rgba(0, 0, 0, 1);}.annotationNote {width: 4cm;position: absolute;display: inline;z-index: 10;top: 0;}.annotationNote > office|annotation {display: block;text-align: left;}.annotationConnector {position: absolute;display: inline;top: 0;z-index: 2;border-top: 1px dashed brown;}.annotationConnector.angular {-moz-transform-origin: left top;-webkit-transform-origin: left top;-ms-transform-origin: left top;transform-origin: left top;}.annotationConnector.horizontal {left: 0;}.annotationConnector.horizontal:before {content: "";display: inline;position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: brown transparent transparent transparent;top: -1px;left: -5px;}office|annotation {width: 100%;height: 100%;display: none;background: rgb(198, 238, 184);background: -moz-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -webkit-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -o-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -ms-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: linear-gradient(180deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);box-shadow: 0 3px 4px -3px #ccc;}office|annotation > dc|creator {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;color: white;background-color: brown;padding: 4px;}office|annotation > dc|date {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;border: 4px solid transparent;color: black;}office|annotation > text|list {display: block;padding: 5px;}office|annotation text|p {font-size: 10pt;color: black;font-weight: normal;font-style: normal;text-decoration: none;font-family: sans-serif;}#annotationsPane {background-color: #EAEAEA;width: 4cm;height: 100%;display: none;position: absolute;outline: 1px solid #ccc;}.webodf-annotationHighlight {background-color: yellow;position: relative;}.webodf-selectionOverlay {position: absolute;pointer-events: none;top: 0;left: 0;top: 0;left: 0;width: 100%;height: 100%;z-index: 15;}.webodf-selectionOverlay > polygon {fill-opacity: 0.3;stroke-opacity: 0.8;stroke-width: 1;fill-rule: evenodd;}.webodf-selectionOverlay > .webodf-draggable {fill-opacity: 0.8;stroke-opacity: 0;stroke-width: 8;pointer-events: all;display: none;-moz-transform-origin: center center;-webkit-transform-origin: center center;-ms-transform-origin: center center;transform-origin: center center;}#imageSelector {display: none;position: absolute;border-style: solid;border-color: black;}#imageSelector > div {width: 5px;height: 5px;display: block;position: absolute;border: 1px solid black;background-color: #ffffff;}#imageSelector > .topLeft {top: -4px;left: -4px;}#imageSelector > .topRight {top: -4px;right: -4px;}#imageSelector > .bottomRight {right: -4px;bottom: -4px;}#imageSelector > .bottomLeft {bottom: -4px;left: -4px;}#imageSelector > .topMiddle {top: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .rightMiddle {top: 50%;right: -4px;margin-top: -2.5px;}#imageSelector > .bottomMiddle {bottom: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .leftMiddle {top: 50%;left: -4px;margin-top: -2.5px;}div.webodf-customScrollbars::-webkit-scrollbar{width: 8px;height: 8px;background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-track{background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-thumb{background-color: #444;border-radius: 4px;}.webodf-hyperlinkTooltip {display: none;color: white;background-color: black;border-radius: 5px;box-shadow: 2px 2px 5px gray;padding: 3px;position: absolute;max-width: 210px;text-align: left;word-break: break-all;z-index: 16;}.webodf-hyperlinkTooltipText {display: block;font-weight: bold;}';!function(z){var re=typeof window<"u"?window:typeof global<"u"?global:{};(re.externs||(re.externs={})).JSZip=function O(I,R,V){function F(P,v){if(!R[P]){if(!I[P]){var S="function"==typeof require&&require;if(!v&&S)return S(P,!0);if(W)return W(P,!0);throw new Error("Cannot find module '"+P+"'")}var E=R[P]={exports:{}};I[P][0].call(E.exports,function(x){return F(I[P][1][x]||x)},E,E.exports,O,I,R,V)}return R[P].exports}for(var W="function"==typeof require&&require,A=0;A<V.length;A++)F(V[A]);return F}({1:[function(O,I,R){var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";R.encode=function(F,W){for(var P,v,S,E,x,H,B,A="",ae=0;ae<F.length;)E=(P=F.charCodeAt(ae++))>>2,x=(3&P)<<4|(v=F.charCodeAt(ae++))>>4,H=(15&v)<<2|(S=F.charCodeAt(ae++))>>6,B=63&S,isNaN(v)?H=B=64:isNaN(S)&&(B=64),A=A+V.charAt(E)+V.charAt(x)+V.charAt(H)+V.charAt(B);return A},R.decode=function(F,W){var v,S,E,x,H,B,A="",ae=0;for(F=F.replace(/[^A-Za-z0-9\+\/\=]/g,"");ae<F.length;)E=V.indexOf(F.charAt(ae++)),v=(15&(x=V.indexOf(F.charAt(ae++))))<<4|(H=V.indexOf(F.charAt(ae++)))>>2,S=(3&H)<<6|(B=V.indexOf(F.charAt(ae++))),A+=String.fromCharCode(E<<2|x>>4),64!=H&&(A+=String.fromCharCode(v)),64!=B&&(A+=String.fromCharCode(S));return A}},{}],2:[function(O,I,R){function V(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}V.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},I.exports=V},{}],3:[function(O,I,R){R.STORE={magic:"\0\0",compress:function(V){return V},uncompress:function(V){return V},compressInputType:null,uncompressInputType:null},R.DEFLATE=O("./flate")},{"./flate":8}],4:[function(O,I,R){var V=O("./utils"),F=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];I.exports=function(A,P){if(typeof A>"u"||!A.length)return 0;var v="string"!==V.getTypeOf(A);typeof P>"u"&&(P=0);var x=0;P^=-1;for(var H=0,B=A.length;H<B;H++)x=v?A[H]:A.charCodeAt(H),P=P>>>8^F[255&(P^x)];return-1^P}},{"./utils":21}],5:[function(O,I,R){var V=O("./utils");function F(W){this.data=null,this.length=0,this.index=0}F.prototype={checkOffset:function(W){this.checkIndex(this.index+W)},checkIndex:function(W){if(this.length<W||W<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+W+"). Corrupted zip ?")},setIndex:function(W){this.checkIndex(W),this.index=W},skip:function(W){this.setIndex(this.index+W)},byteAt:function(W){},readInt:function(W){var P,A=0;for(this.checkOffset(W),P=this.index+W-1;P>=this.index;P--)A=(A<<8)+this.byteAt(P);return this.index+=W,A},readString:function(W){return V.transformTo("string",this.readData(W))},readData:function(W){},lastIndexOfSignature:function(W){},readDate:function(){var W=this.readInt(4);return new Date(1980+(W>>25&127),(W>>21&15)-1,W>>16&31,W>>11&31,W>>5&63,(31&W)<<1)}},I.exports=F},{"./utils":21}],6:[function(O,I,R){R.base64=!1,R.binary=!1,R.dir=!1,R.createFolders=!1,R.date=null,R.compression=null,R.comment=null},{}],7:[function(O,I,R){var V=O("./utils");R.string2binary=function(F){return V.string2binary(F)},R.string2Uint8Array=function(F){return V.transformTo("uint8array",F)},R.uint8Array2String=function(F){return V.transformTo("string",F)},R.string2Blob=function(F){var W=V.transformTo("arraybuffer",F);return V.arrayBuffer2Blob(W)},R.arrayBuffer2Blob=function(F){return V.arrayBuffer2Blob(F)},R.transformTo=function(F,W){return V.transformTo(F,W)},R.getTypeOf=function(F){return V.getTypeOf(F)},R.checkSupport=function(F){return V.checkSupport(F)},R.MAX_VALUE_16BITS=V.MAX_VALUE_16BITS,R.MAX_VALUE_32BITS=V.MAX_VALUE_32BITS,R.pretty=function(F){return V.pretty(F)},R.findCompression=function(F){return V.findCompression(F)},R.isRegExp=function(F){return V.isRegExp(F)}},{"./utils":21}],8:[function(O,I,R){var V=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",F=O("pako");R.uncompressInputType=V?"uint8array":"array",R.compressInputType=V?"uint8array":"array",R.magic="\b\0",R.compress=function(W){return F.deflateRaw(W)},R.uncompress=function(W){return F.inflateRaw(W)}},{pako:24}],9:[function(O,I,R){var V=O("./base64");function F(W,A){if(!(this instanceof F))return new F(W,A);this.files={},this.comment=null,this.root="",W&&this.load(W,A),this.clone=function(){var P=new F;for(var v in this)"function"!=typeof this[v]&&(P[v]=this[v]);return P}}(F.prototype=O("./object")).load=O("./load"),F.support=O("./support"),F.defaults=O("./defaults"),F.utils=O("./deprecatedPublicUtils"),F.base64={encode:function(W){return V.encode(W)},decode:function(W){return V.decode(W)}},F.compressions=O("./compressions"),I.exports=F},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(O,I,R){var V=O("./base64"),F=O("./zipEntries");I.exports=function(W,A){var P,v,S,E;for((A=A||{}).base64&&(W=V.decode(W)),P=(v=new F(W,A)).files,S=0;S<P.length;S++)this.file((E=P[S]).fileName,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileComment.length?E.fileComment:null,createFolders:A.createFolders});return v.zipComment.length&&(this.comment=v.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(O,I,R){(function(V){I.exports=function(F,W){return new V(F,W)},I.exports.test=function(F){return V.isBuffer(F)}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],12:[function(O,I,R){var V=O("./uint8ArrayReader");function F(W){this.data=W,this.length=this.data.length,this.index=0}(F.prototype=new V).readData=function(W){this.checkOffset(W);var A=this.data.slice(this.index,this.index+W);return this.index+=W,A},I.exports=F},{"./uint8ArrayReader":18}],13:[function(O,I,R){var V=O("./support"),F=O("./utils"),W=O("./crc32"),A=O("./signature"),P=O("./defaults"),v=O("./base64"),S=O("./compressions"),E=O("./compressedObject"),x=O("./nodeBuffer"),H=O("./utf8"),B=O("./stringWriter"),ae=O("./uint8ArrayWriter"),he=function(ue){if(ue._data instanceof E&&(ue._data=ue._data.getContent(),ue.options.binary=!0,ue.options.base64=!1,"uint8array"===F.getTypeOf(ue._data))){var ve=ue._data;ue._data=new Uint8Array(ve.length),0!==ve.length&&ue._data.set(ve,0)}return ue._data},de=function(ue){var ve=he(ue);return"string"===F.getTypeOf(ve)?!ue.options.binary&&V.nodebuffer?x(ve,"utf-8"):ue.asBinary():ve},G=function(ue){var ve=he(this);return null===ve||typeof ve>"u"?"":(this.options.base64&&(ve=v.decode(ve)),ve=ue&&this.options.binary?we.utf8decode(ve):F.transformTo("string",ve),!ue&&!this.options.binary&&(ve=F.transformTo("string",we.utf8encode(ve))),ve)},U=function(ue,ve,Ae){this.name=ue,this.dir=Ae.dir,this.date=Ae.date,this.comment=Ae.comment,this._data=ve,this.options=Ae,this._initialMetadata={dir:Ae.dir,date:Ae.date}};U.prototype={asText:function(){return G.call(this,!0)},asBinary:function(){return G.call(this,!1)},asNodeBuffer:function(){var ue=de(this);return F.transformTo("nodebuffer",ue)},asUint8Array:function(){var ue=de(this);return F.transformTo("uint8array",ue)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var te=function(ue,ve){var je,Ae="";for(je=0;je<ve;je++)Ae+=String.fromCharCode(255&ue),ue>>>=8;return Ae},ne=function(){var ve,Ae,ue={};for(ve=0;ve<arguments.length;ve++)for(Ae in arguments[ve])arguments[ve].hasOwnProperty(Ae)&&typeof ue[Ae]>"u"&&(ue[Ae]=arguments[ve][Ae]);return ue},fe=function(ue,ve,Ae){var Ye,je=F.getTypeOf(ve);if((Ae=function(ue){return!0===(ue=ue||{}).base64&&null==ue.binary&&(ue.binary=!0),(ue=ne(ue,P)).date=ue.date||new Date,null!==ue.compression&&(ue.compression=ue.compression.toUpperCase()),ue}(Ae)).createFolders&&(Ye=Y(ue))&&le.call(this,Ye,!0),Ae.dir||null===ve||typeof ve>"u")Ae.base64=!1,Ae.binary=!1,ve=null;else if("string"===je)Ae.binary&&!Ae.base64&&!0!==Ae.optimizedBinaryString&&(ve=F.string2binary(ve));else{if(Ae.base64=!1,Ae.binary=!0,!(je||ve instanceof E))throw new Error("The data of '"+ue+"' is in an unsupported format !");"arraybuffer"===je&&(ve=F.transformTo("uint8array",ve))}var ft=new U(ue,ve,Ae);return this.files[ue]=ft,ft},Y=function(ue){"/"==ue.slice(-1)&&(ue=ue.substring(0,ue.length-1));var ve=ue.lastIndexOf("/");return ve>0?ue.substring(0,ve):""},le=function(ue,ve){return"/"!=ue.slice(-1)&&(ue+="/"),ve=typeof ve<"u"&&ve,this.files[ue]||fe.call(this,ue,null,{dir:!0,createFolders:ve}),this.files[ue]},X=function(ue,ve){var je,Ae=new E;return ue._data instanceof E?(Ae.uncompressedSize=ue._data.uncompressedSize,Ae.crc32=ue._data.crc32,0===Ae.uncompressedSize||ue.dir?(ve=S.STORE,Ae.compressedContent="",Ae.crc32=0):ue._data.compressionMethod===ve.magic?Ae.compressedContent=ue._data.getCompressedContent():(je=ue._data.getContent(),Ae.compressedContent=ve.compress(F.transformTo(ve.compressInputType,je)))):((!(je=de(ue))||0===je.length||ue.dir)&&(ve=S.STORE,je=""),Ae.uncompressedSize=je.length,Ae.crc32=W(je),Ae.compressedContent=ve.compress(F.transformTo(ve.compressInputType,je))),Ae.compressedSize=Ae.compressedContent.length,Ae.compressionMethod=ve.magic,Ae},$=function(ue,ve,Ae,je){var pt,Ve,xt,Me,ft=F.transformTo("string",H.utf8encode(ve.name)),Rt=ve.comment||"",Ee=F.transformTo("string",H.utf8encode(Rt)),Le=ft.length!==ve.name.length,ot=Ee.length!==Rt.length,yt=ve.options,et="",We="",bt="";xt=ve._initialMetadata.dir!==ve.dir?ve.dir:yt.dir,pt=(Me=ve._initialMetadata.date!==ve.date?ve.date:yt.date).getHours(),pt<<=6,pt|=Me.getMinutes(),pt<<=5,pt|=Me.getSeconds()/2,Ve=Me.getFullYear()-1980,Ve<<=4,Ve|=Me.getMonth()+1,Ve<<=5,Ve|=Me.getDate(),Le&&(We=te(1,1)+te(W(ft),4)+ft,et+="up"+te(We.length,2)+We),ot&&(bt=te(1,1)+te(this.crc32(Ee),4)+Ee,et+="uc"+te(bt.length,2)+bt);var Oe="";return Oe+="\n\0",Oe+=Le||ot?"\0\b":"\0\0",Oe+=Ae.compressionMethod,Oe+=te(pt,2),Oe+=te(Ve,2),Oe+=te(Ae.crc32,4),Oe+=te(Ae.compressedSize,4),Oe+=te(Ae.uncompressedSize,4),Oe+=te(ft.length,2),Oe+=te(et.length,2),{fileRecord:A.LOCAL_FILE_HEADER+Oe+ft+et,dirRecord:A.CENTRAL_FILE_HEADER+"\x14\0"+Oe+te(Ee.length,2)+"\0\0\0\0"+(!0===xt?"\x10\0\0\0":"\0\0\0\0")+te(je,4)+ft+et+Ee,compressedObject:Ae}},we={load:function(ue,ve){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(ue){var Ae,je,Ye,ft,ve=[];for(Ae in this.files)!this.files.hasOwnProperty(Ae)||(ft=new U((Ye=this.files[Ae]).name,Ye._data,ne(Ye.options)),je=Ae.slice(this.root.length,Ae.length),Ae.slice(0,this.root.length)===this.root&&ue(je,ft)&&ve.push(ft));return ve},file:function(ue,ve,Ae){if(1===arguments.length){if(F.isRegExp(ue)){var je=ue;return this.filter(function(Ye,ft){return!ft.dir&&je.test(Ye)})}return this.filter(function(Ye,ft){return!ft.dir&&Ye===ue})[0]||null}return fe.call(this,ue=this.root+ue,ve,Ae),this},folder:function(ue){if(!ue)return this;if(F.isRegExp(ue))return this.filter(function(Ye,ft){return ft.dir&&ue.test(Ye)});var Ae=le.call(this,this.root+ue),je=this.clone();return je.root=Ae.name,je},remove:function(ue){var ve=this.files[ue=this.root+ue];if(ve||("/"!=ue.slice(-1)&&(ue+="/"),ve=this.files[ue]),ve&&!ve.dir)delete this.files[ue];else for(var Ae=this.filter(function(Ye,ft){return ft.name.slice(0,ue.length)===ue}),je=0;je<Ae.length;je++)delete this.files[Ae[je].name];return this},generate:function(ue){ue=ne(ue||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),F.checkSupport(ue.type);var Ye,ft,ve=[],Ae=0,je=0,Rt=F.transformTo("string",this.utf8encode(ue.comment||this.comment||""));for(var Ee in this.files)if(this.files.hasOwnProperty(Ee)){var Le=this.files[Ee],ot=Le.options.compression||ue.compression.toUpperCase(),yt=S[ot];if(!yt)throw new Error(ot+" is not a valid compression method !");var pt=X.call(this,Le,yt),Ve=$.call(this,Ee,Le,pt,Ae);Ae+=Ve.fileRecord.length+pt.compressedSize,je+=Ve.dirRecord.length,ve.push(Ve)}var et;et=A.CENTRAL_DIRECTORY_END+"\0\0\0\0"+te(ve.length,2)+te(ve.length,2)+te(je,4)+te(Ae,4)+te(Rt.length,2)+Rt;var We=ue.type.toLowerCase();for(Ye="uint8array"===We||"arraybuffer"===We||"blob"===We||"nodebuffer"===We?new ae(Ae+je+et.length):new B(Ae+je+et.length),ft=0;ft<ve.length;ft++)Ye.append(ve[ft].fileRecord),Ye.append(ve[ft].compressedObject.compressedContent);for(ft=0;ft<ve.length;ft++)Ye.append(ve[ft].dirRecord);Ye.append(et);var bt=Ye.finalize();switch(ue.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return F.transformTo(ue.type.toLowerCase(),bt);case"blob":return F.arrayBuffer2Blob(F.transformTo("arraybuffer",bt));case"base64":return ue.base64?v.encode(bt):bt;default:return bt}},crc32:function(ue,ve){return W(ue,ve)},utf8encode:function(ue){return F.transformTo("string",H.utf8encode(ue))},utf8decode:function(ue){return H.utf8decode(ue)}};I.exports=we},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(O,I,R){R.LOCAL_FILE_HEADER="PK\x03\x04",R.CENTRAL_FILE_HEADER="PK\x01\x02",R.CENTRAL_DIRECTORY_END="PK\x05\x06",R.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",R.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",R.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(O,I,R){var V=O("./dataReader"),F=O("./utils");function W(A,P){this.data=A,P||(this.data=F.string2binary(this.data)),this.length=this.data.length,this.index=0}(W.prototype=new V).byteAt=function(A){return this.data.charCodeAt(A)},W.prototype.lastIndexOfSignature=function(A){return this.data.lastIndexOf(A)},W.prototype.readData=function(A){this.checkOffset(A);var P=this.data.slice(this.index,this.index+A);return this.index+=A,P},I.exports=W},{"./dataReader":5,"./utils":21}],16:[function(O,I,R){var V=O("./utils"),F=function(){this.data=[]};F.prototype={append:function(W){W=V.transformTo("string",W),this.data.push(W)},finalize:function(){return this.data.join("")}},I.exports=F},{"./utils":21}],17:[function(O,I,R){(function(V){if(R.base64=!0,R.array=!0,R.string=!0,R.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",R.nodebuffer=typeof V<"u",R.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")R.blob=!1;else{var F=new ArrayBuffer(0);try{R.blob=0===new Blob([F],{type:"application/zip"}).size}catch{try{var A=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);A.append(F),R.blob=0===A.getBlob("application/zip").size}catch{R.blob=!1}}}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],18:[function(O,I,R){var V=O("./dataReader");function F(W){W&&(this.data=W,this.length=this.data.length,this.index=0)}(F.prototype=new V).byteAt=function(W){return this.data[W]},F.prototype.lastIndexOfSignature=function(W){for(var A=W.charCodeAt(0),P=W.charCodeAt(1),v=W.charCodeAt(2),S=W.charCodeAt(3),E=this.length-4;E>=0;--E)if(this.data[E]===A&&this.data[E+1]===P&&this.data[E+2]===v&&this.data[E+3]===S)return E;return-1},F.prototype.readData=function(W){if(this.checkOffset(W),0===W)return new Uint8Array(0);var A=this.data.subarray(this.index,this.index+W);return this.index+=W,A},I.exports=F},{"./dataReader":5}],19:[function(O,I,R){var V=O("./utils"),F=function(W){this.data=new Uint8Array(W),this.index=0};F.prototype={append:function(W){0!==W.length&&(W=V.transformTo("uint8array",W),this.data.set(W,this.index),this.index+=W.length)},finalize:function(){return this.data}},I.exports=F},{"./utils":21}],20:[function(O,I,R){for(var V=O("./utils"),F=O("./support"),W=O("./nodeBuffer"),A=new Array(256),P=0;P<256;P++)A[P]=P>=252?6:P>=248?5:P>=240?4:P>=224?3:P>=192?2:1;A[254]=A[254]=1;var S=function(x,H){var B;for((H=H||x.length)>x.length&&(H=x.length),B=H-1;B>=0&&128==(192&x[B]);)B--;return B<0||0===B?H:B+A[x[B]]>H?B:H},E=function(x){var B,ae,he,de,G=x.length,U=new Array(2*G);for(ae=0,B=0;B<G;)if((he=x[B++])<128)U[ae++]=he;else if((de=A[he])>4)U[ae++]=65533,B+=de-1;else{for(he&=2===de?31:3===de?15:7;de>1&&B<G;)he=he<<6|63&x[B++],de--;de>1?U[ae++]=65533:he<65536?U[ae++]=he:(U[ae++]=55296|(he-=65536)>>10&1023,U[ae++]=56320|1023&he)}return U.length!==ae&&(U.subarray?U=U.subarray(0,ae):U.length=ae),V.applyFromCharCode(U)};R.utf8encode=function(H){return F.nodebuffer?W(H,"utf-8"):function(x){var H,B,ae,he,de,G=x.length,U=0;for(he=0;he<G;he++)55296==(64512&(B=x.charCodeAt(he)))&&he+1<G&&56320==(64512&(ae=x.charCodeAt(he+1)))&&(B=65536+(B-55296<<10)+(ae-56320),he++),U+=B<128?1:B<2048?2:B<65536?3:4;for(H=F.uint8array?new Uint8Array(U):new Array(U),de=0,he=0;de<U;he++)55296==(64512&(B=x.charCodeAt(he)))&&he+1<G&&56320==(64512&(ae=x.charCodeAt(he+1)))&&(B=65536+(B-55296<<10)+(ae-56320),he++),B<128?H[de++]=B:B<2048?(H[de++]=192|B>>>6,H[de++]=128|63&B):B<65536?(H[de++]=224|B>>>12,H[de++]=128|B>>>6&63,H[de++]=128|63&B):(H[de++]=240|B>>>18,H[de++]=128|B>>>12&63,H[de++]=128|B>>>6&63,H[de++]=128|63&B);return H}(H)},R.utf8decode=function(H){if(F.nodebuffer)return V.transformTo("nodebuffer",H).toString("utf-8");for(var B=[],ae=0,he=(H=V.transformTo(F.uint8array?"uint8array":"array",H)).length;ae<he;){var G=S(H,Math.min(ae+65536,he));B.push(E(F.uint8array?H.subarray(ae,G):H.slice(ae,G))),ae=G}return B.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(O,I,R){var V=O("./support"),F=O("./compressions"),W=O("./nodeBuffer");function A(x){return x}function P(x,H){for(var B=0;B<x.length;++B)H[B]=255&x.charCodeAt(B);return H}function v(x){var H=65536,B=[],ae=x.length,he=R.getTypeOf(x),de=0,G=!0;try{switch(he){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,W(0))}}catch{G=!1}if(!G){for(var U="",te=0;te<x.length;te++)U+=String.fromCharCode(x[te]);return U}for(;de<ae&&H>1;)try{B.push(String.fromCharCode.apply(null,"array"===he||"nodebuffer"===he?x.slice(de,Math.min(de+H,ae)):x.subarray(de,Math.min(de+H,ae)))),de+=H}catch{H=Math.floor(H/2)}return B.join("")}function S(x,H){for(var B=0;B<x.length;B++)H[B]=x[B];return H}R.string2binary=function(x){for(var H="",B=0;B<x.length;B++)H+=String.fromCharCode(255&x.charCodeAt(B));return H},R.arrayBuffer2Blob=function(x){R.checkSupport("blob");try{return new Blob([x],{type:"application/zip"})}catch{try{var B=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return B.append(x),B.getBlob("application/zip")}catch{throw new Error("Bug : can't construct the Blob.")}}},R.applyFromCharCode=v;var E={};E.string={string:A,array:function(x){return P(x,new Array(x.length))},arraybuffer:function(x){return E.string.uint8array(x).buffer},uint8array:function(x){return P(x,new Uint8Array(x.length))},nodebuffer:function(x){return P(x,W(x.length))}},E.array={string:v,array:A,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return W(x)}},E.arraybuffer={string:function(x){return v(new Uint8Array(x))},array:function(x){return S(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:A,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return W(new Uint8Array(x))}},E.uint8array={string:v,array:function(x){return S(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:A,nodebuffer:function(x){return W(x)}},E.nodebuffer={string:v,array:function(x){return S(x,new Array(x.length))},arraybuffer:function(x){return E.nodebuffer.uint8array(x).buffer},uint8array:function(x){return S(x,new Uint8Array(x.length))},nodebuffer:A},R.transformTo=function(x,H){if(H||(H=""),!x)return H;R.checkSupport(x);var B=R.getTypeOf(H);return E[B][x](H)},R.getTypeOf=function(x){return"string"==typeof x?"string":"[object Array]"===Object.prototype.toString.call(x)?"array":V.nodebuffer&&W.test(x)?"nodebuffer":V.uint8array&&x instanceof Uint8Array?"uint8array":V.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},R.checkSupport=function(x){if(!V[x.toLowerCase()])throw new Error(x+" is not supported by this browser")},R.MAX_VALUE_16BITS=65535,R.MAX_VALUE_32BITS=-1,R.pretty=function(x){var B,ae,H="";for(ae=0;ae<(x||"").length;ae++)H+="\\x"+((B=x.charCodeAt(ae))<16?"0":"")+B.toString(16).toUpperCase();return H},R.findCompression=function(x){for(var H in F)if(F.hasOwnProperty(H)&&F[H].magic===x)return F[H];return null},R.isRegExp=function(x){return"[object RegExp]"===Object.prototype.toString.call(x)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(O,I,R){var V=O("./stringReader"),F=O("./nodeBufferReader"),W=O("./uint8ArrayReader"),A=O("./utils"),P=O("./signature"),v=O("./zipEntry"),S=O("./support"),E=O("./object");function x(H,B){this.files=[],this.loadOptions=B,H&&this.load(H)}x.prototype={checkSignature:function(H){var B=this.reader.readString(4);if(B!==H)throw new Error("Corrupted zip or bug : unexpected signature ("+A.pretty(B)+", expected "+A.pretty(H)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=E.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var ae,he,de,H=this.zip64EndOfCentralSize-44;0<H;)ae=this.reader.readInt(2),he=this.reader.readInt(4),de=this.reader.readString(he),this.zip64ExtensibleData[ae]={id:ae,length:he,value:de}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var H,B;for(H=0;H<this.files.length;H++)this.reader.setIndex((B=this.files[H]).localHeaderOffset),this.checkSignature(P.LOCAL_FILE_HEADER),B.readLocalPart(this.reader),B.handleUTF8()},readCentralDir:function(){var H;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===P.CENTRAL_FILE_HEADER;)(H=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(H)},readEndOfCentral:function(){var H=this.reader.lastIndexOfSignature(P.CENTRAL_DIRECTORY_END);if(-1===H)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(H),this.checkSignature(P.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===A.MAX_VALUE_16BITS||this.diskWithCentralDirStart===A.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===A.MAX_VALUE_16BITS||this.centralDirRecords===A.MAX_VALUE_16BITS||this.centralDirSize===A.MAX_VALUE_32BITS||this.centralDirOffset===A.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(H=this.reader.lastIndexOfSignature(P.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(H),this.checkSignature(P.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(P.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(H){var B=A.getTypeOf(H);this.reader="string"!==B||S.uint8array?"nodebuffer"===B?new F(H):new W(A.transformTo("uint8array",H)):new V(H,this.loadOptions.optimizedBinaryString)},load:function(H){this.prepareReader(H),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=x},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(O,I,R){var V=O("./stringReader"),F=O("./utils"),W=O("./compressedObject"),A=O("./object");function P(v,S){this.options=v,this.loadOptions=S}P.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(v,S,E){return function(){var x=v.index;v.setIndex(S);var H=v.readData(E);return v.setIndex(x),H}},prepareContent:function(v,S,E,x,H){return function(){var B=F.transformTo(x.uncompressInputType,this.getCompressedContent()),ae=x.uncompress(B);if(ae.length!==H)throw new Error("Bug : uncompressed data size mismatch");return ae}},readLocalPart:function(v){var S,E;if(v.skip(22),this.fileNameLength=v.readInt(2),E=v.readInt(2),this.fileName=v.readString(this.fileNameLength),v.skip(E),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(S=F.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+F.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new W,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(v,v.index,this.compressedSize,S),this.decompressed.getContent=this.prepareContent(v,v.index,this.compressedSize,S,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=F.transformTo("string",this.decompressed.getContent()),A.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(v){if(this.versionMadeBy=v.readString(2),this.versionNeeded=v.readInt(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4),this.fileNameLength=v.readInt(2),this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=v.readString(this.fileNameLength),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readString(this.fileCommentLength),this.dir=!!(16&this.externalFileAttributes)},parseZIP64ExtraField:function(v){if(this.extraFields[1]){var S=new V(this.extraFields[1].value);this.uncompressedSize===F.MAX_VALUE_32BITS&&(this.uncompressedSize=S.readInt(8)),this.compressedSize===F.MAX_VALUE_32BITS&&(this.compressedSize=S.readInt(8)),this.localHeaderOffset===F.MAX_VALUE_32BITS&&(this.localHeaderOffset=S.readInt(8)),this.diskNumberStart===F.MAX_VALUE_32BITS&&(this.diskNumberStart=S.readInt(4))}},readExtraFields:function(v){var E,x,H,S=v.index;for(this.extraFields=this.extraFields||{};v.index<S+this.extraFieldsLength;)E=v.readInt(2),x=v.readInt(2),H=v.readString(x),this.extraFields[E]={id:E,length:x,value:H}},handleUTF8:function(){if(this.useUTF8())this.fileName=A.utf8decode(this.fileName),this.fileComment=A.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();null!==v&&(this.fileName=v);var S=this.findExtraFieldUnicodeComment();null!==S&&(this.fileComment=S)}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var S=new V(v.value);return 1!==S.readInt(1)||A.crc32(this.fileName)!==S.readInt(4)?null:A.utf8decode(S.readString(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var S=new V(v.value);return 1!==S.readInt(1)||A.crc32(this.fileComment)!==S.readInt(4)?null:A.utf8decode(S.readString(v.length-5))}return null}},I.exports=P},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(O,I,R){var P={};(0,O("./lib/utils/common").assign)(P,O("./lib/deflate"),O("./lib/inflate"),O("./lib/zlib/constants")),I.exports=P},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(O,I,R){var V=O("./zlib/deflate.js"),F=O("./utils/common"),W=O("./utils/strings"),A=O("./zlib/messages"),P=O("./zlib/zstream"),he=function(te){this.options=F.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},te||{});var ne=this.options;ne.raw&&ne.windowBits>0?ne.windowBits=-ne.windowBits:ne.gzip&&ne.windowBits>0&&ne.windowBits<16&&(ne.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P,this.strm.avail_out=0;var oe=V.deflateInit2(this.strm,ne.level,ne.method,ne.windowBits,ne.memLevel,ne.strategy);if(0!==oe)throw new Error(A[oe]);ne.header&&V.deflateSetHeader(this.strm,ne.header)};function de(te,ne){var oe=new he(ne);if(oe.push(te,!0),oe.err)throw oe.msg;return oe.result}he.prototype.push=function(te,ne){var Y,le,oe=this.strm,fe=this.options.chunkSize;if(this.ended)return!1;le=ne===~~ne?ne:!0===ne?4:0,oe.input="string"==typeof te?W.string2buf(te):te,oe.next_in=0,oe.avail_in=oe.input.length;do{if(0===oe.avail_out&&(oe.output=new F.Buf8(fe),oe.next_out=0,oe.avail_out=fe),1!==(Y=V.deflate(oe,le))&&0!==Y)return this.onEnd(Y),this.ended=!0,!1;(0===oe.avail_out||0===oe.avail_in&&4===le)&&this.onData("string"===this.options.to?W.buf2binstring(F.shrinkBuf(oe.output,oe.next_out)):F.shrinkBuf(oe.output,oe.next_out))}while((oe.avail_in>0||0===oe.avail_out)&&1!==Y);return 4!==le||(Y=V.deflateEnd(this.strm),this.onEnd(Y),this.ended=!0,0===Y)},he.prototype.onData=function(te){this.chunks.push(te)},he.prototype.onEnd=function(te){0===te&&(this.result="string"===this.options.to?this.chunks.join(""):F.flattenChunks(this.chunks)),this.chunks=[],this.err=te,this.msg=this.strm.msg},R.Deflate=he,R.deflate=de,R.deflateRaw=function G(te,ne){return(ne=ne||{}).raw=!0,de(te,ne)},R.gzip=function U(te,ne){return(ne=ne||{}).gzip=!0,de(te,ne)}},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(O,I,R){var V=O("./zlib/inflate.js"),F=O("./utils/common"),W=O("./utils/strings"),A=O("./zlib/constants"),P=O("./zlib/messages"),v=O("./zlib/zstream"),S=O("./zlib/gzheader"),E=function(B){this.options=F.assign({chunkSize:16384,windowBits:0,to:""},B||{});var ae=this.options;ae.raw&&ae.windowBits>=0&&ae.windowBits<16&&(ae.windowBits=-ae.windowBits,0===ae.windowBits&&(ae.windowBits=-15)),ae.windowBits>=0&&ae.windowBits<16&&!(B&&B.windowBits)&&(ae.windowBits+=32),ae.windowBits>15&&ae.windowBits<48&&0==(15&ae.windowBits)&&(ae.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var he=V.inflateInit2(this.strm,ae.windowBits);if(he!==A.Z_OK)throw new Error(P[he]);this.header=new S,V.inflateGetHeader(this.strm,this.header)};function x(B,ae){var he=new E(ae);if(he.push(B,!0),he.err)throw he.msg;return he.result}E.prototype.push=function(B,ae){var G,U,te,ne,oe,he=this.strm,de=this.options.chunkSize;if(this.ended)return!1;U=ae===~~ae?ae:!0===ae?A.Z_FINISH:A.Z_NO_FLUSH,he.input="string"==typeof B?W.binstring2buf(B):B,he.next_in=0,he.avail_in=he.input.length;do{if(0===he.avail_out&&(he.output=new F.Buf8(de),he.next_out=0,he.avail_out=de),(G=V.inflate(he,A.Z_NO_FLUSH))!==A.Z_STREAM_END&&G!==A.Z_OK)return this.onEnd(G),this.ended=!0,!1;he.next_out&&(0===he.avail_out||G===A.Z_STREAM_END||0===he.avail_in&&U===A.Z_FINISH)&&("string"===this.options.to?(te=W.utf8border(he.output,he.next_out),ne=he.next_out-te,oe=W.buf2string(he.output,te),he.next_out=ne,he.avail_out=de-ne,ne&&F.arraySet(he.output,he.output,te,ne,0),this.onData(oe)):this.onData(F.shrinkBuf(he.output,he.next_out)))}while(he.avail_in>0&&G!==A.Z_STREAM_END);return G===A.Z_STREAM_END&&(U=A.Z_FINISH),U!==A.Z_FINISH||(G=V.inflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===A.Z_OK)},E.prototype.onData=function(B){this.chunks.push(B)},E.prototype.onEnd=function(B){B===A.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):F.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg},R.Inflate=E,R.inflate=x,R.inflateRaw=function H(B,ae){return(ae=ae||{}).raw=!0,x(B,ae)},R.ungzip=x},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(O,I,R){var V=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";R.assign=function(A){for(var P=Array.prototype.slice.call(arguments,1);P.length;){var v=P.shift();if(v){if("object"!=typeof v)throw new TypeError(v+"must be non-object");for(var S in v)v.hasOwnProperty(S)&&(A[S]=v[S])}}return A},R.shrinkBuf=function(A,P){return A.length===P?A:A.subarray?A.subarray(0,P):(A.length=P,A)};var F={arraySet:function(A,P,v,S,E){if(P.subarray&&A.subarray)A.set(P.subarray(v,v+S),E);else for(var x=0;x<S;x++)A[E+x]=P[v+x]},flattenChunks:function(A){var P,v,S,E,x,H;for(S=0,P=0,v=A.length;P<v;P++)S+=A[P].length;for(H=new Uint8Array(S),E=0,P=0,v=A.length;P<v;P++)H.set(x=A[P],E),E+=x.length;return H}},W={arraySet:function(A,P,v,S,E){for(var x=0;x<S;x++)A[E+x]=P[v+x]},flattenChunks:function(A){return[].concat.apply([],A)}};R.setTyped=function(A){A?(R.Buf8=Uint8Array,R.Buf16=Uint16Array,R.Buf32=Int32Array,R.assign(R,F)):(R.Buf8=Array,R.Buf16=Array,R.Buf32=Array,R.assign(R,W))},R.setTyped(V)},{}],28:[function(O,I,R){var V=O("./common"),F=!0,W=!0;try{String.fromCharCode.apply(null,[0])}catch{F=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{W=!1}for(var A=new V.Buf8(256),P=0;P<256;P++)A[P]=P>=252?6:P>=248?5:P>=240?4:P>=224?3:P>=192?2:1;function v(S,E){if(E<65537&&(S.subarray&&W||!S.subarray&&F))return String.fromCharCode.apply(null,V.shrinkBuf(S,E));for(var x="",H=0;H<E;H++)x+=String.fromCharCode(S[H]);return x}A[254]=A[254]=1,R.string2buf=function(S){var E,x,H,B,ae,he=S.length,de=0;for(B=0;B<he;B++)55296==(64512&(x=S.charCodeAt(B)))&&B+1<he&&56320==(64512&(H=S.charCodeAt(B+1)))&&(x=65536+(x-55296<<10)+(H-56320),B++),de+=x<128?1:x<2048?2:x<65536?3:4;for(E=new V.Buf8(de),ae=0,B=0;ae<de;B++)55296==(64512&(x=S.charCodeAt(B)))&&B+1<he&&56320==(64512&(H=S.charCodeAt(B+1)))&&(x=65536+(x-55296<<10)+(H-56320),B++),x<128?E[ae++]=x:x<2048?(E[ae++]=192|x>>>6,E[ae++]=128|63&x):x<65536?(E[ae++]=224|x>>>12,E[ae++]=128|x>>>6&63,E[ae++]=128|63&x):(E[ae++]=240|x>>>18,E[ae++]=128|x>>>12&63,E[ae++]=128|x>>>6&63,E[ae++]=128|63&x);return E},R.buf2binstring=function(S){return v(S,S.length)},R.binstring2buf=function(S){for(var E=new V.Buf8(S.length),x=0,H=E.length;x<H;x++)E[x]=S.charCodeAt(x);return E},R.buf2string=function(S,E){var x,H,B,ae,he=E||S.length,de=new Array(2*he);for(H=0,x=0;x<he;)if((B=S[x++])<128)de[H++]=B;else if((ae=A[B])>4)de[H++]=65533,x+=ae-1;else{for(B&=2===ae?31:3===ae?15:7;ae>1&&x<he;)B=B<<6|63&S[x++],ae--;ae>1?de[H++]=65533:B<65536?de[H++]=B:(de[H++]=55296|(B-=65536)>>10&1023,de[H++]=56320|1023&B)}return v(de,H)},R.utf8border=function(S,E){var x;for((E=E||S.length)>S.length&&(E=S.length),x=E-1;x>=0&&128==(192&S[x]);)x--;return x<0||0===x?E:x+A[S[x]]>E?x:E}},{"./common":27}],29:[function(O,I,R){I.exports=function V(F,W,A,P){for(var v=65535&F|0,S=F>>>16&65535|0,E=0;0!==A;){A-=E=A>2e3?2e3:A;do{S=S+(v=v+W[P++]|0)|0}while(--E);v%=65521,S%=65521}return v|S<<16|0}},{}],30:[function(O,I,R){I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(O,I,R){var F=function V(){for(var A,P=[],v=0;v<256;v++){A=v;for(var S=0;S<8;S++)A=1&A?3988292384^A>>>1:A>>>1;P[v]=A}return P}();I.exports=function W(A,P,v,S){var E=F,x=S+v;A^=-1;for(var H=S;H<x;H++)A=A>>>8^E[255&(A^P[H])];return-1^A}},{}],32:[function(O,I,R){var V=O("../utils/common"),F=O("./trees"),W=O("./adler32"),A=O("./crc32"),P=O("./messages"),ot=258,yt=262;function st(ge,vt){return ge.msg=P[vt],vt}function Vt(ge){return(ge<<1)-(ge>4?9:0)}function Qt(ge){for(var vt=ge.length;--vt>=0;)ge[vt]=0}function Xt(ge){var vt=ge.state,Ct=vt.pending;Ct>ge.avail_out&&(Ct=ge.avail_out),0!==Ct&&(V.arraySet(ge.output,vt.pending_buf,vt.pending_out,Ct,ge.next_out),ge.next_out+=Ct,vt.pending_out+=Ct,ge.total_out+=Ct,ge.avail_out-=Ct,vt.pending-=Ct,0===vt.pending&&(vt.pending_out=0))}function Wt(ge,vt){F._tr_flush_block(ge,ge.block_start>=0?ge.block_start:-1,ge.strstart-ge.block_start,vt),ge.block_start=ge.strstart,Xt(ge.strm)}function Nt(ge,vt){ge.pending_buf[ge.pending++]=vt}function Bt(ge,vt){ge.pending_buf[ge.pending++]=vt>>>8&255,ge.pending_buf[ge.pending++]=255&vt}function ln(ge,vt,Ct,Be){var Qe=ge.avail_in;return Qe>Be&&(Qe=Be),0===Qe?0:(ge.avail_in-=Qe,V.arraySet(vt,ge.input,ge.next_in,Qe,Ct),1===ge.state.wrap?ge.adler=W(ge.adler,vt,Qe,Ct):2===ge.state.wrap&&(ge.adler=A(ge.adler,vt,Qe,Ct)),ge.next_in+=Qe,ge.total_in+=Qe,Qe)}function Ft(ge,vt){var Qe,Tt,Ct=ge.max_chain_length,Be=ge.strstart,dn=ge.prev_length,Jt=ge.nice_match,zt=ge.strstart>ge.w_size-yt?ge.strstart-(ge.w_size-yt):0,yn=ge.window,Xi=ge.w_mask,kn=ge.prev,xn=ge.strstart+ot,$n=yn[Be+dn-1],Wn=yn[Be+dn];ge.prev_length>=ge.good_match&&(Ct>>=2),Jt>ge.lookahead&&(Jt=ge.lookahead);do{if(yn[(Qe=vt)+dn]===Wn&&yn[Qe+dn-1]===$n&&yn[Qe]===yn[Be]&&yn[++Qe]===yn[Be+1]){Be+=2,Qe++;do{}while(yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&yn[++Be]===yn[++Qe]&&Be<xn);if(Tt=ot-(xn-Be),Be=xn-ot,Tt>dn){if(ge.match_start=vt,dn=Tt,Tt>=Jt)break;$n=yn[Be+dn-1],Wn=yn[Be+dn]}}}while((vt=kn[vt&Xi])>zt&&0!=--Ct);return dn<=ge.lookahead?dn:ge.lookahead}function nn(ge){var Ct,Be,Qe,Tt,dn,vt=ge.w_size;do{if(Tt=ge.window_size-ge.lookahead-ge.strstart,ge.strstart>=vt+(vt-yt)){V.arraySet(ge.window,ge.window,vt,vt,0),ge.match_start-=vt,ge.strstart-=vt,ge.block_start-=vt,Ct=Be=ge.hash_size;do{Qe=ge.head[--Ct],ge.head[Ct]=Qe>=vt?Qe-vt:0}while(--Be);Ct=Be=vt;do{Qe=ge.prev[--Ct],ge.prev[Ct]=Qe>=vt?Qe-vt:0}while(--Be);Tt+=vt}if(0===ge.strm.avail_in)break;if(Be=ln(ge.strm,ge.window,ge.strstart+ge.lookahead,Tt),ge.lookahead+=Be,ge.lookahead+ge.insert>=3)for(ge.ins_h=ge.window[dn=ge.strstart-ge.insert],ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[dn+1])&ge.hash_mask;ge.insert&&(ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[dn+3-1])&ge.hash_mask,ge.prev[dn&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=dn,dn++,ge.insert--,!(ge.lookahead+ge.insert<3)););}while(ge.lookahead<yt&&0!==ge.strm.avail_in)}function Mt(ge,vt){for(var Ct,Be;;){if(ge.lookahead<yt){if(nn(ge),ge.lookahead<yt&&0===vt)return 1;if(0===ge.lookahead)break}if(Ct=0,ge.lookahead>=3&&(ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[ge.strstart+3-1])&ge.hash_mask,Ct=ge.prev[ge.strstart&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=ge.strstart),0!==Ct&&ge.strstart-Ct<=ge.w_size-yt&&(ge.match_length=Ft(ge,Ct)),ge.match_length>=3)if(Be=F._tr_tally(ge,ge.strstart-ge.match_start,ge.match_length-3),ge.lookahead-=ge.match_length,ge.match_length<=ge.max_lazy_match&&ge.lookahead>=3){ge.match_length--;do{ge.strstart++,ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[ge.strstart+3-1])&ge.hash_mask,Ct=ge.prev[ge.strstart&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=ge.strstart}while(0!=--ge.match_length);ge.strstart++}else ge.strstart+=ge.match_length,ge.match_length=0,ge.ins_h=ge.window[ge.strstart],ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[ge.strstart+1])&ge.hash_mask;else Be=F._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++;if(Be&&(Wt(ge,!1),0===ge.strm.avail_out))return 1}return ge.insert=ge.strstart<2?ge.strstart:2,4===vt?(Wt(ge,!0),0===ge.strm.avail_out?3:4):ge.last_lit&&(Wt(ge,!1),0===ge.strm.avail_out)?1:2}function Tn(ge,vt){for(var Ct,Be,Qe;;){if(ge.lookahead<yt){if(nn(ge),ge.lookahead<yt&&0===vt)return 1;if(0===ge.lookahead)break}if(Ct=0,ge.lookahead>=3&&(ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[ge.strstart+3-1])&ge.hash_mask,Ct=ge.prev[ge.strstart&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=ge.strstart),ge.prev_length=ge.match_length,ge.prev_match=ge.match_start,ge.match_length=2,0!==Ct&&ge.prev_length<ge.max_lazy_match&&ge.strstart-Ct<=ge.w_size-yt&&(ge.match_length=Ft(ge,Ct),ge.match_length<=5&&(1===ge.strategy||3===ge.match_length&&ge.strstart-ge.match_start>4096)&&(ge.match_length=2)),ge.prev_length>=3&&ge.match_length<=ge.prev_length){Qe=ge.strstart+ge.lookahead-3,Be=F._tr_tally(ge,ge.strstart-1-ge.prev_match,ge.prev_length-3),ge.lookahead-=ge.prev_length-1,ge.prev_length-=2;do{++ge.strstart<=Qe&&(ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[ge.strstart+3-1])&ge.hash_mask,Ct=ge.prev[ge.strstart&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=ge.strstart)}while(0!=--ge.prev_length);if(ge.match_available=0,ge.match_length=2,ge.strstart++,Be&&(Wt(ge,!1),0===ge.strm.avail_out))return 1}else if(ge.match_available){if((Be=F._tr_tally(ge,0,ge.window[ge.strstart-1]))&&Wt(ge,!1),ge.strstart++,ge.lookahead--,0===ge.strm.avail_out)return 1}else ge.match_available=1,ge.strstart++,ge.lookahead--}return ge.match_available&&(Be=F._tr_tally(ge,0,ge.window[ge.strstart-1]),ge.match_available=0),ge.insert=ge.strstart<2?ge.strstart:2,4===vt?(Wt(ge,!0),0===ge.strm.avail_out?3:4):ge.last_lit&&(Wt(ge,!1),0===ge.strm.avail_out)?1:2}var He,dt=function(ge,vt,Ct,Be,Qe){this.good_length=ge,this.max_lazy=vt,this.nice_length=Ct,this.max_chain=Be,this.func=Qe};function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new V.Buf16(1146),this.dyn_dtree=new V.Buf16(122),this.bl_tree=new V.Buf16(78),Qt(this.dyn_ltree),Qt(this.dyn_dtree),Qt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new V.Buf16(16),this.heap=new V.Buf16(573),Qt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new V.Buf16(573),Qt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(ge){var vt;return ge&&ge.state?(ge.total_in=ge.total_out=0,ge.data_type=2,(vt=ge.state).pending=0,vt.pending_out=0,vt.wrap<0&&(vt.wrap=-vt.wrap),vt.status=vt.wrap?42:113,ge.adler=2===vt.wrap?0:1,vt.last_flush=0,F._tr_init(vt),0):st(ge,-2)}function St(ge){var vt=at(ge);return 0===vt&&function mt(ge){ge.window_size=2*ge.w_size,Qt(ge.head),ge.max_lazy_match=He[ge.level].max_lazy,ge.good_match=He[ge.level].good_length,ge.nice_match=He[ge.level].nice_length,ge.max_chain_length=He[ge.level].max_chain,ge.strstart=0,ge.block_start=0,ge.lookahead=0,ge.insert=0,ge.match_length=ge.prev_length=2,ge.match_available=0,ge.ins_h=0}(ge.state),vt}function lt(ge,vt,Ct,Be,Qe,Tt){if(!ge)return-2;var dn=1;if(-1===vt&&(vt=6),Be<0?(dn=0,Be=-Be):Be>15&&(dn=2,Be-=16),Qe<1||Qe>9||8!==Ct||Be<8||Be>15||vt<0||vt>9||Tt<0||Tt>4)return st(ge,-2);8===Be&&(Be=9);var Jt=new Ce;return ge.state=Jt,Jt.strm=ge,Jt.wrap=dn,Jt.gzhead=null,Jt.w_bits=Be,Jt.w_size=1<<Jt.w_bits,Jt.w_mask=Jt.w_size-1,Jt.hash_bits=Qe+7,Jt.hash_size=1<<Jt.hash_bits,Jt.hash_mask=Jt.hash_size-1,Jt.hash_shift=~~((Jt.hash_bits+3-1)/3),Jt.window=new V.Buf8(2*Jt.w_size),Jt.head=new V.Buf16(Jt.hash_size),Jt.prev=new V.Buf16(Jt.w_size),Jt.lit_bufsize=1<<Qe+6,Jt.pending_buf_size=4*Jt.lit_bufsize,Jt.pending_buf=new V.Buf8(Jt.pending_buf_size),Jt.d_buf=Jt.lit_bufsize>>1,Jt.l_buf=3*Jt.lit_bufsize,Jt.level=vt,Jt.strategy=Tt,Jt.method=Ct,St(ge)}He=[new dt(0,0,0,0,function Et(ge,vt){var Ct=65535;for(Ct>ge.pending_buf_size-5&&(Ct=ge.pending_buf_size-5);;){if(ge.lookahead<=1){if(nn(ge),0===ge.lookahead&&0===vt)return 1;if(0===ge.lookahead)break}ge.strstart+=ge.lookahead,ge.lookahead=0;var Be=ge.block_start+Ct;if((0===ge.strstart||ge.strstart>=Be)&&(ge.lookahead=ge.strstart-Be,ge.strstart=Be,Wt(ge,!1),0===ge.strm.avail_out)||ge.strstart-ge.block_start>=ge.w_size-yt&&(Wt(ge,!1),0===ge.strm.avail_out))return 1}return ge.insert=0,4===vt?(Wt(ge,!0),0===ge.strm.avail_out?3:4):(ge.strstart>ge.block_start&&Wt(ge,!1),1)}),new dt(4,4,8,4,Mt),new dt(4,5,16,8,Mt),new dt(4,6,32,32,Mt),new dt(4,4,16,16,Tn),new dt(8,16,32,32,Tn),new dt(8,16,128,128,Tn),new dt(8,32,128,256,Tn),new dt(32,128,258,1024,Tn),new dt(32,258,258,4096,Tn)],R.deflateInit=function De(ge,vt){return lt(ge,vt,8,15,8,0)},R.deflateInit2=lt,R.deflateReset=St,R.deflateResetKeep=at,R.deflateSetHeader=function Je(ge,vt){return ge&&ge.state&&2===ge.state.wrap?(ge.state.gzhead=vt,0):-2},R.deflate=function It(ge,vt){var Ct,Be,Qe,Tt;if(!ge||!ge.state||vt>5||vt<0)return ge?st(ge,-2):-2;if(Be=ge.state,!ge.output||!ge.input&&0!==ge.avail_in||666===Be.status&&4!==vt)return st(ge,0===ge.avail_out?-5:-2);if(Be.strm=ge,Ct=Be.last_flush,Be.last_flush=vt,42===Be.status)if(2===Be.wrap)ge.adler=0,Nt(Be,31),Nt(Be,139),Nt(Be,8),Be.gzhead?(Nt(Be,(Be.gzhead.text?1:0)+(Be.gzhead.hcrc?2:0)+(Be.gzhead.extra?4:0)+(Be.gzhead.name?8:0)+(Be.gzhead.comment?16:0)),Nt(Be,255&Be.gzhead.time),Nt(Be,Be.gzhead.time>>8&255),Nt(Be,Be.gzhead.time>>16&255),Nt(Be,Be.gzhead.time>>24&255),Nt(Be,9===Be.level?2:Be.strategy>=2||Be.level<2?4:0),Nt(Be,255&Be.gzhead.os),Be.gzhead.extra&&Be.gzhead.extra.length&&(Nt(Be,255&Be.gzhead.extra.length),Nt(Be,Be.gzhead.extra.length>>8&255)),Be.gzhead.hcrc&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending,0)),Be.gzindex=0,Be.status=69):(Nt(Be,0),Nt(Be,0),Nt(Be,0),Nt(Be,0),Nt(Be,0),Nt(Be,9===Be.level?2:Be.strategy>=2||Be.level<2?4:0),Nt(Be,3),Be.status=113);else{var dn=8+(Be.w_bits-8<<4)<<8;dn|=(Be.strategy>=2||Be.level<2?0:Be.level<6?1:6===Be.level?2:3)<<6,0!==Be.strstart&&(dn|=32),dn+=31-dn%31,Be.status=113,Bt(Be,dn),0!==Be.strstart&&(Bt(Be,ge.adler>>>16),Bt(Be,65535&ge.adler)),ge.adler=1}if(69===Be.status)if(Be.gzhead.extra){for(Qe=Be.pending;Be.gzindex<(65535&Be.gzhead.extra.length)&&(Be.pending!==Be.pending_buf_size||(Be.gzhead.hcrc&&Be.pending>Qe&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending-Qe,Qe)),Xt(ge),Qe=Be.pending,Be.pending!==Be.pending_buf_size));)Nt(Be,255&Be.gzhead.extra[Be.gzindex]),Be.gzindex++;Be.gzhead.hcrc&&Be.pending>Qe&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending-Qe,Qe)),Be.gzindex===Be.gzhead.extra.length&&(Be.gzindex=0,Be.status=73)}else Be.status=73;if(73===Be.status)if(Be.gzhead.name){Qe=Be.pending;do{if(Be.pending===Be.pending_buf_size&&(Be.gzhead.hcrc&&Be.pending>Qe&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending-Qe,Qe)),Xt(ge),Qe=Be.pending,Be.pending===Be.pending_buf_size)){Tt=1;break}Tt=Be.gzindex<Be.gzhead.name.length?255&Be.gzhead.name.charCodeAt(Be.gzindex++):0,Nt(Be,Tt)}while(0!==Tt);Be.gzhead.hcrc&&Be.pending>Qe&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending-Qe,Qe)),0===Tt&&(Be.gzindex=0,Be.status=91)}else Be.status=91;if(91===Be.status)if(Be.gzhead.comment){Qe=Be.pending;do{if(Be.pending===Be.pending_buf_size&&(Be.gzhead.hcrc&&Be.pending>Qe&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending-Qe,Qe)),Xt(ge),Qe=Be.pending,Be.pending===Be.pending_buf_size)){Tt=1;break}Tt=Be.gzindex<Be.gzhead.comment.length?255&Be.gzhead.comment.charCodeAt(Be.gzindex++):0,Nt(Be,Tt)}while(0!==Tt);Be.gzhead.hcrc&&Be.pending>Qe&&(ge.adler=A(ge.adler,Be.pending_buf,Be.pending-Qe,Qe)),0===Tt&&(Be.status=103)}else Be.status=103;if(103===Be.status&&(Be.gzhead.hcrc?(Be.pending+2>Be.pending_buf_size&&Xt(ge),Be.pending+2<=Be.pending_buf_size&&(Nt(Be,255&ge.adler),Nt(Be,ge.adler>>8&255),ge.adler=0,Be.status=113)):Be.status=113),0!==Be.pending){if(Xt(ge),0===ge.avail_out)return Be.last_flush=-1,0}else if(0===ge.avail_in&&Vt(vt)<=Vt(Ct)&&4!==vt)return st(ge,-5);if(666===Be.status&&0!==ge.avail_in)return st(ge,-5);if(0!==ge.avail_in||0!==Be.lookahead||0!==vt&&666!==Be.status){var zt=2===Be.strategy?function Dn(ge,vt){for(var Ct;;){if(0===ge.lookahead&&(nn(ge),0===ge.lookahead)){if(0===vt)return 1;break}if(ge.match_length=0,Ct=F._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,Ct&&(Wt(ge,!1),0===ge.strm.avail_out))return 1}return ge.insert=0,4===vt?(Wt(ge,!0),0===ge.strm.avail_out?3:4):ge.last_lit&&(Wt(ge,!1),0===ge.strm.avail_out)?1:2}(Be,vt):3===Be.strategy?function Un(ge,vt){for(var Ct,Be,Qe,Tt,dn=ge.window;;){if(ge.lookahead<=ot){if(nn(ge),ge.lookahead<=ot&&0===vt)return 1;if(0===ge.lookahead)break}if(ge.match_length=0,ge.lookahead>=3&&ge.strstart>0&&(Be=dn[Qe=ge.strstart-1])===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]){Tt=ge.strstart+ot;do{}while(Be===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]&&Be===dn[++Qe]&&Qe<Tt);ge.match_length=ot-(Tt-Qe),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=3?(Ct=F._tr_tally(ge,1,ge.match_length-3),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(Ct=F._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),Ct&&(Wt(ge,!1),0===ge.strm.avail_out))return 1}return ge.insert=0,4===vt?(Wt(ge,!0),0===ge.strm.avail_out?3:4):ge.last_lit&&(Wt(ge,!1),0===ge.strm.avail_out)?1:2}(Be,vt):He[Be.level].func(Be,vt);if((3===zt||4===zt)&&(Be.status=666),1===zt||3===zt)return 0===ge.avail_out&&(Be.last_flush=-1),0;if(2===zt&&(1===vt?F._tr_align(Be):5!==vt&&(F._tr_stored_block(Be,0,0,!1),3===vt&&(Qt(Be.head),0===Be.lookahead&&(Be.strstart=0,Be.block_start=0,Be.insert=0))),Xt(ge),0===ge.avail_out))return Be.last_flush=-1,0}return 4!==vt?0:Be.wrap<=0?1:(2===Be.wrap?(Nt(Be,255&ge.adler),Nt(Be,ge.adler>>8&255),Nt(Be,ge.adler>>16&255),Nt(Be,ge.adler>>24&255),Nt(Be,255&ge.total_in),Nt(Be,ge.total_in>>8&255),Nt(Be,ge.total_in>>16&255),Nt(Be,ge.total_in>>24&255)):(Bt(Be,ge.adler>>>16),Bt(Be,65535&ge.adler)),Xt(ge),Be.wrap>0&&(Be.wrap=-Be.wrap),0!==Be.pending?0:1)},R.deflateEnd=function qt(ge){var vt;return ge&&ge.state?42!==(vt=ge.state.status)&&69!==vt&&73!==vt&&91!==vt&&103!==vt&&113!==vt&&666!==vt?st(ge,-2):(ge.state=null,113===vt?st(ge,-3):0):-2},R.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(O,I,R){I.exports=function V(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],34:[function(O,I,R){I.exports=function(A,P){var v,S,E,x,H,B,ae,he,de,G,U,te,ne,oe,fe,Y,le,X,$,we,ue,ve,Ae,je,Ye;je=A.input,E=(S=A.next_in)+(A.avail_in-5),Ye=A.output,H=(x=A.next_out)-(P-A.avail_out),B=x+(A.avail_out-257),ae=(v=A.state).dmax,he=v.wsize,de=v.whave,G=v.wnext,U=v.window,te=v.hold,ne=v.bits,oe=v.lencode,fe=v.distcode,Y=(1<<v.lenbits)-1,le=(1<<v.distbits)-1;e:do{ne<15&&(te+=je[S++]<<ne,te+=je[S++]<<(ne+=8),ne+=8),X=oe[te&Y];t:for(;;){if(te>>>=$=X>>>24,ne-=$,0==($=X>>>16&255))Ye[x++]=65535&X;else{if(!(16&$)){if(0==(64&$)){X=oe[(65535&X)+(te&(1<<$)-1)];continue t}if(32&$){v.mode=12;break e}A.msg="invalid literal/length code",v.mode=30;break e}we=65535&X,($&=15)&&(ne<$&&(te+=je[S++]<<ne,ne+=8),we+=te&(1<<$)-1,te>>>=$,ne-=$),ne<15&&(te+=je[S++]<<ne,te+=je[S++]<<(ne+=8),ne+=8),X=fe[te&le];n:for(;;){if(te>>>=$=X>>>24,ne-=$,!(16&($=X>>>16&255))){if(0==(64&$)){X=fe[(65535&X)+(te&(1<<$)-1)];continue n}A.msg="invalid distance code",v.mode=30;break e}if(ue=65535&X,ne<($&=15)&&(te+=je[S++]<<ne,(ne+=8)<$&&(te+=je[S++]<<ne,ne+=8)),(ue+=te&(1<<$)-1)>ae){A.msg="invalid distance too far back",v.mode=30;break e}if(te>>>=$,ne-=$,ue>($=x-H)){if(($=ue-$)>de&&v.sane){A.msg="invalid distance too far back",v.mode=30;break e}if(ve=0,Ae=U,0===G){if(ve+=he-$,$<we){we-=$;do{Ye[x++]=U[ve++]}while(--$);ve=x-ue,Ae=Ye}}else if(G<$){if(ve+=he+G-$,($-=G)<we){we-=$;do{Ye[x++]=U[ve++]}while(--$);if(ve=0,G<we){we-=$=G;do{Ye[x++]=U[ve++]}while(--$);ve=x-ue,Ae=Ye}}}else if(ve+=G-$,$<we){we-=$;do{Ye[x++]=U[ve++]}while(--$);ve=x-ue,Ae=Ye}for(;we>2;)Ye[x++]=Ae[ve++],Ye[x++]=Ae[ve++],Ye[x++]=Ae[ve++],we-=3;we&&(Ye[x++]=Ae[ve++],we>1&&(Ye[x++]=Ae[ve++]))}else{ve=x-ue;do{Ye[x++]=Ye[ve++],Ye[x++]=Ye[ve++],Ye[x++]=Ye[ve++],we-=3}while(we>2);we&&(Ye[x++]=Ye[ve++],we>1&&(Ye[x++]=Ye[ve++]))}break}}break}}while(S<E&&x<B);te&=(1<<(ne-=(we=ne>>3)<<3))-1,A.next_in=S-=we,A.next_out=x,A.avail_in=S<E?E-S+5:5-(S-E),A.avail_out=x<B?B-x+257:257-(x-B),v.hold=te,v.bits=ne}},{}],35:[function(O,I,R){var V=O("../utils/common"),F=O("./adler32"),W=O("./crc32"),A=O("./inffast"),P=O("./inftrees"),G=-2;function Bt(Je){return(Je>>>24&255)+(Je>>>8&65280)+((65280&Je)<<8)+((255&Je)<<24)}function ln(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new V.Buf16(320),this.work=new V.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ft(Je){var lt;return Je&&Je.state?(Je.total_in=Je.total_out=(lt=Je.state).total=0,Je.msg="",lt.wrap&&(Je.adler=1&lt.wrap),lt.mode=1,lt.last=0,lt.havedict=0,lt.dmax=32768,lt.head=null,lt.hold=0,lt.bits=0,lt.lencode=lt.lendyn=new V.Buf32(852),lt.distcode=lt.distdyn=new V.Buf32(592),lt.sane=1,lt.back=-1,0):G}function nn(Je){var lt;return Je&&Je.state?((lt=Je.state).wsize=0,lt.whave=0,lt.wnext=0,Ft(Je)):G}function Et(Je,lt){var De,It;return!Je||!Je.state||(It=Je.state,lt<0?(De=0,lt=-lt):(De=1+(lt>>4),lt<48&&(lt&=15)),lt&&(lt<8||lt>15))?G:(null!==It.window&&It.wbits!==lt&&(It.window=null),It.wrap=De,It.wbits=lt,nn(Je))}function Mt(Je,lt){var De,It;return Je?(It=new ln,Je.state=It,It.window=null,0!==(De=Et(Je,lt))&&(Je.state=null),De):G}var Dn,dt,Un=!0;function He(Je){if(Un){var lt;for(Dn=new V.Buf32(512),dt=new V.Buf32(32),lt=0;lt<144;)Je.lens[lt++]=8;for(;lt<256;)Je.lens[lt++]=9;for(;lt<280;)Je.lens[lt++]=7;for(;lt<288;)Je.lens[lt++]=8;for(P(1,Je.lens,0,288,Dn,0,Je.work,{bits:9}),lt=0;lt<32;)Je.lens[lt++]=5;P(2,Je.lens,0,32,dt,0,Je.work,{bits:5}),Un=!1}Je.lencode=Dn,Je.lenbits=9,Je.distcode=dt,Je.distbits=5}R.inflateReset=nn,R.inflateReset2=Et,R.inflateResetKeep=Ft,R.inflateInit=function Tn(Je){return Mt(Je,15)},R.inflateInit2=Mt,R.inflate=function Ce(Je,lt){var De,It,qt,ge,vt,Ct,Be,Qe,Tt,dn,Jt,zt,yn,Xi,xn,$n,Wn,ti,u,ee,y,N,c,m,kn=0,C=new V.Buf8(4),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Je||!Je.state||!Je.output||!Je.input&&0!==Je.avail_in)return G;12===(De=Je.state).mode&&(De.mode=13),vt=Je.next_out,qt=Je.output,ge=Je.next_in,It=Je.input,Qe=De.hold,Tt=De.bits,dn=Ct=Je.avail_in,Jt=Be=Je.avail_out,N=0;e:for(;;)switch(De.mode){case 1:if(0===De.wrap){De.mode=13;break}for(;Tt<16;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(2&De.wrap&&35615===Qe){De.check=0,C[0]=255&Qe,C[1]=Qe>>>8&255,De.check=W(De.check,C,2,0),Qe=0,Tt=0,De.mode=2;break}if(De.flags=0,De.head&&(De.head.done=!1),!(1&De.wrap)||(((255&Qe)<<8)+(Qe>>8))%31){Je.msg="incorrect header check",De.mode=30;break}if(8!=(15&Qe)){Je.msg="unknown compression method",De.mode=30;break}if(Tt-=4,y=8+(15&(Qe>>>=4)),0===De.wbits)De.wbits=y;else if(y>De.wbits){Je.msg="invalid window size",De.mode=30;break}De.dmax=1<<y,Je.adler=De.check=1,De.mode=512&Qe?10:12,Qe=0,Tt=0;break;case 2:for(;Tt<16;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(De.flags=Qe,8!=(255&De.flags)){Je.msg="unknown compression method",De.mode=30;break}if(57344&De.flags){Je.msg="unknown header flags set",De.mode=30;break}De.head&&(De.head.text=Qe>>8&1),512&De.flags&&(C[0]=255&Qe,C[1]=Qe>>>8&255,De.check=W(De.check,C,2,0)),Qe=0,Tt=0,De.mode=3;case 3:for(;Tt<32;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}De.head&&(De.head.time=Qe),512&De.flags&&(C[0]=255&Qe,C[1]=Qe>>>8&255,C[2]=Qe>>>16&255,C[3]=Qe>>>24&255,De.check=W(De.check,C,4,0)),Qe=0,Tt=0,De.mode=4;case 4:for(;Tt<16;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}De.head&&(De.head.xflags=255&Qe,De.head.os=Qe>>8),512&De.flags&&(C[0]=255&Qe,C[1]=Qe>>>8&255,De.check=W(De.check,C,2,0)),Qe=0,Tt=0,De.mode=5;case 5:if(1024&De.flags){for(;Tt<16;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}De.length=Qe,De.head&&(De.head.extra_len=Qe),512&De.flags&&(C[0]=255&Qe,C[1]=Qe>>>8&255,De.check=W(De.check,C,2,0)),Qe=0,Tt=0}else De.head&&(De.head.extra=null);De.mode=6;case 6:if(1024&De.flags&&((zt=De.length)>Ct&&(zt=Ct),zt&&(De.head&&(y=De.head.extra_len-De.length,De.head.extra||(De.head.extra=new Array(De.head.extra_len)),V.arraySet(De.head.extra,It,ge,zt,y)),512&De.flags&&(De.check=W(De.check,It,zt,ge)),Ct-=zt,ge+=zt,De.length-=zt),De.length))break e;De.length=0,De.mode=7;case 7:if(2048&De.flags){if(0===Ct)break e;zt=0;do{y=It[ge+zt++],De.head&&y&&De.length<65536&&(De.head.name+=String.fromCharCode(y))}while(y&&zt<Ct);if(512&De.flags&&(De.check=W(De.check,It,zt,ge)),Ct-=zt,ge+=zt,y)break e}else De.head&&(De.head.name=null);De.length=0,De.mode=8;case 8:if(4096&De.flags){if(0===Ct)break e;zt=0;do{y=It[ge+zt++],De.head&&y&&De.length<65536&&(De.head.comment+=String.fromCharCode(y))}while(y&&zt<Ct);if(512&De.flags&&(De.check=W(De.check,It,zt,ge)),Ct-=zt,ge+=zt,y)break e}else De.head&&(De.head.comment=null);De.mode=9;case 9:if(512&De.flags){for(;Tt<16;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(Qe!==(65535&De.check)){Je.msg="header crc mismatch",De.mode=30;break}Qe=0,Tt=0}De.head&&(De.head.hcrc=De.flags>>9&1,De.head.done=!0),Je.adler=De.check=0,De.mode=12;break;case 10:for(;Tt<32;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}Je.adler=De.check=Bt(Qe),Qe=0,Tt=0,De.mode=11;case 11:if(0===De.havedict)return Je.next_out=vt,Je.avail_out=Be,Je.next_in=ge,Je.avail_in=Ct,De.hold=Qe,De.bits=Tt,2;Je.adler=De.check=1,De.mode=12;case 12:if(5===lt||6===lt)break e;case 13:if(De.last){Qe>>>=7&Tt,Tt-=7&Tt,De.mode=27;break}for(;Tt<3;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}switch(De.last=1&Qe,Tt-=1,3&(Qe>>>=1)){case 0:De.mode=14;break;case 1:if(He(De),De.mode=20,6===lt){Qe>>>=2,Tt-=2;break e}break;case 2:De.mode=17;break;case 3:Je.msg="invalid block type",De.mode=30}Qe>>>=2,Tt-=2;break;case 14:for(Qe>>>=7&Tt,Tt-=7&Tt;Tt<32;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if((65535&Qe)!=(Qe>>>16^65535)){Je.msg="invalid stored block lengths",De.mode=30;break}if(De.length=65535&Qe,Qe=0,Tt=0,De.mode=15,6===lt)break e;case 15:De.mode=16;case 16:if(zt=De.length){if(zt>Ct&&(zt=Ct),zt>Be&&(zt=Be),0===zt)break e;V.arraySet(qt,It,ge,zt,vt),Ct-=zt,ge+=zt,Be-=zt,vt+=zt,De.length-=zt;break}De.mode=12;break;case 17:for(;Tt<14;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(De.nlen=257+(31&Qe),Tt-=5,De.ndist=1+(31&(Qe>>>=5)),Tt-=5,De.ncode=4+(15&(Qe>>>=5)),Qe>>>=4,Tt-=4,De.nlen>286||De.ndist>30){Je.msg="too many length or distance symbols",De.mode=30;break}De.have=0,De.mode=18;case 18:for(;De.have<De.ncode;){for(;Tt<3;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}De.lens[w[De.have++]]=7&Qe,Qe>>>=3,Tt-=3}for(;De.have<19;)De.lens[w[De.have++]]=0;if(De.lencode=De.lendyn,De.lenbits=7,N=P(0,De.lens,0,19,De.lencode,0,De.work,c={bits:De.lenbits}),De.lenbits=c.bits,N){Je.msg="invalid code lengths set",De.mode=30;break}De.have=0,De.mode=19;case 19:for(;De.have<De.nlen+De.ndist;){for(;$n=(kn=De.lencode[Qe&(1<<De.lenbits)-1])>>>16&255,Wn=65535&kn,!((xn=kn>>>24)<=Tt);){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(Wn<16)Qe>>>=xn,Tt-=xn,De.lens[De.have++]=Wn;else{if(16===Wn){for(m=xn+2;Tt<m;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(Qe>>>=xn,Tt-=xn,0===De.have){Je.msg="invalid bit length repeat",De.mode=30;break}y=De.lens[De.have-1],zt=3+(3&Qe),Qe>>>=2,Tt-=2}else if(17===Wn){for(m=xn+3;Tt<m;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}Tt-=xn,y=0,zt=3+(7&(Qe>>>=xn)),Qe>>>=3,Tt-=3}else{for(m=xn+7;Tt<m;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}Tt-=xn,y=0,zt=11+(127&(Qe>>>=xn)),Qe>>>=7,Tt-=7}if(De.have+zt>De.nlen+De.ndist){Je.msg="invalid bit length repeat",De.mode=30;break}for(;zt--;)De.lens[De.have++]=y}}if(30===De.mode)break;if(0===De.lens[256]){Je.msg="invalid code -- missing end-of-block",De.mode=30;break}if(De.lenbits=9,N=P(1,De.lens,0,De.nlen,De.lencode,0,De.work,c={bits:De.lenbits}),De.lenbits=c.bits,N){Je.msg="invalid literal/lengths set",De.mode=30;break}if(De.distbits=6,De.distcode=De.distdyn,N=P(2,De.lens,De.nlen,De.ndist,De.distcode,0,De.work,c={bits:De.distbits}),De.distbits=c.bits,N){Je.msg="invalid distances set",De.mode=30;break}if(De.mode=20,6===lt)break e;case 20:De.mode=21;case 21:if(Ct>=6&&Be>=258){Je.next_out=vt,Je.avail_out=Be,Je.next_in=ge,Je.avail_in=Ct,De.hold=Qe,De.bits=Tt,A(Je,Jt),vt=Je.next_out,qt=Je.output,Be=Je.avail_out,ge=Je.next_in,It=Je.input,Ct=Je.avail_in,Qe=De.hold,Tt=De.bits,12===De.mode&&(De.back=-1);break}for(De.back=0;$n=(kn=De.lencode[Qe&(1<<De.lenbits)-1])>>>16&255,Wn=65535&kn,!((xn=kn>>>24)<=Tt);){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if($n&&0==(240&$n)){for(ti=xn,u=$n,ee=Wn;$n=(kn=De.lencode[ee+((Qe&(1<<ti+u)-1)>>ti)])>>>16&255,Wn=65535&kn,!(ti+(xn=kn>>>24)<=Tt);){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}Qe>>>=ti,Tt-=ti,De.back+=ti}if(Qe>>>=xn,Tt-=xn,De.back+=xn,De.length=Wn,0===$n){De.mode=26;break}if(32&$n){De.back=-1,De.mode=12;break}if(64&$n){Je.msg="invalid literal/length code",De.mode=30;break}De.extra=15&$n,De.mode=22;case 22:if(De.extra){for(m=De.extra;Tt<m;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}De.length+=Qe&(1<<De.extra)-1,Qe>>>=De.extra,Tt-=De.extra,De.back+=De.extra}De.was=De.length,De.mode=23;case 23:for(;$n=(kn=De.distcode[Qe&(1<<De.distbits)-1])>>>16&255,Wn=65535&kn,!((xn=kn>>>24)<=Tt);){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(0==(240&$n)){for(ti=xn,u=$n,ee=Wn;$n=(kn=De.distcode[ee+((Qe&(1<<ti+u)-1)>>ti)])>>>16&255,Wn=65535&kn,!(ti+(xn=kn>>>24)<=Tt);){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}Qe>>>=ti,Tt-=ti,De.back+=ti}if(Qe>>>=xn,Tt-=xn,De.back+=xn,64&$n){Je.msg="invalid distance code",De.mode=30;break}De.offset=Wn,De.extra=15&$n,De.mode=24;case 24:if(De.extra){for(m=De.extra;Tt<m;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}De.offset+=Qe&(1<<De.extra)-1,Qe>>>=De.extra,Tt-=De.extra,De.back+=De.extra}if(De.offset>De.dmax){Je.msg="invalid distance too far back",De.mode=30;break}De.mode=25;case 25:if(0===Be)break e;if(De.offset>(zt=Jt-Be)){if((zt=De.offset-zt)>De.whave&&De.sane){Je.msg="invalid distance too far back",De.mode=30;break}yn=zt>De.wnext?De.wsize-(zt-=De.wnext):De.wnext-zt,zt>De.length&&(zt=De.length),Xi=De.window}else Xi=qt,yn=vt-De.offset,zt=De.length;zt>Be&&(zt=Be),Be-=zt,De.length-=zt;do{qt[vt++]=Xi[yn++]}while(--zt);0===De.length&&(De.mode=21);break;case 26:if(0===Be)break e;qt[vt++]=De.length,Be--,De.mode=21;break;case 27:if(De.wrap){for(;Tt<32;){if(0===Ct)break e;Ct--,Qe|=It[ge++]<<Tt,Tt+=8}if(Je.total_out+=Jt-=Be,De.total+=Jt,Jt&&(Je.adler=De.check=De.flags?W(De.check,qt,Jt,vt-Jt):F(De.check,qt,Jt,vt-Jt)),Jt=Be,(De.flags?Qe:Bt(Qe))!==De.check){Je.msg="incorrect data check",De.mode=30;break}Qe=0,Tt=0}De.mode=28;case 28:if(De.wrap&&De.flags){for(;Tt<32;){if(0===Ct)break e;Ct--,Qe+=It[ge++]<<Tt,Tt+=8}if(Qe!==(4294967295&De.total)){Je.msg="incorrect length check",De.mode=30;break}Qe=0,Tt=0}De.mode=29;case 29:N=1;break e;case 30:N=-3;break e;case 31:return-4;default:return G}return Je.next_out=vt,Je.avail_out=Be,Je.next_in=ge,Je.avail_in=Ct,De.hold=Qe,De.bits=Tt,(De.wsize||Jt!==Je.avail_out&&De.mode<30&&(De.mode<27||4!==lt))&&function mt(Je,lt,De,It){var qt,ge=Je.state;return null===ge.window&&(ge.wsize=1<<ge.wbits,ge.wnext=0,ge.whave=0,ge.window=new V.Buf8(ge.wsize)),It>=ge.wsize?(V.arraySet(ge.window,lt,De-ge.wsize,ge.wsize,0),ge.wnext=0,ge.whave=ge.wsize):((qt=ge.wsize-ge.wnext)>It&&(qt=It),V.arraySet(ge.window,lt,De-It,qt,ge.wnext),(It-=qt)?(V.arraySet(ge.window,lt,De-It,It,0),ge.wnext=It,ge.whave=ge.wsize):(ge.wnext+=qt,ge.wnext===ge.wsize&&(ge.wnext=0),ge.whave<ge.wsize&&(ge.whave+=qt))),0}(Je,Je.output,Je.next_out,Jt-Je.avail_out)?(De.mode=31,-4):(Jt-=Je.avail_out,Je.total_in+=dn-=Je.avail_in,Je.total_out+=Jt,De.total+=Jt,De.wrap&&Jt&&(Je.adler=De.check=De.flags?W(De.check,qt,Jt,Je.next_out-Jt):F(De.check,qt,Jt,Je.next_out-Jt)),Je.data_type=De.bits+(De.last?64:0)+(12===De.mode?128:0)+(20===De.mode||15===De.mode?256:0),(0===dn&&0===Jt||4===lt)&&0===N&&(N=-5),N)},R.inflateEnd=function at(Je){if(!Je||!Je.state)return G;var lt=Je.state;return lt.window&&(lt.window=null),Je.state=null,0},R.inflateGetHeader=function St(Je,lt){var De;return Je&&Je.state&&0!=(2&(De=Je.state).wrap)?(De.head=lt,lt.done=!1,0):G},R.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(O,I,R){var V=O("../utils/common"),F=15,E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],H=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],B=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(he,de,G,U,te,ne,oe,fe){var Rt,Ee,Le,ot,yt,et,Oe,Fe,Ge,Y=fe.bits,le=0,X=0,$=0,we=0,ue=0,ve=0,Ae=0,je=0,Ye=0,ft=0,pt=null,Ve=0,We=new V.Buf16(16),bt=new V.Buf16(16),xt=null,Me=0;for(le=0;le<=F;le++)We[le]=0;for(X=0;X<U;X++)We[de[G+X]]++;for(ue=Y,we=F;we>=1&&0===We[we];we--);if(ue>we&&(ue=we),0===we)return te[ne++]=20971520,te[ne++]=20971520,fe.bits=1,0;for($=1;$<we&&0===We[$];$++);for(ue<$&&(ue=$),je=1,le=1;le<=F;le++)if(je<<=1,(je-=We[le])<0)return-1;if(je>0&&(0===he||1!==we))return-1;for(bt[1]=0,le=1;le<F;le++)bt[le+1]=bt[le]+We[le];for(X=0;X<U;X++)0!==de[G+X]&&(oe[bt[de[G+X]]++]=X);if(0===he?(pt=xt=oe,et=19):1===he?(pt=E,Ve-=257,xt=x,Me-=257,et=256):(pt=H,xt=B,et=-1),ft=0,X=0,le=$,yt=ne,ve=ue,Ae=0,Le=-1,ot=(Ye=1<<ue)-1,1===he&&Ye>852||2===he&&Ye>592)return 1;for(;;){Oe=le-Ae,oe[X]<et?(Fe=0,Ge=oe[X]):oe[X]>et?(Fe=xt[Me+oe[X]],Ge=pt[Ve+oe[X]]):(Fe=96,Ge=0),Rt=1<<le-Ae,$=Ee=1<<ve;do{te[yt+(ft>>Ae)+(Ee-=Rt)]=Oe<<24|Fe<<16|Ge|0}while(0!==Ee);for(Rt=1<<le-1;ft&Rt;)Rt>>=1;if(0!==Rt?(ft&=Rt-1,ft+=Rt):ft=0,X++,0==--We[le]){if(le===we)break;le=de[G+oe[X]]}if(le>ue&&(ft&ot)!==Le){for(0===Ae&&(Ae=ue),yt+=$,je=1<<(ve=le-Ae);ve+Ae<we&&!((je-=We[ve+Ae])<=0);)ve++,je<<=1;if(Ye+=1<<ve,1===he&&Ye>852||2===he&&Ye>592)return 1;te[Le=ft&ot]=ue<<24|ve<<16|yt-ne|0}}return 0!==ft&&(te[yt+ft]=le-Ae<<24|64<<16|0),fe.bits=ue,0}},{"../utils/common":27}],37:[function(O,I,R){I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(O,I,R){var V=O("../utils/common");function v(Ce){for(var at=Ce.length;--at>=0;)Ce[at]=0}var G=30,we=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ue=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ye=new Array(576);v(Ye);var ft=new Array(60);v(ft);var Rt=new Array(512);v(Rt);var Ee=new Array(256);v(Ee);var Le=new Array(29);v(Le);var ot=new Array(G);v(ot);var pt,Ve,et,yt=function(Ce,at,St,Je,lt){this.static_tree=Ce,this.extra_bits=at,this.extra_base=St,this.elems=Je,this.max_length=lt,this.has_stree=Ce&&Ce.length},We=function(Ce,at){this.dyn_tree=Ce,this.max_code=0,this.stat_desc=at};function bt(Ce){return Ce<256?Rt[Ce]:Rt[256+(Ce>>>7)]}function xt(Ce,at){Ce.pending_buf[Ce.pending++]=255&at,Ce.pending_buf[Ce.pending++]=at>>>8&255}function Me(Ce,at,St){Ce.bi_valid>16-St?(Ce.bi_buf|=at<<Ce.bi_valid&65535,xt(Ce,Ce.bi_buf),Ce.bi_buf=at>>16-Ce.bi_valid,Ce.bi_valid+=St-16):(Ce.bi_buf|=at<<Ce.bi_valid&65535,Ce.bi_valid+=St)}function Oe(Ce,at,St){Me(Ce,St[2*at],St[2*at+1])}function Fe(Ce,at){var St=0;do{St|=1&Ce,Ce>>>=1,St<<=1}while(--at>0);return St>>>1}function Ut(Ce,at,St){var De,It,Je=new Array(16),lt=0;for(De=1;De<=15;De++)Je[De]=lt=lt+St[De-1]<<1;for(It=0;It<=at;It++){var qt=Ce[2*It+1];0!==qt&&(Ce[2*It]=Fe(Je[qt]++,qt))}}function st(Ce){var at;for(at=0;at<286;at++)Ce.dyn_ltree[2*at]=0;for(at=0;at<G;at++)Ce.dyn_dtree[2*at]=0;for(at=0;at<19;at++)Ce.bl_tree[2*at]=0;Ce.dyn_ltree[512]=1,Ce.opt_len=Ce.static_len=0,Ce.last_lit=Ce.matches=0}function Vt(Ce){Ce.bi_valid>8?xt(Ce,Ce.bi_buf):Ce.bi_valid>0&&(Ce.pending_buf[Ce.pending++]=Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0}function Xt(Ce,at,St,Je){var lt=2*at,De=2*St;return Ce[lt]<Ce[De]||Ce[lt]===Ce[De]&&Je[at]<=Je[St]}function Wt(Ce,at,St){for(var Je=Ce.heap[St],lt=St<<1;lt<=Ce.heap_len&&(lt<Ce.heap_len&&Xt(at,Ce.heap[lt+1],Ce.heap[lt],Ce.depth)&&lt++,!Xt(at,Je,Ce.heap[lt],Ce.depth));)Ce.heap[St]=Ce.heap[lt],St=lt,lt<<=1;Ce.heap[St]=Je}function Nt(Ce,at,St){var Je,lt,It,qt,De=0;if(0!==Ce.last_lit)do{Je=Ce.pending_buf[Ce.d_buf+2*De]<<8|Ce.pending_buf[Ce.d_buf+2*De+1],lt=Ce.pending_buf[Ce.l_buf+De],De++,0===Je?Oe(Ce,lt,at):(Oe(Ce,(It=Ee[lt])+256+1,at),0!==(qt=we[It])&&Me(Ce,lt-=Le[It],qt),Oe(Ce,It=bt(--Je),St),0!==(qt=ue[It])&&Me(Ce,Je-=ot[It],qt))}while(De<Ce.last_lit);Oe(Ce,256,at)}function Bt(Ce,at){var It,qt,vt,St=at.dyn_tree,Je=at.stat_desc.static_tree,lt=at.stat_desc.has_stree,De=at.stat_desc.elems,ge=-1;for(Ce.heap_len=0,Ce.heap_max=573,It=0;It<De;It++)0!==St[2*It]?(Ce.heap[++Ce.heap_len]=ge=It,Ce.depth[It]=0):St[2*It+1]=0;for(;Ce.heap_len<2;)St[2*(vt=Ce.heap[++Ce.heap_len]=ge<2?++ge:0)]=1,Ce.depth[vt]=0,Ce.opt_len--,lt&&(Ce.static_len-=Je[2*vt+1]);for(at.max_code=ge,It=Ce.heap_len>>1;It>=1;It--)Wt(Ce,St,It);vt=De;do{It=Ce.heap[1],Ce.heap[1]=Ce.heap[Ce.heap_len--],Wt(Ce,St,1),qt=Ce.heap[1],Ce.heap[--Ce.heap_max]=It,Ce.heap[--Ce.heap_max]=qt,St[2*vt]=St[2*It]+St[2*qt],Ce.depth[vt]=(Ce.depth[It]>=Ce.depth[qt]?Ce.depth[It]:Ce.depth[qt])+1,St[2*It+1]=St[2*qt+1]=vt,Ce.heap[1]=vt++,Wt(Ce,St,1)}while(Ce.heap_len>=2);Ce.heap[--Ce.heap_max]=Ce.heap[1],function kt(Ce,at){var vt,Ct,Be,Qe,Tt,dn,St=at.dyn_tree,Je=at.max_code,lt=at.stat_desc.static_tree,De=at.stat_desc.has_stree,It=at.stat_desc.extra_bits,qt=at.stat_desc.extra_base,ge=at.stat_desc.max_length,Jt=0;for(Qe=0;Qe<=15;Qe++)Ce.bl_count[Qe]=0;for(St[2*Ce.heap[Ce.heap_max]+1]=0,vt=Ce.heap_max+1;vt<573;vt++)(Qe=St[2*St[2*(Ct=Ce.heap[vt])+1]+1]+1)>ge&&(Qe=ge,Jt++),St[2*Ct+1]=Qe,!(Ct>Je)&&(Ce.bl_count[Qe]++,Tt=0,Ct>=qt&&(Tt=It[Ct-qt]),Ce.opt_len+=(dn=St[2*Ct])*(Qe+Tt),De&&(Ce.static_len+=dn*(lt[2*Ct+1]+Tt)));if(0!==Jt){do{for(Qe=ge-1;0===Ce.bl_count[Qe];)Qe--;Ce.bl_count[Qe]--,Ce.bl_count[Qe+1]+=2,Ce.bl_count[ge]--,Jt-=2}while(Jt>0);for(Qe=ge;0!==Qe;Qe--)for(Ct=Ce.bl_count[Qe];0!==Ct;)!((Be=Ce.heap[--vt])>Je)&&(St[2*Be+1]!==Qe&&(Ce.opt_len+=(Qe-St[2*Be+1])*St[2*Be],St[2*Be+1]=Qe),Ct--)}}(Ce,at),Ut(St,ge,Ce.bl_count)}function ln(Ce,at,St){var Je,De,lt=-1,It=at[1],qt=0,ge=7,vt=4;for(0===It&&(ge=138,vt=3),at[2*(St+1)+1]=65535,Je=0;Je<=St;Je++)De=It,It=at[2*(Je+1)+1],!(++qt<ge&&De===It)&&(qt<vt?Ce.bl_tree[2*De]+=qt:0!==De?(De!==lt&&Ce.bl_tree[2*De]++,Ce.bl_tree[32]++):qt<=10?Ce.bl_tree[34]++:Ce.bl_tree[36]++,qt=0,lt=De,0===It?(ge=138,vt=3):De===It?(ge=6,vt=3):(ge=7,vt=4))}function Ft(Ce,at,St){var Je,De,lt=-1,It=at[1],qt=0,ge=7,vt=4;for(0===It&&(ge=138,vt=3),Je=0;Je<=St;Je++)if(De=It,It=at[2*(Je+1)+1],!(++qt<ge&&De===It)){if(qt<vt)do{Oe(Ce,De,Ce.bl_tree)}while(0!=--qt);else 0!==De?(De!==lt&&(Oe(Ce,De,Ce.bl_tree),qt--),Oe(Ce,16,Ce.bl_tree),Me(Ce,qt-3,2)):qt<=10?(Oe(Ce,17,Ce.bl_tree),Me(Ce,qt-3,3)):(Oe(Ce,18,Ce.bl_tree),Me(Ce,qt-11,7));qt=0,lt=De,0===It?(ge=138,vt=3):De===It?(ge=6,vt=3):(ge=7,vt=4)}}var Tn=!1;function Dn(Ce,at,St,Je){Me(Ce,0+(Je?1:0),3),function Qt(Ce,at,St,Je){Vt(Ce),Je&&(xt(Ce,St),xt(Ce,~St)),V.arraySet(Ce.pending_buf,Ce.window,at,St,Ce.pending),Ce.pending+=St}(Ce,at,St,!0)}R._tr_init=function Un(Ce){Tn||(function Lt(){var Ce,at,St,Je,lt,De=new Array(16);for(St=0,Je=0;Je<28;Je++)for(Le[Je]=St,Ce=0;Ce<1<<we[Je];Ce++)Ee[St++]=Je;for(Ee[St-1]=Je,lt=0,Je=0;Je<16;Je++)for(ot[Je]=lt,Ce=0;Ce<1<<ue[Je];Ce++)Rt[lt++]=Je;for(lt>>=7;Je<G;Je++)for(ot[Je]=lt<<7,Ce=0;Ce<1<<ue[Je]-7;Ce++)Rt[256+lt++]=Je;for(at=0;at<=15;at++)De[at]=0;for(Ce=0;Ce<=143;)Ye[2*Ce+1]=8,Ce++,De[8]++;for(;Ce<=255;)Ye[2*Ce+1]=9,Ce++,De[9]++;for(;Ce<=279;)Ye[2*Ce+1]=7,Ce++,De[7]++;for(;Ce<=287;)Ye[2*Ce+1]=8,Ce++,De[8]++;for(Ut(Ye,287,De),Ce=0;Ce<G;Ce++)ft[2*Ce+1]=5,ft[2*Ce]=Fe(Ce,5);pt=new yt(Ye,we,257,286,15),Ve=new yt(ft,ue,0,G,15),et=new yt(new Array(0),ve,0,19,7)}(),Tn=!0),Ce.l_desc=new We(Ce.dyn_ltree,pt),Ce.d_desc=new We(Ce.dyn_dtree,Ve),Ce.bl_desc=new We(Ce.bl_tree,et),Ce.bi_buf=0,Ce.bi_valid=0,st(Ce)},R._tr_stored_block=Dn,R._tr_flush_block=function He(Ce,at,St,Je){var lt,De,It=0;Ce.level>0?(2===Ce.strm.data_type&&(Ce.strm.data_type=function Mt(Ce){var St,at=4093624447;for(St=0;St<=31;St++,at>>>=1)if(1&at&&0!==Ce.dyn_ltree[2*St])return 0;if(0!==Ce.dyn_ltree[18]||0!==Ce.dyn_ltree[20]||0!==Ce.dyn_ltree[26])return 1;for(St=32;St<256;St++)if(0!==Ce.dyn_ltree[2*St])return 1;return 0}(Ce)),Bt(Ce,Ce.l_desc),Bt(Ce,Ce.d_desc),It=function nn(Ce){var at;for(ln(Ce,Ce.dyn_ltree,Ce.l_desc.max_code),ln(Ce,Ce.dyn_dtree,Ce.d_desc.max_code),Bt(Ce,Ce.bl_desc),at=18;at>=3&&0===Ce.bl_tree[2*Ae[at]+1];at--);return Ce.opt_len+=3*(at+1)+5+5+4,at}(Ce),(De=Ce.static_len+3+7>>>3)<=(lt=Ce.opt_len+3+7>>>3)&&(lt=De)):lt=De=St+5,St+4<=lt&&-1!==at?Dn(Ce,at,St,Je):4===Ce.strategy||De===lt?(Me(Ce,2+(Je?1:0),3),Nt(Ce,Ye,ft)):(Me(Ce,4+(Je?1:0),3),function Et(Ce,at,St,Je){var lt;for(Me(Ce,at-257,5),Me(Ce,St-1,5),Me(Ce,Je-4,4),lt=0;lt<Je;lt++)Me(Ce,Ce.bl_tree[2*Ae[lt]+1],3);Ft(Ce,Ce.dyn_ltree,at-1),Ft(Ce,Ce.dyn_dtree,St-1)}(Ce,Ce.l_desc.max_code+1,Ce.d_desc.max_code+1,It+1),Nt(Ce,Ce.dyn_ltree,Ce.dyn_dtree)),st(Ce),Je&&Vt(Ce)},R._tr_tally=function mt(Ce,at,St){return Ce.pending_buf[Ce.d_buf+2*Ce.last_lit]=at>>>8&255,Ce.pending_buf[Ce.d_buf+2*Ce.last_lit+1]=255&at,Ce.pending_buf[Ce.l_buf+Ce.last_lit]=255&St,Ce.last_lit++,0===at?Ce.dyn_ltree[2*St]++:(Ce.matches++,at--,Ce.dyn_ltree[2*(Ee[St]+256+1)]++,Ce.dyn_dtree[2*bt(at)]++),Ce.last_lit===Ce.lit_bufsize-1},R._tr_align=function dt(Ce){Me(Ce,2,3),Oe(Ce,256,Ye),function Ge(Ce){16===Ce.bi_valid?(xt(Ce,Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0):Ce.bi_valid>=8&&(Ce.pending_buf[Ce.pending++]=255&Ce.bi_buf,Ce.bi_buf>>=8,Ce.bi_valid-=8)}(Ce)}},{"../utils/common":27}],39:[function(O,I,R){I.exports=function V(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[9])(9)}();